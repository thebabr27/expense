"use strict";(self.webpackChunkgame=self.webpackChunkgame||[]).push([[792],{902:()=>{function ge(e){return"function"==typeof e}function oa(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const xl=oa(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function bo(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Ot{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(ge(r))try{r()}catch(o){t=o instanceof xl?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{GE(o)}catch(s){t=t??[],s instanceof xl?t=[...t,...s.errors]:t.push(s)}}if(t)throw new xl(t)}}add(t){var n;if(t&&t!==this)if(this.closed)GE(t);else{if(t instanceof Ot){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&bo(n,t)}remove(t){const{_finalizers:n}=this;n&&bo(n,t),t instanceof Ot&&t._removeParent(this)}}Ot.EMPTY=(()=>{const e=new Ot;return e.closed=!0,e})();const zE=Ot.EMPTY;function WE(e){return e instanceof Ot||e&&"closed"in e&&ge(e.remove)&&ge(e.add)&&ge(e.unsubscribe)}function GE(e){ge(e)?e():e.unsubscribe()}const Di={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Pl={setTimeout(e,t,...n){const{delegate:r}=Pl;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Pl;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function qE(e){Pl.setTimeout(()=>{const{onUnhandledError:t}=Di;if(!t)throw e;t(e)})}function Vf(){}const SL=Uf("C",void 0,void 0);function Uf(e,t,n){return{kind:e,value:t,error:n}}let Ti=null;function Ol(e){if(Di.useDeprecatedSynchronousErrorHandling){const t=!Ti;if(t&&(Ti={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Ti;if(Ti=null,n)throw r}}else e()}class jf extends Ot{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,WE(t)&&t.add(this)):this.destination=PL}static create(t,n,r){return new sa(t,n,r)}next(t){this.isStopped?$f(function ML(e){return Uf("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?$f(function AL(e){return Uf("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?$f(SL,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const RL=Function.prototype.bind;function Bf(e,t){return RL.call(e,t)}class NL{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Fl(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Fl(r)}else Fl(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Fl(n)}}}class sa extends jf{constructor(t,n,r){let i;if(super(),ge(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&Di.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Bf(t.next,o),error:t.error&&Bf(t.error,o),complete:t.complete&&Bf(t.complete,o)}):i=t}this.destination=new NL(i)}}function Fl(e){Di.useDeprecatedSynchronousErrorHandling?function kL(e){Di.useDeprecatedSynchronousErrorHandling&&Ti&&(Ti.errorThrown=!0,Ti.error=e)}(e):qE(e)}function $f(e,t){const{onStoppedNotification:n}=Di;n&&Pl.setTimeout(()=>n(e,t))}const PL={closed:!0,next:Vf,error:function xL(e){throw e},complete:Vf},Hf="function"==typeof Symbol&&Symbol.observable||"@@observable";function Hr(e){return e}function KE(e){return 0===e.length?Hr:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let Me=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function LL(e){return e&&e instanceof jf||function FL(e){return e&&ge(e.next)&&ge(e.error)&&ge(e.complete)}(e)&&WE(e)}(n)?n:new sa(n,r,i);return Ol(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=YE(r))((i,o)=>{const s=new sa({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Hf](){return this}pipe(...n){return KE(n)(this)}toPromise(n){return new(n=YE(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function YE(e){var t;return null!==(t=e??Di.Promise)&&void 0!==t?t:Promise}const VL=oa(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yt=(()=>{class e extends Me{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new QE(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new VL}next(n){Ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?zE:(this.currentObservers=null,o.push(n),new Ot(()=>{this.currentObservers=null,bo(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Me;return n.source=this,n}}return e.create=(t,n)=>new QE(t,n),e})();class QE extends Yt{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:zE}}function XE(e){return ge(e?.lift)}function ze(e){return t=>{if(XE(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function $e(e,t,n,r,i){return new UL(e,t,n,r,i)}class UL extends jf{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function me(e,t){return ze((n,r)=>{let i=0;n.subscribe($e(r,o=>{r.next(e.call(t,o,i++))}))})}function Ll(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function zr(e){return this instanceof zr?(this.v=e,this):new zr(e)}function tI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function qf(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}(a,c,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const nI=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function rI(e){return ge(e?.then)}function iI(e){return ge(e[Hf])}function oI(e){return Symbol.asyncIterator&&ge(e?.[Symbol.asyncIterator])}function sI(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const aI=function dV(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function cI(e){return ge(e?.[aI])}function lI(e){return function eI(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(f){return function(p){return Promise.resolve(p).then(f,d)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(y,v){o.push([f,g,y,v])>1||c(f,g)})},p&&(i[f]=p(i[f])))}function c(f,p){try{!function l(f){f.value instanceof zr?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}(r[f](p))}catch(g){h(o[0][3],g)}}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield zr(n.read());if(i)return yield zr(void 0);yield yield zr(r)}}finally{n.releaseLock()}})}function uI(e){return ge(e?.getReader)}function Qt(e){if(e instanceof Me)return e;if(null!=e){if(iI(e))return function hV(e){return new Me(t=>{const n=e[Hf]();if(ge(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(nI(e))return function fV(e){return new Me(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(rI(e))return function pV(e){return new Me(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,qE)})}(e);if(oI(e))return dI(e);if(cI(e))return function gV(e){return new Me(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(uI(e))return function mV(e){return dI(lI(e))}(e)}throw sI(e)}function dI(e){return new Me(t=>{(function _V(e,t){var n,r,i,o;return function ZE(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=tI(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function ur(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function rt(e,t,n=1/0){return ge(t)?rt((r,i)=>me((o,s)=>t(r,o,i,s))(Qt(e(r,i))),n):("number"==typeof t&&(n=t),ze((r,i)=>function yV(e,t,n,r,i,o,s,a){const c=[];let l=0,u=0,d=!1;const h=()=>{d&&!c.length&&!l&&t.complete()},f=g=>l<r?p(g):c.push(g),p=g=>{o&&t.next(g),l++;let y=!1;Qt(n(g,u++)).subscribe($e(t,v=>{i?.(v),o?f(v):t.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(l--;c.length&&l<r;){const v=c.shift();s?ur(t,s,()=>p(v)):p(v)}h()}catch(v){t.error(v)}}))};return e.subscribe($e(t,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,e,n)))}function Eo(e=1/0){return rt(Hr,e)}const Vn=new Me(e=>e.complete());function Yf(e){return e[e.length-1]}function hI(e){return ge(Yf(e))?e.pop():void 0}function aa(e){return function CV(e){return e&&ge(e.schedule)}(Yf(e))?e.pop():void 0}function Vl(e,t=0){return ze((n,r)=>{n.subscribe($e(r,i=>ur(r,e,()=>r.next(i),t),()=>ur(r,e,()=>r.complete(),t),i=>ur(r,e,()=>r.error(i),t)))})}function Ul(e,t=0){return ze((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function fI(e,t){if(!e)throw new Error("Iterable cannot be null");return new Me(n=>{ur(n,t,()=>{const r=e[Symbol.asyncIterator]();ur(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Xe(e,t){return t?function SV(e,t){if(null!=e){if(iI(e))return function bV(e,t){return Qt(e).pipe(Ul(t),Vl(t))}(e,t);if(nI(e))return function IV(e,t){return new Me(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(rI(e))return function EV(e,t){return Qt(e).pipe(Ul(t),Vl(t))}(e,t);if(oI(e))return fI(e,t);if(cI(e))return function DV(e,t){return new Me(n=>{let r;return ur(n,t,()=>{r=e[aI](),ur(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}(e,t);if(uI(e))return function TV(e,t){return fI(lI(e),t)}(e,t)}throw sI(e)}(e,t):Qt(e)}class Xt extends Yt{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function H(...e){return Xe(e,aa(e))}function pI(e={}){const{connector:t=(()=>new Yt),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,c,l=0,u=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},p=()=>{const g=s;f(),g?.unsubscribe()};return ze((g,y)=>{l++,!d&&!u&&h();const v=c=c??t();y.add(()=>{l--,0===l&&!d&&!u&&(a=Qf(p,i))}),v.subscribe(y),!s&&l>0&&(s=new sa({next:_=>v.next(_),error:_=>{d=!0,h(),a=Qf(f,n,_),v.error(_)},complete:()=>{u=!0,h(),a=Qf(f,r),v.complete()}}),Qt(g).subscribe(s))})(o)}}function Qf(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new sa({next:()=>{r.unsubscribe(),e()}});return Qt(t(...n)).subscribe(r)}function Un(e,t){return ze((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe($e(r,c=>{i?.unsubscribe();let l=0;const u=o++;Qt(e(c,u)).subscribe(i=$e(r,d=>r.next(t?t(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function kV(e,t){return e===t}function he(e){for(let t in e)if(e[t]===he)return t;throw Error("Could not find renamed property on target object.")}function jl(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function We(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(We).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Xf(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const RV=he({__forward_ref__:he});function we(e){return e.__forward_ref__=we,e.toString=function(){return We(this())},e}function B(e){return Zf(e)?e():e}function Zf(e){return"function"==typeof e&&e.hasOwnProperty(RV)&&e.__forward_ref__===we}function Jf(e){return e&&!!e.\u0275providers}const gI="https://g.co/ng/security#xss";class b extends Error{constructor(t,n){super(function Bl(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function z(e){return"string"==typeof e?e:null==e?"":String(e)}function ep(e,t){throw new b(-201,!1)}function ln(e,t){null==e&&function U(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function P(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ct(e){return{providers:e.providers||[],imports:e.imports||[]}}function $l(e){return mI(e,zl)||mI(e,_I)}function mI(e,t){return e.hasOwnProperty(t)?e[t]:null}function Hl(e){return e&&(e.hasOwnProperty(tp)||e.hasOwnProperty(UV))?e[tp]:null}const zl=he({\u0275prov:he}),tp=he({\u0275inj:he}),_I=he({ngInjectableDef:he}),UV=he({ngInjectorDef:he});var ee=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(ee||{});let np;function Ft(e){const t=np;return np=e,t}function vI(e,t,n){const r=$l(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ee.Optional?null:void 0!==t?t:void ep(We(e))}const be=globalThis;class A{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ca={},ap="__NG_DI_FLAG__",Wl="ngTempTokenPath",$V=/\n/gm,wI="__source";let Io;function Wr(e){const t=Io;return Io=e,t}function WV(e,t=ee.Default){if(void 0===Io)throw new b(-203,!1);return null===Io?vI(e,void 0,t):Io.get(e,t&ee.Optional?null:void 0,t)}function x(e,t=ee.Default){return(function yI(){return np}()||WV)(B(e),t)}function N(e,t=ee.Default){return x(e,Gl(t))}function Gl(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function cp(e){const t=[];for(let n=0;n<e.length;n++){const r=B(e[n]);if(Array.isArray(r)){if(0===r.length)throw new b(900,!1);let i,o=ee.Default;for(let s=0;s<r.length;s++){const a=r[s],c=GV(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}t.push(x(i,o))}else t.push(x(r))}return t}function la(e,t){return e[ap]=t,e.prototype[ap]=t,e}function GV(e){return e[ap]}function dr(e){return{toString:e}.toString()}var ql=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(ql||{}),In=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(In||{});const jn={},oe=[],Kl=he({\u0275cmp:he}),lp=he({\u0275dir:he}),up=he({\u0275pipe:he}),EI=he({\u0275mod:he}),hr=he({\u0275fac:he}),ua=he({__NG_ELEMENT_ID__:he}),II=he({__NG_ENV_ID__:he});function DI(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function dp(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];SI(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function TI(e){return 3===e||4===e||6===e}function SI(e){return 64===e.charCodeAt(0)}function da(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||AI(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function AI(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const MI="ng-template";function YV(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==DI(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function kI(e){return 4===e.type&&e.value!==MI}function QV(e,t,n){return t===(4!==e.type||n?e.value:MI)}function XV(e,t,n){let r=4;const i=e.attrs||[],o=function e2(e){for(let t=0;t<e.length;t++)if(TI(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!QV(e,c,n)||""===c&&1===t.length){if(Dn(r))return!1;s=!0}}else{const l=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!YV(e.attrs,l,n)){if(Dn(r))return!1;s=!0}continue}const d=ZV(8&r?"class":c,i,kI(e),n);if(-1===d){if(Dn(r))return!1;s=!0;continue}if(""!==l){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==DI(f,l,0)||2&r&&l!==h){if(Dn(r))return!1;s=!0}}}}else{if(!s&&!Dn(r)&&!Dn(c))return!1;if(s&&Dn(c))continue;s=!1,r=c|1&r}}return Dn(r)||s}function Dn(e){return 0==(1&e)}function ZV(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function t2(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function RI(e,t,n=!1){for(let r=0;r<t.length;r++)if(XV(e,t[r],n))return!0;return!1}function NI(e,t){return e?":not("+t.trim()+")":t}function r2(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!Dn(s)&&(t+=NI(o,i),i=""),r=s,o=o||!Dn(r);n++}return""!==i&&(t+=NI(o,i)),t}function fr(e){return dr(()=>{const t=PI(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ql.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||In.Emulated,styles:e.styles||oe,_:null,schemas:e.schemas||null,tView:null,id:""};OI(n);const r=e.dependencies;return n.directiveDefs=Yl(r,!1),n.pipeDefs=Yl(r,!0),n.id=function d2(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function a2(e){return re(e)||it(e)}function c2(e){return null!==e}function Lt(e){return dr(()=>({type:e.type,bootstrap:e.bootstrap||oe,declarations:e.declarations||oe,imports:e.imports||oe,exports:e.exports||oe,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function xI(e,t){if(null==e)return jn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function $(e){return dr(()=>{const t=PI(e);return OI(t),t})}function re(e){return e[Kl]||null}function it(e){return e[lp]||null}function wt(e){return e[up]||null}function Jt(e,t){const n=e[EI]||null;if(!n&&!0===t)throw new Error(`Type ${We(e)} does not have '\u0275mod' property.`);return n}function PI(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||jn,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||oe,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xI(e.inputs,t),outputs:xI(e.outputs)}}function OI(e){e.features?.forEach(t=>t(e))}function Yl(e,t){if(!e)return null;const n=t?wt:a2;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(c2)}const Oe=0,M=1,q=2,ke=3,Tn=4,ha=5,ht=6,To=7,Ue=8,Gr=9,So=10,W=11,fa=12,FI=13,Ao=14,je=15,pa=16,Mo=17,Bn=18,ga=19,LI=20,qr=21,pr=22,ma=23,_a=24,te=25,hp=1,VI=2,$n=7,ko=9,ot=11;function Ut(e){return Array.isArray(e)&&"object"==typeof e[hp]}function bt(e){return Array.isArray(e)&&!0===e[hp]}function fp(e){return 0!=(4&e.flags)}function Ai(e){return e.componentOffset>-1}function Xl(e){return 1==(1&e.flags)}function Sn(e){return!!e.template}function pp(e){return 0!=(512&e[q])}function Mi(e,t){return e.hasOwnProperty(hr)?e[hr]:null}let st=null,Zl=!1;function un(e){const t=st;return st=e,t}const BI={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function HI(e){if(!va(e)||e.dirty){if(!e.producerMustRecompute(e)&&!GI(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function WI(e){e.dirty=!0,function zI(e){if(void 0===e.liveConsumerNode)return;const t=Zl;Zl=!0;try{for(const n of e.liveConsumerNode)n.dirty||WI(n)}finally{Zl=t}}(e),e.consumerMarkedDirty?.(e)}function mp(e){return e&&(e.nextProducerIndex=0),un(e)}function _p(e,t){if(un(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(va(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Jl(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function GI(e){Ro(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(HI(n),r!==n.version))return!0}return!1}function qI(e){if(Ro(e),va(e))for(let t=0;t<e.producerNode.length;t++)Jl(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Jl(e,t){if(function YI(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Ro(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Jl(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ro(i),i.producerIndexOfThis[r]=t}}function va(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ro(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let QI=null;const eD=()=>{},I2=(()=>({...BI,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:eD}))();class D2{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function dn(){return tD}function tD(e){return e.type.prototype.ngOnChanges&&(e.setInput=S2),T2}function T2(){const e=rD(this),t=e?.current;if(t){const n=e.previous;if(n===jn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function S2(e,t,n,r){const i=this.declaredInputs[n],o=rD(e)||function A2(e,t){return e[nD]=t}(e,{previous:jn,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new D2(c&&c.currentValue,t,a===jn),e[r]=t}dn.ngInherit=!0;const nD="__ngSimpleChanges__";function rD(e){return e[nD]||null}const Hn=function(e,t,n){};function Ee(e){for(;Array.isArray(e);)e=e[Oe];return e}function eu(e,t){return Ee(t[e])}function jt(e,t){return Ee(t[e.index])}function sD(e,t){return e.data[t]}function en(e,t){const n=t[e];return Ut(n)?n:n[Oe]}function Yr(e,t){return null==t?null:e[t]}function aD(e){e[Mo]=0}function P2(e){1024&e[q]||(e[q]|=1024,lD(e,1))}function cD(e){1024&e[q]&&(e[q]&=-1025,lD(e,-1))}function lD(e,t){let n=e[ke];if(null===n)return;n[ha]+=t;let r=n;for(n=n[ke];null!==n&&(1===t&&1===r[ha]||-1===t&&0===r[ha]);)n[ha]+=t,r=n,n=n[ke]}const j={lFrame:CD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function hD(){return j.bindingsEnabled}function C(){return j.lFrame.lView}function ie(){return j.lFrame.tView}function hn(e){return j.lFrame.contextLView=e,e[Ue]}function fn(e){return j.lFrame.contextLView=null,e}function at(){let e=fD();for(;null!==e&&64===e.type;)e=e.parent;return e}function fD(){return j.lFrame.currentTNode}function zn(e,t){const n=j.lFrame;n.currentTNode=e,n.isParent=t}function bp(){return j.lFrame.isParent}function Ep(){j.lFrame.isParent=!1}function Et(){const e=j.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Po(){return j.lFrame.bindingIndex++}function mr(e){const t=j.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function G2(e,t){const n=j.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ip(t)}function Ip(e){j.lFrame.currentDirectiveIndex=e}function _D(){return j.lFrame.currentQueryIndex}function Tp(e){j.lFrame.currentQueryIndex=e}function K2(e){const t=e[M];return 2===t.type?t.declTNode:1===t.type?e[ht]:null}function yD(e,t,n){if(n&ee.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&ee.Host||(i=K2(o),null===i||(o=o[Ao],10&i.type))););if(null===i)return!1;t=i,e=o}const r=j.lFrame=vD();return r.currentTNode=t,r.lView=e,!0}function Sp(e){const t=vD(),n=e[M];j.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function vD(){const e=j.lFrame,t=null===e?null:e.child;return null===t?CD(e):t}function CD(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function wD(){const e=j.lFrame;return j.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const bD=wD;function Ap(){const e=wD();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function It(){return j.lFrame.selectedIndex}function ki(e){j.lFrame.selectedIndex=e}function xe(){const e=j.lFrame;return sD(e.tView,e.selectedIndex)}let ID=!0;function tu(){return ID}function Qr(e){ID=e}function nu(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),l&&((e.viewHooks??=[]).push(n,l),(e.viewCheckHooks??=[]).push(n,l)),null!=u&&(e.destroyHooks??=[]).push(n,u)}}function ru(e,t,n){DD(e,t,3,n)}function iu(e,t,n,r){(3&e[q])===n&&DD(e,t,n,r)}function Mp(e,t){let n=e[q];(3&n)===t&&(n&=8191,n+=1,e[q]=n)}function DD(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let c=void 0!==r?65535&e[Mo]:0;c<s;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=r&&a>=r)break}else t[c]<0&&(e[Mo]+=65536),(a<o||-1==o)&&(nU(e,n,t,c),e[Mo]=(4294901760&e[Mo])+c+2),c++}function TD(e,t){Hn(4,e,t);const n=un(null);try{t.call(e)}finally{un(n),Hn(5,e,t)}}function nU(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[q]>>13<e[Mo]>>16&&(3&e[q])===t&&(e[q]+=8192,TD(a,o)):TD(a,o)}const Oo=-1;class wa{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Rp(e){return e!==Oo}function ba(e){return 32767&e}function Ea(e,t){let n=function sU(e){return e>>16}(e),r=t;for(;n>0;)r=r[Ao],n--;return r}let Np=!0;function ou(e){const t=Np;return Np=e,t}const SD=255,AD=5;let aU=0;const Wn={};function su(e,t){const n=MD(e,t);if(-1!==n)return n;const r=t[M];r.firstCreatePass&&(e.injectorIndex=t.length,xp(r.data,e),xp(t,null),xp(r.blueprint,null));const i=au(e,t),o=e.injectorIndex;if(Rp(i)){const s=ba(i),a=Ea(i,t),c=a[M].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=i,o}function xp(e,t){e.push(0,0,0,0,0,0,0,0,t)}function MD(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function au(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=FD(i),null===r)return Oo;if(n++,i=i[Ao],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Oo}function Pp(e,t,n){!function cU(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ua)&&(r=n[ua]),null==r&&(r=n[ua]=aU++);const i=r&SD;t.data[e+(i>>AD)]|=1<<i}(e,t,n)}function kD(e,t,n){if(n&ee.Optional||void 0!==e)return e;ep()}function RD(e,t,n,r){if(n&ee.Optional&&void 0===r&&(r=null),!(n&(ee.Self|ee.Host))){const i=e[Gr],o=Ft(void 0);try{return i?i.get(t,r,n&ee.Optional):vI(t,r,n&ee.Optional)}finally{Ft(o)}}return kD(r,0,n)}function ND(e,t,n,r=ee.Default,i){if(null!==e){if(2048&t[q]&&!(r&ee.Self)){const s=function pU(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[q]&&!(512&s[q]);){const a=xD(o,s,n,r|ee.Self,Wn);if(a!==Wn)return a;let c=o.parent;if(!c){const l=s[LI];if(l){const u=l.get(n,Wn,r);if(u!==Wn)return u}c=FD(s),s=s[Ao]}o=c}return i}(e,t,n,r,Wn);if(s!==Wn)return s}const o=xD(e,t,n,r,Wn);if(o!==Wn)return o}return RD(t,n,r,i)}function xD(e,t,n,r,i){const o=function dU(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(ua)?e[ua]:void 0;return"number"==typeof t?t>=0?t&SD:fU:t}(n);if("function"==typeof o){if(!yD(t,e,r))return r&ee.Host?kD(i,0,r):RD(t,n,r,i);try{let s;if(s=o(r),null!=s||r&ee.Optional)return s;ep()}finally{bD()}}else if("number"==typeof o){let s=null,a=MD(e,t),c=Oo,l=r&ee.Host?t[je][ht]:null;for((-1===a||r&ee.SkipSelf)&&(c=-1===a?au(e,t):t[a+8],c!==Oo&&OD(r,!1)?(s=t[M],a=ba(c),t=Ea(c,t)):a=-1);-1!==a;){const u=t[M];if(PD(o,a,u.data)){const d=uU(a,t,n,s,r,l);if(d!==Wn)return d}c=t[a+8],c!==Oo&&OD(r,t[M].data[a+8]===l)&&PD(o,a,t)?(s=u,a=ba(c),t=Ea(c,t)):a=-1}}return i}function uU(e,t,n,r,i,o){const s=t[M],a=s.data[e+8],u=cu(a,s,n,null==r?Ai(a)&&Np:r!=s&&0!=(3&a.type),i&ee.Host&&o===a);return null!==u?Ri(t,s,u,a):Wn}function cu(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,c=e.directiveStart,u=o>>20,h=i?a+u:e.directiveEnd;for(let f=r?a:a+u;f<h;f++){const p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){const f=s[c];if(f&&Sn(f)&&f.type===n)return c}return null}function Ri(e,t,n,r){let i=e[n];const o=t.data;if(function rU(e){return e instanceof wa}(i)){const s=i;s.resolving&&function NV(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new b(-200,`Circular dependency in DI detected for ${e}${n}`)}(function le(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():z(e)}(o[n]));const a=ou(s.canSeeViewProviders);s.resolving=!0;const l=s.injectImpl?Ft(s.injectImpl):null;yD(e,r,ee.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function tU(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=tD(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==l&&Ft(l),ou(a),s.resolving=!1,bD()}}return i}function PD(e,t,n){return!!(n[t+(e>>AD)]&1<<e)}function OD(e,t){return!(e&ee.Self||e&ee.Host&&t)}class Dt{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return ND(this._tNode,this._lView,t,Gl(r),n)}}function fU(){return new Dt(at(),C())}function ct(e){return dr(()=>{const t=e.prototype.constructor,n=t[hr]||Op(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[hr]||Op(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Op(e){return Zf(e)?()=>{const t=Op(B(e));return t&&t()}:Mi(e)}function FD(e){const t=e[M],n=t.type;return 2===n?t.declTNode:1===n?e[ht]:null}const Lo="__parameters__";function Uo(e,t,n){return dr(()=>{const r=function Fp(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,l,u){const d=c.hasOwnProperty(Lo)?c[Lo]:Object.defineProperty(c,Lo,{value:[]})[Lo];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Bo(e,t){e.forEach(n=>Array.isArray(n)?Bo(n,t):t(n))}function VD(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function uu(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function tn(e,t,n){let r=$o(e,t);return r>=0?e[1|r]=n:(r=~r,function wU(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function Lp(e,t){const n=$o(e,t);if(n>=0)return e[1|n]}function $o(e,t){return function UD(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}(e,t,1)}const Tt=la(Uo("Optional"),8),hu=la(Uo("SkipSelf"),4);function _u(e){return 128==(128&e.flags)}var Xr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Xr||{});const $U=/^>|^->|<!--|-->|--!>|<!-$/g,HU=/(<|>)/g,zU="\u200b$1\u200b";const $p=new Map;let WU=0;const zp="__ngContext__";function ft(e,t){Ut(t)?(e[zp]=t[ga],function qU(e){$p.set(e[ga],e)}(t)):e[zp]=t}let Wp;function Gp(e,t){return Wp(e,t)}function Ma(e){const t=e[ke];return bt(t)?t[ke]:t}function oT(e){return aT(e[fa])}function sT(e){return aT(e[Tn])}function aT(e){for(;null!==e&&!bt(e);)e=e[Tn];return e}function Wo(e,t,n,r,i){if(null!=r){let o,s=!1;bt(r)?o=r:Ut(r)&&(s=!0,r=r[Oe]);const a=Ee(r);0===e&&null!==n?null==i?dT(t,n,a):Ni(t,n,a,i||null,!0):1===e&&null!==n?Ni(t,n,a,i||null,!0):2===e?function Iu(e,t,n){const r=bu(e,t);r&&function hj(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function gj(e,t,n,r,i){const o=n[$n];o!==Ee(n)&&Wo(t,e,r,o,i);for(let a=ot;a<n.length;a++){const c=n[a];Ra(c[M],c,e,t,r,o)}}(t,e,o,n,i)}}function qp(e,t){return e.createComment(function XD(e){return e.replace($U,t=>t.replace(HU,zU))}(t))}function Cu(e,t,n){return e.createElement(t,n)}function lT(e,t){const n=e[ko],r=n.indexOf(t);cD(t),n.splice(r,1)}function wu(e,t){if(e.length<=ot)return;const n=ot+t,r=e[n];if(r){const i=r[pa];null!==i&&i!==e&&lT(i,r),t>0&&(e[n-1][Tn]=r[Tn]);const o=uu(e,ot+t);!function ij(e,t){Ra(e,t,t[W],2,null,null),t[Oe]=null,t[ht]=null}(r[M],r);const s=o[Bn];null!==s&&s.detachView(o[M]),r[ke]=null,r[Tn]=null,r[q]&=-129}return r}function Kp(e,t){if(!(256&t[q])){const n=t[W];t[ma]&&qI(t[ma]),t[_a]&&qI(t[_a]),n.destroyNode&&Ra(e,t,n,3,null,null),function aj(e){let t=e[fa];if(!t)return Yp(e[M],e);for(;t;){let n=null;if(Ut(t))n=t[fa];else{const r=t[ot];r&&(n=r)}if(!n){for(;t&&!t[Tn]&&t!==e;)Ut(t)&&Yp(t[M],t),t=t[ke];null===t&&(t=e),Ut(t)&&Yp(t[M],t),n=t&&t[Tn]}t=n}}(t)}}function Yp(e,t){if(!(256&t[q])){t[q]&=-129,t[q]|=256,function dj(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof wa)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];Hn(4,a,c);try{c.call(a)}finally{Hn(5,a,c)}}else{Hn(4,i,o);try{o.call(i)}finally{Hn(5,i,o)}}}}}(e,t),function uj(e,t){const n=e.cleanup,r=t[To];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[To]=null);const i=t[qr];if(null!==i){t[qr]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[M].type&&t[W].destroy();const n=t[pa];if(null!==n&&bt(t[ke])){n!==t[ke]&&lT(n,t);const r=t[Bn];null!==r&&r.detachView(e)}!function KU(e){$p.delete(e[ga])}(t)}}function Qp(e,t,n){return function uT(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[Oe];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===In.None||o===In.Emulated)return null}return jt(r,n)}}(e,t.parent,n)}function Ni(e,t,n,r,i){e.insertBefore(t,n,r,i)}function dT(e,t,n){e.appendChild(t,n)}function hT(e,t,n,r,i){null!==r?Ni(e,t,n,r,i):dT(e,t,n)}function bu(e,t){return e.parentNode(t)}let Xp,Du,tg,Tu,gT=function pT(e,t,n){return 40&e.type?jt(e,n):null};function Eu(e,t,n,r){const i=Qp(e,r,t),o=t[W],a=function fT(e,t,n){return gT(e,t,n)}(r.parent||t[ht],r,t);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)hT(o,i,n[c],a,!1);else hT(o,i,n,a,!1);void 0!==Xp&&Xp(o,r,t,n,i)}function ka(e,t){if(null!==t){const n=t.type;if(3&n)return jt(t,e);if(4&n)return Zp(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return ka(e,r);{const i=e[t.index];return bt(i)?Zp(-1,i):Ee(i)}}if(32&n)return Gp(t,e)()||Ee(e[t.index]);{const r=_T(e,t);return null!==r?Array.isArray(r)?r[0]:ka(Ma(e[je]),r):ka(e,t.next)}}return null}function _T(e,t){return null!==t?e[je][ht].projection[t.projection]:null}function Zp(e,t){const n=ot+e+1;if(n<t.length){const r=t[n],i=r[M].firstChild;if(null!==i)return ka(r,i)}return t[$n]}function Jp(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===t&&(a&&ft(Ee(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)Jp(e,t,n.child,r,i,o,!1),Wo(t,e,i,a,o);else if(32&c){const l=Gp(n,r);let u;for(;u=l();)Wo(t,e,i,u,o);Wo(t,e,i,a,o)}else 16&c?vT(e,t,r,n,i,o):Wo(t,e,i,a,o);n=s?n.projectionNext:n.next}}function Ra(e,t,n,r,i,o){Jp(n,r,e.firstChild,t,i,o,!1)}function vT(e,t,n,r,i,o){const s=n[je],c=s[ht].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++)Wo(t,e,i,c[l],o);else{let l=c;const u=s[ke];_u(r)&&(l.flags|=128),Jp(e,t,l,u,i,o,!0)}}function CT(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function wT(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&dp(e,t,r),null!==i&&CT(e,t,i),null!==o&&function _j(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}function Go(e){return function eg(){if(void 0===Du&&(Du=null,be.trustedTypes))try{Du=be.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Du}()?.createHTML(e)||e}function qo(){if(void 0!==tg)return tg;if(typeof document<"u")return document;throw new b(210,!1)}function ng(){if(void 0===Tu&&(Tu=null,be.trustedTypes))try{Tu=be.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Tu}function bT(e){return ng()?.createHTML(e)||e}function IT(e){return ng()?.createScriptURL(e)||e}class DT{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gI})`}}function Zr(e){return e instanceof DT?e.changingThisBreaksApplicationSecurity:e}function Na(e,t){const n=function Sj(e){return e instanceof DT&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${gI})`)}return n===t}class Aj{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Go(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch{return null}}}class Mj{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const n=this.inertDocument.createElement("template");return n.innerHTML=Go(t),n}}const Rj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function rg(e){return(e=String(e)).match(Rj)?e:"unsafe:"+e}function _r(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function xa(...e){const t={};for(const n of e)for(const r in n)n.hasOwnProperty(r)&&(t[r]=!0);return t}const ST=_r("area,br,col,hr,img,wbr"),AT=_r("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),MT=_r("rp,rt"),ig=xa(ST,xa(AT,_r("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xa(MT,_r("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xa(MT,AT)),og=_r("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),kT=xa(og,_r("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_r("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Nj=_r("script,style,template");class xj{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,r=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!ig.hasOwnProperty(n))return this.sanitizedSomething=!0,!Nj.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const r=t.attributes;for(let i=0;i<r.length;i++){const o=r.item(i),s=o.name,a=s.toLowerCase();if(!kT.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;og[a]&&(c=rg(c)),this.buf.push(" ",s,'="',RT(c),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();ig.hasOwnProperty(n)&&!ST.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(RT(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const Pj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Oj=/([^\#-~ |!])/g;function RT(e){return e.replace(/&/g,"&amp;").replace(Pj,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Oj,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Su;function sg(e){return"content"in e&&function Lj(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Ko=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Ko||{});function NT(e){const t=Pa();return t?bT(t.sanitize(Ko.HTML,e)||""):Na(e,"HTML")?bT(Zr(e)):function Fj(e,t){let n=null;try{Su=Su||function TT(e){const t=new Mj(e);return function kj(){try{return!!(new window.DOMParser).parseFromString(Go(""),"text/html")}catch{return!1}}()?new Aj(t):t}(e);let r=t?String(t):"";n=Su.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Su.getInertBodyElement(r)}while(r!==o);return Go((new xj).sanitizeChildren(sg(n)||n))}finally{if(n){const r=sg(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}(qo(),z(e))}function xT(e){const t=Pa();return t?t.sanitize(Ko.URL,e)||"":Na(e,"URL")?Zr(e):rg(z(e))}function PT(e){const t=Pa();if(t)return IT(t.sanitize(Ko.RESOURCE_URL,e)||"");if(Na(e,"ResourceURL"))return IT(Zr(e));throw new b(904,!1)}function Pa(){const e=C();return e&&e[So].sanitizer}const Oa=new A("ENVIRONMENT_INITIALIZER"),FT=new A("INJECTOR",-1),LT=new A("INJECTOR_DEF_TYPES");class ag{get(t,n=ca){if(n===ca){const r=new Error(`NullInjectorError: No provider for ${We(t)}!`);throw r.name="NullInjectorError",r}return n}}function Hj(...e){return{\u0275providers:UT(0,e),\u0275fromNgModule:!0}}function UT(e,...t){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Bo(t,s=>{const a=s;Au(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&jT(i,o),n}function jT(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];cg(i,o=>{t(o,r)})}}function Au(e,t,n,r){if(!(e=B(e)))return!1;let i=null,o=Hl(e);const s=!o&&re(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const c=e.ngModule;if(o=Hl(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const l of c)Au(l,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let l;r.add(i);try{Bo(o.imports,u=>{Au(u,t,n,r)&&(l||=[],l.push(u))})}finally{}void 0!==l&&jT(l,t)}if(!a){const l=Mi(i)||(()=>new i);t({provide:i,useFactory:l,deps:oe},i),t({provide:LT,useValue:i,multi:!0},i),t({provide:Oa,useValue:()=>x(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const l=e;cg(c,u=>{t(u,l)})}}}return i!==e&&void 0!==e.providers}function cg(e,t){for(let n of e)Jf(n)&&(n=n.\u0275providers),Array.isArray(n)?cg(n,t):t(n)}const zj=he({provide:String,useValue:he});function lg(e){return null!==e&&"object"==typeof e&&zj in e}function xi(e){return"function"==typeof e}const ug=new A("Set Injector scope."),Mu={},Gj={};let dg;function ku(){return void 0===dg&&(dg=new ag),dg}class gn{}class Yo extends gn{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,fg(t,s=>this.processProvider(s)),this.records.set(FT,Qo(void 0,this)),i.has("environment")&&this.records.set(gn,Qo(void 0,this));const o=this.records.get(ug);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(LT.multi,oe,ee.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=Wr(this),r=Ft(void 0);try{return t()}finally{Wr(n),Ft(r)}}get(t,n=ca,r=ee.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(II))return t[II](this);r=Gl(r);const o=Wr(this),s=Ft(void 0);try{if(!(r&ee.SkipSelf)){let c=this.records.get(t);if(void 0===c){const l=function Xj(e){return"function"==typeof e||"object"==typeof e&&e instanceof A}(t)&&$l(t);c=l&&this.injectableDefInScope(l)?Qo(hg(t),Mu):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&ee.Self?ku():this.parent).get(t,n=r&ee.Optional&&n===ca?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Wl]=a[Wl]||[]).unshift(We(t)),o)throw a;return function qV(e,t,n,r){const i=e[Wl];throw t[wI]&&i.unshift(t[wI]),e.message=function KV(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=We(t);if(Array.isArray(t))i=t.map(We).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):We(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace($V,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Wl]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Ft(s),Wr(o)}}resolveInjectorInitializers(){const t=Wr(this),n=Ft(void 0);try{const i=this.get(Oa.multi,oe,ee.Self);for(const o of i)o()}finally{Wr(t),Ft(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(We(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new b(205,!1)}processProvider(t){let n=xi(t=B(t))?t:B(t&&t.provide);const r=function Kj(e){return lg(e)?Qo(void 0,e.useValue):Qo(HT(e),Mu)}(t);if(xi(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Qo(void 0,Mu,!0),i.factory=()=>cp(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Mu&&(n.value=Gj,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Qj(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=B(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function hg(e){const t=$l(e),n=null!==t?t.factory:Mi(e);if(null!==n)return n;if(e instanceof A)throw new b(204,!1);if(e instanceof Function)return function qj(e){const t=e.length;if(t>0)throw function Ta(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new b(204,!1);const n=function VV(e){return e&&(e[zl]||e[_I])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new b(204,!1)}function HT(e,t,n){let r;if(xi(e)){const i=B(e);return Mi(i)||hg(i)}if(lg(e))r=()=>B(e.useValue);else if(function $T(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...cp(e.deps||[]));else if(function BT(e){return!(!e||!e.useExisting)}(e))r=()=>x(B(e.useExisting));else{const i=B(e&&(e.useClass||e.provide));if(!function Yj(e){return!!e.deps}(e))return Mi(i)||hg(i);r=()=>new i(...cp(e.deps))}return r}function Qo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function fg(e,t){for(const n of e)Array.isArray(n)?fg(n,t):n&&Jf(n)?fg(n.\u0275providers,t):t(n)}const Ru=new A("AppId",{providedIn:"root",factory:()=>Zj}),Zj="ng",zT=new A("Platform Initializer"),Jr=new A("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),WT=new A("CSP nonce",{providedIn:"root",factory:()=>qo().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let GT=(e,t,n)=>null;function wg(e,t,n=!1){return GT(e,t,n)}class cB{}class YT{}class uB{resolveComponentFactory(t){throw function lB(e){const t=Error(`No component factory found for ${We(e)}.`);return t.ngComponent=e,t}(t)}}let Lu=(()=>{class e{static{this.NULL=new uB}}return e})();function dB(){return Jo(at(),C())}function Jo(e,t){return new nn(jt(e,t))}let nn=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=dB}}return e})();function hB(e){return e instanceof nn?e.nativeElement:e}class XT{}let yr=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function fB(){const e=C(),n=en(at().index,e);return(Ut(n)?n:e)[W]}()}}return e})(),pB=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>null})}}return e})();class es{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ZT=new es("16.2.12"),Ig={};function nS(e,t=null,n=null,r){const i=rS(e,t,n,r);return i.resolveInjectorInitializers(),i}function rS(e,t=null,n=null,r,i=new Set){const o=[n||oe,Hj(e)];return r=r||("object"==typeof e?void 0:We(e)),new Yo(o,t||ku(),r||null,i)}let pt=(()=>{class e{static{this.THROW_IF_NOT_FOUND=ca}static{this.NULL=new ag}static create(n,r){if(Array.isArray(n))return nS({name:""},r,n,"");{const i=n.name??"";return nS({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=P({token:e,providedIn:"any",factory:()=>x(FT)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function Tg(e){return e.ngOriginalError}class vr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Tg(t);for(;n&&Tg(n);)n=Tg(n);return n||null}}function Sg(e){return t=>{setTimeout(e,void 0,t)}}const Fe=class bB extends Yt{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=Sg(o),i&&(i=Sg(i)),s&&(s=Sg(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof Ot&&t.add(a),a}};function oS(...e){}class ue{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fe(!1),this.onMicrotaskEmpty=new Fe(!1),this.onStable=new Fe(!1),this.onError=new Fe(!1),typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function EB(){const e="function"==typeof be.requestAnimationFrame;let t=be[e?"requestAnimationFrame":"setTimeout"],n=be[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function TB(e){const t=()=>{!function DB(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(be,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Mg(e),e.isCheckStableRunning=!0,Ag(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Mg(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function AB(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return sS(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),aS(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return sS(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),aS(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,Mg(e),Ag(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ue.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(ue.isInAngularZone())throw new b(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,IB,oS,oS);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const IB={};function Ag(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Mg(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function sS(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function aS(e){e._nesting--,Ag(e)}class SB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fe,this.onMicrotaskEmpty=new Fe,this.onStable=new Fe,this.onError=new Fe}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const cS=new A("",{providedIn:"root",factory:lS});function lS(){const e=N(ue);let t=!0;return function AV(...e){const t=aa(e),n=function wV(e,t){return"number"==typeof Yf(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Qt(r[0]):Eo(n)(Xe(r,t)):Vn}(new Me(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Me(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{ue.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(pI()))}function Cr(e){return e instanceof Function?e():e}let kg=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Va(e){for(;e;){e[q]|=64;const t=Ma(e);if(pp(e)&&!t)return e;e=t}return null}const pS=new A("",{providedIn:"root",factory:()=>!1});let ju=null;function yS(e,t){return e[t]??wS()}function vS(e,t){const n=wS();n.producerNode?.length&&(e[t]=ju,n.lView=e,ju=CS())}const VB={...BI,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Va(e.lView)},lView:null};function CS(){return Object.create(VB)}function wS(){return ju??=CS(),ju}const G={};function T(e){bS(ie(),C(),It()+e,!1)}function bS(e,t,n,r){if(!r)if(3==(3&t[q])){const o=e.preOrderCheckHooks;null!==o&&ru(t,o,n)}else{const o=e.preOrderHooks;null!==o&&iu(t,o,0,n)}ki(n)}function w(e,t=ee.Default){const n=C();return null===n?x(e,t):ND(at(),n,B(e),t)}function Bu(e,t,n,r,i,o,s,a,c,l,u){const d=t.blueprint.slice();return d[Oe]=i,d[q]=140|r,(null!==l||e&&2048&e[q])&&(d[q]|=2048),aD(d),d[ke]=d[Ao]=e,d[Ue]=n,d[So]=s||e&&e[So],d[W]=a||e&&e[W],d[Gr]=c||e&&e[Gr]||null,d[ht]=o,d[ga]=function GU(){return WU++}(),d[pr]=u,d[LI]=l,d[je]=2==t.type?e[je]:d,d}function rs(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Rg(e,t,n,r,i){const o=fD(),s=bp(),c=e.data[t]=function GB(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function xo(){return null!==j.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(e,t,n,r,i),function W2(){return j.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Ca(){const e=j.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return zn(o,!0),o}function Ua(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function IS(e,t,n,r,i){const o=yS(t,ma),s=It(),a=2&r;try{ki(-1),a&&t.length>te&&bS(e,t,te,!1),Hn(a?2:0,i);const l=a?o:null,u=mp(l);try{null!==l&&(l.dirty=!1),n(r,i)}finally{_p(l,u)}}finally{a&&null===t[ma]&&vS(t,ma),ki(s),Hn(a?3:1,i)}}function Ng(e,t,n){if(fp(t)){const r=un(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{un(r)}}}function xg(e,t,n){hD()&&(function JB(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;Ai(n)&&function s$(e,t,n){const r=jt(t,e),i=DS(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=$u(e,Bu(e,i,null,s,r,t,null,e[So].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||su(n,t),ft(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const c=e.data[a],l=Ri(t,e,a,n);ft(l,t),null!==s&&a$(0,a-i,l,c,0,s),Sn(c)&&(en(n.index,t)[Ue]=Ri(t,e,a,n))}}(e,t,n,jt(n,t)),64==(64&n.flags)&&kS(e,t,n))}function Pg(e,t,n=jt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function DS(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Og(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Og(e,t,n,r,i,o,s,a,c,l,u){const d=te+r,h=d+i,f=function jB(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:G);return n}(d,h),p="function"==typeof l?l():l;return f[M]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}let TS=e=>null;function SS(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?AS(n,t,i,o):r.hasOwnProperty(i)&&AS(n,t,r[i],o)}return n}function AS(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Fg(e,t,n,r){if(hD()){const i=null===r?null:{"":-1},o=function t$(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(RI(t,s.selectors,!1))if(r||(r=[]),Sn(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),Lg(e,t,a.length)}else r.unshift(s),Lg(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&MS(e,t,n,s,i,a),i&&function n$(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new b(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=da(n.mergedAttrs,n.attrs)}function MS(e,t,n,r,i,o){for(let l=0;l<r.length;l++)Pp(su(n,t),e,r[l].type);!function i$(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let l=0;l<r.length;l++){const u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Ua(e,t,r.length,null);for(let l=0;l<r.length;l++){const u=r[l];n.mergedAttrs=da(n.mergedAttrs,u.hostAttrs),o$(e,n,t,c,u),r$(c,u,i),null!==u.contentQueries&&(n.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=64);const d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function qB(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let c=null,l=null;for(let u=t.directiveStart;u<i;u++){const d=o[u],h=n?n.get(d):null,p=h?h.outputs:null;c=SS(d.inputs,u,c,h?h.inputs:null),l=SS(d.outputs,u,l,p);const g=null===c||null===s||kI(t)?null:c$(c,u,s);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}(e,n,o)}function kS(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function q2(){return j.lFrame.currentDirectiveIndex}();try{ki(o);for(let a=r;a<i;a++){const c=e.data[a],l=t[a];Ip(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&e$(c,l)}}finally{ki(-1),Ip(s)}}function e$(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Lg(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function r$(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Sn(t)&&(n[""]=e)}}function o$(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Mi(i.type)),s=new wa(o,Sn(i),w);e.blueprint[r]=s,n[r]=s,function XB(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function ZB(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,Ua(e,n,i.hostVars,G),i)}function Gn(e,t,n,r,i,o){const s=jt(e,t);!function Vg(e,t,n,r,i,o,s){if(null==o)e.removeAttribute(t,i,n);else{const a=null==s?z(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}(t[W],s,o,e.value,n,r,i)}function a$(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)RS(r,n,s[a++],s[a++],s[a++])}function RS(e,t,n,r,i){const o=un(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{un(o)}}function c$(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function NS(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function xS(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=e.data[o];Tp(n[r]),s.contentQueries(2,t[o],o)}}}function $u(e,t){return e[fa]?e[FI][Tn]=t:e[fa]=t,e[FI]=t,t}function Ug(e,t,n){Tp(0);const r=un(null);try{t(e,n)}finally{un(r)}}function PS(e){return e[To]||(e[To]=[])}function OS(e){return e.cleanup||(e.cleanup=[])}function LS(e,t){const n=e[Gr],r=n?n.get(vr,null):null;r&&r.handleError(t)}function jg(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];RS(e.data[s],t[s],r,a,i)}}function l$(e,t){const n=en(t,e),r=n[M];!function u$(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[Oe];null!==i&&null===n[pr]&&(n[pr]=wg(i,n[Gr])),Bg(r,n,n[Ue])}function Bg(e,t,n){Sp(t);try{const r=e.viewQuery;null!==r&&Ug(1,r,n);const i=e.template;null!==i&&IS(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&xS(e,t),e.staticViewQueries&&Ug(2,e.viewQuery,n);const o=e.components;null!==o&&function d$(e,t){for(let n=0;n<t.length;n++)l$(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[q]&=-5,Ap()}}let VS=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function E2(e,t,n){const r=Object.create(I2);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>WI(r),run:()=>{if(r.dirty=!1,r.hasRun&&!GI(r))return;r.hasRun=!0;const s=mp(r);try{r.cleanupFn(),r.cleanupFn=eD,r.fn(i)}finally{_p(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,l=>{this.all.has(l)&&this.queue.set(l,o)},i);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Hu(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=Xf(i,a):2==o&&(r=Xf(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function ja(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];null!==o&&r.push(Ee(o)),bt(o)&&US(o,r);const s=n.type;if(8&s)ja(e,t,n.child,r);else if(32&s){const a=Gp(n,t);let c;for(;c=a();)r.push(c)}else if(16&s){const a=_T(t,n);if(Array.isArray(a))r.push(...a);else{const c=Ma(t[je]);ja(c[M],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function US(e,t){for(let n=ot;n<e.length;n++){const r=e[n],i=r[M].firstChild;null!==i&&ja(r[M],r,i,t)}e[$n]!==e[Oe]&&t.push(e[$n])}function zu(e,t,n,r=!0){const i=t[So],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{jS(e,t,e.template,n)}catch(c){throw r&&LS(t,c),c}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function jS(e,t,n,r){const i=t[q];if(256!=(256&i)){t[So].effectManager?.flush(),Sp(t);try{aD(t),function gD(e){return j.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&IS(e,t,n,2,r);const s=3==(3&i);if(s){const l=e.preOrderCheckHooks;null!==l&&ru(t,l,null)}else{const l=e.preOrderHooks;null!==l&&iu(t,l,0,null),Mp(t,0)}if(function p$(e){for(let t=oT(e);null!==t;t=sT(t)){if(!t[VI])continue;const n=t[ko];for(let r=0;r<n.length;r++){P2(n[r])}}}(t),BS(t,2),null!==e.contentQueries&&xS(e,t),s){const l=e.contentCheckHooks;null!==l&&ru(t,l)}else{const l=e.contentHooks;null!==l&&iu(t,l,1),Mp(t,1)}!function UB(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=yS(t,_a);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)ki(~o);else{const s=o,a=n[++i],c=n[++i];G2(a,s),r.dirty=!1;const l=mp(r);try{c(2,t[s])}finally{_p(r,l)}}}}finally{null===t[_a]&&vS(t,_a),ki(-1)}}(e,t);const a=e.components;null!==a&&HS(t,a,0);const c=e.viewQuery;if(null!==c&&Ug(2,c,r),s){const l=e.viewCheckHooks;null!==l&&ru(t,l)}else{const l=e.viewHooks;null!==l&&iu(t,l,2),Mp(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[q]&=-73,cD(t)}finally{Ap()}}}function BS(e,t){for(let n=oT(e);null!==n;n=sT(n))for(let r=ot;r<n.length;r++)$S(n[r],t)}function g$(e,t,n){$S(en(t,e),n)}function $S(e,t){if(!function N2(e){return 128==(128&e[q])}(e))return;const n=e[M],r=e[q];if(80&r&&0===t||1024&r||2===t)jS(n,e,n.template,e[Ue]);else if(e[ha]>0){BS(e,1);const i=n.components;null!==i&&HS(e,i,1)}}function HS(e,t,n){for(let r=0;r<t.length;r++)g$(e,t[r],n)}class Ba{get rootNodes(){const t=this._lView,n=t[M];return ja(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ue]}set context(t){this._lView[Ue]=t}get destroyed(){return 256==(256&this._lView[q])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[ke];if(bt(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(wu(t,r),uu(n,r))}this._attachedToViewContainer=!1}Kp(this._lView[M],this._lView)}onDestroy(t){!function uD(e,t){if(256==(256&e[q]))throw new b(911,!1);null===e[qr]&&(e[qr]=[]),e[qr].push(t)}(this._lView,t)}markForCheck(){Va(this._cdRefInjectingView||this._lView)}detach(){this._lView[q]&=-129}reattach(){this._lView[q]|=128}detectChanges(){zu(this._lView[M],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function sj(e,t){Ra(e,t,t[W],2,null,null)}(this._lView[M],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=t}}class m$ extends Ba{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;zu(t[M],t,t[Ue],!1)}checkNoChanges(){}get context(){return null}}class zS extends Lu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=re(t);return new $a(n,this.ngModule)}}function WS(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class y${constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Gl(r);const i=this.injector.get(t,Ig,r);return i!==Ig||n===Ig?i:this.parentInjector.get(t,n,r)}}class $a extends YT{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=WS(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return WS(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function i2(e){return e.map(r2).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof gn?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new y$(t,o):t,a=s.get(XT,null);if(null===a)throw new b(407,!1);const d={rendererFactory:a,sanitizer:s.get(pB,null),effectManager:s.get(VS,null),afterRenderEventManager:s.get(kg,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function BB(e,t,n,r){const o=r.get(pS,!1)||n===In.ShadowDom,s=e.selectRootElement(t,o);return function $B(e){TS(e)}(s),s}(h,r,this.componentDef.encapsulation,s):Cu(h,f,function _$(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _=null;null!==p&&(_=wg(p,s,!0));const R=Og(0,null,null,1,0,null,null,null,null,null,null),O=Bu(null,R,null,v,null,null,d,h,s,null,_);let V,Ae;Sp(O);try{const cn=this.componentDef;let $r,wo=null;cn.findHostDirectiveDefs?($r=[],wo=new Map,cn.findHostDirectiveDefs(cn,$r,wo),$r.push(cn)):$r=[cn];const HE=function C$(e,t){const n=e[M],r=te;return e[r]=t,rs(n,r,2,"#host",null)}(O,p),qoe=function w$(e,t,n,r,i,o,s){const a=i[M];!function b$(e,t,n,r){for(const i of e)t.mergedAttrs=da(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Hu(t,t.mergedAttrs,!0),null!==n&&wT(r,n,t))}(r,e,t,s);let c=null;null!==t&&(c=wg(t,i[Gr]));const l=o.rendererFactory.createRenderer(t,n);let u=16;n.signals?u=4096:n.onPush&&(u=64);const d=Bu(i,DS(n),null,u,i[e.index],e,o,l,null,null,c);return a.firstCreatePass&&Lg(a,e,r.length-1),$u(i,d),i[e.index]=d}(HE,p,cn,$r,O,d,h);Ae=sD(R,te),p&&function I$(e,t,n,r){if(r)dp(e,n,["ng-version",ZT.full]);else{const{attrs:i,classes:o}=function o2(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Dn(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&dp(e,n,i),o&&o.length>0&&CT(e,n,o.join(" "))}}(h,cn,p,r),void 0!==n&&function D$(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}(Ae,this.ngContentSelectors,n),V=function E$(e,t,n,r,i,o){const s=at(),a=i[M],c=jt(s,i);MS(a,i,s,n,null,r);for(let u=0;u<n.length;u++)ft(Ri(i,a,s.directiveStart+u,s),i);kS(a,i,s),c&&ft(c,i);const l=Ri(i,a,s.directiveStart+s.componentOffset,s);if(e[Ue]=i[Ue]=l,null!==o)for(const u of o)u(l,t);return Ng(a,s,e),l}(qoe,cn,$r,wo,O,[T$]),Bg(R,O,null)}finally{Ap()}return new v$(this.componentType,V,Jo(Ae,O),O,Ae)}}class v$ extends cB{constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new m$(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;jg(o[M],o,i,t,n),this.previousInputValues.set(t,n),Va(en(this._tNode.index,o))}}get injector(){return new Dt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function T$(){const e=at();nu(C()[M],e)}function fe(e){let t=function GS(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(Sn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new b(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const s=e;s.inputs=Wu(e.inputs),s.inputTransforms=Wu(e.inputTransforms),s.declaredInputs=Wu(e.declaredInputs),s.outputs=Wu(e.outputs);const a=i.hostBindings;a&&k$(e,a);const c=i.viewQuery,l=i.contentQueries;if(c&&A$(e,c),l&&M$(e,l),jl(e.inputs,i.inputs),jl(e.declaredInputs,i.declaredInputs),jl(e.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),jl(s.inputTransforms,i.inputTransforms)),Sn(i)&&i.data.animation){const u=e.data;u.animation=(u.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===fe&&(n=!1)}}t=Object.getPrototypeOf(t)}!function S$(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=da(i.hostAttrs,n=da(n,i.hostAttrs))}}(r)}function Wu(e){return e===jn?{}:e===oe?[]:e}function A$(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function M$(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,o)=>{t(r,i,o),n(r,i,o)}:t}function k$(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function QS(e){const t=e.inputConfig,n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}e.inputTransforms=n}function Gu(e){return!!$g(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function $g(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function qn(e,t,n){return e[t]=n}function gt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Kn(e,t,n,r){const i=C();return gt(i,Po(),t)&&(ie(),Gn(xe(),i,e,t,n,r)),Kn}function F(e,t,n,r,i,o,s,a){const c=C(),l=ie(),u=e+te,d=l.firstCreatePass?function tH(e,t,n,r,i,o,s,a,c){const l=t.consts,u=rs(t,e,4,s||null,Yr(l,a));Fg(t,n,u,Yr(l,c)),nu(t,u);const d=u.tView=Og(2,u,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return null!==t.queries&&(t.queries.template(t,u),d.queries=t.queries.embeddedTView(u)),u}(u,l,c,t,n,r,i,o,s):l.data[u];zn(d,!1);const h=u0(l,c,d,e);tu()&&Eu(l,c,h,d),ft(h,c),$u(c,c[u]=NS(h,c,h,d)),Xl(d)&&xg(l,c,d),null!=s&&Pg(c,d,a)}let u0=function d0(e,t,n,r){return Qr(!0),t[W].createComment("")};function k(e,t,n){const r=C();return gt(r,Po(),t)&&function rn(e,t,n,r,i,o,s,a){const c=jt(t,n);let u,l=t.inputs;!a&&null!=l&&(u=l[r])?(jg(e,n,u,r,i),Ai(t)&&function YB(e,t){const n=en(t,e);16&n[q]||(n[q]|=64)}(n,t.index)):3&t.type&&(r=function KB(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(c,r,i))}(ie(),xe(),r,e,t,r[W],n,!1),k}function Kg(e,t,n,r,i){const s=i?"class":"style";jg(e,n,t.inputs[s],s,r)}function E(e,t,n,r){const i=C(),o=ie(),s=te+e,a=i[W],c=o.firstCreatePass?function sH(e,t,n,r,i,o){const s=t.consts,c=rs(t,e,2,r,Yr(s,i));return Fg(t,n,c,Yr(s,o)),null!==c.attrs&&Hu(c,c.attrs,!1),null!==c.mergedAttrs&&Hu(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,i,t,n,r):o.data[s],l=h0(o,i,c,a,t,e);i[s]=l;const u=Xl(c);return zn(c,!0),wT(a,l,c),32!=(32&c.flags)&&tu()&&Eu(o,i,l,c),0===function F2(){return j.lFrame.elementDepthCount}()&&ft(l,i),function L2(){j.lFrame.elementDepthCount++}(),u&&(xg(o,i,c),Ng(o,c,i)),null!==r&&Pg(i,c),E}function I(){let e=at();bp()?Ep():(e=e.parent,zn(e,!1));const t=e;(function U2(e){return j.skipHydrationRootTNode===e})(t)&&function H2(){j.skipHydrationRootTNode=null}(),function V2(){j.lFrame.elementDepthCount--}();const n=ie();return n.firstCreatePass&&(nu(n,e),fp(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function iU(e){return 0!=(8&e.flags)}(t)&&Kg(n,t,C(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function oU(e){return 0!=(16&e.flags)}(t)&&Kg(n,t,C(),t.stylesWithoutHost,!1),I}function Z(e,t,n,r){return E(e,t,n,r),I(),Z}let h0=(e,t,n,r,i,o)=>(Qr(!0),Cu(r,i,function ED(){return j.lFrame.currentNamespace}()));function qa(e,t,n){const r=C(),i=ie(),o=e+te,s=i.firstCreatePass?function lH(e,t,n,r,i){const o=t.consts,s=Yr(o,r),a=rs(t,e,8,"ng-container",s);return null!==s&&Hu(a,s,!0),Fg(t,n,a,Yr(o,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(o,i,r,t,n):i.data[o];zn(s,!0);const a=p0(i,r,s,e);return r[o]=a,tu()&&Eu(i,r,a,s),ft(a,r),Xl(s)&&(xg(i,r,s),Ng(i,s,r)),null!=n&&Pg(r,s),qa}function Ka(){let e=at();const t=ie();return bp()?Ep():(e=e.parent,zn(e,!1)),t.firstCreatePass&&(nu(t,e),fp(e)&&t.queries.elementEnd(e)),Ka}let p0=(e,t,n,r)=>(Qr(!0),qp(t[W],""));function ei(){return C()}function Ya(e){return!!e&&"function"==typeof e.then}function g0(e){return!!e&&"function"==typeof e.subscribe}function ye(e,t,n,r){const i=C(),o=ie(),s=at();return function _0(e,t,n,r,i,o,s){const a=Xl(r),l=e.firstCreatePass&&OS(e),u=t[Ue],d=PS(t);let h=!0;if(3&r.type||s){const g=jt(r,t),y=s?s(g):g,v=d.length,_=s?O=>s(Ee(O[r.index])):r.index;let R=null;if(!s&&a&&(R=function hH(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[To],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==R)(R.__ngLastListenerFn__||R).__ngNextListenerFn__=o,R.__ngLastListenerFn__=o,h=!1;else{o=v0(r,t,u,o,!1);const O=n.listen(y,i,o);d.push(o,O),l&&l.push(i,_,v,v+1)}}else o=v0(r,t,u,o,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const g=p.length;if(g)for(let y=0;y<g;y+=2){const V=t[p[y]][p[y+1]].subscribe(o),Ae=d.length;d.push(o,V),l&&l.push(i,r.index,Ae,-(Ae+1))}}}(o,i,i[W],s,e,t,r),ye}function y0(e,t,n,r){try{return Hn(6,t,n),!1!==n(r)}catch(i){return LS(e,i),!1}finally{Hn(7,t,n)}}function v0(e,t,n,r,i){return function o(s){if(s===Function)return r;Va(e.componentOffset>-1?en(e.index,t):t);let c=y0(t,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=y0(t,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&!1===c&&s.preventDefault(),c}}function ne(e=1){return function Y2(e){return(j.lFrame.contextLView=function Q2(e,t){for(;e>0;)t=t[Ao],e--;return t}(e,j.lFrame.contextLView))[Ue]}(e)}function Xu(e,t){return e<<17|t<<2}function ti(e){return e>>17&32767}function Qg(e){return 2|e}function Oi(e){return(131068&e)>>2}function Xg(e,t){return-131069&e|t<<2}function Zg(e){return 1|e}function M0(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?ti(o):Oi(o),c=!1;for(;0!==a&&(!1===c||s);){const u=e[a+1];wH(e[a],t)&&(c=!0,e[a+1]=r?Zg(u):Qg(u)),a=r?ti(u):Oi(u)}c&&(e[n+1]=r?Qg(o):Zg(o))}function wH(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&$o(e,t)>=0}const qe={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function k0(e){return e.substring(qe.key,qe.keyEnd)}function R0(e,t){const n=qe.textEnd;return n===t?-1:(t=qe.keyEnd=function DH(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,qe.key=t,n),fs(e,t,n))}function fs(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Zu(e,t){return function An(e,t,n,r){const i=C(),o=ie(),s=mr(2);o.firstUpdatePass&&V0(o,e,s,r),t!==G&&gt(i,s,t)&&j0(o,o.data[It()],i,i[W],e,i[s+1]=function FH(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=We(Zr(e)))),e}(t,n),r,s)}(e,t,null,!0),Zu}function Qa(e){!function Mn(e,t,n,r){const i=ie(),o=mr(2);i.firstUpdatePass&&V0(i,null,o,r);const s=C();if(n!==G&&gt(s,o,n)){const a=i.data[It()];if($0(a,r)&&!L0(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Xf(c,n||"")),Kg(i,a,s,n,r)}else!function OH(e,t,n,r,i,o,s,a){i===G&&(i=oe);let c=0,l=0,u=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;null!==u||null!==d;){const h=c<i.length?i[c+1]:void 0,f=l<o.length?o[l+1]:void 0;let g,p=null;u===d?(c+=2,l+=2,h!==f&&(p=d,g=f)):null===d||null!==u&&u<d?(c+=2,p=u):(l+=2,p=d,g=f),null!==p&&j0(e,t,n,r,p,g,s,a),u=c<i.length?i[c]:null,d=l<o.length?o[l]:null}}(i,a,s,s[W],s[o+1],s[o+1]=function xH(e,t,n){if(null==n||""===n)return oe;const r=[],i=Zr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,o)}}(PH,Qn,e,!0)}function Qn(e,t){for(let n=function EH(e){return function x0(e){qe.key=0,qe.keyEnd=0,qe.value=0,qe.valueEnd=0,qe.textEnd=e.length}(e),R0(e,fs(e,0,qe.textEnd))}(t);n>=0;n=R0(t,n))tn(e,k0(t),!0)}function L0(e,t){return t>=e.expandoStartIndex}function V0(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[It()],s=L0(e,n);$0(o,r)&&null===t&&!s&&(t=!1),t=function MH(e,t,n,r){const i=function Dp(e){const t=j.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Xa(n=Jg(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=Jg(i,e,t,n,r),null===o){let c=function kH(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Oi(r))return e[ti(r)]}(e,t,r);void 0!==c&&Array.isArray(c)&&(c=Jg(null,e,t,c[1],r),c=Xa(c,t.attrs,r),function RH(e,t,n,r){e[ti(n?t.classBindings:t.styleBindings)]=r}(e,t,r,c))}else o=function NH(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=Xa(r,e[o].hostAttrs,n);return Xa(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function vH(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=ti(s),c=Oi(s);e[r]=n;let u,l=!1;if(Array.isArray(n)?(u=n[1],(null===u||$o(n,u)>0)&&(l=!0)):u=n,i)if(0!==c){const h=ti(e[a+1]);e[r+1]=Xu(h,a),0!==h&&(e[h+1]=Xg(e[h+1],r)),e[a+1]=function _H(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=Xu(a,0),0!==a&&(e[a+1]=Xg(e[a+1],r)),a=r;else e[r+1]=Xu(c,0),0===a?a=r:e[c+1]=Xg(e[c+1],r),c=r;l&&(e[r+1]=Qg(e[r+1])),M0(e,u,r,!0),M0(e,u,r,!1),function CH(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&$o(o,t)>=0&&(n[r+1]=Zg(n[r+1]))}(t,u,e,r,o),s=Xu(a,c),o?t.classBindings=s:t.styleBindings=s}(i,o,t,n,s,r)}}function Jg(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=Xa(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Xa(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),tn(e,s,!!n||t[++o]))}return void 0===e?null:e}function PH(e,t,n){const r=String(t);""!==r&&!r.includes(" ")&&tn(e,r,n)}function j0(e,t,n,r,i,o,s,a){if(!(3&t.type))return;const c=e.data,l=c[a+1],u=function yH(e){return 1==(1&e)}(l)?B0(c,t,n,i,Oi(l),s):void 0;Ju(u)||(Ju(o)||function mH(e){return 2==(2&e)}(l)&&(o=B0(c,null,n,i,a,s)),function mj(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Xr.DashCase;null==i?e.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Xr.Important),e.setStyle(n,r,i,o))}}(r,s,eu(It(),n),i,o))}function B0(e,t,n,r,i,o){const s=null===t;let a;for(;i>0;){const c=e[i],l=Array.isArray(c),u=l?c[1]:c,d=null===u;let h=n[i+1];h===G&&(h=d?oe:void 0);let f=d?Lp(h,r):u===r?h:void 0;if(l&&!Ju(f)&&(f=Lp(c,r)),Ju(f)&&(a=f,s))return a;const p=e[i+1];i=s?ti(p):Oi(p)}if(null!==t){let c=o?t.residualClasses:t.residualStyles;null!=c&&(a=Lp(c,r))}return a}function Ju(e){return void 0!==e}function $0(e,t){return 0!=(e.flags&(t?8:16))}function L(e,t=""){const n=C(),r=ie(),i=e+te,o=r.firstCreatePass?rs(r,i,1,t,null):r.data[i],s=H0(r,n,o,t,e);n[i]=s,tu()&&Eu(r,n,s,o),zn(o,!1)}let H0=(e,t,n,r,i)=>(Qr(!0),function vu(e,t){return e.createText(t)}(t[W],r));function $t(e){return Fi("",e,""),$t}function Fi(e,t,n){const r=C(),i=function os(e,t,n,r){return gt(e,Po(),n)?t+z(n)+r:G}(r,e,t,n);return i!==G&&function wr(e,t,n){const r=eu(t,e);!function cT(e,t,n){e.setValue(t,n)}(e[W],r,n)}(r,It(),i),Fi}const gs="en-US";let dA=gs;function nm(e,t,n,r,i){if(e=B(e),Array.isArray(e))for(let o=0;o<e.length;o++)nm(e[o],t,n,r,i);else{const o=ie(),s=C(),a=at();let c=xi(e)?e:B(e.provide);const l=HT(e),u=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(xi(e)||!e.multi){const f=new wa(l,i,w),p=im(c,t,i?u:u+h,d);-1===p?(Pp(su(a,s),o,c),rm(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{const f=im(c,t,u+h,d),p=im(c,t,u,u+h),y=p>=0&&n[p];if(i&&!y||!i&&!(f>=0&&n[f])){Pp(su(a,s),o,c);const v=function rz(e,t,n,r,i){const o=new wa(e,n,w);return o.multi=[],o.index=t,o.componentProviders=0,FA(o,i,r&&!n),o}(i?nz:tz,n.length,i,r,l);!i&&y&&(n[p].providerFactory=v),rm(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)}else rm(o,e,f>-1?f:p,FA(n[i?p:f],l,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function rm(e,t,n,r){const i=xi(t),o=function Wj(e){return!!e.useClass}(t);if(i||o){const c=(o?B(t.useClass):t).prototype.ngOnDestroy;if(c){const l=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const u=l.indexOf(n);-1===u?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function FA(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function im(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function tz(e,t,n,r){return om(this.multi,[])}function nz(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ri(n,n[M],this.providerFactory.index,r);o=a.slice(0,s),om(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],om(i,o);return o}function om(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Re(e,t=[]){return n=>{n.providersResolver=(r,i)=>function ez(e,t,n){const r=ie();if(r.firstCreatePass){const i=Sn(e);nm(n,r.data,r.blueprint,i,!0),nm(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class Vi{}class LA{}class sm extends Vi{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zS(this);const i=Jt(t);this._bootstrapComponents=Cr(i.bootstrap),this._r3Injector=rS(t,n,[{provide:Vi,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver},...r],We(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class am extends LA{constructor(t){super(),this.moduleType=t}create(t){return new sm(this.moduleType,t,[])}}class VA extends Vi{constructor(t){super(),this.componentFactoryResolver=new zS(this),this.instance=null;const n=new Yo([...t.providers,{provide:Vi,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],t.parent||ku(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function cm(e,t,n=null){return new VA({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let sz=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=UT(0,n.type),i=r.length>0?cm([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(x(gn))})}}return e})();function UA(e){e.getStandaloneInjector=t=>t.get(sz).getOrCreateStandaloneInjector(e)}function rc(e,t,n){const r=Et()+e,i=C();return i[r]===G?qn(i,r,n?t.call(n):t()):function Ha(e,t){return e[t]}(i,r)}function ic(e,t,n,r){return function GA(e,t,n,r,i,o){const s=t+n;return gt(e,s,i)?qn(e,s+1,o?r.call(o,i):r(i)):oc(e,s+1)}(C(),Et(),e,t,n,r)}function um(e,t,n,r,i){return function qA(e,t,n,r,i,o,s){const a=t+n;return function Pi(e,t,n,r){const i=gt(e,t,n);return gt(e,t+1,r)||i}(e,a,i,o)?qn(e,a+2,s?r.call(s,i,o):r(i,o)):oc(e,a+2)}(C(),Et(),e,t,n,r,i)}function oc(e,t){const n=e[t];return n===G?void 0:n}function Mz(){return this._results[Symbol.iterator]()}class dm{get changes(){return this._changes||(this._changes=new Fe)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=dm.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=Mz)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const r=this;r.dirty=!1;const i=function pn(e){return e.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function vU(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(r._results,i,n))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function Rz(e,t,n,r=!0){const i=t[M];if(function cj(e,t,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][Tn]=t),r<o-ot?(t[Tn]=n[i],VD(n,ot+r,t)):(n.push(t),t[Tn]=null),t[ke]=n;const s=t[pa];null!==s&&n!==s&&function lj(e,t){const n=e[ko];t[je]!==t[ke][ke][je]&&(e[VI]=!0),null===n?e[ko]=[t]:n.push(t)}(s,t);const a=t[Bn];null!==a&&a.insertView(e),t[q]|=128}(i,t,e,n),r){const o=Zp(n,e),s=t[W],a=bu(s,e[$n]);null!==a&&function oj(e,t,n,r,i,o){r[Oe]=i,r[ht]=t,Ra(e,r,n,1,i,o)}(i,e[ht],s,t,a,o)}}let br=(()=>{class e{static{this.__NG_ELEMENT_ID__=Pz}}return e})();const Nz=br,xz=class extends Nz{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function kz(e,t,n,r){const i=t.tView,a=Bu(e,i,n,4096&e[q]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[pa]=e[t.index];const l=e[Bn];return null!==l&&(a[Bn]=l.createEmbeddedView(i)),Bg(i,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new Ba(i)}};function Pz(){return id(at(),C())}function id(e,t){return 4&e.type?new xz(t,e,Jo(e,t)):null}let kn=(()=>{class e{static{this.__NG_ELEMENT_ID__=jz}}return e})();function jz(){return rM(at(),C())}const Bz=kn,tM=class extends Bz{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Jo(this._hostTNode,this._hostLView)}get injector(){return new Dt(this._hostTNode,this._hostLView)}get parentInjector(){const t=au(this._hostTNode,this._hostLView);if(Rp(t)){const n=Ea(t,this._hostLView),r=ba(t);return new Dt(n[M].data[r+8],n)}return new Dt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=nM(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=t.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(t,n,r,i,o){const s=t&&!function Da(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}const c=s?t:new $a(re(t)),l=r||this.parentInjector;if(!o&&null==c.ngModule){const y=(s?l:this.parentInjector).get(gn,null);y&&(o=y)}re(c.componentType??{});const f=c.create(l,i,null,o);return this.insertImpl(f.hostView,a,false),f}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView;if(function x2(e){return bt(e[ke])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const l=i[ke],u=new tM(l,l[ht],l[ke]);u.detach(u.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;return Rz(a,i,s,!r),t.attachToViewContainerRef(),VD(hm(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=nM(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=wu(this._lContainer,n);r&&(uu(hm(this._lContainer),n),Kp(r[M],r))}detach(t){const n=this._adjustIndex(t,-1),r=wu(this._lContainer,n);return r&&null!=uu(hm(this._lContainer),n)?new Ba(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function nM(e){return e[8]}function hm(e){return e[8]||(e[8]=[])}function rM(e,t){let n;const r=t[e.index];return bt(r)?n=r:(n=NS(r,t,null,e),t[e.index]=n,$u(t,n)),iM(n,t,e,r),new tM(n,e,t)}let iM=function oM(e,t,n,r){if(e[$n])return;let i;i=8&n.type?Ee(r):function $z(e,t){const n=e[W],r=n.createComment(""),i=jt(t,e);return Ni(n,bu(n,i),r,function fj(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[$n]=i};class fm{constructor(t){this.queryList=t,this.matches=null}clone(){return new fm(this.queryList)}setDirty(){this.queryList.setDirty()}}class pm{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){const s=n.getByIndex(o);i.push(this.queries[s.indexInDeclarationView].clone())}return new pm(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==dM(t,n).matches&&this.queries[n].setDirty()}}class sM{constructor(t,n,r=null){this.predicate=t,this.flags=n,this.read=r}}class gm{constructor(t=[]){this.queries=t}elementStart(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let r=0;r<this.length;r++){const i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new gm(n):null}template(t,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class mm{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new mm(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const o=r[i];this.matchTNodeWithReadOption(t,n,Wz(n,o)),this.matchTNodeWithReadOption(t,n,cu(n,t,o,!1,!1))}else r===br?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,cu(n,t,r,!1,!1))}matchTNodeWithReadOption(t,n,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===nn||i===kn||i===br&&4&n.type)this.addMatch(n.index,-2);else{const o=cu(n,t,i,!1,!1);null!==o&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function Wz(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function qz(e,t,n,r){return-1===n?function Gz(e,t){return 11&e.type?Jo(e,t):4&e.type?id(e,t):null}(t,e):-2===n?function Kz(e,t,n){return n===nn?Jo(t,e):n===br?id(t,e):n===kn?rM(t,e):void 0}(e,t,r):Ri(e,e[M],n,t)}function aM(e,t,n,r){const i=t[Bn].queries[r];if(null===i.matches){const o=e.data,s=n.matches,a=[];for(let c=0;c<s.length;c+=2){const l=s[c];a.push(l<0?null:qz(t,o[l],s[c+1],n.metadata.read))}i.matches=a}return i.matches}function _m(e,t,n,r){const i=e.queries.getByIndex(n),o=i.matches;if(null!==o){const s=aM(e,t,i,n);for(let a=0;a<o.length;a+=2){const c=o[a];if(c>0)r.push(s[a/2]);else{const l=o[a+1],u=t[-c];for(let d=ot;d<u.length;d++){const h=u[d];h[pa]===h[ke]&&_m(h[M],h,l,r)}if(null!==u[ko]){const d=u[ko];for(let h=0;h<d.length;h++){const f=d[h];_m(f[M],f,l,r)}}}}}return r}function sd(e){const t=C(),n=ie(),r=_D();Tp(r+1);const i=dM(n,r);if(e.dirty&&function R2(e){return 4==(4&e[q])}(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const o=i.crossesNgTemplate?_m(n,t,r,[]):aM(n,t,i,r);e.reset(o,hB),e.notifyOnChanges()}return!0}return!1}function ym(e,t,n){const r=ie();r.firstCreatePass&&(function uM(e,t,n){null===e.queries&&(e.queries=new gm),e.queries.track(new mm(t,n))}(r,new sM(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),function lM(e,t,n){const r=new dm(4==(4&n));(function WB(e,t,n,r){const i=PS(t);i.push(n),e.firstCreatePass&&OS(e).push(r,i.length-1)})(e,t,r,r.destroy),null===t[Bn]&&(t[Bn]=new pm),t[Bn].queries.push(new fm(r))}(r,C(),t)}function ad(){return function Yz(e,t){return e[Bn].queries[t].queryList}(C(),_D())}function dM(e,t){return e.queries.getByIndex(t)}const Im=new A("Application Initializer");let Dm=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=N(Im,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Ya(o))n.push(o);else if(g0(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),AM=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();const Er=new A("LocaleId",{providedIn:"root",factory:()=>N(Er,ee.Optional|ee.SkipSelf)||function yW(){return typeof $localize<"u"&&$localize.locale||gs}()});let MM=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xt(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();class wW{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let kM=(()=>{class e{compileModuleSync(n){return new am(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=Cr(Jt(n).declarations).reduce((s,a)=>{const c=re(a);return c&&s.push(new $a(c)),s},[]);return new wW(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const PM=new A(""),ud=new A("");let km,Am=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,km||(function HW(e){km=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static{this.\u0275fac=function(r){return new(r||e)(x(ue),x(Mm),x(ud))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})(),Mm=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return km?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),ni=null;const OM=new A("AllowMultipleToken"),Rm=new A("PlatformDestroyListeners"),Nm=new A("appBootstrapListener");class LM{constructor(t,n){this.name=t,this.token=n}}function UM(e,t,n=[]){const r=`Platform: ${t}`,i=new A(r);return(o=[])=>{let s=xm();if(!s||s.injector.get(OM,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function GW(e){if(ni&&!ni.get(OM,!1))throw new b(400,!1);(function FM(){!function y2(e){QI=e}(()=>{throw new b(600,!1)})})(),ni=e;const t=e.get(BM);(function VM(e){e.get(zT,null)?.forEach(n=>n())})(e)}(function jM(e=[],t){return pt.create({name:t,providers:[{provide:ug,useValue:"platform"},{provide:Rm,useValue:new Set([()=>ni=null])},...e]})}(a,r))}return function KW(e){const t=xm();if(!t)throw new b(401,!1);return t}()}}function xm(){return ni?.get(BM)??null}let BM=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function YW(e="zone.js",t){return"noop"===e?new SB:"zone.js"===e?new ue(t):e}(r?.ngZone,function $M(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function oz(e,t,n){return new sm(e,t,n)}(n.moduleType,this.injector,function qM(e){return[{provide:ue,useFactory:e},{provide:Oa,multi:!0,useFactory:()=>{const t=N(XW,{optional:!0});return()=>t.initialize()}},{provide:GM,useFactory:QW},{provide:cS,useFactory:lS}]}(()=>i)),s=o.injector.get(vr,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{dd(this._modules,o),a.unsubscribe()})}),function HM(e,t,n){try{const r=n();return Ya(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(Dm);return a.runInitializers(),a.donePromise.then(()=>(function hA(e){ln(e,"Expected localeId to be defined"),"string"==typeof e&&(dA=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get(Er,gs)||gs),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=zM({},r);return function zW(e,t,n){const r=new am(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(ys);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new b(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new b(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Rm,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||e)(x(pt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function zM(e,t){return Array.isArray(t)?t.reduce(zM,e):{...e,...t}}let ys=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=N(GM),this.zoneIsStable=N(cS),this.componentTypes=[],this.components=[],this.isStable=N(MM).hasPendingTasks.pipe(Un(n=>n?H(!1):this.zoneIsStable),function MV(e,t=Hr){return e=e??kV,ze((n,r)=>{let i,o=!0;n.subscribe($e(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}(),pI()),this._injector=N(gn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof YT;if(!this._injector.get(Dm).done)throw!i&&function Do(e){const t=re(e)||it(e)||wt(e);return null!==t&&t.standalone}(n),new b(405,!1);let s;s=i?n:this._injector.get(Lu).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function WW(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Vi),l=s.create(pt.NULL,[],r||s.selector,a),u=l.location.nativeElement,d=l.injector.get(PM,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),dd(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new b(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;dd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Nm,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>dd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function dd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const GM=new A("",{providedIn:"root",factory:()=>N(vr).handleError.bind(void 0)});function QW(){const e=N(ue),t=N(vr);return n=>e.runOutsideAngular(()=>t.handleError(n))}let XW=(()=>{class e{constructor(){this.zone=N(ue),this.applicationRef=N(ys)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();let hd=(()=>{class e{static{this.__NG_ELEMENT_ID__=JW}}return e})();function JW(e){return function eG(e,t,n){if(Ai(e)&&!n){const r=en(e.index,t);return new Ba(r,r)}return 47&e.type?new Ba(t[je],t):null}(at(),C(),16==(16&e))}class ZM{constructor(){}supports(t){return Gu(t)}create(t){return new oG(t)}}const iG=(e,t)=>t;class oG{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||iG}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<ek(r,i,o)?n:r,a=ek(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;u<=p&&p<l&&(o[h]=f+1)}o[s.previousIndex]=u-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Gu(t))throw new b(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function L$(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new sG(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new JM),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new JM),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class sG{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aG{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class JM{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new aG,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ek(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class tk{constructor(){}supports(t){return t instanceof Map||$g(t)}create(){return new cG}}class cG{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||$g(t)))throw new b(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new lG(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class lG{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function nk(){return new gd([new ZM])}let gd=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:nk})}constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||nk()),deps:[[e,new hu,new Tt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new b(901,!1)}}return e})();function rk(){return new lc([new tk])}let lc=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:rk})}constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||rk()),deps:[[e,new hu,new Tt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new b(901,!1)}}return e})();const hG=UM(null,"core",[]);let fG=(()=>{class e{constructor(n){}static{this.\u0275fac=function(r){return new(r||e)(x(ys))}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();function vs(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let Um=null;function ri(){return Um}class SG{}const _n=new A("DocumentToken");let jm=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return N(MG)},providedIn:"platform"})}}return e})();const AG=new A("Location Initialized");let MG=(()=>{class e extends jm{constructor(){super(),this._doc=N(_n),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ri().getBaseHref(this._doc)}onPopState(n){const r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ri().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return new e},providedIn:"platform"})}}return e})();function Bm(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function hk(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Ir(e){return e&&"?"!==e[0]?"?"+e:e}let ji=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return N(pk)},providedIn:"root"})}}return e})();const fk=new A("appBaseHref");let pk=(()=>{class e extends ji{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??N(_n).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Bm(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ir(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Ir(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Ir(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(x(jm),x(fk,8))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),kG=(()=>{class e extends ji{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Bm(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Ir(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(x(jm),x(fk,8))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})(),$m=(()=>{class e{constructor(n){this._subject=new Fe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function xG(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(hk(gk(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ir(r))}normalize(n){return e.stripTrailingSlash(function NG(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,gk(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ir(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ir(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Ir}static{this.joinWithSlash=Bm}static{this.stripTrailingSlash=hk}static{this.\u0275fac=function(r){return new(r||e)(x(ji))}}static{this.\u0275prov=P({token:e,factory:function(){return function RG(){return new $m(x(ji))}()},providedIn:"root"})}}return e})();function gk(e){return e.replace(/\/index.html$/,"")}const Zm=/\s+/,Ik=[];let Jm=(()=>{class e{constructor(n,r,i,o){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=Ik,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Zm):Ik}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Zm):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Zm).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||e)(w(gd),w(lc),w(nn),w(yr))}}static{this.\u0275dir=$({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return e})();class v4{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let e_=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new v4(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),Tk(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{Tk(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(w(kn),w(br),w(gd))}}static{this.\u0275dir=$({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function Tk(e,t){e.context.$implicit=t.item}let Sd=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new C4,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Sk("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Sk("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(w(kn),w(br))}}static{this.\u0275dir=$({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})();class C4{constructor(){this.$implicit=null,this.ngIf=null}}function Sk(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${We(t)}'.`)}let Mk=(()=>{class e{constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){const[i,o]=n.split("."),s=-1===i.indexOf("-")?void 0:Xr.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||e)(w(nn),w(lc),w(yr))}}static{this.\u0275dir=$({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})(),Rk=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();function xk(e){return"server"===e}let Y4=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>new Q4(x(_n),window)})}}return e})();class Q4{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function X4(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class w8 extends SG{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class a_ extends w8{static makeCurrent(){!function TG(e){Um||(Um=e)}(new a_)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function b8(){return fc=fc||document.querySelector("base"),fc?fc.getAttribute("href"):null}();return null==n?null:function E8(e){kd=kd||document.createElement("a"),kd.setAttribute("href",e);const t=kd.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){fc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function _4(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let kd,fc=null,D8=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const c_=new A("EventManagerPlugins");let Vk=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(x(c_),x(ue))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();class Uk{constructor(t){this._doc=t}}const l_="ng-app-id";let jk=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xk(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${l_}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(l_),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(l_,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(x(_n),x(Ru),x(WT,8),x(Jr))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const u_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},d_=/%COMP%/g,M8=new A("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function $k(e,t){return t.map(n=>n.replace(d_,e))}let Hk=(()=>{class e{constructor(n,r,i,o,s,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=xk(a),this.defaultRenderer=new h_(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===In.ShadowDom&&(r={...r,encapsulation:In.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof Wk?i.applyToHost(n):i instanceof f_&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case In.Emulated:o=new Wk(c,l,r,this.appId,u,s,a,d);break;case In.ShadowDom:return new x8(c,l,n,r,s,a,this.nonce,d);default:o=new f_(c,l,r,u,s,a,d)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(x(Vk),x(jk),x(Ru),x(M8),x(_n),x(Jr),x(ue),x(WT))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();class h_{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(u_[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(zk(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(zk(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new b(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=u_[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=u_[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Xr.DashCase|Xr.Important)?t.style.setProperty(n,r,i&Xr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Xr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=ri().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function zk(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class x8 extends h_{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=$k(i.id,i.styles);for(const u of l){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class f_ extends h_{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?$k(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Wk extends f_{constructor(t,n,r,i,o,s,a,c){const l=i+"-"+r.id;super(t,n,r,o,s,a,c,l),this.contentAttr=function k8(e){return"_ngcontent-%COMP%".replace(d_,e)}(l),this.hostAttr=function R8(e){return"_nghost-%COMP%".replace(d_,e)}(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let P8=(()=>{class e extends Uk{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(x(_n))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const Gk=["alt","control","meta","shift"],O8={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},F8={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let L8=(()=>{class e extends Uk{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ri().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Gk.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=O8[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Gk.forEach(s=>{s!==i&&(0,F8[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(x(_n))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const B8=UM(hG,"browser",[{provide:Jr,useValue:"browser"},{provide:zT,useValue:function V8(){a_.makeCurrent()},multi:!0},{provide:_n,useFactory:function j8(){return function wj(e){tg=e}(document),document},deps:[]}]),$8=new A(""),Yk=[{provide:ud,useClass:class I8{addToWindow(t){be.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new b(5103,!1);return o},be.getAllAngularTestabilities=()=>t.getAllTestabilities(),be.getAllAngularRootElements=()=>t.getAllRootElements(),be.frameworkStabilizers||(be.frameworkStabilizers=[]),be.frameworkStabilizers.push(r=>{const i=be.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ri().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:PM,useClass:Am,deps:[ue,Mm,ud]},{provide:Am,useClass:Am,deps:[ue,Mm,ud]}],Qk=[{provide:ug,useValue:"root"},{provide:vr,useFactory:function U8(){return new vr},deps:[]},{provide:c_,useClass:P8,multi:!0,deps:[_n,ue,Jr]},{provide:c_,useClass:L8,multi:!0,deps:[_n]},Hk,jk,Vk,{provide:XT,useExisting:Hk},{provide:class Z4{},useClass:D8,deps:[]},[]];let H8=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Ru,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||e)(x($8,12))}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({providers:[...Qk,...Yk],imports:[Rk,fG]})}}return e})(),Xk=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(x(_n))}}static{this.\u0275prov=P({token:e,factory:function(r){let i=null;return i=r?new r:function W8(){return new Xk(x(_n))}(),i},providedIn:"root"})}}return e})();typeof window<"u"&&window;const{isArray:X8}=Array,{getPrototypeOf:Z8,prototype:J8,keys:eq}=Object;function tR(e){if(1===e.length){const t=e[0];if(X8(t))return{args:t,keys:null};if(function tq(e){return e&&"object"==typeof e&&Z8(e)===J8}(t)){const n=eq(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}const{isArray:nq}=Array;function nR(e){return me(t=>function rq(e,t){return nq(t)?e(...t):e(t)}(e,t))}function rR(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function g_(...e){const t=aa(e),n=hI(e),{args:r,keys:i}=tR(e);if(0===r.length)return Xe([],t);const o=new Me(function iq(e,t,n=Hr){return r=>{iR(t,()=>{const{length:i}=e,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)iR(t,()=>{const l=Xe(e[c],t);let u=!1;l.subscribe($e(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>rR(i,s):Hr));return n?o.pipe(nR(n)):o}function iR(e,t,n){e?ur(n,e,t):t()}const Rd=oa(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function m_(...e){return function oq(){return Eo(1)}()(Xe(e,aa(e)))}function oR(e){return new Me(t=>{Qt(e()).subscribe(t)})}function pc(e,t){const n=ge(e)?e:()=>e,r=i=>i.error(n());return new Me(t?i=>t.schedule(r,0,i):r)}function __(){return ze((e,t)=>{let n=null;e._refCount++;const r=$e(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class sR extends Me{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,XE(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ot;const n=this.getSubject();t.add(this.source.subscribe($e(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ot.EMPTY)}return t}refCount(){return __()(this)}}function ws(e){return e<=0?()=>Vn:ze((t,n)=>{let r=0;t.subscribe($e(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function oi(e,t){return ze((n,r)=>{let i=0;n.subscribe($e(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Nd(e){return ze((t,n)=>{let r=!1;t.subscribe($e(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function aR(e=aq){return ze((t,n)=>{let r=!1;t.subscribe($e(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function aq(){return new Rd}function Bi(e,t){const n=arguments.length>=2;return r=>r.pipe(e?oi((i,o)=>e(i,o,r)):Hr,ws(1),n?Nd(t):aR(()=>new Rd))}function gc(e,t){return ge(t)?rt(e,t,1):rt(e,1)}function lt(e,t,n){const r=ge(e)||t||n?{next:e,error:t,complete:n}:e;return r?ze((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe($e(o,c=>{var l;null===(l=r.next)||void 0===l||l.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var l;a=!1,null===(l=r.error)||void 0===l||l.call(r,c),o.error(c)},()=>{var c,l;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(l=r.finalize)||void 0===l||l.call(r)}))}):Hr}function $i(e){return ze((t,n)=>{let o,r=null,i=!1;r=t.subscribe($e(n,void 0,void 0,s=>{o=Qt(e(s,$i(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function y_(e){return e<=0?()=>Vn:ze((t,n)=>{let r=[];t.subscribe($e(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function v_(e){return ze((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const Y="primary",mc=Symbol("RouteTitle");class fq{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function bs(e){return new fq(e)}function pq(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Xn(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!cR(e[i],t[i]))return!1;return!0}function cR(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function lR(e){return e.length>0?e[e.length-1]:null}function si(e){return function Q8(e){return!!e&&(e instanceof Me||ge(e.lift)&&ge(e.subscribe))}(e)?e:Ya(e)?Xe(Promise.resolve(e)):H(e)}const mq={exact:function hR(e,t,n){if(!Hi(e.segments,t.segments)||!xd(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!hR(e.children[r],t.children[r],n))return!1;return!0},subset:fR},uR={exact:function _q(e,t){return Xn(e,t)},subset:function yq(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>cR(e[n],t[n]))},ignored:()=>!0};function dR(e,t,n){return mq[n.paths](e.root,t.root,n.matrixParams)&&uR[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function fR(e,t,n){return pR(e,t,t.segments,n)}function pR(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!Hi(i,n)||t.hasChildren()||!xd(i,n,r))}if(e.segments.length===n.length){if(!Hi(e.segments,n)||!xd(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!fR(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!(Hi(e.segments,i)&&xd(e.segments,i,r)&&e.children[Y])&&pR(e.children[Y],t,o,r)}}function xd(e,t,n){return t.every((r,i)=>uR[n](e[i].parameters,r.parameters))}class Es{constructor(t=new pe([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bs(this.queryParams)),this._queryParamMap}toString(){return wq.serialize(this)}}class pe{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Pd(this)}}class _c{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=bs(this.parameters)),this._parameterMap}toString(){return _R(this)}}function Hi(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let yc=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return new C_},providedIn:"root"})}}return e})();class C_{parse(t){const n=new Nq(t);return new Es(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${vc(t.root,!0)}`,r=function Iq(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Od(n)}=${Od(i)}`).join("&"):`${Od(n)}=${Od(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function bq(e){return encodeURI(e)}(t.fragment)}`:""}`}}const wq=new C_;function Pd(e){return e.segments.map(t=>_R(t)).join("/")}function vc(e,t){if(!e.hasChildren())return Pd(e);if(t){const n=e.children[Y]?vc(e.children[Y],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==Y&&r.push(`${i}:${vc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function Cq(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===Y&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==Y&&(n=n.concat(t(i,r)))}),n}(e,(r,i)=>i===Y?[vc(e.children[Y],!1)]:[`${i}:${vc(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Y]?`${Pd(e)}/${n[0]}`:`${Pd(e)}/(${n.join("//")})`}}function gR(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Od(e){return gR(e).replace(/%3B/gi,";")}function w_(e){return gR(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fd(e){return decodeURIComponent(e)}function mR(e){return Fd(e.replace(/\+/g,"%20"))}function _R(e){return`${w_(e.path)}${function Eq(e){return Object.keys(e).map(t=>`;${w_(t)}=${w_(e[t])}`).join("")}(e.parameters)}`}const Dq=/^[^\/()?;#]+/;function b_(e){const t=e.match(Dq);return t?t[0]:""}const Tq=/^[^\/()?;=#]+/,Aq=/^[^=?&#]+/,kq=/^[^&#]+/;class Nq{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new pe([],{}):new pe([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Y]=new pe(t,n)),r}parseSegment(){const t=b_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(t),new _c(Fd(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function Sq(e){const t=e.match(Tq);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=b_(this.remaining);i&&(r=i,this.capture(r))}t[Fd(n)]=Fd(r)}parseQueryParam(t){const n=function Mq(e){const t=e.match(Aq);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function Rq(e){const t=e.match(kq);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=mR(n),o=mR(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=b_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new b(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=Y);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[Y]:new pe([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new b(4011,!1)}}function yR(e){return e.segments.length>0?new pe([],{[Y]:e}):e}function vR(e){const t={};for(const r of Object.keys(e.children)){const o=vR(e.children[r]);if(r===Y&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function xq(e){if(1===e.numberOfChildren&&e.children[Y]){const t=e.children[Y];return new pe(e.segments.concat(t.segments),t.children)}return e}(new pe(e.segments,t))}function zi(e){return e instanceof Es}function CR(e){let t;const i=yR(function n(o){const s={};for(const c of o.children){const l=n(c);s[c.outlet]=l}const a=new pe(o.url,s);return o===e&&(t=a),a}(e.root));return t??i}function wR(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(0===t.length)return E_(i,i,i,n,r);const o=function Oq(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new ER(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new ER(n,t,r)}(t);if(o.toRoot())return E_(i,i,new pe([],{}),n,r);const s=function Fq(e,t,n){if(e.isAbsolute)return new Vd(t,!0,0);if(!n)return new Vd(t,!1,NaN);if(null===n.parent)return new Vd(n,!0,0);const r=Ld(e.commands[0])?0:1;return function Lq(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new b(4005,!1);i=r.segments.length}return new Vd(r,!1,i-o)}(n,n.segments.length-1+r,e.numberOfDoubleDots)}(o,i,e),a=s.processChildren?wc(s.segmentGroup,s.index,o.commands):IR(s.segmentGroup,s.index,o.commands);return E_(i,s.segmentGroup,a,n,r)}function Ld(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Cc(e){return"object"==typeof e&&null!=e&&e.outlets}function E_(e,t,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),s=e===t?n:bR(e,t,n);const a=yR(vR(s));return new Es(a,o,i)}function bR(e,t,n){const r={};return Object.entries(e.children).forEach(([i,o])=>{r[i]=o===t?n:bR(o,t,n)}),new pe(e.segments,r)}class ER{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Ld(r[0]))throw new b(4003,!1);const i=r.find(Cc);if(i&&i!==lR(r))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Vd{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function IR(e,t,n){if(e||(e=new pe([],{})),0===e.segments.length&&e.hasChildren())return wc(e,t,n);const r=function Uq(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],a=n[r];if(Cc(a))break;const c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&l&&"object"==typeof l&&void 0===l.outlets){if(!TR(c,l,s))return o;r+=2}else{if(!TR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new pe(e.segments.slice(0,r.pathIndex),{});return o.children[Y]=new pe(e.segments.slice(r.pathIndex),e.children),wc(o,0,i)}return r.match&&0===i.length?new pe(e.segments,{}):r.match&&!e.hasChildren()?I_(e,t,n):r.match?wc(e,0,i):I_(e,t,n)}function wc(e,t,n){if(0===n.length)return new pe(e.segments,{});{const r=function Vq(e){return Cc(e[0])?e[0].outlets:{[Y]:e}}(n),i={};if(Object.keys(r).some(o=>o!==Y)&&e.children[Y]&&1===e.numberOfChildren&&0===e.children[Y].segments.length){const o=wc(e.children[Y],t,n);return new pe(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=IR(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new pe(e.segments,i)}}function I_(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(Cc(o)){const c=jq(o.outlets);return new pe(r,c)}if(0===i&&Ld(n[0])){r.push(new _c(e.segments[t].path,DR(n[0]))),i++;continue}const s=Cc(o)?o.outlets[Y]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Ld(a)?(r.push(new _c(s,DR(a))),i+=2):(r.push(new _c(s,{})),i++)}return new pe(r,{})}function jq(e){const t={};return Object.entries(e).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[n]=I_(new pe([],{}),0,r))}),t}function DR(e){const t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function TR(e,t,n){return e==n.path&&Xn(t,n.parameters)}const bc="imperative";class Zn{constructor(t,n){this.id=t,this.url=n}}class Ud extends Zn{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ai extends Zn{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ec extends Zn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Is extends Zn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class jd extends Zn{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class SR extends Zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bq extends Zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $q extends Zn{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Hq extends Zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zq extends Zn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wq{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gq{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class qq{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kq{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yq{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qq{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AR{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class D_{}class T_{constructor(t){this.url=t}}class Xq{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ic,this.attachRef=null}}let Ic=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Xq,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();class MR{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=S_(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=S_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=A_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return A_(t,this._root).map(n=>n.value)}}function S_(e,t){if(e===t.value)return t;for(const n of t.children){const r=S_(e,n);if(r)return r}return null}function A_(e,t){if(e===t.value)return[t];for(const n of t.children){const r=A_(e,n);if(r.length)return r.unshift(t),r}return[]}class Sr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ds(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class kR extends MR{constructor(t,n){super(t),this.snapshot=n,M_(this,t)}toString(){return this.snapshot.toString()}}function RR(e,t){const n=function Zq(e,t){const s=new Bd([],{},{},"",{},Y,t,null,{});return new xR("",new Sr(s,[]))}(0,t),r=new Xt([new _c("",{})]),i=new Xt({}),o=new Xt({}),s=new Xt({}),a=new Xt(""),c=new Wi(r,i,s,a,o,Y,t,n.root);return c.snapshot=n.root,new kR(new Sr(c,[]),n)}class Wi{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(me(l=>l[mc]))??H(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(me(t=>bs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(me(t=>bs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function NR(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function Jq(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Bd{get title(){return this.data?.[mc]}constructor(t,n,r,i,o,s,a,c,l){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xR extends MR{constructor(t,n){super(n),this.url=t,M_(this,n)}toString(){return PR(this._root)}}function M_(e,t){t.value._routerState=e,t.children.forEach(n=>M_(e,n))}function PR(e){const t=e.children.length>0?` { ${e.children.map(PR).join(", ")} } `:"";return`${e.value}${t}`}function k_(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Xn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Xn(t.params,n.params)||e.paramsSubject.next(n.params),function gq(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Xn(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.urlSubject.next(n.url),Xn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function R_(e,t){const n=Xn(e.params,t.params)&&function vq(e,t){return Hi(e,t)&&e.every((n,r)=>Xn(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||R_(e.parent,t.parent))}let N_=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Y,this.activateEvents=new Fe,this.deactivateEvents=new Fe,this.attachEvents=new Fe,this.detachEvents=new Fe,this.parentContexts=N(Ic),this.location=N(kn),this.changeDetector=N(hd),this.environmentInjector=N(gn),this.inputBinder=N($d,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new b(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new e5(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=$({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[dn]})}}return e})();class e5{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Wi?this.route:t===Ic?this.childContexts:this.parent.get(t,n)}}const $d=new A("");let OR=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=g_([r.queryParams,r.params,r.data]).pipe(Un(([o,s,a],c)=>(a={...o,...s,...a},0===c?H(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function DG(e){const t=re(e);if(!t)return null;const n=new $a(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();function Dc(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function n5(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Dc(e,r,i);return Dc(e,r)})}(e,t,n);return new Sr(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Dc(e,a)),s}}const r=function r5(e){return new Wi(new Xt(e.url),new Xt(e.params),new Xt(e.queryParams),new Xt(e.fragment),new Xt(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Dc(e,o));return new Sr(r,i)}}const x_="ngNavigationCancelingError";function FR(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=zi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=LR(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function LR(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[x_]=!0,r.cancellationCode=t,n&&(r.url=n),r}function VR(e){return e&&e[x_]}let UR=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=fr({type:e,selectors:[["ng-component"]],standalone:!0,features:[UA],decls:1,vars:0,template:function(r,i){1&r&&Z(0,"router-outlet")},dependencies:[N_],encapsulation:2})}}return e})();function P_(e){const t=e.children&&e.children.map(P_),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=UR),n}function xn(e){return e.outlet||Y}function Tc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class d5{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),k_(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Ds(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ds(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ds(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){const i=Ds(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Qq(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Kq(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(k_(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),k_(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=Tc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class jR{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Hd{constructor(t,n){this.component=t,this.route=n}}function h5(e,t,n){const r=e._root;return Sc(r,t?t._root:null,n,[r.value])}function Ts(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function LV(e){return null!==$l(e)}(e)?t.get(e):e:r}function Sc(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ds(t);return e.children.forEach(s=>{(function p5(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function g5(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Hi(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Hi(e.url,t.url)||!Xn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!R_(e,t)||!Xn(e.queryParams,t.queryParams);default:return!R_(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new jR(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Sc(e,t,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hd(a.outlet.component,s))}else s&&Ac(t,a,i),i.canActivateChecks.push(new jR(r)),Sc(e,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ac(a,n.getContext(s),i)),i}function Ac(e,t,n){const r=Ds(e),i=e.value;Object.entries(r).forEach(([o,s])=>{Ac(s,i.component?t?t.children.getContext(o):null:t,n)}),n.canDeactivateChecks.push(new Hd(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Mc(e){return"function"==typeof e}function BR(e){return e instanceof Rd||"EmptyError"===e?.name}const zd=Symbol("INITIAL_VALUE");function Ss(){return Un(e=>g_(e.map(t=>t.pipe(ws(1),function sq(...e){const t=aa(e);return ze((n,r)=>{(t?m_(e,n,t):m_(e,n)).subscribe(r)})}(zd)))).pipe(me(t=>{for(const n of t)if(!0!==n){if(n===zd)return zd;if(!1===n||n instanceof Es)return n}return!0}),oi(t=>t!==zd),ws(1)))}function $R(e){return function OL(...e){return KE(e)}(lt(t=>{if(zi(t))throw FR(0,t)}),me(t=>!0===t))}class Wd{constructor(t){this.segmentGroup=t||null}}class HR{constructor(t){this.urlTree=t}}function As(e){return pc(new Wd(e))}function zR(e){return pc(new HR(e))}class O5{constructor(t,n){this.urlSerializer=t,this.urlTree=n}noMatchError(t){return new b(4002,!1)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return H(r);if(i.numberOfChildren>1||!i.children[Y])return pc(new b(4e3,!1));i=i.children[Y]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new Es(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Object.entries(t).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new pe(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new b(4001,!1);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}const O_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function F5(e,t,n,r,i){const o=F_(e,t,n);return o.matched?(r=function o5(e,t){return e.providers&&!e._injector&&(e._injector=cm(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,r),function N5(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?H(i.map(s=>{const a=Ts(s,e);return si(function w5(e){return e&&Mc(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(Ss(),$R()):H(!0)}(r,t,n).pipe(me(s=>!0===s?o:{...O_}))):H(o)}function F_(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...O_}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||pq)(n,e,t);if(!i)return{...O_};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function WR(e,t,n,r){return n.length>0&&function U5(e,t,n){return n.some(r=>Gd(e,t,r)&&xn(r)!==Y)}(e,n,r)?{segmentGroup:new pe(t,V5(r,new pe(n,e.children))),slicedSegments:[]}:0===n.length&&function j5(e,t,n){return n.some(r=>Gd(e,t,r))}(e,n,r)?{segmentGroup:new pe(e.segments,L5(e,0,n,r,e.children)),slicedSegments:n}:{segmentGroup:new pe(e.segments,e.children),slicedSegments:n}}function L5(e,t,n,r,i){const o={};for(const s of r)if(Gd(e,n,s)&&!i[xn(s)]){const a=new pe([],{});o[xn(s)]=a}return{...i,...o}}function V5(e,t){const n={};n[Y]=t;for(const r of e)if(""===r.path&&xn(r)!==Y){const i=new pe([],{});n[xn(r)]=i}return n}function Gd(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class z5{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new O5(this.urlSerializer,this.urlTree)}noMatchError(t){return new b(4002,!1)}recognize(){const t=WR(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Y).pipe($i(n=>{if(n instanceof HR)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Wd?this.noMatchError(n):n}),me(n=>{const r=new Bd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Y,this.rootComponentType,null,{}),i=new Sr(r,n),o=new xR("",i),s=function Pq(e,t,n=null,r=null){return wR(CR(e),t,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,Y).pipe($i(r=>{throw r instanceof Wd?this.noMatchError(r):r}))}inheritParamsAndData(t){const n=t.value,r=NR(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0)}processChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Xe(i).pipe(gc(o=>{const s=r.children[o],a=function l5(e,t){const n=e.filter(r=>xn(r)===t);return n.push(...e.filter(r=>xn(r)!==t)),n}(n,o);return this.processSegmentGroup(t,a,s,o)}),function lq(e,t){return ze(function cq(e,t,n,r,i){return(o,s)=>{let a=n,c=t,l=0;o.subscribe($e(s,u=>{const d=l++;c=a?e(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(e,t,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),Nd(null),function uq(e,t){const n=arguments.length>=2;return r=>r.pipe(e?oi((i,o)=>e(i,o,r)):Hr,y_(1),n?Nd(t):aR(()=>new Rd))}(),rt(o=>{if(null===o)return As(r);const s=GR(o);return function W5(e){e.sort((t,n)=>t.value.outlet===Y?-1:n.value.outlet===Y?1:t.value.outlet.localeCompare(n.value.outlet))}(s),H(s)}))}processSegment(t,n,r,i,o,s){return Xe(n).pipe(gc(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe($i(c=>{if(c instanceof Wd)return H(null);throw c}))),Bi(a=>!!a),$i(a=>{if(BR(a))return function $5(e,t,n){return 0===t.length&&!e.children[n]}(r,i,o)?H([]):As(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return function B5(e,t,n,r){return!!(xn(e)===r||r!==Y&&Gd(t,n,e))&&("**"===e.path||F_(t,e,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):As(i):As(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zR(o):this.applyRedirects.lineralizeSegments(r,o).pipe(rt(s=>{const a=new pe(s,{});return this.processSegment(t,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:a,consumedSegments:c,remainingSegments:l,positionalParamSegments:u}=F_(n,i,o);if(!a)return As(n);const d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return i.redirectTo.startsWith("/")?zR(d):this.applyRedirects.lineralizeSegments(i,d).pipe(rt(h=>this.processSegment(t,r,n,h.concat(l),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a;if("**"===r.path){const c=i.length>0?lR(i).parameters:{};a=H({snapshot:new Bd(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qR(r),xn(r),r.component??r._loadedComponent??null,r,KR(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=F5(n,r,i,t).pipe(me(({matched:c,consumedSegments:l,remainingSegments:u,parameters:d})=>c?{snapshot:new Bd(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qR(r),xn(r),r.component??r._loadedComponent??null,r,KR(r)),consumedSegments:l,remainingSegments:u}:null));return a.pipe(Un(c=>null===c?As(n):this.getChildConfig(t=r._injector??t,r,i).pipe(Un(({routes:l})=>{const u=r._loadedInjector??t,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:p,slicedSegments:g}=WR(n,h,f,l);if(0===g.length&&p.hasChildren())return this.processChildren(u,l,p).pipe(me(v=>null===v?null:[new Sr(d,v)]));if(0===l.length&&0===g.length)return H([new Sr(d,[])]);const y=xn(r)===o;return this.processSegment(u,l,p,g,y?Y:o,!0).pipe(me(v=>[new Sr(d,v)]))}))))}getChildConfig(t,n,r){return n.children?H({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?H({routes:n._loadedRoutes,injector:n._loadedInjector}):function R5(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?H(!0):H(i.map(s=>{const a=Ts(s,e);return si(function _5(e){return e&&Mc(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(Ss(),$R())}(t,n,r).pipe(rt(i=>i?this.configLoader.loadChildren(t,n).pipe(lt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function P5(e){return pc(LR(!1,3))}())):H({routes:[],injector:t})}}function G5(e){const t=e.value.routeConfig;return t&&""===t.path}function GR(e){const t=[],n=new Set;for(const r of e){if(!G5(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=GR(r.children);t.push(new Sr(r.value,i))}return t.filter(r=>!n.has(r))}function qR(e){return e.data||{}}function KR(e){return e.resolve||{}}function YR(e){return"string"==typeof e.title||null===e.title}function L_(e){return Un(t=>{const n=e(t);return n?Xe(n).pipe(me(()=>t)):H(t)})}const Ms=new A("ROUTES");let V_=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=N(kM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return H(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=si(n.loadComponent()).pipe(me(QR),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),v_(()=>{this.componentLoaders.delete(n)})),i=new sR(r,()=>new Yt).pipe(__());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return H({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function J5(e,t,n,r){return si(e.loadChildren()).pipe(me(QR),rt(i=>i instanceof LA||Array.isArray(i)?H(i):Xe(t.compileModuleAsync(i))),me(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Ms,[],{optional:!0,self:!0}).flat()),{routes:s.map(P_),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(v_(()=>{this.childrenLoaders.delete(r)})),s=new sR(o,()=>new Yt).pipe(__());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function QR(e){return function e6(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let qd=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Yt,this.transitionAbortSubject=new Yt,this.configLoader=N(V_),this.environmentInjector=N(gn),this.urlSerializer=N(yc),this.rootContexts=N(Ic),this.inputBindingEnabled=null!==N($d,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>H(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new Gq(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new Wq(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new Xt({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(oi(o=>0!==o.id),me(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),Un(o=>{this.currentTransition=o;let s=!1,a=!1;return H(o).pipe(lt(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Un(c=>{const l=c.currentBrowserUrl.toString(),u=!n.navigated||c.extractedUrl.toString()!==l||l!==c.currentUrlTree.toString();if(!u&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new Is(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),Vn}if(n.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return H(c).pipe(Un(h=>{const f=this.transitions?.getValue();return this.events.next(new Ud(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?Vn:Promise.resolve(h)}),function q5(e,t,n,r,i,o){return rt(s=>function H5(e,t,n,r,i,o,s="emptyOnly"){return new z5(e,t,n,r,i,s,o).recognize()}(e,t,n,r,s.extractedUrl,i,o).pipe(me(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),lt(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new SR(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&n.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:g,extras:y}=c,v=new Ud(h,this.urlSerializer.serialize(f),p,g);this.events.next(v);const _=RR(0,this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:_,urlAfterRedirects:f,extras:{...y,skipLocationChange:!1,replaceUrl:!1}},H(o)}{const h="";return this.events.next(new Is(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),Vn}}),lt(c=>{const l=new Bq(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),me(c=>(this.currentTransition=o={...c,guards:h5(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function E5(e,t){return rt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?H({...n,guardsResult:!0}):function I5(e,t,n,r){return Xe(e).pipe(rt(i=>function k5(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?H(o.map(a=>{const c=Tc(t)??i,l=Ts(a,c);return si(function C5(e){return e&&Mc(e.canDeactivate)}(l)?l.canDeactivate(e,t,n,r):c.runInContext(()=>l(e,t,n,r))).pipe(Bi())})).pipe(Ss()):H(!0)}(i.component,i.route,n,t,r)),Bi(i=>!0!==i,!0))}(s,r,i,e).pipe(rt(a=>a&&function m5(e){return"boolean"==typeof e}(a)?function D5(e,t,n,r){return Xe(t).pipe(gc(i=>m_(function S5(e,t){return null!==e&&t&&t(new qq(e)),H(!0)}(i.route.parent,r),function T5(e,t){return null!==e&&t&&t(new Yq(e)),H(!0)}(i.route,r),function M5(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function f5(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>oR(()=>H(s.guards.map(c=>{const l=Tc(s.node)??n,u=Ts(c,l);return si(function v5(e){return e&&Mc(e.canActivateChild)}(u)?u.canActivateChild(r,e):l.runInContext(()=>u(r,e))).pipe(Bi())})).pipe(Ss())));return H(o).pipe(Ss())}(e,i.path,n),function A5(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return H(!0);const i=r.map(o=>oR(()=>{const s=Tc(t)??n,a=Ts(o,s);return si(function y5(e){return e&&Mc(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe(Bi())}));return H(i).pipe(Ss())}(e,i.route,n))),Bi(i=>!0!==i,!0))}(r,o,e,t):H(a)),me(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),lt(c=>{if(o.guardsResult=c.guardsResult,zi(c.guardsResult))throw FR(0,c.guardsResult);const l=new $q(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),oi(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),L_(c=>{if(c.guards.canActivateChecks.length)return H(c).pipe(lt(l=>{const u=new Hq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Un(l=>{let u=!1;return H(l).pipe(function K5(e,t){return rt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return H(n);let o=0;return Xe(i).pipe(gc(s=>function Y5(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!YR(i)&&(o[mc]=i.title),function Q5(e,t,n,r){const i=function X5(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return H({});const o={};return Xe(i).pipe(rt(s=>function Z5(e,t,n,r){const i=Tc(t)??r,o=Ts(e,i);return si(o.resolve?o.resolve(t,n):i.runInContext(()=>o(t,n)))}(e[s],t,n,r).pipe(Bi(),lt(a=>{o[s]=a}))),y_(1),function dq(e){return me(()=>e)}(o),$i(s=>BR(s)?Vn:pc(s)))}(o,e,t,r).pipe(me(s=>(e._resolvedData=s,e.data=NR(e,n).resolve,i&&YR(i)&&(e.data[mc]=i.title),null)))}(s.route,r,e,t)),lt(()=>o++),y_(1),rt(s=>o===i.length?H(n):Vn))})}(n.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",2)}}))}),lt(l=>{const u=new zq(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),L_(c=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(lt(h=>{u.component=h}),me(()=>{})));for(const h of u.children)d.push(...l(h));return d};return g_(l(c.targetSnapshot.root)).pipe(Nd(),ws(1))}),L_(()=>this.afterPreactivation()),me(c=>{const l=function t5(e,t,n){const r=Dc(e,t._root,n?n._root:void 0);return new kR(r,t)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:l},o}),lt(()=>{this.events.next(new D_)}),((e,t,n,r)=>me(i=>(new d5(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ws(1),lt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ai(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),n.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function hq(e){return ze((t,n)=>{Qt(e).subscribe($e(n,()=>n.complete(),Vf)),!n.closed&&t.subscribe(n)})}(this.transitionAbortSubject.pipe(lt(c=>{throw c}))),v_(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),$i(c=>{if(a=!0,VR(c))this.events.next(new Ec(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function i5(e){return VR(e)&&zi(e.url)}(c)?this.events.next(new T_(c.url)):o.resolve(!1);else{this.events.next(new jd(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(c))}catch(l){o.reject(l)}}return Vn}))}))}cancelNavigationTransition(n,r,i){const o=new Ec(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function XR(e){return e!==bc}let ZR=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Y);return r}getResolvedTitleForRoute(n){return n.data[mc]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return N(t6)},providedIn:"root"})}}return e})(),t6=(()=>{class e extends ZR{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(x(Xk))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),n6=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return N(i6)},providedIn:"root"})}}return e})();class r6{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let i6=(()=>{class e extends r6{static{this.\u0275fac=function(){let n;return function(i){return(n||(n=ct(e)))(i||e)}}()}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Kd=new A("",{providedIn:"root",factory:()=>({})});let o6=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return N(s6)},providedIn:"root"})}}return e})(),s6=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var kc=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(kc||{});function JR(e,t){e.events.pipe(oi(n=>n instanceof ai||n instanceof Ec||n instanceof jd||n instanceof Is),me(n=>n instanceof ai||n instanceof Is?kc.COMPLETE:n instanceof Ec&&(0===n.code||1===n.code)?kc.REDIRECTING:kc.FAILED),oi(n=>n!==kc.REDIRECTING),ws(1)).subscribe(()=>{t()})}function a6(e){throw e}function c6(e,t,n){return t.parse("/")}const l6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},u6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mt=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=N(AM),this.isNgZoneEnabled=!1,this._events=new Yt,this.options=N(Kd,{optional:!0})||{},this.pendingTasks=N(MM),this.errorHandler=this.options.errorHandler||a6,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||c6,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=N(o6),this.routeReuseStrategy=N(n6),this.titleStrategy=N(ZR),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=N(Ms,{optional:!0})?.flat()??[],this.navigationTransitions=N(qd),this.urlSerializer=N(yc),this.location=N($m),this.componentInputBindingEnabled=!!N($d,{optional:!0}),this.eventsSubscription=new Ot,this.isNgZoneEnabled=N(ue)instanceof ue&&ue.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Es,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=RR(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(eN(r)&&this._events.next(r));if(r instanceof Ud)XR(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof Is)this.rawUrlTree=i.rawUrl;else if(r instanceof SR){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof D_)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof Ec)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof T_){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||XR(i.source)};this.scheduleNavigation(o,bc,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof jd&&this.restoreHistory(i,!0),r instanceof ai&&(this.navigated=!0),eN(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),bc,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(P_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s;let d,u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...o};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}null!==u&&(u=this.removeEmptyProps(u));try{d=CR(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return wR(d,n,u,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=zi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,bc,null,r)}navigate(n,r={skipLocationChange:!1}){return function d6(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new b(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...l6}:!1===r?{...u6}:r,zi(n))return dR(this.currentUrlTree,n,i);const o=this.parseUrl(n);return dR(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,h)=>{a=d,c=h});const u=this.pendingTasks.add();return JR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function eN(e){return!(e instanceof D_||e instanceof T_)}let Yd=(()=>{class e{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Yt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=n.events.subscribe(l=>{l instanceof ai&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function OT(e,t,n){return function $j(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?PT:xT}(t,n)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||e)(w(mt),w(Wi),function lu(e){return function lU(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(TI(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(at(),e)}("tabindex"),w(yr),w(nn),w(ji))}}static{this.\u0275dir=$({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&ye("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Kn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",vs],skipLocationChange:["skipLocationChange","skipLocationChange",vs],replaceUrl:["replaceUrl","replaceUrl",vs],routerLink:"routerLink"},standalone:!0,features:[QS,dn]})}}return e})();class tN{}let p6=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(oi(n=>n instanceof ai),gc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=cm(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Xe(i).pipe(Eo())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):H(null);const o=i.pipe(rt(s=>null===s?H(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Xe([o,this.loader.loadComponent(r)]).pipe(Eo()):o})}static{this.\u0275fac=function(r){return new(r||e)(x(mt),x(kM),x(gn),x(tN),x(V_))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const U_=new A("");let nN=(()=>{class e{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Ud?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ai?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof Is&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof AR&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new AR(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function ES(){throw new Error("invalid")}()}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();function Ar(e,t){return{\u0275kind:e,\u0275providers:t}}function iN(){const e=N(pt);return t=>{const n=e.get(ys);if(t!==n.components[0])return;const r=e.get(mt),i=e.get(oN);1===e.get(j_)&&r.initialNavigation(),e.get(sN,null,ee.Optional)?.setUpPreloading(),e.get(U_,null,ee.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const oN=new A("",{factory:()=>new Yt}),j_=new A("",{providedIn:"root",factory:()=>1}),sN=new A("");function y6(e){return Ar(0,[{provide:sN,useExisting:p6},{provide:tN,useExisting:e}])}const aN=new A("ROUTER_FORROOT_GUARD"),C6=[$m,{provide:yc,useClass:C_},mt,Ic,{provide:Wi,useFactory:function rN(e){return e.routerState.root},deps:[mt]},V_,[]];function w6(){return new LM("Router",mt)}let cN=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[C6,[],{provide:Ms,multi:!0,useValue:n},{provide:aN,useFactory:D6,deps:[[mt,new Tt,new hu]]},{provide:Kd,useValue:r||{}},r?.useHash?{provide:ji,useClass:kG}:{provide:ji,useClass:pk},{provide:U_,useFactory:()=>{const e=N(Y4),t=N(ue),n=N(Kd),r=N(qd),i=N(yc);return n.scrollOffset&&e.setOffset(n.scrollOffset),new nN(i,r,e,t,n)}},r?.preloadingStrategy?y6(r.preloadingStrategy).\u0275providers:[],{provide:LM,multi:!0,useFactory:w6},r?.initialNavigation?T6(r):[],r?.bindToComponentInputs?Ar(8,[OR,{provide:$d,useExisting:OR}]).\u0275providers:[],[{provide:lN,useFactory:iN},{provide:Nm,multi:!0,useExisting:lN}]]}}static forChild(n){return{ngModule:e,providers:[{provide:Ms,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||e)(x(aN,8))}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();function D6(e){return"guarded"}function T6(e){return["disabled"===e.initialNavigation?Ar(3,[{provide:Im,multi:!0,useFactory:()=>{const t=N(mt);return()=>{t.setUpLocationChangeListener()}}},{provide:j_,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Ar(2,[{provide:j_,useValue:0},{provide:Im,multi:!0,deps:[pt],useFactory:t=>{const n=t.get(AG,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(mt),o=t.get(oN);JR(i,()=>{r(!0)}),t.get(qd).afterPreactivation=()=>(r(!0),o.closed?H(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const lN=new A("");function uN(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(l){return void n(l)}a.done?t(c):Promise.resolve(c).then(r,i)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(c){uN(o,r,i,s,a,"next",c)}function a(c){uN(o,r,i,s,a,"throw",c)}s(void 0)})}}let dN=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(w(yr),w(nn))}}static{this.\u0275dir=$({type:e})}}return e})(),Gi=(()=>{class e extends dN{static{this.\u0275fac=function(){let n;return function(i){return(n||(n=ct(e)))(i||e)}}()}static{this.\u0275dir=$({type:e,features:[fe]})}}return e})();const Jn=new A("NgValueAccessor"),k6={provide:Jn,useExisting:we(()=>Rc),multi:!0},N6=new A("CompositionEventMode");let Rc=(()=>{class e extends dN{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function R6(){const e=ri()?ri().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(w(yr),w(nn),w(N6,8))}}static{this.\u0275dir=$({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&ye("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Re([k6]),fe]})}}return e})();function ci(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function fN(e){return null!=e&&"number"==typeof e.length}const _t=new A("NgValidators"),li=new A("NgAsyncValidators"),x6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qd{static min(t){return function pN(e){return t=>{if(ci(t.value)||ci(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(t)}static max(t){return function gN(e){return t=>{if(ci(t.value)||ci(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(t)}static required(t){return function mN(e){return ci(e.value)?{required:!0}:null}(t)}static requiredTrue(t){return function _N(e){return!0===e.value?null:{required:!0}}(t)}static email(t){return function yN(e){return ci(e.value)||x6.test(e.value)?null:{email:!0}}(t)}static minLength(t){return function vN(e){return t=>ci(t.value)||!fN(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function CN(e){return t=>fN(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static pattern(t){return function wN(e){if(!e)return Xd;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),r=>{if(ci(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return SN(t)}static composeAsync(t){return AN(t)}}function Xd(e){return null}function bN(e){return null!=e}function EN(e){return Ya(e)?Xe(e):e}function IN(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function DN(e,t){return t.map(n=>n(e))}function TN(e){return e.map(t=>function P6(e){return!e.validate}(t)?t:n=>t.validate(n))}function SN(e){if(!e)return null;const t=e.filter(bN);return 0==t.length?null:function(n){return IN(DN(n,t))}}function B_(e){return null!=e?SN(TN(e)):null}function AN(e){if(!e)return null;const t=e.filter(bN);return 0==t.length?null:function(n){return function A6(...e){const t=hI(e),{args:n,keys:r}=tR(e),i=new Me(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,l=s;for(let u=0;u<s;u++){let d=!1;Qt(n[u]).subscribe($e(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?rR(r,a):a),o.complete())}))}});return t?i.pipe(nR(t)):i}(DN(n,t).map(EN)).pipe(me(IN))}}function $_(e){return null!=e?AN(TN(e)):null}function MN(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function kN(e){return e._rawValidators}function RN(e){return e._rawAsyncValidators}function H_(e){return e?Array.isArray(e)?e:[e]:[]}function Zd(e,t){return Array.isArray(e)?e.includes(t):e===t}function NN(e,t){const n=H_(t);return H_(e).forEach(i=>{Zd(n,i)||n.push(i)}),n}function xN(e,t){return H_(t).filter(n=>!Zd(e,n))}class PN{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=B_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class kt extends PN{get formDirective(){return null}get path(){return null}}class ui extends PN{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ON{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let z_=(()=>{class e extends ON{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(w(ui,2))}}static{this.\u0275dir=$({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Zu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[fe]})}}return e})(),FN=(()=>{class e extends ON{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(w(kt,10))}}static{this.\u0275dir=$({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Zu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[fe]})}}return e})();const Nc="VALID",eh="INVALID",ks="PENDING",xc="DISABLED";function q_(e){return(th(e)?e.validators:e)||null}function K_(e,t){return(th(t)?t.asyncValidators:e)||null}function th(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function VN(e,t,n){const r=e.controls;if(!(t?Object.keys(r):r).length)throw new b(1e3,"");if(!r[n])throw new b(1001,"")}function UN(e,t,n){e._forEachChild((r,i)=>{if(void 0===n[i])throw new b(1002,"")})}class nh{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Nc}get invalid(){return this.status===eh}get pending(){return this.status==ks}get disabled(){return this.status===xc}get enabled(){return this.status!==xc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(NN(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(NN(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(xN(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(xN(t,this._rawAsyncValidators))}hasValidator(t){return Zd(this._rawValidators,t)}hasAsyncValidator(t){return Zd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=ks,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=xc,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Nc,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Nc||this.status===ks)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xc:Nc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=ks,this._hasOwnPendingAsyncValidator=!0;const n=EN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?xc:this.errors?eh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ks)?ks:this._anyControlsHaveStatus(eh)?eh:Nc}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){th(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function V6(e){return Array.isArray(e)?B_(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function U6(e){return Array.isArray(e)?$_(e):e||null}(this._rawAsyncValidators)}}class Pc extends nh{constructor(t,n,r){super(q_(n),K_(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){UN(this,0,t),Object.keys(t).forEach(r=>{VN(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class jN extends Pc{}const qi=new A("CallSetDisabledState",{providedIn:"root",factory:()=>Oc}),Oc="always";function rh(e,t){return[...t.path,e]}function Fc(e,t,n=Oc){Y_(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function B6(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&BN(e,t)})}(e,t),function H6(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function $6(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&BN(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function j6(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function ih(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),sh(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function oh(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function Y_(e,t){const n=kN(e);null!==t.validator?e.setValidators(MN(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=RN(e);null!==t.asyncValidator?e.setAsyncValidators(MN(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();oh(t._rawValidators,i),oh(t._rawAsyncValidators,i)}function sh(e,t){let n=!1;if(null!==e){if(null!==t.validator){const i=kN(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(null!==t.asyncValidator){const i=RN(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}const r=()=>{};return oh(t._rawValidators,r),oh(t._rawAsyncValidators,r),n}function BN(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function X_(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function Z_(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===Rc?n=o:function G6(e){return Object.getPrototypeOf(e.constructor)===Gi}(o)?r=o:i=o}),i||r||n||null}function zN(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function WN(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const Vc=class extends nh{constructor(t=null,n,r){super(q_(n),K_(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),th(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=WN(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){zN(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){zN(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){WN(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},X6={provide:ui,useExisting:we(()=>ey)},KN=(()=>Promise.resolve())();let ey=(()=>{class e extends ui{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Vc,this._registered=!1,this.name="",this.update=new Fe,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Z_(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),X_(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){KN.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&vs(r);KN.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?rh(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(w(kt,9),w(_t,10),w(li,10),w(Jn,10),w(hd,8),w(qi,8))}}static{this.\u0275dir=$({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Re([X6]),fe,dn]})}}return e})(),YN=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=$({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})(),XN=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();const ty=new A("NgModelWithFormControlWarning"),r7={provide:kt,useExisting:we(()=>ah)};let ah=(()=>{class e extends kt{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Fe,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(sh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return Fc(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){ih(n.control||null,n,!1),function q6(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function HN(e,t){e._syncPendingControls(),t.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(ih(r||null,n),(e=>e instanceof Vc)(i)&&(Fc(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function $N(e,t){Y_(e,t)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function z6(e,t){return sh(e,t)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Y_(this.form,this),this._oldForm&&sh(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||e)(w(_t,10),w(li,10),w(qi,8))}}static{this.\u0275dir=$({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&ye("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Re([r7]),fe,dn]})}}return e})();const s7={provide:ui,useExisting:we(()=>iy)};let iy=(()=>{class e extends ui{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Fe,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Z_(0,o)}ngOnChanges(n){this._added||this._setUpControl(),X_(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return rh(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||e)(w(kt,13),w(_t,10),w(li,10),w(Jn,10),w(ty,8))}}static{this.\u0275dir=$({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Re([s7]),fe,dn]})}}return e})(),fx=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[XN]})}}return e})();class px extends nh{constructor(t,n,r){super(q_(n),K_(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){UN(this,0,t),t.forEach((r,i)=>{VN(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function gx(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let mx=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new e;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let o={};return gx(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Pc(i,o)}record(n,r=null){const i=this._reduceControls(n);return new jN(i,r)}control(n,r,i){let o={};return this.useNonNullable?(gx(r)?o=r:(o.validators=r,o.asyncValidators=i),new Vc(n,{...o,nonNullable:!0})):new Vc(n,r,i)}array(n,r,i){const o=n.map(s=>this._createControl(s));return new px(o,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof Vc||n instanceof nh?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),w7=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:qi,useValue:n.callSetDisabledState??Oc}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[fx]})}}return e})(),b7=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:ty,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:qi,useValue:n.callSetDisabledState??Oc}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[fx]})}}return e})();const D=function(e,t){if(!e)throw Rs(t)},Rs=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},_x=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ch={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,l=c?e[i+2]:0;let h=(15&a)<<2|l>>6,f=63&l;c||(f=64,s||(h=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_x(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(1023&c))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==l||null==d)throw Error();r.push(o<<2|a>>4),64!==l&&(r.push(a<<4&240|l>>2),64!==d&&r.push(l<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},yx=function(e){const t=_x(e);return ch.encodeByteArray(t,!0)},lh=function(e){return yx(e).replace(/\./g,"")},ly=function(e){try{return ch.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function I7(e){return vx(void 0,e)}function vx(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!D7(n)||(e[n]=vx(e[n],t[n]));return e}function D7(e){return"__proto__"!==e}class Ns{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(n):t(n,r))}}}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function uy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function dy(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Cx(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Yi(){return"object"==typeof indexedDB}function Uc(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){t(n)}})}function hy(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class kr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,er.prototype.create)}}class er{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?function M7(e,t){return e.replace(k7,(n,r)=>{const i=t[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new kr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const k7=/\{\$([^}]+)}/g;function jc(e){return JSON.parse(e)}function Ke(e){return JSON.stringify(e)}const uh=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=jc(ly(o[0])||""),n=jc(ly(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};function tr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function xs(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function fy(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function dh(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function hh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(wx(o)&&wx(s)){if(!hh(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wx(e){return null!==e&&"object"==typeof e}function Ps(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Bc(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function $c(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class x7{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if("string"==typeof t)for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let l,u,i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(l=a^o&(s^a),u=1518500249):(l=o^s^a,u=1859775393):d<60?(l=o&s|a&(o|s),u=2400959708):(l=o^s^a,u=3395469782);const h=(i<<5|i>>>27)+l+c+u+r[d]&4294967295;c=a,a=s,s=4294967295&(o<<30|o>>>2),o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(null==t)return;void 0===n&&(n=t.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<n;){if(0===s)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const t=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}}class O7{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(void 0===t&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function F7(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:n,complete:r},void 0===i.next&&(i.next=py),void 0===i.error&&(i.error=py),void 0===i.complete&&(i.complete=py);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){void 0===this.observers||void 0===this.observers[t]||(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function py(){}function Os(e,t){return`${e} failed: ${t} argument `}const fh=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},V7=1e3,U7=2,j7=144e5,B7=.5;function gy(e,t=V7,n=U7){const r=t*Math.pow(n,e),i=Math.round(B7*r*(Math.random()-.5)*2);return Math.min(j7,r+i)}function Rt(e){return e&&e._delegate?e._delegate:e}class yt{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const Qi="[DEFAULT]";class H7{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new Ns;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),i=null!==(n=t?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function W7(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:Qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=Qi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){var t=this;return m(function*(){const n=Array.from(t.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(t=Qi){return this.instances.has(t)}getOptions(t=Qi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t,e===Qi?void 0:e),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var e;return r||null}normalizeInstanceIdentifier(t=Qi){return this.component?this.component.multipleInstances?t:Qi:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G7{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new H7(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}const my=[];var _e=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(_e||{});const bx={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},q7=_e.INFO,K7={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Y7=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=K7[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Fs{constructor(t){this.name=t,this._logLevel=q7,this._logHandler=Y7,this._userLogHandler=null,my.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _e))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?bx[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...t),this._logHandler(this,_e.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...t),this._logHandler(this,_e.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...t),this._logHandler(this,_e.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...t),this._logHandler(this,_e.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...t),this._logHandler(this,_e.ERROR,...t)}}const Q7=(e,t)=>t.some(n=>e instanceof n);let Ex,Ix;const Dx=new WeakMap,_y=new WeakMap,Tx=new WeakMap,yy=new WeakMap,vy=new WeakMap;let Cy={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return _y.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Tx.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Rr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function r9(e){return"function"==typeof e?function n9(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Z7(){return Ix||(Ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...t){return e.apply(wy(this),t),Rr(Dx.get(this))}:function(...t){return Rr(e.apply(wy(this),t))}:function(t,...n){const r=e.call(wy(this),t,...n);return Tx.set(r,t.sort?t.sort():[t]),Rr(r)}}(e):(e instanceof IDBTransaction&&function e9(e){if(_y.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});_y.set(e,t)}(e),Q7(e,function X7(){return Ex||(Ex=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,Cy):e)}function Rr(e){if(e instanceof IDBRequest)return function J7(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Rr(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&Dx.set(n,e)}).catch(()=>{}),vy.set(t,e),t}(e);if(yy.has(e))return yy.get(e);const t=r9(e);return t!==e&&(yy.set(e,t),vy.set(t,e)),t}const wy=e=>vy.get(e);function ph(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=Rr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Rr(s.result),c.oldVersion,c.newVersion,Rr(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function by(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),Rr(n).then(()=>{})}const i9=["get","getKey","getAll","getAllKeys","count"],o9=["put","add","delete","clear"],Ey=new Map;function Sx(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ey.get(t))return Ey.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=o9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!i9.includes(n))return;const o=function(){var s=m(function*(a,...c){const l=this.transaction(a,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(c.shift())),(yield Promise.all([u[n](...c),i&&l.done]))[0]});return function(c){return s.apply(this,arguments)}}();return Ey.set(t,o),o}!function t9(e){Cy=e(Cy)}(e=>({...e,get:(t,n,r)=>Sx(t,n)||e.get(t,n,r),has:(t,n)=>!!Sx(t,n)||e.has(t,n)}));class s9{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function a9(e){const t=e.getComponent();return"VERSION"===t?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Iy="@firebase/app",Dy=new Fs("@firebase/app"),Ty="[DEFAULT]",x9={[Iy]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Xi=new Map,gh=new Map;function P9(e,t){try{e.container.addComponent(t)}catch(n){Dy.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Nt(e){const t=e.name;if(gh.has(t))return Dy.debug(`There were multiple attempts to register component ${t}.`),!1;gh.set(t,e);for(const n of Xi.values())P9(n,e);return!0}function Ls(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const di=new er("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class F9{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw di.create("app-deleted",{appName:this._name})}}const Vs="9.8.0";function L9(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:Ty,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw di.create("bad-app-name",{appName:String(r)});const i=Xi.get(r);if(i){if(hh(e,i.options)&&hh(n,i.config))return i;throw di.create("duplicate-app",{appName:r})}const o=new G7(r);for(const a of gh.values())o.addComponent(a);const s=new F9(e,n,o);return Xi.set(r,s),s}function Sy(e=Ty){const t=Xi.get(e);if(!t)throw di.create("no-app",{appName:e});return t}function Mx(){return Array.from(Xi.values())}function Ve(e,t,n){var r;let i=null!==(r=x9[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Dy.warn(a.join(" "))}Nt(new yt(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const V9="firebase-heartbeat-database",U9=1,Hc="firebase-heartbeat-store";let My=null;function kx(){return My||(My=ph(V9,U9,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Hc)}}).catch(e=>{throw di.create("storage-open",{originalErrorMessage:e.message})})),My}function ky(){return(ky=m(function*(e){try{return(yield kx()).transaction(Hc).objectStore(Hc).get(Nx(e))}catch(t){throw di.create("storage-get",{originalErrorMessage:t.message})}})).apply(this,arguments)}function Rx(e,t){return Ry.apply(this,arguments)}function Ry(){return(Ry=m(function*(e,t){try{const r=(yield kx()).transaction(Hc,"readwrite");return yield r.objectStore(Hc).put(t,Nx(e)),r.done}catch(n){throw di.create("storage-set",{originalErrorMessage:n.message})}})).apply(this,arguments)}function Nx(e){return`${e.name}!${e.options.appId}`}class H9{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new W9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var t=this;return m(function*(){const r=t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xx();if(null===t._heartbeatsCache&&(t._heartbeatsCache=yield t._heartbeatsCachePromise),t._heartbeatsCache.lastSentHeartbeatDate!==i&&!t._heartbeatsCache.heartbeats.some(o=>o.date===i))return t._heartbeatsCache.heartbeats.push({date:i,agent:r}),t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),t._storage.overwrite(t._heartbeatsCache)})()}getHeartbeatsHeader(){var t=this;return m(function*(){if(null===t._heartbeatsCache&&(yield t._heartbeatsCachePromise),null===t._heartbeatsCache||0===t._heartbeatsCache.heartbeats.length)return"";const n=xx(),{heartbeatsToSend:r,unsentEntries:i}=function z9(e,t=1024){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Px(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Px(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(t._heartbeatsCache.heartbeats),o=lh(JSON.stringify({version:2,heartbeats:r}));return t._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(t._heartbeatsCache.heartbeats=i,yield t._storage.overwrite(t._heartbeatsCache)):(t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache)),o})()}}function xx(){return(new Date).toISOString().substring(0,10)}class W9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return m(function*(){return!!Yi()&&Uc().then(()=>!0).catch(()=>!1)})()}read(){var t=this;return m(function*(){return(yield t._canUseIndexedDBPromise)&&(yield function j9(e){return ky.apply(this,arguments)}(t.app))||{heartbeats:[]}})()}overwrite(t){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return Rx(n.app,{lastSentHeartbeatDate:null!==(r=t.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}})()}add(t){var n=this;return m(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return Rx(n.app,{lastSentHeartbeatDate:null!==(r=t.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}})()}}function Px(e){return lh(JSON.stringify({version:2,heartbeats:e})).length}!function G9(e){Nt(new yt("platform-logger",t=>new s9(t),"PRIVATE")),Nt(new yt("heartbeat",t=>new H9(t),"PRIVATE")),Ve(Iy,"0.7.23",e),Ve(Iy,"0.7.23","esm2017"),Ve("fire-js","")}(""),Ve("firebase","9.8.0","app");const Ox="@firebase/installations",Ny="0.5.9",Fx=1e4,Lx=`w:${Ny}`,Vx="FIS_v2",Y9="https://firebaseinstallations.googleapis.com/v1",Q9=36e5,Nr=new er("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ux(e){return e instanceof kr&&e.code.includes("request-failed")}function xy({projectId:e}){return`${Y9}/projects/${e}/installations`}function jx(e){return{token:e.token,requestStatus:2,expiresIn:eK(e.expiresIn),creationTime:Date.now()}}function Py(e,t){return Oy.apply(this,arguments)}function Oy(){return(Oy=m(function*(e,t){const r=(yield t.json()).error;return Nr.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function Bx({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function Fy(e){return Ly.apply(this,arguments)}function Ly(){return(Ly=m(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function eK(e){return Number(e.replace("s","000"))}function Vy(){return(Vy=m(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=xy(e),i=Bx(e),o=t.getImmediate({optional:!0});if(o){const l=yield o.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:Vx,appId:e.appId,sdkVersion:Lx})},c=yield Fy(()=>fetch(r,a));if(c.ok){const l=yield c.json();return{fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:jx(l.authToken)}}throw yield Py("Create Installation",c)})).apply(this,arguments)}function Hx(e){return new Promise(t=>{setTimeout(t,e)})}const iK=/^[cdef][\w-]{21}$/,Uy="";function oK(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=function sK(e){return function rK(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return iK.test(n)?n:Uy}catch{return Uy}}function Us(e){return`${e.appName}!${e.appId}`}const js=new Map;function zx(e,t){const n=Us(e);Wx(n,t),function lK(e,t){const n=function Gx(){return!Zi&&"BroadcastChannel"in self&&(Zi=new BroadcastChannel("[Firebase] FID Change"),Zi.onmessage=e=>{Wx(e.data.key,e.data.fid)}),Zi}();n&&n.postMessage({key:e,fid:t}),function qx(){0===js.size&&Zi&&(Zi.close(),Zi=null)}()}(n,t)}function Wx(e,t){const n=js.get(e);if(n)for(const r of n)r(t)}let Zi=null;const uK="firebase-installations-database",dK=1,Ji="firebase-installations-store";let jy=null;function By(){return jy||(jy=ph(uK,dK,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Ji)}})),jy}function mh(e,t){return $y.apply(this,arguments)}function $y(){return($y=m(function*(e,t){const n=Us(e),i=(yield By()).transaction(Ji,"readwrite"),o=i.objectStore(Ji),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&zx(e,t.fid),t})).apply(this,arguments)}function Hy(e){return zy.apply(this,arguments)}function zy(){return(zy=m(function*(e){const t=Us(e),r=(yield By()).transaction(Ji,"readwrite");yield r.objectStore(Ji).delete(t),yield r.done})).apply(this,arguments)}function zc(e,t){return Wy.apply(this,arguments)}function Wy(){return(Wy=m(function*(e,t){const n=Us(e),i=(yield By()).transaction(Ji,"readwrite"),o=i.objectStore(Ji),s=yield o.get(n),a=t(s);return void 0===a?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&zx(e,a.fid),a})).apply(this,arguments)}function Gy(e){return qy.apply(this,arguments)}function qy(){return qy=m(function*(e){let t;const n=yield zc(e.appConfig,r=>{const i=function hK(e){return Yx(e||{fid:oK(),registrationStatus:0})}(r),o=function fK(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Nr.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function pK(e,t){return Ky.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:gK(e)}:{installationEntry:t}}(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===Uy?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}}),qy.apply(this,arguments)}function Ky(){return Ky=m(function*(e,t){try{const n=yield function nK(e,t){return Vy.apply(this,arguments)}(e,t);return mh(e.appConfig,n)}catch(n){throw Ux(n)&&409===n.customData.serverCode?yield Hy(e.appConfig):yield mh(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}),Ky.apply(this,arguments)}function gK(e){return Yy.apply(this,arguments)}function Yy(){return(Yy=m(function*(e){let t=yield Kx(e.appConfig);for(;1===t.registrationStatus;)yield Hx(100),t=yield Kx(e.appConfig);if(0===t.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield Gy(e);return r||n}return t})).apply(this,arguments)}function Kx(e){return zc(e,t=>{if(!t)throw Nr.create("installation-not-found");return Yx(t)})}function Yx(e){return function mK(e){return 1===e.registrationStatus&&e.registrationTime+Fx<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function Qy(){return(Qy=m(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=function yK(e,{fid:t}){return`${xy(e)}/${t}/authTokens:generate`}(e,n),i=function $x(e,{refreshToken:t}){const n=Bx(e);return n.append("Authorization",function tK(e){return`${Vx} ${e}`}(t)),n}(e,n),o=t.getImmediate({optional:!0});if(o){const l=yield o.getHeartbeatsHeader();l&&i.append("x-firebase-client",l)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Lx,appId:e.appId}})},c=yield Fy(()=>fetch(r,a));if(c.ok)return jx(yield c.json());throw yield Py("Generate Auth Token",c)})).apply(this,arguments)}function Xy(e){return Zy.apply(this,arguments)}function Zy(){return Zy=m(function*(e,t=!1){let n;const r=yield zc(e.appConfig,o=>{if(!Xx(o))throw Nr.create("not-registered");const s=o.authToken;if(!t&&function wK(e){return 2===e.requestStatus&&!function bK(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Q9}(e)}(s))return o;if(1===s.requestStatus)return n=function vK(e,t){return Jy.apply(this,arguments)}(e,t),o;{if(!navigator.onLine)throw Nr.create("app-offline");const a=function EK(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(o);return n=function CK(e,t){return ev.apply(this,arguments)}(e,a),a}});return n?yield n:r.authToken}),Zy.apply(this,arguments)}function Jy(){return(Jy=m(function*(e,t){let n=yield Qx(e.appConfig);for(;1===n.authToken.requestStatus;)yield Hx(100),n=yield Qx(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Xy(e,t):r})).apply(this,arguments)}function Qx(e){return zc(e,t=>{if(!Xx(t))throw Nr.create("not-registered");return function IK(e){return 1===e.requestStatus&&e.requestTime+Fx<Date.now()}(t.authToken)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function ev(){return ev=m(function*(e,t){try{const n=yield function _K(e,t){return Qy.apply(this,arguments)}(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield mh(e.appConfig,r),n}catch(n){if(!Ux(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield mh(e.appConfig,r)}else yield Hy(e.appConfig);throw n}}),ev.apply(this,arguments)}function Xx(e){return void 0!==e&&2===e.registrationStatus}function tv(){return(tv=m(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield Gy(t);return r?r.catch(console.error):Xy(t).catch(console.error),n.fid})).apply(this,arguments)}function nv(){return nv=m(function*(e,t=!1){const n=e;return yield function SK(e){return rv.apply(this,arguments)}(n),(yield Xy(n,t)).token}),nv.apply(this,arguments)}function rv(){return(rv=m(function*(e){const{registrationPromise:t}=yield Gy(e);t&&(yield t)})).apply(this,arguments)}function sv(e){return Nr.create("missing-app-config-values",{valueName:e})}const Zx="installations",NK=e=>{const t=e.getProvider("app").getImmediate(),n=function kK(e){if(!e||!e.options)throw sv("App Configuration");if(!e.name)throw sv("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw sv(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ls(t,"heartbeat"),_delete:()=>Promise.resolve()}},xK=e=>{const n=Ls(e.getProvider("app").getImmediate(),Zx).getImmediate();return{getId:()=>function DK(e){return tv.apply(this,arguments)}(n),getToken:i=>function TK(e){return nv.apply(this,arguments)}(n,i)}};(function PK(){Nt(new yt(Zx,NK,"PUBLIC")),Nt(new yt("installations-internal",xK,"PRIVATE"))})(),Ve(Ox,Ny),Ve(Ox,Ny,"esm2017");const av="@firebase/remote-config",Wt=new er("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class WK{constructor(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${i}.`),i}fetch(t){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(t.cacheMaxAgeMillis,r))return i;t.eTag=i&&i.eTag;const o=yield n.client.fetch(t),s=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&s.push(n.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(s),o})()}}function GK(e=navigator){return e.languages&&e.languages[0]||e.language}class qK{constructor(t,n,r,i,o,s){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(t){var n=this;return m(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},c={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:GK()},l={method:"POST",headers:a,body:JSON.stringify(c)},u=fetch(s,l),d=new Promise((v,_)=>{t.signal.addEventListener(()=>{const R=new Error("The operation was aborted.");R.name="AbortError",_(R)})});let h;try{yield Promise.race([u,d]),h=yield u}catch(v){let _="fetch-client-network";throw"AbortError"===v.name&&(_="fetch-timeout"),Wt.create(_,{originalErrorMessage:v.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let g,y;if(200===h.status){let v;try{v=yield h.json()}catch(_){throw Wt.create("fetch-client-parse",{originalErrorMessage:_.message})}g=v.entries,y=v.state}if("INSTANCE_STATE_UNSPECIFIED"===y?f=500:"NO_CHANGE"===y?f=304:("NO_TEMPLATE"===y||"EMPTY_CONFIG"===y)&&(g={}),304!==f&&200!==f)throw Wt.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})()}}class QK{constructor(t,n){this.client=t,this.storage=n}fetch(t){var n=this;return m(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(t,r)})()}attemptFetch(t,n){var r=this;return m(function*(i,{throttleEndTimeMillis:o,backoffCount:s}){yield function KK(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(Wt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(i.signal,o);try{const a=yield r.client.fetch(i);return yield r.storage.deleteThrottleMetadata(),a}catch(a){if(!function YK(e){if(!(e instanceof kr&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a))throw a;const c={throttleEndTimeMillis:Date.now()+gy(s),backoffCount:s+1};return yield r.storage.setThrottleMetadata(c),r.attemptFetch(i,c)}}).apply(this,arguments)}}class JK{constructor(t,n,r,i,o){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function yh(e,t){const n=e.target.error||void 0;return Wt.create(t,{originalErrorMessage:n&&n.message})}const eo="app_namespace_store";class rY{constructor(t,n,r,i=function nY(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{t(yh(r,"storage-open"))},n.onsuccess=r=>{e(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(eo,{keyPath:"compositeKey"})}}catch(n){t(Wt.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([eo],"readonly").objectStore(eo),c=n.createCompositeKey(t);try{const l=a.get(c);l.onerror=u=>{o(yh(u,"storage-get"))},l.onsuccess=u=>{const d=u.target.result;i(d?d.value:void 0)}}catch(l){o(Wt.create("storage-get",{originalErrorMessage:l&&l.message}))}})})()}set(t,n){var r=this;return m(function*(){const i=yield r.openDbPromise;return new Promise((o,s)=>{const c=i.transaction([eo],"readwrite").objectStore(eo),l=r.createCompositeKey(t);try{const u=c.put({compositeKey:l,value:n});u.onerror=d=>{s(yh(d,"storage-set"))},u.onsuccess=()=>{o()}}catch(u){s(Wt.create("storage-set",{originalErrorMessage:u&&u.message}))}})})()}delete(t){var n=this;return m(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([eo],"readwrite").objectStore(eo),c=n.createCompositeKey(t);try{const l=a.delete(c);l.onerror=u=>{o(yh(u,"storage-delete"))},l.onsuccess=()=>{i()}}catch(l){o(Wt.create("storage-delete",{originalErrorMessage:l&&l.message}))}})})()}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class iY{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var t=this;return m(function*(){const n=t.storage.getLastFetchStatus(),r=t.storage.getLastSuccessfulFetchTimestampMillis(),i=t.storage.getActiveConfig(),o=yield n;o&&(t.lastFetchStatus=o);const s=yield r;s&&(t.lastSuccessfulFetchTimestampMillis=s);const a=yield i;a&&(t.activeConfig=a)})()}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}function sY(){return hv.apply(this,arguments)}function hv(){return(hv=m(function*(){if(!Yi())return!1;try{return yield Uc()}catch{return!1}})).apply(this,arguments)}!function oY(){Nt(new yt("remote-config",function e(t,{instanceIdentifier:n}){const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Wt.create("registration-window");if(!Yi())throw Wt.create("indexed-db-unavailable");const{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw Wt.create("registration-project-id");if(!s)throw Wt.create("registration-api-key");if(!a)throw Wt.create("registration-app-id");const c=new rY(a,r.name,n=n||"firebase"),l=new iY(c),u=new Fs(av);u.logLevel=_e.ERROR;const d=new qK(i,Vs,n,o,s,a),h=new QK(d,c),f=new WK(h,c,l,u),p=new JK(r,f,l,c,u);return function $K(e){const t=Rt(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Ve(av,"0.3.8"),Ve(av,"0.3.8","esm2017")}();const aY="/firebase-messaging-sw.js",cY="/firebase-cloud-messaging-push-scope",nP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lY="https://fcmregistrations.googleapis.com/v1",rP="google.c.a.c_id",uY="google.c.a.c_l",dY="google.c.a.ts";var vh=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}(vh||{});function xr(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function pY(e){const n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const fv="fcm_token_details_db",gY=5,iP="fcm_token_object_Store";function pv(){return pv=m(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(fv))return null;let t=null;return(yield ph(fv,gY,{upgrade:(r=m(function*(i,o,s,a){var c;if(o<2||!i.objectStoreNames.contains(iP))return;const l=a.objectStore(iP),u=yield l.index("fcmSenderId").get(e);if(yield l.clear(),u)if(2===o){const d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;t={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:xr(d.vapidKey)}}}else if(3===o){const d=u;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:xr(d.auth),p256dh:xr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:xr(d.vapidKey)}}}else if(4===o){const d=u;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:xr(d.auth),p256dh:xr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:xr(d.vapidKey)}}}}),function(o,s,a,c){return r.apply(this,arguments)})})).close(),yield by(fv),yield by("fcm_vapid_details_db"),yield by("undefined"),function _Y(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null;var r}),pv.apply(this,arguments)}const yY="firebase-messaging-database",vY=1,to="firebase-messaging-store";let gv=null;function mv(){return gv||(gv=ph(yY,vY,{upgrade:(e,t)=>{0===t&&e.createObjectStore(to)}})),gv}function oP(e){return _v.apply(this,arguments)}function _v(){return _v=m(function*(e){const t=wv(e),r=yield(yield mv()).transaction(to).objectStore(to).get(t);if(r)return r;{const i=yield function mY(e){return pv.apply(this,arguments)}(e.appConfig.senderId);if(i)return yield yv(e,i),i}}),_v.apply(this,arguments)}function yv(e,t){return vv.apply(this,arguments)}function vv(){return(vv=m(function*(e,t){const n=wv(e),i=(yield mv()).transaction(to,"readwrite");return yield i.objectStore(to).put(t,n),yield i.done,t})).apply(this,arguments)}function Cv(){return(Cv=m(function*(e){const t=wv(e),r=(yield mv()).transaction(to,"readwrite");yield r.objectStore(to).delete(t),yield r.done})).apply(this,arguments)}function wv({appConfig:e}){return e.appId}const ut=new er("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bY(e,t){return bv.apply(this,arguments)}function bv(){return(bv=m(function*(e,t){const n=yield Tv(e),r=aP(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(Dv(e.appConfig),i)).json()}catch(s){throw ut.create("token-subscribe-failed",{errorInfo:s})}if(o.error)throw ut.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw ut.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function Ev(){return(Ev=m(function*(e,t){const n=yield Tv(e),r=aP(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${Dv(e.appConfig)}/${t.token}`,i)).json()}catch(s){throw ut.create("token-update-failed",{errorInfo:s})}if(o.error)throw ut.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw ut.create("token-update-no-token");return o.token})).apply(this,arguments)}function sP(e,t){return Iv.apply(this,arguments)}function Iv(){return(Iv=m(function*(e,t){const r={method:"DELETE",headers:yield Tv(e)};try{const o=yield(yield fetch(`${Dv(e.appConfig)}/${t}`,r)).json();if(o.error)throw ut.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw ut.create("token-unsubscribe-failed",{errorInfo:i})}})).apply(this,arguments)}function Dv({projectId:e}){return`${lY}/projects/${e}/registrations`}function Tv(e){return Sv.apply(this,arguments)}function Sv(){return(Sv=m(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function aP({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==nP&&(i.web.applicationPubKey=r),i}const IY=6048e5;function Av(){return Av=m(function*(e){const t=yield function SY(e,t){return Nv.apply(this,arguments)}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:xr(t.getKey("auth")),p256dh:xr(t.getKey("p256dh"))},r=yield oP(e.firebaseDependencies);if(r){if(function AY(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+IY?function TY(e,t){return kv.apply(this,arguments)}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield sP(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return lP(e.firebaseDependencies,n)}return lP(e.firebaseDependencies,n)}),Av.apply(this,arguments)}function Mv(){return Mv=m(function*(e){const t=yield oP(e.firebaseDependencies);t&&(yield sP(e.firebaseDependencies,t.token),yield function CY(e){return Cv.apply(this,arguments)}(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),Mv.apply(this,arguments)}function kv(){return kv=m(function*(e,t){try{const n=yield function EY(e,t){return Ev.apply(this,arguments)}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield yv(e.firebaseDependencies,r),n}catch(n){throw yield function cP(e){return Mv.apply(this,arguments)}(e),n}}),kv.apply(this,arguments)}function lP(e,t){return Rv.apply(this,arguments)}function Rv(){return(Rv=m(function*(e,t){const r={token:yield bY(e,t),createTime:Date.now(),subscriptionOptions:t};return yield yv(e,r),r.token})).apply(this,arguments)}function Nv(){return(Nv=m(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pY(t)})})).apply(this,arguments)}function uP(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function MY(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function kY(e,t){t.data&&(e.data=t.data)}(t,e),function RY(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function dP(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function xv(e){return ut.create("missing-app-config-values",{valueName:e})}dP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dP("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class PY{constructor(t,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function xY(e){if(!e||!e.options)throw xv("App Configuration Object");if(!e.name)throw xv("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw xv(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Pv(){return(Pv=m(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(aY,{scope:cY}),e.swRegistration.update().catch(()=>{})}catch(t){throw ut.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function Ov(){return(Ov=m(function*(e,t){if(!t&&!e.swRegistration&&(yield function hP(e){return Pv.apply(this,arguments)}(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw ut.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function Fv(){return(Fv=m(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=nP)})).apply(this,arguments)}function Lv(){return Lv=m(function*(e,t){if(!navigator)throw ut.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ut.create("permission-blocked");return yield function FY(e,t){return Fv.apply(this,arguments)}(e,t?.vapidKey),yield function OY(e,t){return Ov.apply(this,arguments)}(e,t?.serviceWorkerRegistration),function DY(e){return Av.apply(this,arguments)}(e)}),Lv.apply(this,arguments)}function Vv(){return(Vv=m(function*(e,t,n){const r=function VY(e){switch(e){case vh.NOTIFICATION_CLICKED:return"notification_open";case vh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[rP],message_name:n[uY],message_time:n[dY],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uv(){return Uv=m(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===vh.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(uP(n)):e.onMessageHandler.next(uP(n)));const r=n.data;(function NY(e){return"object"==typeof e&&!!e&&rP in e})(r)&&"1"===r["google.c.a.e"]&&(yield function LY(e,t,n){return Vv.apply(this,arguments)}(e,n.messageType,r))}),Uv.apply(this,arguments)}const pP="@firebase/messaging",jY=e=>{const t=new PY(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function UY(e,t){return Uv.apply(this,arguments)}(t,n)),t},BY=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:r=>function fP(e,t){return Lv.apply(this,arguments)}(t,r)}};function mP(){return jv.apply(this,arguments)}function jv(){return(jv=m(function*(){try{yield Uc()}catch{return!1}return typeof window<"u"&&Yi()&&hy()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function $Y(){Nt(new yt("messaging",jY,"PUBLIC")),Nt(new yt("messaging-internal",BY,"PRIVATE")),Ve(pP,"0.9.13"),Ve(pP,"0.9.13","esm2017")}();const Ch="analytics",WY="firebase_id",GY="origin",qY=6e4,KY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_P="https://www.googletagmanager.com/gtag/js",dt=new Fs("@firebase/analytics");function yP(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Hv(){return(Hv=m(function*(e,t,n,r,i,o){const s=r[i];try{if(s)yield t[s];else{const c=(yield yP(n)).find(l=>l.measurementId===i);c&&(yield t[c.appId])}}catch(a){dt.error(a)}e("config",i,o)})).apply(this,arguments)}function zv(){return(zv=m(function*(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield yP(n);for(const c of s){const l=a.find(d=>d.measurementId===c),u=l&&t[l.appId];if(!u){o=[];break}o.push(u)}}0===o.length&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){dt.error(o)}})).apply(this,arguments)}const sn=new er("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),rQ=30,vP=new class oQ{constructor(t={},n=1e3){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function sQ(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Wv(){return(Wv=m(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:sQ(r)},o=KY.replace("{app-id}",n),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(t=c.error)&&void 0!==t&&t.message&&(a=c.error.message)}catch{}throw sn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function Gv(){return(Gv=m(function*(e,t=vP,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw sn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw sn.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new dQ;return setTimeout(m(function*(){a.abort()}),void 0!==n?n:qY),CP({appId:r,apiKey:i,measurementId:o},s,a,t)})).apply(this,arguments)}function CP(e,t,n){return qv.apply(this,arguments)}function qv(){return qv=m(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=vP){const{appId:o,measurementId:s}=e;try{yield function lQ(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(sn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(r,t)}catch(a){if(s)return dt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:o,measurementId:s};throw a}try{const a=yield function aQ(e){return Wv.apply(this,arguments)}(e);return i.deleteThrottleMetadata(o),a}catch(a){if(!function uQ(e){if(!(e instanceof kr&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a)){if(i.deleteThrottleMetadata(o),s)return dt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:o,measurementId:s};throw a}const c=503===Number(a.customData.httpStatus)?gy(n,i.intervalMillis,rQ):gy(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(o,l),dt.debug(`Calling attemptFetch again in ${c} millis`),CP(e,l,r,i)}}),qv.apply(this,arguments)}class dQ{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}function Kv(){return(Kv=m(function*(){if(!Yi())return dt.warn(sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Uc()}catch(e){return dt.warn(sn.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function Yv(){return Yv=m(function*(e,t,n,r,i,o,s){var a;const c=function cQ(e){return Gv.apply(this,arguments)}(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&dt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>dt.error(f)),t.push(c);const l=function hQ(){return Kv.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[u,d]=yield Promise.all([c,l]);(function tQ(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(_P))return t;return null})()||function YY(e,t){const n=document.createElement("script");n.src=`${_P}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(o,u.measurementId),i("js",new Date);const h=null!==(a=s?.config)&&void 0!==a?a:{};return h[GY]="firebase",h.update=!0,null!=d&&(h[WY]=d),i("config",u.measurementId,h),u.measurementId}),Yv.apply(this,arguments)}class pQ{constructor(t){this.app=t}_delete(){return delete Pr[this.app.options.appId],Promise.resolve()}}let Pr={},wP=[];const bP={};let IP,Wc,wh="dataLayer",Qv=!1;function mQ(e,t,n){!function gQ(){const e=[];if(dy()&&e.push("This is a browser extension environment."),hy()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=sn.create("invalid-analytics-context",{errorInfo:t});dt.warn(n.message)}}();const r=e.options.appId;if(!r)throw sn.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw sn.create("no-api-key");dt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Pr[r])throw sn.create("already-exists",{id:r});if(!Qv){!function QY(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(wh);const{wrappedGtag:o,gtagCore:s}=function eQ(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function JY(e,t,n,r){function o(){return o=m(function*(s,a,c){try{"event"===s?yield function ZY(e,t,n,r,i){return zv.apply(this,arguments)}(e,t,n,a,c):"config"===s?yield function XY(e,t,n,r,i,o){return Hv.apply(this,arguments)}(e,t,n,r,a,c):e("set",a)}catch(l){dt.error(l)}}),o.apply(this,arguments)}return function i(s,a,c){return o.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(Pr,wP,bP,wh,"gtag");Wc=o,IP=s,Qv=!0}return Pr[r]=function fQ(e,t,n,r,i,o,s){return Yv.apply(this,arguments)}(e,wP,bP,t,IP,wh,n),new pQ(e)}function Xv(){return(Xv=m(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const o=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function EQ(){return nC.apply(this,arguments)}function nC(){return(nC=m(function*(){if(dy()||!hy()||!Yi())return!1;try{return yield Uc()}catch{return!1}})).apply(this,arguments)}const DP="@firebase/analytics";!function DQ(){Nt(new yt(Ch,(t,{options:n})=>mQ(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),Nt(new yt("analytics-internal",function e(t){try{const n=t.getProvider(Ch).getImmediate();return{logEvent:(r,i,o)=>function IQ(e,t,n,r){e=Rt(e),function _Q(e,t,n,r,i){return Xv.apply(this,arguments)}(Wc,Pr[e.app.options.appId],t,n,r).catch(i=>dt.error(i))}(n,r,i,o)}}catch(n){throw sn.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Ve(DP,"0.7.9"),Ve(DP,"0.7.9","esm2017")}();class TQ extends Ot{constructor(t,n){super()}schedule(t,n=0){return this}}const bh={setInterval(e,t,...n){const{delegate:r}=bh;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=bh;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};class SP extends TQ{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return bh.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&bh.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,bo(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}const AP={now:()=>(AP.delegate||Date).now(),delegate:void 0};class Gc{constructor(t,n=Gc.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}Gc.now=AP.now;class MP extends Gc{constructor(t,n=Gc.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}const MQ=new class AQ extends MP{}(class SQ extends SP{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}}),kQ=new MP(SP),Eh=new es("7.5.0"),rC="__angularfire_symbol__analyticsIsSupportedValue",iC="__angularfire_symbol__analyticsIsSupported",oC="__angularfire_symbol__remoteConfigIsSupportedValue",sC="__angularfire_symbol__remoteConfigIsSupported",aC="__angularfire_symbol__messagingIsSupportedValue",cC="__angularfire_symbol__messagingIsSupported";function uC(e,t,n){if(t){if(1===t.length)return t[0];const o=t.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[iC]||(globalThis[iC]=EQ().then(e=>globalThis[rC]=e).catch(()=>globalThis[rC]=!1)),globalThis[cC]||(globalThis[cC]=mP().then(e=>globalThis[aC]=e).catch(()=>globalThis[aC]=!1)),globalThis[sC]||(globalThis[sC]=sY().then(e=>globalThis[oC]=e).catch(()=>globalThis[oC]=!1));const dC=(e,t)=>{const n=t?[t]:Mx(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};function Bs(){}class kP{constructor(t,n=MQ){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{t.apply(this,[s])})},n,r)}}class RQ{constructor(t){this.zone=t,this.task=null}call(t,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bs,{},Bs,Bs)),n.pipe(lt({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hC=(()=>{class e{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new kP(Zone.current)),this.insideAngular=n.run(()=>new kP(Zone.current,kQ)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(n){return new(n||e)(x(ue))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function no(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function ro(e){return no().ngZone.run(()=>e())}function xQ(e){return no(),function PQ(e){return function(n){return(n=n.lift(new RQ(e.ngZone))).pipe(Ul(e.outsideAngular),Vl(e.insideAngular))}}(no())(e)}const OQ=(e,t)=>function(){const r=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),ro(()=>e.apply(void 0,r))},Cn=(e,t)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(t&&(n||(n=ro(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bs,{},Bs,Bs)))),r[o]=OQ(r[o],n));const i=function NQ(e){return no().ngZone.runOutsideAngular(()=>e())}(()=>e.apply(this,r));if(!t){if(i instanceof Me){const o=no();return i.pipe(Ul(o.outsideAngular),Vl(o.insideAngular))}return ro(()=>i)}return i instanceof Me?i.pipe(xQ):i instanceof Promise?ro(()=>new Promise((o,s)=>i.then(a=>ro(()=>o(a)),a=>ro(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:ro(()=>i)};class $s{constructor(t){return t}}class fC{constructor(){return Mx()}}const pC=new A("angularfire2._apps"),LQ={provide:$s,useFactory:function FQ(e){return e&&1===e.length?e[0]:new $s(Sy())},deps:[[new Tt,pC]]},VQ={provide:fC,deps:[[new Tt,pC]]};function UQ(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new $s(r)}}let jQ=(()=>{class e{constructor(n){Ve("angularfire",Eh.full,"core"),Ve("angularfire",Eh.full,"app"),Ve("angular",ZT.full,n.toString())}}return e.\u0275fac=function(n){return new(n||e)(x(Jr))},e.\u0275mod=Lt({type:e}),e.\u0275inj=Ct({providers:[LQ,VQ]}),e})();function BQ(e,...t){return{ngModule:jQ,providers:[{provide:pC,useFactory:UQ(e),multi:!0,deps:[ue,pt,hC,...t]}]}}const $Q=Cn(L9,!0),RP=new Map,HQ={activated:!1,tokenObservers:[]},zQ={initialized:!1,enabled:!1};function Je(e){return RP.get(e)||HQ}function Pn(e,t){RP.set(e,t)}function Ih(){return zQ}const gC="https://content-firebaseappcheck.googleapis.com/v1",qQ="exchangeDebugToken",NP={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class YQ{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var n=this;return m(function*(){n.stop();try{n.pending=new Ns,yield function QQ(e){return new Promise(t=>{setTimeout(t,e)})}(n.getNextRun(t)),n.pending.resolve(),yield n.pending.promise,n.pending=new Ns,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const xt=new er("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function yC(){return(yC=m(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const o={method:"POST",body:JSON.stringify(t),headers:r};let s,a;try{s=yield fetch(e,o)}catch(d){throw xt.create("fetch-network-error",{originalErrorMessage:d.message})}if(200!==s.status)throw xt.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(d){throw xt.create("fetch-parse-error",{originalErrorMessage:d.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw xt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(c[1]),u=Date.now();return{token:a.token,expireTimeMillis:u+l,issuedAtTimeMillis:u}})).apply(this,arguments)}const nX="firebase-app-check-database",rX=1,qc="firebase-app-check-store";let Sh=null;function vC(){return(vC=m(function*(e,t){const r=(yield function OP(){return Sh||(Sh=new Promise((e,t)=>{try{const n=indexedDB.open(nX,rX);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(xt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(qc,{keyPath:"compositeKey"})}}catch(n){t(xt.create("storage-open",{originalErrorMessage:n.message}))}}),Sh)}()).transaction(qc,"readwrite"),o=r.objectStore(qc).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(xt.create("storage-set",{originalErrorMessage:null===(l=c.target.error)||void 0===l?void 0:l.message}))}})})).apply(this,arguments)}const Kc=new Fs("@firebase/app-check");function UP(e,t){return Yi()?function oX(e,t){return function FP(e,t){return vC.apply(this,arguments)}(function VP(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(n=>{Kc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function EC(){return(EC=m(function*(){const e=Ih();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const dX={error:"UNKNOWN_ERROR"};function hX(e){return ch.encodeString(JSON.stringify(e),!1)}function Ah(e){return IC.apply(this,arguments)}function IC(){return(IC=m(function*(e,t=!1){const n=e.app;!function xP(e){if(!Je(e).activated)throw xt.create("use-before-activation",{appName:e.name})}(n);const r=Je(n);let o,i=r.token;if(!i){const c=yield r.cachedTokenPromise;c&&Mh(c)&&(i=c)}if(!t&&i&&Mh(i))return{token:i.token};let a,s=!1;if(function jP(){return Ih().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function _C(e,t){return yC.apply(this,arguments)}(function tX(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${gC}/projects/${n}/apps/${r}:${qQ}?key=${i}`,body:{debug_token:t}}}(n,yield function BP(){return EC.apply(this,arguments)}()),e.heartbeatServiceProvider).then(l=>(r.exchangeTokenPromise=void 0,l)),s=!0);const c=yield r.exchangeTokenPromise;return yield UP(n,c),Pn(n,Object.assign(Object.assign({},r),{token:c})),{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(c=>(r.exchangeTokenPromise=void 0,c)),s=!0),i=yield r.exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?Kc.warn(c.message):Kc.error(c),o=c}return i?(a={token:i.token},Pn(n,Object.assign(Object.assign({},r),{token:i})),yield UP(n,i)):a=function pX(e){return{token:hX(dX),error:e}}(o),s&&function HP(e,t){const n=Je(e).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch{}}(n,a),a})).apply(this,arguments)}function TC(e,t){const n=Je(e),r=n.tokenObservers.filter(i=>i.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Pn(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function $P(e){const{app:t}=e,n=Je(t);let r=n.tokenRefresher;r||(r=function fX(e){const{app:t}=e;return new YQ(m(function*(){let r;if(r=Je(t).token?yield Ah(e,!0):yield Ah(e),r.error)throw r.error}),()=>!0,()=>{const n=Je(t);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},NP.RETRIAL_MIN_WAIT,NP.RETRIAL_MAX_WAIT)}(e),Pn(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Mh(e){return e.expireTimeMillis-Date.now()>0}class gX{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Je(this.app);for(const n of t)TC(this.app,n.next);return Promise.resolve()}}const XP="app-check-internal";!function MX(){Nt(new yt("app-check",e=>function mX(e,t){return new gX(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(XP).initialize()})),Nt(new yt(XP,e=>function _X(e){return{getToken:t=>Ah(e,t),addTokenListener:t=>function DC(e,t,n,r){const{app:i}=e,o=Je(i),s={next:n,error:r,type:t};if(Pn(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,s]})),o.token&&Mh(o.token)){const a=o.token;Promise.resolve().then(()=>{n({token:a.token}),$P(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>$P(e))}(e,"INTERNAL",t),removeTokenListener:t=>TC(e.app,t)}}(e.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Ve("@firebase/app-check","0.5.8")}();class kC{constructor(){return dC("app-check")}}typeof window<"u"&&window;const PX=function JP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},eO=new er("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tO=new Fs("@firebase/auth");function Rh(e,...t){tO.logLevel<=_e.ERROR&&tO.error(`Auth (${Vs}): ${e}`,...t)}function Gt(e,...t){throw NC(e,...t)}function nr(e,...t){return NC(e,...t)}function NC(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return eO.create(e,...t)}function S(e,t,...n){if(!e)throw NC(t,...n)}function rr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Rh(t),new Error(t)}function hi(e,t){e||rr(t)}const rO=new Map;function Or(e){hi(e instanceof Function,"Expected a class definition");let t=rO.get(e);return t?(hi(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rO.set(e,t),t)}function Yc(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function iO(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Qc{constructor(t,n){this.shortDelay=t,this.longDelay=n,hi(n>t,"Short delay should be less than long delay!"),this.isMobile=uy()||Cx()}get(){return function LX(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function xC(){return"http:"===iO()||"https:"===iO()}()||dy()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function PC(e,t){hi(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class oO{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const UX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},jX=new Qc(3e4,6e4);function Ye(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function et(e,t,n,r){return OC.apply(this,arguments)}function OC(){return(OC=m(function*(e,t,n,r,i={}){return sO(e,i,m(function*(){let o={},s={};r&&("GET"===t?s=r:o={body:JSON.stringify(r)});const a=Ps(Object.assign({key:e.config.apiKey},s)).slice(1),c=yield e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),oO.fetch()(aO(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function sO(e,t,n){return FC.apply(this,arguments)}function FC(){return(FC=m(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},UX),t);try{const i=new BX(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Nh(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Nh(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Nh(e,"email-already-in-use",s);const u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw function nO(e,t,n){const r=Object.assign(Object.assign({},PX()),{[t]:n});return new er("auth","Firebase",r).create(t,{appName:e.name})}(e,u,l);Gt(e,u)}}catch(i){if(i instanceof kr)throw i;Gt(e,"network-request-failed")}})).apply(this,arguments)}function Fr(e,t,n,r){return LC.apply(this,arguments)}function LC(){return(LC=m(function*(e,t,n,r,i={}){const o=yield et(e,t,n,r,i);return"mfaPendingCredential"in o&&Gt(e,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function aO(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?PC(e.config,i):`${e.config.apiScheme}://${i}`}class BX{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),jX.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Nh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=nr(e,t,r);return i.customData._tokenResponse=n,i}function VC(){return(VC=m(function*(e,t){return et(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function jC(){return(jC=m(function*(e,t){return et(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function Xc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function BC(){return(BC=m(function*(e,t=!1){const n=Rt(e),r=yield n.getIdToken(t),i=xh(r);S(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xc($C(i.auth_time)),issuedAtTime:Xc($C(i.iat)),expirationTime:Xc($C(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function $C(e){return 1e3*Number(e)}function xh(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Rh("JWT malformed, contained fewer than 3 sections"),null;try{const i=ly(n);return i?JSON.parse(i):(Rh("Failed to decode base64 JWT payload"),null)}catch(i){return Rh("Caught error parsing JWT payload as JSON",i),null}}function Lr(e,t){return HC.apply(this,arguments)}function HC(){return(HC=m(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof kr&&function qX({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}class KX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(m(function*(){yield n.iteration()}),r)}iteration(){var t=this;return m(function*(){try{yield t.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n.code&&t.schedule(!0))}t.schedule()})()}}class cO{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zc(e){return zC.apply(this,arguments)}function zC(){return zC=m(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield Lr(e,function zX(e,t){return jC.apply(this,arguments)}(n,{idToken:r}));S(i?.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?function XX(e){return e.map(t=>{var{providerId:n}=t,r=Ll(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],a=function QX(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}(e.providerData,s),u=!!e.isAnonymous&&!(e.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new cO(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,d)}),zC.apply(this,arguments)}function WC(){return(WC=m(function*(e){const t=Rt(e);yield Zc(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function GC(){return(GC=m(function*(e,t){const n=yield sO(e,{},m(function*(){const r=Ps({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=aO(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",oO.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Jc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){S(t.idToken,"internal-error"),S(typeof t.idToken<"u","internal-error"),S(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):function GX(e){const t=xh(e);return S(t,"internal-error"),S(typeof t.exp<"u","internal-error"),S(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}getToken(t){var n=this;return m(function*(r,i=!1){return S(!n.accessToken||n.refreshToken,r,"user-token-expired"),i||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null:n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(t,n){var r=this;return m(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function ZX(e,t){return GC.apply(this,arguments)}(t,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Jc;return r&&(S("string"==typeof r,"internal-error",{appName:t}),s.refreshToken=r),i&&(S("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),o&&(S("number"==typeof o,"internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Jc,this.toJSON())}_performRefresh(){return rr("not implemented")}}function fi(e,t){S("string"==typeof e||typeof e>"u","internal-error",{appName:t})}class io{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=Ll(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cO(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){var n=this;return m(function*(){const r=yield Lr(n,n.stsTokenManager.getToken(n.auth,t));return S(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(t){return function WX(e){return BC.apply(this,arguments)}(this,t)}reload(){return function YX(e){return WC.apply(this,arguments)}(this)}_assign(t){this!==t&&(S(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new io(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){S(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t){var n=this;return m(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Zc(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var t=this;return m(function*(){const n=yield t.getIdToken();return yield Lr(t,function $X(e,t){return VC.apply(this,arguments)}(t.auth,{idToken:n})),t.stsTokenManager.clearRefreshToken(),t.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,c,l,u;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=n.photoURL)&&void 0!==s?s:void 0,g=null!==(a=n.tenantId)&&void 0!==a?a:void 0,y=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,v=null!==(l=n.createdAt)&&void 0!==l?l:void 0,_=null!==(u=n.lastLoginAt)&&void 0!==u?u:void 0,{uid:R,emailVerified:O,isAnonymous:V,providerData:Ae,stsTokenManager:cn}=n;S(R&&cn,t,"internal-error");const $r=Jc.fromJSON(this.name,cn);S("string"==typeof R,t,"internal-error"),fi(d,t.name),fi(h,t.name),S("boolean"==typeof O,t,"internal-error"),S("boolean"==typeof V,t,"internal-error"),fi(f,t.name),fi(p,t.name),fi(g,t.name),fi(y,t.name),fi(v,t.name),fi(_,t.name);const wo=new io({uid:R,auth:t,email:h,emailVerified:O,displayName:d,isAnonymous:V,photoURL:p,phoneNumber:f,tenantId:g,stsTokenManager:$r,createdAt:v,lastLoginAt:_});return Ae&&Array.isArray(Ae)&&(wo.providerData=Ae.map(HE=>Object.assign({},HE))),y&&(wo._redirectEventId=y),wo}static _fromIdTokenResponse(t,n){return m(function*(r,i,o=!1){const s=new Jc;s.updateFromServerResponse(i);const a=new io({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Zc(a),a}).apply(this,arguments)}}const lO=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return m(function*(){return!0})()}_set(n,r){var i=this;return m(function*(){i.storage[n]=r})()}_get(n){var r=this;return m(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return m(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})();function Ph(e,t,n){return`firebase:${e}:${t}:${n}`}class zs{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ph(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ph("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){var t=this;return m(function*(){const n=yield t.persistence._get(t.fullUserKey);return n?io._fromJSON(t.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){var n=this;return m(function*(){if(n.persistence===t)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=t,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n){return m(function*(r,i,o="authUser"){if(!i.length)return new zs(Or(lO),r,o);const s=(yield Promise.all(i.map(function(){var d=m(function*(h){if(yield h._isAvailable())return h});return function(h){return d.apply(this,arguments)}}()))).filter(d=>d);let a=s[0]||Or(lO);const c=Ph(o,r.config.apiKey,r.name);let l=null;for(const d of i)try{const h=yield d._get(c);if(h){const f=io._fromJSON(r,h);d!==a&&(l=f),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return a._shouldAllowMigration&&u.length?(a=u[0],l&&(yield a._set(c,l.toJSON())),yield Promise.all(i.map(function(){var d=m(function*(h){if(h!==a)try{yield h._remove(c)}catch{}});return function(h){return d.apply(this,arguments)}}())),new zs(a,r,o)):new zs(a,r,o)}).apply(this,arguments)}}function uO(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fO(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dO(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gO(t))return"Blackberry";if(mO(t))return"Webos";if(qC(t))return"Safari";if((t.includes("chrome/")||hO(t))&&!t.includes("edge/"))return"Chrome";if(pO(t))return"Android";{const r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function dO(e=Ze()){return/firefox\//i.test(e)}function qC(e=Ze()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hO(e=Ze()){return/crios\//i.test(e)}function fO(e=Ze()){return/iemobile/i.test(e)}function pO(e=Ze()){return/android/i.test(e)}function gO(e=Ze()){return/blackberry/i.test(e)}function mO(e=Ze()){return/webos/i.test(e)}function Oh(e=Ze()){return/iphone|ipad|ipod/i.test(e)}function _O(e=Ze()){return Oh(e)||pO(e)||mO(e)||gO(e)||/windows phone/i.test(e)||fO(e)}function yO(e,t=[]){let n;switch(e){case"Browser":n=uO(Ze());break;case"Worker":n=`${uO(Ze())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}class nZ{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((s,a)=>{try{s(t(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){var n=this;return m(function*(){if(n.auth.currentUser===t)return;const r=[];try{for(const i of n.queue)yield i(t),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i.message})}})()}}class rZ{constructor(t,n,r){this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vO(this),this.idTokenSubscription=new vO(this),this.beforeStateQueue=new nZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eO,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){var r=this;return n&&(this._popupRedirectResolver=Or(n)),this._initializationPromise=this.queue(m(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield zs.create(r,t),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var t=this;return m(function*(){if(t._deleted)return;const n=yield t.assertedPersistence.getCurrentUser();if(t.currentUser||n){if(t.currentUser&&n&&t.currentUser.uid===n.uid)return t._currentUser._assign(n),void(yield t.currentUser.getIdToken());yield t._updateCurrentUser(n,!0)}})()}initializeCurrentUser(t){var n=this;return m(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(t&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,l=yield n.tryRedirectSignIn(t);(!a||a===c)&&l?.user&&(o=l.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return S(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(t){var n=this;return m(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,t,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(t){var n=this;return m(function*(){try{yield Zc(t)}catch(r){if("auth/network-request-failed"!==r.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(t)})()}useDeviceLanguage(){this.languageCode=function VX(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var t=this;return m(function*(){t._deleted=!0})()}updateCurrentUser(t){var n=this;return m(function*(){const r=t?Rt(t):null;return r&&S(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(t){var n=this;return m(function*(r,i=!1){if(!n._deleted)return r&&S(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(m(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var t=this;return m(function*(){return yield t.beforeStateQueue.runMiddleware(null),(t.redirectPersistenceManager||t._popupRedirectResolver)&&(yield t._setRedirectUser(null)),t._updateCurrentUser(null,!0)})()}setPersistence(t){var n=this;return this.queue(m(function*(){yield n.assertedPersistence.setPersistence(Or(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new er("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}_setRedirectUser(t,n){var r=this;return m(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===t?i.removeCurrentUser():i.setCurrentUser(t)})()}getOrInitRedirectPersistenceManager(t){var n=this;return m(function*(){if(!n.redirectPersistenceManager){const r=t&&Or(t)||n._popupRedirectResolver;S(r,n,"argument-error"),n.redirectPersistenceManager=yield zs.create(n,[Or(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(t){var n=this;return m(function*(){var r,i;return n._isInitialized&&(yield n.queue(m(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===t?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===t?n.redirectUser:null})()}_persistUserIfCurrent(t){var n=this;return m(function*(){if(t===n.currentUser)return n.queue(m(function*(){return n.directlySetCurrentUser(t)}))})()}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n),s=this._isInitialized?Promise.resolve():this._initializationPromise;return S(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof n?t.addObserver(n,r,i):t.addObserver(n)}directlySetCurrentUser(t){var n=this;return m(function*(){n.currentUser&&n.currentUser!==t&&(n._currentUser._stopProactiveRefresh(),t&&n.isProactiveRefreshEnabled&&t._startProactiveRefresh()),n.currentUser=t,t?yield n.assertedPersistence.setCurrentUser(t):yield n.assertedPersistence.removeCurrentUser()})()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return S(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var t=this;return m(function*(){var n;const r={"X-Client-Version":t.clientVersion};t.app.options.appId&&(r["X-Firebase-gmpid"]=t.app.options.appId);const i=yield null===(n=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function qt(e){return Rt(e)}class vO{constructor(t){this.auth=t,this.observer=null,this.addObserver=function P7(e,t){const n=new O7(e,t);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return S(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class el{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return rr("not implemented")}_getIdTokenResponse(t){return rr("not implemented")}_linkToIdToken(t,n){return rr("not implemented")}_getReauthenticationResolver(t){return rr("not implemented")}}function EO(e,t){return YC.apply(this,arguments)}function YC(){return(YC=m(function*(e,t){return et(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function XC(){return(XC=m(function*(e,t){return Fr(e,"POST","/v1/accounts:signInWithPassword",Ye(e,t))})).apply(this,arguments)}function rw(){return(rw=m(function*(e,t){return Fr(e,"POST","/v1/accounts:signInWithEmailLink",Ye(e,t))})).apply(this,arguments)}function iw(){return(iw=m(function*(e,t){return Fr(e,"POST","/v1/accounts:signInWithEmailLink",Ye(e,t))})).apply(this,arguments)}class tl extends el{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new tl(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new tl(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n="string"==typeof t?JSON.parse(t):t;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){var n=this;return m(function*(){switch(n.signInMethod){case"password":return function aZ(e,t){return XC.apply(this,arguments)}(t,{returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function hZ(e,t){return rw.apply(this,arguments)}(t,{email:n._email,oobCode:n._password});default:Gt(t,"internal-error")}})()}_linkToIdToken(t,n){var r=this;return m(function*(){switch(r.signInMethod){case"password":return EO(t,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function fZ(e,t){return iw.apply(this,arguments)}(t,{idToken:n,email:r._email,oobCode:r._password});default:Gt(t,"internal-error")}})()}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}function Vr(e,t){return ow.apply(this,arguments)}function ow(){return(ow=m(function*(e,t){return Fr(e,"POST","/v1/accounts:signInWithIdp",Ye(e,t))})).apply(this,arguments)}class il{constructor(t){var n,r,i,o,s,a;const c=Bc($c(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,u=null!==(r=c.oobCode)&&void 0!==r?r:null,d=function CZ(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);S(l&&u&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=u,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(t){const n=function wZ(e){const t=Bc($c(e)).link,n=t?Bc($c(t)).deep_link_id:null,r=Bc($c(e)).deep_link_id;return(r?Bc($c(r)).link:null)||r||n||t||e}(t);try{return new il(n)}catch{return null}}}let IO=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,r){return tl._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){const i=il.parseLink(r);return S(i,"argument-error"),tl._fromEmailAndCode(n,i.code,i.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class Ur{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class bZ extends Ur{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}function dw(){return(dw=m(function*(e,t){return Fr(e,"POST","/v1/accounts:signUp",Ye(e,t))})).apply(this,arguments)}class wn{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r){return m(function*(i,o,s,a=!1){const c=yield io._fromIdTokenResponse(i,s,a),l=TO(s);return new wn({user:c,providerId:l,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(t,n,r){return m(function*(){yield t._updateTokensIfNecessary(r,!0);const i=TO(r);return new wn({user:t,providerId:i,_tokenResponse:r,operationType:n})})()}}function TO(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Vh extends kr{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:t.name,tenantId:null!==(o=t.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new Vh(t,n,r,i)}}function SO(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Vh._fromErrorAndOperation(e,o,t,r):o})}function gw(){return(gw=m(function*(e,t,n=!1){const r=yield Lr(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return wn._forOperation(e,"link",r)})).apply(this,arguments)}function _w(){return(_w=m(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const o=yield Lr(e,SO(r,i,t,e),n);S(o.idToken,r,"internal-error");const s=xh(o.idToken);S(s,r,"internal-error");const{sub:a}=s;return S(e.uid===a,r,"user-mismatch"),wn._forOperation(e,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Gt(r,"user-mismatch"),o}})).apply(this,arguments)}function kO(e,t){return yw.apply(this,arguments)}function yw(){return(yw=m(function*(e,t,n=!1){const r="signIn",i=yield SO(e,r,t),o=yield wn._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})).apply(this,arguments)}function Cw(){return(Cw=m(function*(e,t){return kO(qt(e),t)})).apply(this,arguments)}function MZ(e,t,n){return Rw.apply(this,arguments)}function Rw(){return(Rw=m(function*(e,t,n){const r=qt(e),i=yield function DO(e,t){return dw.apply(this,arguments)}(r,{returnSecureToken:!0,email:t,password:n}),o=yield wn._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(o.user),o})).apply(this,arguments)}function kZ(e,t,n){return function vw(e,t){return Cw.apply(this,arguments)}(Rt(e),IO.credential(t,n))}function UZ(e){return Rt(e).signOut()}const $h="__sak";class xO{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem($h,"1"),this.storage.removeItem($h),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const GZ=(()=>{class e extends xO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function HZ(){const e=Ze();return qC(e)||Oh(e)}()&&function tZ(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_O(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function eZ(){return function S7(){const e=Ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return m(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return m(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return m(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return e.type="LOCAL",e})(),PO=(()=>{class e extends xO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})();let KZ=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return m(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const l=Array.from(c).map(function(){var d=m(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),u=yield function qZ(e){return Promise.all(e.map(function(){var t=m(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return t.apply(this,arguments)}}()))}(l);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:u})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Ww(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class YZ{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n){var r=this;return m(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,l;return new Promise((u,d)=>{const h=Ww("",20);a.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},s);l={messageChannel:a,onMessage(p){const g=p;if(g.data.eventId===h)switch(g.data.status){case"ack":clearTimeout(f),c=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),u(g.data.response);break;default:clearTimeout(f),clearTimeout(c),d(new Error("invalid_response"))}}},r.handlers.add(l),a.port1.addEventListener("message",l.onMessage),r.target.postMessage({eventType:i,eventId:h,data:o},[a.port2])}).finally(()=>{l&&r.removeMessageHandler(l)})}).apply(this,arguments)}}function Qe(){return window}function Gw(){return typeof Qe().WorkerGlobalScope<"u"&&"function"==typeof Qe().importScripts}function qw(){return(qw=m(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const OO="firebaseLocalStorageDb",Hh="firebaseLocalStorage",FO="fbase_key";class sl{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function zh(e,t){return e.transaction([Hh],t?"readwrite":"readonly").objectStore(Hh)}function Kw(){const e=indexedDB.open(OO,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Hh,{keyPath:FO})}catch(i){n(i)}}),e.addEventListener("success",m(function*(){const r=e.result;r.objectStoreNames.contains(Hh)?t(r):(r.close(),yield function tJ(){const e=indexedDB.deleteDatabase(OO);return new sl(e).toPromise()}(),t(yield Kw()))}))})}function LO(e,t,n){return Yw.apply(this,arguments)}function Yw(){return(Yw=m(function*(e,t,n){const r=zh(e,!0).put({[FO]:t,value:n});return new sl(r).toPromise()})).apply(this,arguments)}function Qw(){return(Qw=m(function*(e,t){const n=zh(e,!1).get(t),r=yield new sl(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function VO(e,t){const n=zh(e,!0).delete(t);return new sl(n).toPromise()}const oJ=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return m(function*(){return n.db||(n.db=yield Kw()),n.db})()}_withRetries(n){var r=this;return m(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return m(function*(){return Gw()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return m(function*(){n.receiver=KZ._getInstance(function JZ(){return Gw()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=m(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=m(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return m(function*(){var r,i;if(n.activeServiceWorker=yield function XZ(){return qw.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new YZ(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return m(function*(){if(r.sender&&r.activeServiceWorker&&function ZZ(){var e;return(null===(e=navigator?.serviceWorker)||void 0===e?void 0:e.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return m(function*(){try{if(!indexedDB)return!1;const n=yield Kw();return yield LO(n,$h,"1"),yield VO(n,$h),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return m(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return m(function*(){return i._withPendingWrite(m(function*(){return yield i._withRetries(o=>LO(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return m(function*(){const i=yield r._withRetries(o=>function nJ(e,t){return Qw.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return m(function*(){return r._withPendingWrite(m(function*(){return yield r._withRetries(i=>VO(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return m(function*(){const r=yield n._withRetries(s=>{const a=zh(s,!1).getAll();return new sl(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(m(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function jO(e){return`__${e}${Math.floor(1e6*Math.random())}`}jO("rcb"),new Qc(3e4,6e4);class sb extends el{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Vr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Vr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Vr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function bJ(e){return kO(e.auth,new sb(e),e.bypassAuthState)}function EJ(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),function MO(e,t){return _w.apply(this,arguments)}(n,new sb(e),e.bypassAuthState)}function IJ(e){return ab.apply(this,arguments)}function ab(){return(ab=m(function*(e){const{auth:t,user:n}=e;return S(n,t,"internal-error"),function pw(e,t){return gw.apply(this,arguments)}(n,new sb(e),e.bypassAuthState)})).apply(this,arguments)}class DJ{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var t=this;return new Promise(function(){var n=m(function*(r,i){t.pendingPromise={resolve:r,reject:i};try{t.eventManager=yield t.resolver._initialize(t.auth),yield t.onExecution(),t.eventManager.registerConsumer(t)}catch(o){t.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(t){var n=this;return m(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=t;if(a)return void n.reject(a);const l={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(l))}catch(u){n.reject(u)}})()}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return bJ;case"linkViaPopup":case"linkViaRedirect":return IJ;case"reauthViaPopup":case"reauthViaRedirect":return EJ;default:Gt(this.auth,"internal-error")}}resolve(t){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Qc(2e3,1e4);const TJ="pendingRedirect",al=new Map;class SJ extends DJ{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var t=()=>super.execute,n=this;return m(function*(){let r=al.get(n.auth._key());if(!r){try{const o=(yield function AJ(e,t){return hb.apply(this,arguments)}(n.resolver,n.auth))?yield t().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}al.set(n.auth._key(),r)}return n.bypassAuthState||al.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(t){var n=()=>super.onAuthEvent,r=this;return m(function*(){if("signInViaRedirect"===t.type)return n().call(r,t);if("unknown"!==t.type){if(t.eventId){const i=yield r.auth._redirectUserForId(t.eventId);if(i)return r.user=i,n().call(r,t);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return m(function*(){})()}cleanUp(){}}function hb(){return(hb=m(function*(e,t){const n=function HO(e){return Ph(TJ,e.config.apiKey,e.name)}(t),r=function $O(e){return Or(e._redirectPersistence)}(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function MJ(e,t){al.set(e._key(),t)}function zO(e,t){return vb.apply(this,arguments)}function vb(){return(vb=m(function*(e,t,n=!1){const r=qt(e),i=function so(e,t){return t?Or(t):(S(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=yield new SJ(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})).apply(this,arguments)}class PJ{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function OJ(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qO(e);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!qO(t)){const i=(null===(r=t.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=null===n.eventId||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(GO(t))}saveEventToCache(t){this.cachedEventUids.add(GO(t)),this.lastProcessedEventTime=Date.now()}}function GO(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function qO({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}function wb(){return(wb=m(function*(e,t={}){return et(e,"GET","/v1/projects",t)})).apply(this,arguments)}const LJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VJ=/^https?/;function bb(){return bb=m(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield function FJ(e){return wb.apply(this,arguments)}(e);for(const n of t)try{if(jJ(n))return}catch{}Gt(e,"unauthorized-domain")}),bb.apply(this,arguments)}function jJ(e){const t=Yc(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!VJ.test(n))return!1;if(LJ.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const BJ=new Qc(3e4,6e4);function KO(){const e=Qe().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Gh=null;function HJ(e){return Gh=Gh||function $J(e){return new Promise((t,n)=>{var r,i,o;function s(){KO(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{KO(),n(nr(e,"network-request-failed"))},timeout:BJ.get()})}if(null!==(i=null===(r=Qe().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)t(gapi.iframes.getContext());else{if(null===(o=Qe().gapi)||void 0===o||!o.load){const a=jO("iframefcb");return Qe()[a]=()=>{gapi.load?s():n(nr(e,"network-request-failed"))},function UO(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=nr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function lJ(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}s()}}).catch(t=>{throw Gh=null,t})}(e),Gh}const zJ=new Qc(5e3,15e3),WJ="__/auth/iframe",GJ="emulator/auth/iframe",qJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},KJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function YJ(e){const t=e.config;S(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?PC(t,GJ):`https://${e.config.authDomain}/${WJ}`,r={apiKey:t.apiKey,appName:e.name,v:Vs},i=KJ.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ps(r).slice(1)}`}function Eb(){return Eb=m(function*(e){const t=yield HJ(e),n=Qe().gapi;return S(n,e,"internal-error"),t.open({where:document.body,url:YJ(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qJ,dontclear:!0},r=>new Promise(function(){var i=m(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=nr(e,"network-request-failed"),c=Qe().setTimeout(()=>{s(a)},zJ.get());function l(){Qe().clearTimeout(c),o(r)}r.ping(l).then(l,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),Eb.apply(this,arguments)}const XJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class YO{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QO(e,t,n,r,i,o){S(e.config.authDomain,e,"auth-domain-config-required"),S(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Vs,eventId:i};if(t instanceof Ur){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",fy(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,l]of Object.entries(o||{}))s[c]=l}if(t instanceof bZ){const c=t.getScopes().filter(l=>""!==l);c.length>0&&(s.scopes=c.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];return`${function see({config:e}){return e.emulator?PC(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${Ps(a).slice(1)}`}const Ib="webStorageSupport",cee=class aee{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PO,this._completeRedirectFn=zO,this._overrideRedirectResult=MJ}_openPopup(t,n,r,i){var o=this;return m(function*(){var s;hi(null===(s=o.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=QO(t,n,r,Yc(),i);return function nee(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},XJ),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Ze().toLowerCase();n&&(a=hO(l)?"_blank":n),dO(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function JX(e=Ze()){var t;return Oh(e)&&!(null===(t=window.navigator)||void 0===t||!t.standalone)}(l)&&"_self"!==a)return function ree(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new YO(null);const d=window.open(t||"",a,u);S(d,e,"popup-blocked");try{d.focus()}catch{}return new YO(d)}(t,a,Ww())})()}_openRedirect(t,n,r,i){var o=this;return m(function*(){return yield o._originValidation(t),function QZ(e){Qe().location.href=e}(QO(t,n,r,Yc(),i)),new Promise(()=>{})})()}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(hi(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){var n=this;return m(function*(){const r=yield function QJ(e){return Eb.apply(this,arguments)}(t),i=new PJ(t);return r.register("authEvent",o=>(S(o?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[t._key()]={manager:i},n.iframes[t._key()]=r,i})()}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Ib,{type:Ib},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[Ib];void 0!==s&&n(!!s),Gt(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function UJ(e){return bb.apply(this,arguments)}(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return _O()||qC()||Oh()}};var ZO="@firebase/auth";class uee{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}getToken(t){var n=this;return m(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(t)}:null})()}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{var i;t((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){S(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function fee(e=Sy()){const t=Ls(e,"auth");return t.isInitialized()?t.getImmediate():function OX(e,t){const n=Ls(e,"auth");if(n.isInitialized()){const i=n.getImmediate();if(hh(n.getOptions(),t??{}))return i;Gt(i,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:cee,persistence:[oJ,GZ,PO]})}!function hee(e){Nt(new yt("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:o,authDomain:s}=r.options;return((a,c)=>{S(o&&!o.includes(":"),"invalid-api-key",{appName:a.name}),S(!s?.includes(":"),"argument-error",{appName:a.name});const l={apiKey:o,authDomain:s,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yO(e)},u=new rZ(a,c,l);return function FX(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Or);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(u,n),u})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Nt(new yt("auth-internal",t=>{const n=qt(t.getProvider("auth").getImmediate());return new uee(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ve(ZO,"0.20.0",function dee(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(e)),Ve(ZO,"0.20.0","esm2017")}("Browser");class qh{constructor(t){return t}}class t1{constructor(){return dC("auth")}}const Db=new A("angularfire2.auth-instances");function gee(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new qh(r)}}const mee={provide:t1,deps:[[new Tt,Db]]},_ee={provide:qh,useFactory:function pee(e,t){const n=uC("auth",e,t);return n&&new qh(n)},deps:[[new Tt,Db],$s]};let yee=(()=>{class e{constructor(){Ve("angularfire",Eh.full,"auth")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Ct({providers:[_ee,mee]}),e})();function vee(e,...t){return{ngModule:yee,providers:[{provide:Db,useFactory:gee(e),multi:!0,deps:[ue,pt,hC,fC,[new Tt,kC],...t]}]}}const Cee=Cn(MZ,!0),wee=Cn(fee,!0),bee=Cn(kZ,!0),Eee=Cn(UZ,!0);let Tb=(()=>{class e{constructor(n,r){this.auth=n,this.router=r,this.currentUserSubject=new Xt(null),this.authState$=this.currentUserSubject.asObservable(),this.monitorAuthState()}signUp(n,r){var i=this;return m(function*(){return(yield Cee(i.auth,n,r)).user})()}signIn(n,r){var i=this;return m(function*(){return(yield bee(i.auth,n,r)).user})()}signOut(){var n=this;return m(function*(){return Eee(n.auth)})()}getCurrentUser(){return this.auth.currentUser}monitorAuthState(){!function VZ(e,t,n,r){Rt(e).onAuthStateChanged(t,n,r)}(this.auth,n=>{this.currentUserSubject.next(n),n?(console.log("Utente loggato:",n.email),this.router.navigate(["/home"])):(console.log("Utente non loggato, redirect a login"),this.router.navigate(["/login"]))})}static{this.\u0275fac=function(r){return new(r||e)(x(qh),x(mt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Iee(e,t){1&e&&(E(0,"div"),L(1,"Email obbligatoria."),I())}function Dee(e,t){1&e&&(E(0,"div"),L(1,"Formato email non valido."),I())}function Tee(e,t){if(1&e&&(E(0,"div",15),F(1,Iee,2,0,"div",16),F(2,Dee,2,0,"div",16),I()),2&e){const n=ne();T(1),k("ngIf",null==n.email||null==n.email.errors?null:n.email.errors.required),T(1),k("ngIf",null==n.email||null==n.email.errors?null:n.email.errors.email)}}function See(e,t){1&e&&(E(0,"div"),L(1,"Password obbligatoria."),I())}function Aee(e,t){if(1&e&&(E(0,"div"),L(1),I()),2&e){const n=ne(2);T(1),Fi(" Minimo ",null==n.password||null==n.password.errors?null:n.password.errors.minlength.requiredLength," caratteri. ")}}function Mee(e,t){if(1&e&&(E(0,"div",15),F(1,See,2,0,"div",16),F(2,Aee,2,1,"div",16),I()),2&e){const n=ne();T(1),k("ngIf",null==n.password||null==n.password.errors?null:n.password.errors.required),T(1),k("ngIf",null==n.password||null==n.password.errors?null:n.password.errors.minlength)}}function kee(e,t){if(1&e&&(E(0,"div",17),L(1),I()),2&e){const n=ne();T(1),Fi(" ",n.errorMessage," ")}}let Ree=(()=>{class e{constructor(n,r,i){this.fb=n,this.authService=r,this.router=i,this.errorMessage="",this.user$=this.authService.authState$}ngOnInit(){this.loginForm=this.fb.group({email:["",[Qd.required,Qd.email]],password:["",[Qd.required,Qd.minLength(6)]]})}login(){var n=this;return m(function*(){if(n.loginForm.invalid)return;const{email:r,password:i}=n.loginForm.value;try{yield n.authService.signIn(r,i),n.errorMessage="",n.loginForm.reset()}catch(o){n.errorMessage=o.message}})()}register(){var n=this;return m(function*(){if(n.loginForm.invalid)return;const{email:r,password:i}=n.loginForm.value;try{yield n.authService.signUp(r,i),n.errorMessage="",n.loginForm.reset()}catch(o){n.errorMessage=o.message}})()}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static{this.\u0275fac=function(r){return new(r||e)(w(mx),w(Tb),w(mt))}}static{this.\u0275cmp=fr({type:e,selectors:[["app-login"]],decls:23,vars:6,consts:[[1,"container-fluid"],[1,"container",2,"max-width","700px"],[1,"d-flex","justify-content-center","text-light","ciao"],[1,"p-5","text-light"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["class","alert alert-danger py-2",4,"ngIf"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[1,"alert","alert-danger","py-2"]],template:function(r,i){1&r&&(E(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),L(4,"Ciao!"),I()(),E(5,"div",3)(6,"form",4),ye("ngSubmit",function(){return i.login()}),E(7,"div",5)(8,"label",6),L(9,"Email"),I(),Z(10,"input",7),F(11,Tee,3,2,"div",8),I(),E(12,"div",5)(13,"label",9),L(14,"Password"),I(),Z(15,"input",10),F(16,Mee,3,2,"div",8),I(),F(17,kee,2,1,"div",11),E(18,"div",12)(19,"button",13),L(20," Login "),I(),E(21,"button",14),ye("click",function(){return i.register()}),L(22," Registrati "),I()()()()()()),2&r&&(T(6),k("formGroup",i.loginForm),T(5),k("ngIf",(null==i.email?null:i.email.invalid)&&((null==i.email?null:i.email.dirty)||(null==i.email?null:i.email.touched))),T(5),k("ngIf",(null==i.password?null:i.password.invalid)&&((null==i.password?null:i.password.dirty)||(null==i.password?null:i.password.touched))),T(1),k("ngIf",i.errorMessage),T(2),k("disabled",i.loginForm.invalid),T(2),k("disabled",i.loginForm.invalid))},dependencies:[Sd,YN,Rc,z_,FN,ah,iy],styles:[".container-fluid[_ngcontent-%COMP%]{background:linear-gradient(180deg,#A80077 0%,#7F9F2D 100%);height:100vh;width:100%;margin:0}.ciao[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:100px;transform:rotate(-10deg)}"]})}}return e})();function Nee(e,t){if(1&e&&(E(0,"div",3)(1,"div",4),Z(2,"div",5),E(3,"div",0),Z(4,"h4",6),I()()()),2&e){const n=t.$implicit;k("routerLink",n.link),T(2),Qa(n.name),T(2),k("innerText","gamepad"==n.name?"games":n.name.split("-")[0])}}let n1=(()=>{class e{constructor(){this.iconList=[]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=fr({type:e,selectors:[["app-icon-link-list"]],inputs:{iconList:"iconList"},decls:3,vars:1,consts:[[1,"d-flex","justify-content-center"],[1,"d-flex","flex-wrap"],["class","card link-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"card","link-card",3,"routerLink"],[1,"card-body"],[1,"game-icon"],[1,"text-light",3,"innerText"]],template:function(r,i){1&r&&(E(0,"div",0)(1,"div",1),F(2,Nee,5,4,"div",2),I()()),2&r&&(T(2),k("ngForOf",i.iconList))},dependencies:[e_,Yd],styles:[".link-card[_ngcontent-%COMP%], .link-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background:transparent}.link-card[_ngcontent-%COMP%]{margin:15px;padding:30px;cursor:pointer;transition:.2s}.link-card[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transition:.2s}.gamepad[_ngcontent-%COMP%], .game-icon[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;width:90px;height:90px}.gamepad[_ngcontent-%COMP%]{background-image:url(gamepad.a5df2d2502607b4d.svg)}.dos-icon[_ngcontent-%COMP%]{background-image:url(dos_icon.e116e5fa792768cd.svg)}.scopa-icon[_ngcontent-%COMP%]{background-image:url(scopa-icon.1fdd48b5e7bb5642.svg)}"]})}}return e})();const xee=function(){return{name:"gamepad",link:"/games"}},Pee=function(e){return[e]};let Oee=(()=>{class e{constructor(n){this.authService=n,this.user$=this.authService.authState$}logout(){var n=this;return m(function*(){yield n.authService.signOut()})()}static{this.\u0275fac=function(r){return new(r||e)(w(Tb))}}static{this.\u0275cmp=fr({type:e,selectors:[["app-home"]],decls:5,vars:4,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-danger",3,"click"],[3,"iconList"]],template:function(r,i){1&r&&(E(0,"div",0)(1,"div",1)(2,"button",2),ye("click",function(){return i.logout()}),L(3,"Logout"),I()(),Z(4,"app-icon-link-list",3),I()),2&r&&(T(4),k("iconList",ic(2,Pee,rc(1,xee))))},dependencies:[n1]})}}return e})(),r1=(()=>{class e{constructor(n,r){this.authService=n,this.router=r}canActivate(){return this.authService.authState$.pipe(me(n=>!!n||this.router.createUrlTree(["/login"])))}static{this.\u0275fac=function(r){return new(r||e)(x(Tb),x(mt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Fee=function(){return{name:"dos-icon",link:"/uno"}},Lee=function(){return{name:"scopa-icon",link:"/scopa"}},Vee=function(e,t){return[e,t]};let Uee=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=fr({type:e,selectors:[["app-games"]],decls:2,vars:6,consts:[[1,"container-fluid"],[3,"iconList"]],template:function(r,i){1&r&&(E(0,"div",0),Z(1,"app-icon-link-list",1),I()),2&r&&(T(1),k("iconList",um(3,Vee,rc(1,Fee),rc(2,Lee))))},dependencies:[n1]})}}return e})(),o1=(()=>{class e{constructor(){this.showAlertSource=new Yt,this.showAlert$=this.showAlertSource.asObservable(),this.currentMessage={type:"info",text:"",icon:"info-circle",duration:3e3}}triggerAlert(n,r,i,o=3e3){this.currentMessage={type:n,text:r,icon:i,duration:o},this.showAlertSource.next()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const s1="@firebase/database";let Sb="";class Bee{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){null==n?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ke(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return null==n?null:jc(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class $ee{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){null==n?delete this.cache_[t]:this.cache_[t]=n}get(t){return tr(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const c1=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Bee(t)}}catch{}return new $ee},ao=c1("localStorage"),Ab=c1("sessionStorage"),Gs=new Fs("@firebase/database"),l1=function(){let e=1;return function(){return e++}}(),u1=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,D(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new x7;n.update(t);const r=n.digest();return ch.encodeByteArray(r)},cl=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=cl.apply(null,r):t+="object"==typeof r?Ke(r):r,t+=" "}return t};let co=null,d1=!0;const tt=function(...e){if(!0===d1&&(d1=!1,null===co&&!0===Ab.get("logging_enabled")&&function(e,t){D(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Gs.logLevel=_e.VERBOSE,co=Gs.log.bind(Gs),t&&Ab.set("logging_enabled",!0)):"function"==typeof e?co=e:(co=null,Ab.remove("logging_enabled"))}(!0)),co){const t=cl.apply(null,e);co(t)}},ll=function(e){return function(...t){tt(e,...t)}},Mb=function(...e){const t="FIREBASE INTERNAL ERROR: "+cl(...e);Gs.error(t)},ir=function(...e){const t=`FIREBASE FATAL ERROR: ${cl(...e)}`;throw Gs.error(t),new Error(t)},vt=function(...e){const t="FIREBASE WARNING: "+cl(...e);Gs.warn(t)},Kh=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},jr="[MIN_NAME]",or="[MAX_NAME]",lo=function(e,t){if(e===t)return 0;if(e===jr||t===or)return-1;if(t===jr||e===or)return 1;{const n=Yh(e),r=Yh(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Wee=function(e,t){return e===t?0:e<t?-1:1},ul=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ke(t))},kb=function(e){if("object"!=typeof e||null===e)return Ke(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ke(t[r]),n+=":",n+=kb(e[t[r]]);return n+="}",n},f1=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function nt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const p1=function(e){D(!Kh(e),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===e?(o=0,s=0,i=1/e==-1/0?1:0):(i=e<0,(e=Math.abs(e))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(e/Math.pow(2,-1074))));const l=[];for(c=52;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();const u=l.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Yee=new RegExp("^-?(0*)\\d{1,10}$"),Yh=function(e){if(Yee.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},qs=function(e){try{e()}catch(t){setTimeout(()=>{throw vt("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},dl=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class Xee{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){vt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Zee{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&"auth/token-not-initialized"===n.code?(tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vt(t)}}let hl=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const C1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,E1="websocket",I1="long_polling";class xb{constructor(t,n,r,i,o=!1,s="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ao.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ao.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function D1(e,t,n){let r;if(D("string"==typeof t,"typeof type must == string"),D("object"==typeof n,"typeof params must == object"),t===E1)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==I1)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function Jee(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return nt(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class ete{constructor(){this.counters_={}}incrementCounter(t,n=1){tr(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return I7(this.counters_)}}const Pb={},Ob={};function Fb(e){const t=e.toString();return Pb[t]||(Pb[t]=new ete),Pb[t]}class nte{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&qs(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pi{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ll(t),this.stats_=Fb(n),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),D1(n,I1,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new nte(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Lb((...o)=>{const[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&C1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pi.forceAllow_=!0}static forceDisallow(){pi.forceDisallow_=!0}static isAvailable(){return!(!pi.forceAllow_&&(pi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ke(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=yx(n),i=f1(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ke(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Lb{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=l1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=Lb.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){tt("frame writing exception"),a.stack&&tt(a.stack),tt(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||tt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{tt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Xh=null;typeof MozWebSocket<"u"?Xh=MozWebSocket:typeof WebSocket<"u"&&(Xh=WebSocket);let Ks=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ll(this.connId),this.stats_=Fb(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return typeof location<"u"&&location.hostname&&C1.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),D1(n,E1,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ao.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Xh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Xh&&!e.forceDisallow_}static previouslyFailed(){return ao.isInMemoryStorage||!0===ao.get("previous_websocket_failure")}markConnectionHealthy(){ao.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=jc(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(D(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Ke(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=f1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})(),N1=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[pi,Ks]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=Ks&&Ks.isAvailable();let i=r&&!Ks.previouslyFailed();if(n.webSocketOnly&&(r||vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ks];else{const o=this.transports_=[];for(const s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return e.globalTransportInitialized_=!1,e})();class U1{constructor(t,n,r,i,o,s,a,c,l,u){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ll("c:"+this.id+":"),this.transportManager_=new N1(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=dl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const n=t.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=ul("t",t),r=ul("d",t);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=ul("t",t),r=ul("d",t);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=ul("t",t);if("d"in t){const r=t.d;if("h"===n)this.onHandshake_(r);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?Mb("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mb("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),dl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ao.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class j1{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}class B1{constructor(t){this.allowedEvents_=t,this.listeners_={},D(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(t){D(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class Zh extends B1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!uy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Zh}getInitialEvent(t){return D("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class de{constructor(t,n){if(void 0===n){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(t+="/"+this.pieces_[n]);return t||"/"}}function se(){return new de("")}function Q(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function gi(e){return e.pieces_.length-e.pieceNum_}function Ce(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new de(e.pieces_,t)}function Ub(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function fl(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function z1(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new de(t,0)}function Ne(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof de)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new de(n,0)}function X(e){return e.pieceNum_>=e.pieces_.length}function Pt(e,t){const n=Q(e),r=Q(t);if(null===n)return t;if(n===r)return Pt(Ce(e),Ce(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function jb(e,t){if(gi(e)!==gi(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function bn(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(gi(e)>gi(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Dte{constructor(t,n){this.errorPrefix_=n,this.parts_=fl(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=fh(this.parts_[r]);W1(this)}}function W1(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+uo(e))}function uo(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Bb extends B1{constructor(){let t,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Bb}getInitialEvent(t){return D("visible"===t,"Unknown event type: "+t),[this.visible_]}}const pl=1e3;let ef,ho=(()=>{class e extends j1{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=ll("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pl,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bb.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Zh.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Ke(s)),D(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new Ns,i={p:n._path.toString(),q:n._queryObject},o={action:"g",request:i,onComplete:a=>{const c=a.d;"ok"===a.s?(this.onDataUpdate_(i.p,c,!1,null),r.resolve(c)):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const a=this.outstandingGets_[s];void 0===a||o!==a||(delete this.outstandingGets_[s],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),D(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),D(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,c=>{const l=c.d,u=c.s;e.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),"ok"!==u&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&tr(n,"w")){const i=xs(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(e){const t=uh(e).claims;return"object"==typeof t&&!0===t.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(e){const n=uh(e).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),D(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ke(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):Mb("Unrecognized action received from server: "+Ke(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){D(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=pl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return m(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+e.nextConnectionId_++,a=n.lastSessionId;let c=!1,l=null;const u=function(){l?l.close():(c=!0,o())};n.realtime_={close:u,sendRequest:function(f){D(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);c?tt("getToken() completed but was canceled"):(tt("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,l=new U1(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,g=>{vt(g+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),c||(n.repoInfo_.nodeAdmin&&vt(f),u())}}})()}interrupt(n){tt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){tt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],fy(this.interruptReasons_)&&(this.reconnectDelay_=pl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>kb(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new de(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){tt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){tt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+Sb.replace(/\./g,"-")]=1,uy()?n["framework.cordova"]=1:Cx()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Zh.getInstance().currentlyOnline();return fy(this.interruptReasons_)&&n}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class J{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new J(t,n)}}class Jh{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new J(jr,t),i=new J(jr,n);return 0!==this.compare(r,i)}minPost(){return J.MIN}}class K1 extends Jh{static get __EMPTY_NODE(){return ef}static set __EMPTY_NODE(t){ef=t}compare(t,n){return lo(t.name,n.name)}isDefinedOn(t){throw Rs("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return J.MIN}maxPost(){return new J(or,ef)}makePost(t,n){return D("string"==typeof t,"KeyIndex indexValue must always be a string."),new J(t,ef)}toString(){return".key"}}const sr=new K1;class tf{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,t=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let Hb,On=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??Kt.EMPTY_NODE,this.right=s??Kt.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Kt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return Kt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class Kt{constructor(t,n=Kt.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new Kt(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,On.BLACK,null,null))}remove(t){return new Kt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,On.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new tf(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new tf(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new tf(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new tf(this.root_,null,this.comparator_,!0,t)}}function Pte(e,t){return lo(e.name,t.name)}function $b(e,t){return lo(e,t)}Kt.EMPTY_NODE=new class xte{copy(t,n,r,i,o){return this}insert(t,n,r){return new On(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Y1=function(e){return"number"==typeof e?"number:"+p1(e):"string:"+e},Q1=function(e){if(e.isLeafNode()){const t=e.val();D("string"==typeof t||"number"==typeof t||"object"==typeof t&&tr(t,".sv"),"Priority must be a string or number.")}else D(e===Hb||e.isEmpty(),"priority of unexpected type.");D(e===Hb||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let X1,Z1,J1,Ys=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,D(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Q1(this.priorityNode_)}static set __childrenNodeConstructor(n){X1=n}static get __childrenNodeConstructor(){return X1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return X(n)?this:".priority"===Q(n)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=Q(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(D(".priority"!==i||1===gi(n),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ce(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Y1(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?p1(this.value_):this.value_,this.lazyHash_=u1(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(D(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return D(o>=0,"Unknown leaf type: "+r),D(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const Te=new class Vte extends Jh{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?lo(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return J.MIN}maxPost(){return new J(or,new Ys("[PRIORITY-POST]",J1))}makePost(t,n){const r=Z1(t);return new J(n,new Ys("[PRIORITY-POST]",r))}toString(){return".priority"}},Ute=Math.log(2);class jte{constructor(t){this.count=parseInt(Math.log(t+1)/Ute,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const nf=function(e,t,n,r){e.sort(t);const i=function(c,l){const u=l-c;let d,h;if(0===u)return null;if(1===u)return d=e[c],h=n?n(d):d,new On(h,d.node,On.BLACK,null,null);{const f=parseInt(u/2,10)+c,p=i(c,f),g=i(f+1,l);return d=e[f],h=n?n(d):d,new On(h,d.node,On.BLACK,p,g)}},a=function(c){let l=null,u=null,d=e.length;const h=function(p,g){const y=d-p,v=d;d-=p;const _=i(y+1,v),R=e[y],O=n?n(R):R;f(new On(O,R.node,g,null,_))},f=function(p){l?(l.left=p,l=p):(u=p,l=p)};for(let p=0;p<c.count;++p){const g=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));g?h(y,On.BLACK):(h(y,On.BLACK),h(y,On.RED))}return u}(new jte(e.length));return new Kt(r||t,a)};let zb;const Qs={};class Br{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return D(Qs&&Te,"ChildrenNode.ts has not been loaded"),zb=zb||new Br({".priority":Qs},{".priority":Te}),zb}get(t){const n=xs(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Kt?n:null}hasIndex(t){return tr(this.indexSet_,t.toString())}addIndex(t,n){D(t!==sr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(J.Wrap);let a,s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?nf(r,t.getCompare()):Qs;const c=t.toString(),l=Object.assign({},this.indexSet_);l[c]=t;const u=Object.assign({},this.indexes_);return u[c]=a,new Br(u,l)}addToIndexes(t,n){const r=dh(this.indexes_,(i,o)=>{const s=xs(this.indexSet_,o);if(D(s,"Missing index implementation for "+o),i===Qs){if(s.isDefinedOn(t.node)){const a=[],c=n.getIterator(J.Wrap);let l=c.getNext();for(;l;)l.name!==t.name&&a.push(l),l=c.getNext();return a.push(t),nf(a,s.getCompare())}return Qs}{const a=n.get(t.name);let c=i;return a&&(c=c.remove(new J(t.name,a))),c.insert(t,t.node)}});return new Br(r,this.indexSet_)}removeFromIndexes(t,n){const r=dh(this.indexes_,i=>{if(i===Qs)return i;{const o=n.get(t.name);return o?i.remove(new J(t.name,o)):i}});return new Br(r,this.indexSet_)}}let gl,K=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Q1(this.priorityNode_),this.children_.isEmpty()&&D(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return gl||(gl=new e(new Kt($b),null,Br.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||gl}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?gl:r}}getChild(n){const r=Q(n);return null===r?this:this.getImmediateChild(r).getChild(Ce(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(D(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new J(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?gl:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){const i=Q(n);if(null===i)return r;{D(".priority"!==Q(n)||1===gi(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(Ce(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(Te,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+Y1(this.getPriority().val())+":"),this.forEachChild(Te,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":u1(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new J(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new J(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new J(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,J.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,J.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===ml?-1:0}withIndex(n){if(n===sr||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===sr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Te),o=r.getIterator(Te);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===sr?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const ml=new class Bte extends K{constructor(){super(new Kt($b),K.EMPTY_NODE,Br.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return K.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(J,{MIN:{value:new J(jr,K.EMPTY_NODE)},MAX:{value:new J(or,ml)}}),K1.__EMPTY_NODE=K.EMPTY_NODE,Ys.__childrenNodeConstructor=K,function Ote(e){Hb=e}(ml),function Lte(e){J1=e}(ml);const $te=!0;function Pe(e,t=null){if(null===e)return K.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),D(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Ys(e,Pe(t));if(e instanceof Array||!$te){let n=K.EMPTY_NODE;return nt(e,(r,i)=>{if(tr(e,r)&&"."!==r.substring(0,1)){const o=Pe(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Pe(t))}{const n=[];let r=!1;if(nt(e,(s,a)=>{if("."!==s.substring(0,1)){const c=Pe(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new J(s,c)))}}),0===n.length)return K.EMPTY_NODE;const o=nf(n,Pte,s=>s.name,$b);if(r){const s=nf(n,Te.getCompare());return new K(o,Pe(t),new Br({".priority":s},{".priority":Te}))}return new K(o,Pe(t),Br.Default)}}!function Fte(e){Z1=e}(Pe);class Wb extends Jh{constructor(t){super(),this.indexPath_=t,D(!X(t)&&".priority"!==Q(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?lo(t.name,n.name):o}makePost(t,n){const r=Pe(t),i=K.EMPTY_NODE.updateChild(this.indexPath_,r);return new J(n,i)}maxPost(){const t=K.EMPTY_NODE.updateChild(this.indexPath_,ml);return new J(or,t)}toString(){return fl(this.indexPath_,0).join("/")}}const Gb=new class Hte extends Jh{compare(t,n){const r=t.node.compareTo(n.node);return 0===r?lo(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return J.MIN}maxPost(){return J.MAX}makePost(t,n){const r=Pe(t);return new J(n,r)}toString(){return".value"}},Xs="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zte=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Xs.charAt(n%64),n=Math.floor(n/64);D(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=Xs.charAt(t[i]);return D(20===s.length,"nextPushId: Length should be 20."),s}}();function iF(e){return{type:"value",snapshotNode:e}}function Zs(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _l(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function yl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Kb{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){D(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(_l(n,a)):D(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Zs(n,r)):s.trackChildChange(yl(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return null!=r&&(t.isLeafNode()||t.forEachChild(Te,(i,o)=>{n.hasChild(i)||r.trackChildChange(_l(i,o))}),n.isLeafNode()||n.forEachChild(Te,(i,o)=>{if(t.hasChild(i)){const s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(yl(i,o,s))}else r.trackChildChange(Zs(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?K.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class vl{constructor(t){this.indexedFilter_=new Kb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=vl.getStartPost_(t),this.endPost_=vl.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,n,r,i,o,s){return this.matches(new J(n,r))||(r=K.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=K.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(K.EMPTY_NODE);const o=this;return n.forEachChild(Te,(s,a)=>{o.matches(new J(s,a))||(i=i.updateImmediateChild(s,K.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}return t.getIndex().maxPost()}}class Gte{constructor(t){this.rangedFilter_=new vl(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new J(n,r))||(r=K.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=K.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=K.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();let c;if(c=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!c)break;i=i.updateImmediateChild(a.name,a.node),s++}}else{let o,s,a,c;if(i=n.withIndex(this.index_),i=i.updatePriority(K.EMPTY_NODE),this.reverse_){c=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else c=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let l=0,u=!1;for(;c.hasNext();){const d=c.getNext();!u&&a(o,d)<=0&&(u=!0),u&&l<this.limit_&&a(d,s)<=0?l++:i=i.updateImmediateChild(d.name,K.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(h,f)=>d(f,h)}else s=this.index_.getCompare();const a=t;D(a.numChildren()===this.limit_,"");const c=new J(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=h&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:s(h,c);if(u&&!r.isEmpty()&&f>=0)return o?.trackChildChange(yl(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(_l(n,d));const g=a.updateImmediateChild(n,K.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(o?.trackChildChange(Zs(h.name,h.node)),g.updateImmediateChild(h.name,h.node)):g}}return r.isEmpty()?t:u&&s(l,c)>=0?(null!=o&&(o.trackChildChange(_l(l.name,l.node)),o.trackChildChange(Zs(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,K.EMPTY_NODE)):t}}class Yb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Te}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return D(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return D(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:jr}hasEnd(){return this.endSet_}getIndexEndValue(){return D(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return D(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:or}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return D(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Te}copy(){const t=new Yb;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function oF(e){const t={};if(e.isDefault())return t;let n;return e.index_===Te?n="$priority":e.index_===Gb?n="$value":e.index_===sr?n="$key":(D(e.index_ instanceof Wb,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ke(n),e.startSet_&&(t.startAt=Ke(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Ke(e.indexStartName_))),e.endSet_&&(t.endAt=Ke(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Ke(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function sF(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Te&&(t.i=e.index_.toString()),t}class sf extends j1{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ll("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return void 0!==n?"tag$"+n:(D(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const s=sf.getListenId_(t,r),a={};this.listens_[s]=a;const c=oF(t._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(404===l&&(d=null,l=null),null===l&&this.onDataUpdate_(o,d,!1,r),xs(this.listens_,s)===a){let h;h=l?401===l?"permission_denied":"rest_error:"+l:"ok",i(h,null)}})}unlisten(t,n){const r=sf.getListenId_(t,n);delete this.listens_[r]}get(t){const n=oF(t._queryParams),r=t._path.toString(),i=new Ns;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Ps(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=jc(a.responseText)}catch{vt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&vt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class Zte{constructor(){this.rootNode_=K.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function af(){return{value:null,children:new Map}}function Js(e,t,n){if(X(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Q(t);e.children.has(r)||e.children.set(r,af()),Js(e.children.get(r),t=Ce(t),n)}}function Jb(e,t,n){null!==e.value?n(t,e.value):function Jte(e,t){e.children.forEach((n,r)=>{t(r,n)})}(e,(r,i)=>{Jb(i,new de(t.toString()+"/"+r),n)})}class ene{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&nt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}class rne{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ene(t);const r=1e4+2e4*Math.random();dl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;nt(t,(i,o)=>{o>0&&tr(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),dl(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ar=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(ar||{});function nE(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class cf{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=ar.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(X(this.path)){if(null!=this.affectedTree.value)return D(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new de(t));return new cf(se(),n,this.revert)}}return D(Q(this.path)===t,"operationForChild called for unrelated child."),new cf(Ce(this.path),this.affectedTree,this.revert)}}class Cl{constructor(t,n){this.source=t,this.path=n,this.type=ar.LISTEN_COMPLETE}operationForChild(t){return X(this.path)?new Cl(this.source,se()):new Cl(this.source,Ce(this.path))}}class fo{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=ar.OVERWRITE}operationForChild(t){return X(this.path)?new fo(this.source,se(),this.snap.getImmediateChild(t)):new fo(this.source,Ce(this.path),this.snap)}}class ea{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=ar.MERGE}operationForChild(t){if(X(this.path)){const n=this.children.subtree(new de(t));return n.isEmpty()?null:n.value?new fo(this.source,se(),n.value):new ea(this.source,se(),n)}return D(Q(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ea(this.source,Ce(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mi{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(X(t))return this.isFullyInitialized()&&!this.filtered_;const n=Q(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class ine{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function wl(e,t,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,c)=>function ane(e,t,n){if(null==t.childName||null==n.childName)throw Rs("Should only compare child_ events.");const r=new J(t.childName,t.snapshotNode),i=new J(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,a,c)),s.forEach(a=>{const c=function sne(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,a,o);i.forEach(l=>{l.respondsTo(a.type)&&t.push(l.createEvent(c,e.query_))})})}function lf(e,t){return{eventCache:e,serverCache:t}}function bl(e,t,n,r){return lf(new mi(t,n,r),e.serverCache)}function cF(e,t,n,r){return lf(e.eventCache,new mi(t,n,r))}function uf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function po(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let rE;class Se{constructor(t,n=(()=>(rE||(rE=new Kt(Wee)),rE))()){this.value=t,this.children=n}static fromObject(t){let n=new Se(null);return nt(t,(r,i)=>{n=n.set(new de(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(null!=this.value&&n(this.value))return{path:se(),value:this.value};if(X(t))return null;{const r=Q(t),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(Ce(t),n);return null!=o?{path:Ne(new de(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(X(t))return this;{const n=Q(t),r=this.children.get(n);return null!==r?r.subtree(Ce(t)):new Se(null)}}set(t,n){if(X(t))return new Se(n,this.children);{const r=Q(t),o=(this.children.get(r)||new Se(null)).set(Ce(t),n),s=this.children.insert(r,o);return new Se(this.value,s)}}remove(t){if(X(t))return this.children.isEmpty()?new Se(null):new Se(null,this.children);{const n=Q(t),r=this.children.get(n);if(r){const i=r.remove(Ce(t));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new Se(null):new Se(this.value,o)}return this}}get(t){if(X(t))return this.value;{const n=Q(t),r=this.children.get(n);return r?r.get(Ce(t)):null}}setTree(t,n){if(X(t))return n;{const r=Q(t),o=(this.children.get(r)||new Se(null)).setTree(Ce(t),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Se(this.value,s)}}fold(t){return this.fold_(se(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Ne(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,se(),n)}findOnPath_(t,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(X(t))return null;{const o=Q(t),s=this.children.get(o);return s?s.findOnPath_(Ce(t),Ne(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,se(),n)}foreachOnPath_(t,n,r){if(X(t))return this;{this.value&&r(n,this.value);const i=Q(t),o=this.children.get(i);return o?o.foreachOnPath_(Ce(t),Ne(n,i),r):new Se(null)}}foreach(t){this.foreach_(se(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Ne(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}class Fn{constructor(t){this.writeTree_=t}static empty(){return new Fn(new Se(null))}}function El(e,t,n){if(X(t))return new Fn(new Se(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=Pt(i,t);return o=o.updateChild(s,n),new Fn(e.writeTree_.set(i,o))}{const i=new Se(n),o=e.writeTree_.setTree(t,i);return new Fn(o)}}}function iE(e,t,n){let r=e;return nt(n,(i,o)=>{r=El(r,Ne(t,i),o)}),r}function lF(e,t){if(X(t))return Fn.empty();{const n=e.writeTree_.setTree(t,new Se(null));return new Fn(n)}}function oE(e,t){return null!=go(e,t)}function go(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Pt(n.path,t)):null}function uF(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Te,(r,i)=>{t.push(new J(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new J(r,i.value))}),t}function _i(e,t){if(X(t))return e;{const n=go(e,t);return new Fn(null!=n?new Se(n):e.writeTree_.subtree(t))}}function sE(e){return e.writeTree_.isEmpty()}function ta(e,t){return dF(se(),e.writeTree_,t)}function dF(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?(D(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=dF(Ne(e,i),o,n)}),!n.getChild(e).isEmpty()&&null!==r&&(n=n.updateChild(Ne(e,".priority"),r)),n}}function df(e,t){return mF(t,e)}function fne(e,t){if(e.snap)return bn(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&bn(Ne(e.path,n),t))return!0;return!1}function gne(e){return e.visible}function hF(e,t,n){let r=Fn.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const s=o.path;let a;if(o.snap)bn(n,s)?(a=Pt(n,s),r=El(r,a,o.snap)):bn(s,n)&&(a=Pt(s,n),r=El(r,se(),o.snap.getChild(a)));else{if(!o.children)throw Rs("WriteRecord should have .snap or .children");if(bn(n,s))a=Pt(n,s),r=iE(r,a,o.children);else if(bn(s,n))if(a=Pt(s,n),X(a))r=iE(r,se(),o.children);else{const c=xs(o.children,Q(a));if(c){const l=c.getChild(Ce(a));r=El(r,se(),l)}}}}}return r}function fF(e,t,n,r,i){if(r||i){const o=_i(e.visibleWrites,t);return!i&&sE(o)?n:i||null!=n||oE(o,se())?ta(hF(e.allWrites,function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(bn(l.path,t)||bn(t,l.path))},t),n||K.EMPTY_NODE):null}{const o=go(e.visibleWrites,t);if(null!=o)return o;{const s=_i(e.visibleWrites,t);return sE(s)?n:null!=n||oE(s,se())?ta(s,n||K.EMPTY_NODE):null}}}function hf(e,t,n,r){return fF(e.writeTree,e.treePath,t,n,r)}function aE(e,t){return function mne(e,t,n){let r=K.EMPTY_NODE;const i=go(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Te,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=_i(e.visibleWrites,t);return n.forEachChild(Te,(s,a)=>{const c=ta(_i(o,new de(s)),a);r=r.updateImmediateChild(s,c)}),uF(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return uF(_i(e.visibleWrites,t)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(e.writeTree,e.treePath,t)}function pF(e,t,n,r){return function _ne(e,t,n,r,i){D(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Ne(t,n);if(oE(e.visibleWrites,o))return null;{const s=_i(e.visibleWrites,o);return sE(s)?i.getChild(n):ta(s,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function ff(e,t){return function vne(e,t){return go(e.visibleWrites,t)}(e.writeTree,Ne(e.treePath,t))}function cE(e,t,n){return function yne(e,t,n,r){const i=Ne(t,n),o=go(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?ta(_i(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function gF(e,t){return mF(Ne(e.treePath,t),e.writeTree)}function mF(e,t){return{treePath:e,writeTree:t}}class Ene{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;D("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),D(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,yl(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,_l(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,Zs(r,t.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw Rs("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,yl(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const _F=new class Ine{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}};class lE{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new mi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cE(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:po(this.viewCache_),o=function bne(e,t,n,r,i,o){return function Cne(e,t,n,r,i,o,s){let a;const c=_i(e.visibleWrites,t),l=go(c,se());if(null!=l)a=l;else{if(null==n)return[];a=ta(c,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let f=h.getNext();for(;f&&u.length<i;)0!==d(f,r)&&u.push(f),f=h.getNext();return u}}(e.writeTree,e.treePath,t,n,r,i,o)}(this.writes_,i,n,1,r,t);return 0===o.length?null:o[0]}}function yF(e,t,n,r,i,o){const s=t.eventCache;if(null!=ff(r,n))return t;{let a,c;if(X(n))if(D(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const l=po(t),d=aE(r,l instanceof K?l:K.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{const l=hf(r,po(t));a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{const l=Q(n);if(".priority"===l){D(1===gi(n),"Can't have a priority with additional path components");const u=s.getNode();c=t.serverCache.getNode();const d=pF(r,n,u,c);a=null!=d?e.filter.updatePriority(u,d):s.getNode()}else{const u=Ce(n);let d;if(s.isCompleteForChild(l)){c=t.serverCache.getNode();const h=pF(r,n,s.getNode(),c);d=null!=h?s.getNode().getImmediateChild(l).updateChild(u,h):s.getNode().getImmediateChild(l)}else d=cE(r,l,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),l,d,u,i,o):s.getNode()}}return bl(t,a,s.isFullyInitialized()||X(n),e.filter.filtersNodes())}}function pf(e,t,n,r,i,o,s,a){const c=t.serverCache;let l;const u=s?e.filter:e.filter.getIndexedFilter();if(X(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{const f=Q(n);if(!c.isCompleteForPath(n)&&gi(n)>1)return t;const p=Ce(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);l=".priority"===f?u.updatePriority(c.getNode(),y):u.updateChild(c.getNode(),f,y,p,_F,null)}const d=cF(t,l,c.isFullyInitialized()||X(n),u.filtersNodes());return yF(e,d,n,i,new lE(i,d,o),a)}function uE(e,t,n,r,i,o,s){const a=t.eventCache;let c,l;const u=new lE(i,t,o);if(X(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=bl(t,l,!0,e.filter.filtersNodes());else{const d=Q(n);if(".priority"===d)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=bl(t,l,a.isFullyInitialized(),a.isFiltered());else{const h=Ce(n),f=a.getNode().getImmediateChild(d);let p;if(X(h))p=r;else{const g=u.getCompleteChild(d);p=null!=g?".priority"===Ub(h)&&g.getChild(z1(h)).isEmpty()?g:g.updateChild(h,r):K.EMPTY_NODE}c=f.equals(p)?t:bl(t,e.filter.updateChild(a.getNode(),d,p,h,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}return c}function vF(e,t){return e.eventCache.isCompleteForChild(t)}function CF(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function dE(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=X(n)?r:new Se(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){const p=CF(0,t.serverCache.getNode().getImmediateChild(d),h);c=pf(e,c,new de(d),p,i,o,s,a)}}),l.children.inorderTraversal((d,h)=>{const f=!t.serverCache.isCompleteForChild(d)&&void 0===h.value;if(!u.hasChild(d)&&!f){const g=CF(0,t.serverCache.getNode().getImmediateChild(d),h);c=pf(e,c,new de(d),g,i,o,s,a)}}),c}class xne{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Kb(r.getIndex()),o=function qte(e){return e.loadsAllData()?new Kb(e.getIndex()):e.hasLimit()?new Gte(e):new vl(e)}(r);this.processor_=function Dne(e){return{filter:e}}(o);const s=n.serverCache,a=n.eventCache,c=i.updateFullNode(K.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(K.EMPTY_NODE,a.getNode(),null),u=new mi(c,s.isFullyInitialized(),i.filtersNodes()),d=new mi(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=lf(d,u),this.eventGenerator_=new ine(this.query_)}get query(){return this.query_}}function Fne(e,t){const n=po(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!X(t)&&!n.getImmediateChild(Q(t)).isEmpty())?n.getChild(t):null}function wF(e){return 0===e.eventRegistrations_.length}function bF(e,t,n){const r=[];if(n){D(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}else i.push(s)}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function EF(e,t,n,r){t.type===ar.MERGE&&null!==t.source.queryId&&(D(po(e.viewCache_),"We should always have a full cache before handling merges"),D(uf(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=function Sne(e,t,n,r,i){const o=new Ene;let s,a;if(n.type===ar.OVERWRITE){const l=n;l.source.fromUser?s=uE(e,t,l.path,l.snap,r,i,o):(D(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!X(l.path),s=pf(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===ar.MERGE){const l=n;l.source.fromUser?s=function Mne(e,t,n,r,i,o,s){let a=t;return r.foreach((c,l)=>{const u=Ne(n,c);vF(t,Q(u))&&(a=uE(e,a,u,l,i,o,s))}),r.foreach((c,l)=>{const u=Ne(n,c);vF(t,Q(u))||(a=uE(e,a,u,l,i,o,s))}),a}(e,t,l.path,l.children,r,i,o):(D(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=dE(e,t,l.path,l.children,r,i,a,o))}else if(n.type===ar.ACK_USER_WRITE){const l=n;s=l.revert?function Nne(e,t,n,r,i,o){let s;if(null!=ff(r,n))return t;{const a=new lE(r,t,i),c=t.eventCache.getNode();let l;if(X(n)||".priority"===Q(n)){let u;if(t.serverCache.isFullyInitialized())u=hf(r,po(t));else{const d=t.serverCache.getNode();D(d instanceof K,"serverChildren would be complete if leaf node"),u=aE(r,d)}l=e.filter.updateFullNode(c,u,o)}else{const u=Q(n);let d=cE(r,u,t.serverCache);null==d&&t.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),l=null!=d?e.filter.updateChild(c,u,d,Ce(n),a,o):t.eventCache.getNode().hasChild(u)?e.filter.updateChild(c,u,K.EMPTY_NODE,Ce(n),a,o):c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=hf(r,po(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=ff(r,se()),bl(t,l,s,e.filter.filtersNodes())}}(e,t,l.path,r,i,o):function kne(e,t,n,r,i,o,s){if(null!=ff(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(X(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return pf(e,t,n,c.getNode().getChild(n),i,o,a,s);if(X(n)){let l=new Se(null);return c.getNode().forEachChild(sr,(u,d)=>{l=l.set(new de(u),d)}),dE(e,t,n,l,i,o,a,s)}return t}{let l=new Se(null);return r.foreach((u,d)=>{const h=Ne(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),dE(e,t,n,l,i,o,a,s)}}(e,t,l.path,l.affectedTree,r,i,o)}else{if(n.type!==ar.LISTEN_COMPLETE)throw Rs("Unknown operation type: "+n.type);s=function Rne(e,t,n,r,i){const o=t.serverCache;return yF(e,cF(t,o.getNode(),o.isFullyInitialized()||X(n),o.isFiltered()),n,r,_F,i)}(e,t,n.path,r,o)}const c=o.getChanges();return function Ane(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=uf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(iF(uf(t)))}}(t,s,c),{viewCache:s,changes:c}}(e.processor_,i,t,n,r);return function Tne(e,t){D(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),D(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,o.viewCache),D(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,IF(e,o.changes,o.viewCache.eventCache.getNode(),null)}function IF(e,t,n,r){return function one(e,t,n,r){const i=[],o=[];return t.forEach(s=>{"child_changed"===s.type&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function Wte(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(s.childName,s.snapshotNode))}),wl(e,i,"child_removed",t,r,n),wl(e,i,"child_added",t,r,n),wl(e,i,"child_moved",o,r,n),wl(e,i,"child_changed",t,r,n),wl(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let gf,_f;class DF{constructor(){this.views=new Map}}function hE(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return D(null!=o,"SyncTree gave us an op for an invalid query."),EF(o,t,n,r)}{let o=[];for(const s of e.views.values())o=o.concat(EF(s,t,n,r));return o}}function TF(e,t,n,r,i){const s=e.views.get(t._queryIdentifier);if(!s){let a=hf(n,i?r:null),c=!1;a?c=!0:r instanceof K?(a=aE(n,r),c=!1):(a=K.EMPTY_NODE,c=!1);const l=lf(new mi(a,c,!1),new mi(r,i,!1));return new xne(t,l)}return s}function SF(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function yi(e,t){let n=null;for(const r of e.views.values())n=n||Fne(r,t);return n}function AF(e,t){return t._queryParams.loadsAllData()?mf(e):e.views.get(t._queryIdentifier)}function MF(e,t){return null!=AF(e,t)}function vi(e){return null!=mf(e)}function mf(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Gne=1;class kF{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Se(null),this.pendingWriteTree_=function wne(){return{visibleWrites:Fn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function fE(e,t,n,r,i){return function lne(e,t,n,r,i){D(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=El(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?na(e,new fo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Ci(e,t,n=!1){const r=function dne(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function hne(e,t){const n=e.allWrites.findIndex(a=>a.writeId===t);D(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const a=e.allWrites[s];a.visible&&(s>=n&&fne(a,r.path)?i=!1:bn(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function pne(e){e.visibleWrites=hF(e.allWrites,gne,se()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=lF(e.visibleWrites,r.path):nt(r.children,c=>{e.visibleWrites=lF(e.visibleWrites,Ne(r.path,c))}),!0))}(e.pendingWriteTree_,t)){let o=new Se(null);return null!=r.snap?o=o.set(se(),!0):nt(r.children,s=>{o=o.set(new de(s),!0)}),na(e,new cf(r.path,o,n))}return[]}function Il(e,t,n){return na(e,new fo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function pE(e,t,n,r){const i=t._path,o=e.syncPointTree_.get(i);let s=[];if(o&&("default"===t._queryIdentifier||MF(o,t))){const a=function Hne(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=vi(e);if("default"===i)for(const[c,l]of e.views.entries())s=s.concat(bF(l,n,r)),wF(l)&&(e.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{const c=e.views.get(i);c&&(s=s.concat(bF(c,n,r)),wF(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!vi(e)&&o.push(new(function jne(){return D(gf,"Reference.ts has not been loaded"),gf}())(t._repo,t._path)),{removed:o,events:s}}(o,t,n,r);(function Bne(e){return 0===e.views.size})(o)&&(e.syncPointTree_=e.syncPointTree_.remove(i));const c=a.removed;s=a.events;const l=-1!==c.findIndex(d=>d._queryParams.loadsAllData()),u=e.syncPointTree_.findOnPath(i,(d,h)=>vi(h));if(l&&!u){const d=e.syncPointTree_.subtree(i);if(!d.isEmpty()){const h=function ere(e){return e.fold((t,n,r)=>{if(n&&vi(n))return[mf(n)];{let i=[];return n&&(i=SF(n)),nt(r,(o,s)=>{i=i.concat(s)}),i}})}(d);for(let f=0;f<h.length;++f){const p=h[f],g=p.query,y=PF(e,p);e.listenProvider_.startListening(Dl(g),vf(e,g),y.hashFn,y.onComplete)}}}!u&&c.length>0&&!r&&(l?e.listenProvider_.stopListening(Dl(t),null):c.forEach(d=>{const h=e.queryToTagMap.get(Cf(d));e.listenProvider_.stopListening(Dl(d),h)})),function tre(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=Cf(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,c)}return s}function RF(e,t,n){const r=t._path;let i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(d,h)=>{const f=Pt(d,r);i=i||yi(h,f),o=o||vi(h)});let a,s=e.syncPointTree_.get(r);s?(o=o||vi(s),i=i||yi(s,se())):(s=new DF,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i?a=!0:(a=!1,i=K.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((h,f)=>{const p=yi(f,se());p&&(i=i.updateImmediateChild(h,p))}));const c=MF(s,t);if(!c&&!t._queryParams.loadsAllData()){const d=Cf(t);D(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");const h=function nre(){return Gne++}();e.queryToTagMap.set(d,h),e.tagToQueryMap.set(h,d)}let u=function $ne(e,t,n,r,i,o){const s=TF(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function Lne(e,t){e.eventRegistrations_.push(t)}(s,n),function Vne(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Te,(o,s)=>{r.push(Zs(o,s))}),n.isFullyInitialized()&&r.push(iF(n.getNode())),IF(e,r,n.getNode(),t)}(s,n)}(s,t,n,df(e.pendingWriteTree_,r),i,a);if(!c&&!o){const d=AF(s,t);u=u.concat(function rre(e,t,n){const r=t._path,i=vf(e,t),o=PF(e,n),s=e.listenProvider_.startListening(Dl(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)D(!vi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((l,u,d)=>{if(!X(l)&&u&&vi(u))return[mf(u).query];{let h=[];return u&&(h=h.concat(SF(u).map(f=>f.query))),nt(d,(f,p)=>{h=h.concat(p)}),h}});for(let l=0;l<c.length;++l){const u=c[l];e.listenProvider_.stopListening(Dl(u),vf(e,u))}}return s}(e,t,d))}return u}function yf(e,t,n){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{const l=yi(a,Pt(s,t));if(l)return l});return fF(i,t,o,n,!0)}function na(e,t){return NF(t,e.syncPointTree_,null,df(e.pendingWriteTree_,se()))}function NF(e,t,n,r){if(X(e.path))return xF(e,t,n,r);{const i=t.get(se());null==n&&null!=i&&(n=yi(i,se()));let o=[];const s=Q(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){const l=n?n.getImmediateChild(s):null,u=gF(r,s);o=o.concat(NF(a,c,l,u))}return i&&(o=o.concat(hE(i,e,r,n))),o}}function xF(e,t,n,r){const i=t.get(se());null==n&&null!=i&&(n=yi(i,se()));let o=[];return t.children.inorderTraversal((s,a)=>{const c=n?n.getImmediateChild(s):null,l=gF(r,s),u=e.operationForChild(s);u&&(o=o.concat(xF(u,a,c,l)))}),i&&(o=o.concat(hE(i,e,r,n))),o}function PF(e,t){const n=t.query,r=vf(e,n);return{hashFn:()=>(function Pne(e){return e.viewCache_.serverCache.getNode()}(t)||K.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Qne(e,t,n){const r=gE(e,n);if(r){const i=mE(r),o=i.path,s=i.queryId,a=Pt(o,t);return _E(e,o,new Cl(nE(s),a))}return[]}(e,n._path,r):function Yne(e,t){return na(e,new Cl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const o=function Kee(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(i,n);return pE(e,n,null,o)}}}}function vf(e,t){const n=Cf(t);return e.queryToTagMap.get(n)}function Cf(e){return e._path.toString()+"$"+e._queryIdentifier}function gE(e,t){return e.tagToQueryMap.get(t)}function mE(e){const t=e.indexOf("$");return D(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new de(e.substr(0,t))}}function _E(e,t,n){const r=e.syncPointTree_.get(t);return D(r,"Missing sync point for query tag that we're tracking"),hE(r,n,df(e.pendingWriteTree_,t),null)}function Dl(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function Wne(){return D(_f,"Reference.ts has not been loaded"),_f}())(e._repo,e._path):e}class yE{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new yE(n)}node(){return this.node_}}class vE{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Ne(this.path_,t);return new vE(this.syncTree_,n)}node(){return yf(this.syncTree_,this.path_)}}const ire=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},OF=function(e,t,n){return e&&"object"==typeof e?(D(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ore(e[".sv"],t,n):"object"==typeof e[".sv"]?sre(e[".sv"],t):void D(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ore=function(e,t,n){if("timestamp"===e)return n.timestamp;D(!1,"Unexpected server value: "+e)},sre=function(e,t,n){e.hasOwnProperty("increment")||D(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&D(!1,"Unexpected increment value: "+r);const i=t.node();if(D(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},FF=function(e,t,n,r){return wE(t,new vE(n,e),r)},CE=function(e,t,n){return wE(e,new yE(t),n)};function wE(e,t,n){const r=e.getPriority().val(),i=OF(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const s=e,a=OF(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Ys(a,Pe(i)):e}{const s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Ys(i))),s.forEachChild(Te,(a,c)=>{const l=wE(c,t.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}class bE{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function wf(e,t){let n=t instanceof de?t:new de(t),r=e,i=Q(n);for(;null!==i;){const o=xs(r.node.children,i)||{children:{},childCount:0};r=new bE(i,r,o),n=Ce(n),i=Q(n)}return r}function mo(e){return e.node.value}function EE(e,t){e.node.value=t,IE(e)}function LF(e){return e.node.childCount>0}function bf(e,t){nt(e.node.children,(n,r)=>{t(new bE(n,e,r))})}function VF(e,t,n,r){n&&!r&&t(e),bf(e,i=>{VF(i,t,!0,r)}),n&&r&&t(e)}function Tl(e){return new de(null===e.parent?e.name:Tl(e.parent)+"/"+e.name)}function IE(e){null!==e.parent&&function lre(e,t,n){const r=function are(e){return void 0===mo(e)&&!LF(e)}(n),i=tr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,IE(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,IE(e))}(e.parent,e.name,e)}const ure=/[\[\].#$\/\u0000-\u001F\u007F]/,dre=/[\[\].#$\u0000-\u001F\u007F]/,DE=10485760,Ef=function(e){return"string"==typeof e&&0!==e.length&&!ure.test(e)},UF=function(e){return"string"==typeof e&&0!==e.length&&!dre.test(e)},cr=function(e,t,n,r){r&&void 0===t||Al(Os(e,"value"),t,n)},Al=function(e,t,n){const r=n instanceof de?new Dte(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+uo(r));if("function"==typeof t)throw new Error(e+"contains a function "+uo(r)+" with contents = "+t.toString());if(Kh(t))throw new Error(e+"contains "+t.toString()+" "+uo(r));if("string"==typeof t&&t.length>DE/3&&fh(t)>DE)throw new Error(e+"contains a string greater than "+DE+" utf8 bytes "+uo(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(nt(t,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!Ef(s)))throw new Error(e+" contains an invalid key ("+s+") "+uo(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Tte(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=fh(t),W1(e)})(r,s),Al(e,a,r),function Ste(e){const t=e.parts_.pop();e.byteLength_-=fh(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),i&&o)throw new Error(e+' contains ".value" child '+uo(r)+" in addition to actual children.")}},SE=function(e,t,n,r){if(!(r&&void 0===n||UF(n)))throw new Error(Os(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pre=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),SE(e,t,n,r)},lr=function(e,t){if(".info"===Q(t))throw new Error(e+" failed = Can't modify data under /.info/")};class gre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function If(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null!==n&&!jb(o,n.path)&&(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function AE(e,t,n){If(e,n),$F(e,r=>jb(r,t))}function En(e,t,n){If(e,n),$F(e,r=>bn(r,t)||bn(t,r))}function $F(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(mre(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function mre(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();co&&tt("event: "+n.toString()),qs(r)}}}const _re=25;class yre{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=af(),this.transactionQueueTree_=new bE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function zF(e){const n=e.infoData_.getNode(new de(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function kl(e){return ire({timestamp:zF(e)})}function WF(e,t,n,r,i){e.dataUpdateCount++;const o=new de(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const c=dh(n,l=>Pe(l));s=function Zne(e,t,n,r){const i=gE(e,r);if(i){const o=mE(i),s=o.path,a=o.queryId,c=Pt(s,t),l=Se.fromObject(n);return _E(e,s,new ea(nE(a),c,l))}return[]}(e.serverSyncTree_,o,c,i)}else{const c=Pe(n);s=function Xne(e,t,n,r){const i=gE(e,r);if(null!=i){const o=mE(i),s=o.path,a=o.queryId,c=Pt(s,t);return _E(e,s,new fo(nE(a),c,n))}return[]}(e.serverSyncTree_,o,c,i)}else if(r){const c=dh(n,l=>Pe(l));s=function Kne(e,t,n){const r=Se.fromObject(n);return na(e,new ea({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,c)}else{const c=Pe(n);s=Il(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=ia(e,o)),En(e.eventQueue_,a,s)}function GF(e,t){ME(e,"connected",t),!1===t&&function Ere(e){ra(e,"onDisconnectEvents");const t=kl(e),n=af();Jb(e.onDisconnect_,se(),(i,o)=>{const s=FF(i,o,e.serverSyncTree_,t);Js(n,i,s)});let r=[];Jb(n,se(),(i,o)=>{r=r.concat(Il(e.serverSyncTree_,i,o));const s=xE(e,i);ia(e,s)}),e.onDisconnect_=af(),En(e.eventQueue_,se(),r)}(e)}function ME(e,t,n){const r=new de("/.info/"+t),i=Pe(n);e.infoData_.updateSnapshot(r,i);const o=Il(e.infoSyncTree_,r,i);En(e.eventQueue_,r,o)}function Df(e){return e.nextWriteId_++}function kE(e,t,n,r,i){ra(e,"set",{path:t.toString(),value:n,priority:r});const o=kl(e),s=Pe(n,r),a=yf(e.serverSyncTree_,t),c=CE(s,a,o),l=Df(e),u=fE(e.serverSyncTree_,t,c,l,!0);If(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),(h,f)=>{const p="ok"===h;p||vt("set at "+t+" failed: "+h);const g=Ci(e.serverSyncTree_,l,!p);En(e.eventQueue_,t,g),function wi(e,t,n,r){t&&qs(()=>{if("ok"===n)t(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,t(s)}})}(0,i,h,f)});const d=xE(e,t);ia(e,d),En(e.eventQueue_,d,[])}function RE(e,t,n){let r;r=".info"===Q(t._path)?pE(e.infoSyncTree_,t,n):pE(e.serverSyncTree_,t,n),AE(e.eventQueue_,t._path,r)}function ra(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),tt(n,...t)}function NE(e,t,n){return yf(e.serverSyncTree_,t,n)||K.EMPTY_NODE}function Tf(e,t=e.transactionQueueTree_){if(t||Sf(e,t),mo(t)){const n=QF(e,t);D(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function kre(e,t,n){const r=n.map(l=>l.currentWriteId),i=NE(e,t,r);let o=i;const s=i.hash();for(let l=0;l<n.length;l++){const u=n[l];D(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const d=Pt(t,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}const a=o.val(!0),c=t;e.server_.put(c.toString(),a,l=>{ra(e,"transaction put response",{path:c.toString(),status:l});let u=[];if("ok"===l){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Ci(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Sf(e,wf(e.transactionQueueTree_,t)),Tf(e,e.transactionQueueTree_),En(e.eventQueue_,t,u);for(let h=0;h<d.length;h++)qs(d[h])}else{if("datastale"===l)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{vt("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}ia(e,t)}},s)}(e,Tl(t),n)}else LF(t)&&bf(t,n=>{Tf(e,n)})}function ia(e,t){const n=YF(e,t),r=Tl(n);return function Rre(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const c=t[a],l=Pt(n,c.path);let d,u=!1;if(D(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)u=!0,d=c.abortReason,i=i.concat(Ci(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=_re)u=!0,d="maxretry",i=i.concat(Ci(e.serverSyncTree_,c.currentWriteId,!0));else{const h=NE(e,c.path,s);c.currentInputSnapshot=h;const f=t[a].update(h.val());if(void 0!==f){Al("transaction failed: Data returned ",f,c.path);let p=Pe(f);"object"==typeof f&&null!=f&&tr(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=c.currentWriteId,v=kl(e),_=CE(p,h,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=_,c.currentWriteId=Df(e),s.splice(s.indexOf(y),1),i=i.concat(fE(e.serverSyncTree_,c.path,_,c.currentWriteId,c.applyLocally)),i=i.concat(Ci(e.serverSyncTree_,y,!0))}else u=!0,d="nodata",i=i.concat(Ci(e.serverSyncTree_,c.currentWriteId,!0))}En(e.eventQueue_,n,i),i=[],u&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&r.push("nodata"===d?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(d),!1,null)))}Sf(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)qs(r[a]);Tf(e,e.transactionQueueTree_)}(e,QF(e,n),r),r}function YF(e,t){let n,r=e.transactionQueueTree_;for(n=Q(t);null!==n&&void 0===mo(r);)r=wf(r,n),n=Q(t=Ce(t));return r}function QF(e,t){const n=[];return XF(e,t,n),n.sort((r,i)=>r.order-i.order),n}function XF(e,t,n){const r=mo(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);bf(t,i=>{XF(e,i,n)})}function Sf(e,t){const n=mo(t);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,EE(t,n.length>0?n:void 0)}bf(t,r=>{Sf(e,r)})}function xE(e,t){const n=Tl(YF(e,t)),r=wf(e.transactionQueueTree_,t);return function cre(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{PE(e,i)}),PE(e,r),VF(r,i=>{PE(e,i)}),n}function PE(e,t){const n=mo(t);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(D(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(D(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Ci(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?EE(t,void 0):n.length=o+1,En(e.eventQueue_,Tl(t),i);for(let s=0;s<r.length;s++)qs(r[s])}}const OE=function(e,t){const n=Pre(e),r=n.namespace;return"firebase.com"===n.domain&&ir(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&ir("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new xb(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,t,"",r!==n.subdomain),path:new de(n.pathString)}},Pre=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof e){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function Nre(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}(e.substring(u,d)));const h=function xre(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vt(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));l=t.indexOf(":"),l>=0?(s="https"===a||"wss"===a,c=parseInt(t.substring(l+1),10)):l=t.length;const f=t.slice(0,l);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class ZF{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class JF{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class eL{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return D(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class an{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:Ub(this._path)}get ref(){return new Ln(this._repo,this._path)}get _queryIdentifier(){const t=sF(this._queryParams),n=kb(t);return"{}"===n?"default":n}get _queryObject(){return sF(this._queryParams)}isEqual(t){if(!((t=Rt(t))instanceof an))return!1;const n=this._repo===t._repo,r=jb(this._path,t._path);return n&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ete(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Ln extends an{constructor(t,n){super(t,n,new Yb,!1)}get parent(){const t=z1(this._path);return null===t?null:new Ln(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class _o{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new de(t),r=yo(this.ref,t);return new _o(this._node.getChild(n),r,Te)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new _o(i,yo(this.ref,r),Te)))}hasChild(t){const n=new de(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function tL(e,t){return(e=Rt(e))._checkNotDeleted("ref"),void 0!==t?yo(e._root,t):e._root}function yo(e,t){return null===Q((e=Rt(e))._path)?pre("child","path",t,!1):SE("child","path",t,!1),new Ln(e._repo,Ne(e._path,t))}function Fre(e,t){e=Rt(e),lr("push",e._path),cr("push",t,e._path,!0);const n=zF(e._repo),r=zte(n),i=yo(e,r),o=yo(e,r);let s;return s=null!=t?FE(o,t).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function FE(e,t){e=Rt(e),lr("set",e._path),cr("set",t,e._path,!1);const n=new Ns;return kE(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Lre(e){return function wre(e,t){const n=function Jne(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(l,u)=>{const d=Pt(l,n);r=r||yi(u,d)});let i=e.syncPointTree_.get(n);i?r=r||yi(i,se()):(i=new DF,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=null!=r,s=o?new mi(r,!0,!1):null;return function One(e){return uf(e.viewCache_)}(TF(i,t,df(e.pendingWriteTree_,t._path),o?s.getNode():K.EMPTY_NODE,o))}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(r=>{const i=Pe(r).withIndex(t._queryParams.getIndex()),o=Il(e.serverSyncTree_,t._path,i);return AE(e.eventQueue_,t._path,o),Promise.resolve(i)},r=>(ra(e,"get for query "+Ke(t)+" failed: "+r),Promise.reject(new Error(r))))}((e=Rt(e))._repo,e).then(t=>new _o(t,new Ln(e._repo,e._path),e._queryParams.getIndex()))}class kf{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,n){const r=n._queryParams.getIndex();return new ZF("value",this,new _o(t.snapshotNode,new Ln(n._repo,n._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new JF(this,t,n):null}matches(t){return t instanceof kf&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Rf{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n="children_added"===t?"child_added":t;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new JF(this,t,n):null}createEvent(t,n){D(null!=t.childName,"Child events should have a childName.");const r=yo(new Ln(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new ZF(t.type,this,new _o(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Rf&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nL(e,t,n,r){return function Rl(e,t,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const c=n,l=(u,d)=>{RE(e._repo,e,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}const s=new eL(n,o||void 0),a="value"===t?new kf(s):new Rf(t,s);return function Sre(e,t,n){let r;r=".info"===Q(t._path)?RF(e.infoSyncTree_,t,n):RF(e.serverSyncTree_,t,n),AE(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>RE(e._repo,e,a)}(e,"value",t,n,r)}(function Une(e){D(!gf,"__referenceConstructor has already been defined"),gf=e})(Ln),function zne(e){D(!_f,"__referenceConstructor has already been defined"),_f=e}(Ln);const LE={};function Yre(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||ir("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tt("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c,l,s=OE(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(l=process.env.FIREBASE_DATABASE_EMULATOR_HOST),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=OE(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const u=i&&c?new hl(hl.OWNER):new Zee(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ef(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),UF(e)}(n))throw new Error(Os(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",s),X(s.path)||ir("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function Xre(e,t,n,r){let i=LE[t.name];i||(i={},LE[t.name]=i);let o=i[e.toURLString()];return o&&ir("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new yre(e,false,n,r),i[e.toURLString()]=o,o}(a,e,u,new Xee(e.name,n));return new Jre(d,e)}class Jre{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function vre(e,t,n){if(e.stats_=Fb(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new sf(e.repoInfo_,(r,i,o,s)=>{WF(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>GF(e,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new ho(e.repoInfo_,t,(r,i,o,s)=>{WF(e,r,i,o,s)},r=>{GF(e,r)},r=>{!function Cre(e,t){nt(t,(n,r)=>{ME(e,n,r)})}(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=function tte(e,t){const n=e.toString();return Ob[n]||(Ob[n]=t()),Ob[n]}(e.repoInfo_,()=>new rne(e.stats_,e.server_)),e.infoData_=new Zte,e.infoSyncTree_=new kF({startListening:(r,i,o,s)=>{let a=[];const c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=Il(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),ME(e,"connected",!1),e.serverSyncTree_=new kF({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{const l=s(a,c);En(e.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ln(this._repo,se())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Qre(e,t){const n=LE[t];(!n||n[e.key]!==e)&&ir(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function KF(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&ir("Cannot call "+t+" on a deleted database.")}}function eie(e=Sy(),t){return Ls(e,"database").getImmediate({identifier:t})}ho.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},ho.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function tie(e){(function jee(e){Sb=e})(Vs),Nt(new yt("database",(t,{instanceIdentifier:n})=>Yre(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Ve(s1,"0.13.0",e),Ve(s1,"0.13.0","esm2017")}();class Nf{constructor(t){return t}}const aL="database",VE=new A("angularfire2.database-instances");function sie(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Nf(r)}}const aie={provide:class iie{constructor(){return dC(aL)}},deps:[[new Tt,VE]]},cie={provide:Nf,useFactory:function oie(e,t){const n=uC(aL,e,t);return n&&new Nf(n)},deps:[[new Tt,VE],$s]};let lie=(()=>{class e{constructor(){Ve("angularfire",Eh.full,"rtdb")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Ct({providers:[cie,aie]}),e})();function uie(e,...t){return{ngModule:lie,providers:[{provide:VE,useFactory:sie(e),multi:!0,deps:[ue,pt,hC,fC,[new Tt,t1],[new Tt,kC],...t]}]}}const die=Cn(yo,!0),hie=Cn(Lre,!0),fie=Cn(eie,!0),pie=Cn(nL,!0),gie=Cn(Fre,!0),xf=Cn(tL,!0),cL=Cn(FE,!0);let mie=(()=>{class e{constructor(n){this.db=n}writeData(n,r){const i=xf(this.db,n);return cL(i,r)}pushData(n,r){var i=this;return m(function*(){const o=gie(xf(i.db,n));yield cL(o,r)})()}readData(n){var r=this;return m(function*(){const i=xf(r.db),o=yield hie(die(i,n));return o.exists()?o.val():null})()}listenToData(n){return new Me(r=>{const i=xf(this.db,n),o=pie(i,s=>{r.next(s.exists()?s.val():null)},s=>{r.error(s)});return()=>o()})}static{this.\u0275fac=function(r){return new(r||e)(x(Nf))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),_ie=(()=>{class e{constructor(){this.showToastSource=new Yt,this.showToast$=this.showToastSource.asObservable(),this.currentMessage={type:"info",text:"",icon:"cart"}}triggerToast(n,r,i){this.currentMessage={type:n,text:r,icon:i},this.showToastSource.next()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),yie=(()=>{class e{constructor(n,r){this.dbService=n,this.toastService=r,this.formPath="/games/scopa/form"}saveForm(n){var r=this;return m(function*(){try{yield r.dbService.writeData(r.formPath,JSON.stringify(n)),r.toastService.triggerToast("success","Form salvato correttamente","check")}catch(i){console.error(i),r.toastService.triggerToast("error","Errore nel salvataggio del form","exclamation-triangle")}})()}getForm(){var n=this;return m(function*(){try{const r=yield n.dbService.readData(n.formPath);return r?JSON.parse(r):null}catch(r){return console.error(r),n.toastService.triggerToast("error","Errore nel recupero del form","exclamation-triangle"),null}})()}addPlayer(n){var r=this;return m(function*(){try{yield r.dbService.pushData(r.formPath+"/users",n),r.toastService.triggerToast("success",`Giocatore ${n.name} aggiunto`,"person-plus")}catch(i){console.error(i),r.toastService.triggerToast("error",`Errore nell'aggiunta del giocatore ${n.name}`,"exclamation-triangle")}})()}listenToForm(){return this.dbService.listenToData(this.formPath)}static{this.\u0275fac=function(r){return new(r||e)(x(mie),x(_ie))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const vie=["modalTrigger"],Cie=["nicknameInput"];function wie(e,t){if(1&e){const n=ei();E(0,"div",19)(1,"div",20)(2,"input",21,22),ye("ngModelChange",function(i){return hn(n),fn(ne().nickname=i)})("keydown.enter",function(){return hn(n),fn(ne().addPlayer())}),I(),E(4,"button",23),ye("click",function(){return hn(n),fn(ne().addPlayer())}),L(5,"Enter"),I()()()}if(2&e){const n=ne();T(2),k("ngModel",n.nickname)}}function bie(e,t){1&e&&(E(0,"p",33),L(1," In attesa di altri giocatori... "),I())}function Eie(e,t){1&e&&(E(0,"p",33),L(1," Pronti per giocare "),I())}function Iie(e,t){1&e&&Z(0,"i",39)}function Die(e,t){1&e&&Z(0,"i",40)}function Tie(e,t){if(1&e&&(E(0,"li",34)(1,"span",35),L(2),I(),E(3,"span",36),F(4,Iie,1,0,"i",37),F(5,Die,1,0,"i",38),L(6),I()()),2&e){const n=t.$implicit;T(2),$t(n.name),T(2),k("ngIf","human"===n.playerType),T(1),k("ngIf","cpu"===n.playerType),T(1),Fi(" ",n.playerType," ")}}function Sie(e,t){if(1&e){const n=ei();E(0,"button",41),ye("click",function(){return hn(n),fn(ne(2).addBots())}),L(1," Gioca contro il computer "),I()}}function Aie(e,t){if(1&e){const n=ei();E(0,"div",24)(1,"div",25)(2,"div",26)(3,"h5",27),L(4,"Sala d'attesa"),I(),F(5,bie,2,0,"p",28),F(6,Eie,2,0,"p",28),E(7,"ul",29),F(8,Tie,7,4,"li",30),I(),E(9,"button",31),ye("click",function(){return hn(n),fn(ne().startGame())}),L(10," Inizia la partita "),I(),F(11,Sie,2,0,"button",32),I()()()}if(2&e){const n=ne();let r,i,o,s,a;T(5),k("ngIf",((null==(r=n.gameForm.get("users"))||null==r.value?null:r.value.length)||0)<n.minPlayers),T(1),k("ngIf",((null==(i=n.gameForm.get("users"))||null==i.value?null:i.value.length)||0)>=n.minPlayers),T(2),k("ngForOf",null==(o=n.gameForm.get("users"))?null:o.value),T(1),k("disabled",((null==(s=n.gameForm.get("users"))||null==s.value?null:s.value.length)||0)<n.minPlayers),T(2),k("ngIf",(null==(a=n.gameForm.get("users"))?null:a.value.length)<n.minPlayers)}}function Mie(e,t){1&e&&(E(0,"div",65)(1,"span",66),L(2,"Loading..."),I()())}function kie(e,t){1&e&&(E(0,"div",67),Z(1,"div",49),I())}function Rie(e,t){if(1&e&&(E(0,"div",59)(1,"div",60),F(2,Mie,3,0,"div",61),E(3,"p",62),L(4),I()(),E(5,"p",62),L(6),I(),E(7,"div",63),F(8,kie,2,0,"div",64),I()()),2&e){const n=ne().$implicit,r=ne(2);let i;T(2),k("ngIf",(null==(i=r.gameForm.get("peopleInTurn"))?null:i.value)===n.name),T(2),$t(n.name),T(2),Fi("Carte ",(null==n.deck?null:n.deck.length)||0,""),T(2),k("ngForOf",n.deck)}}function Nie(e,t){if(1&e&&(E(0,"div",57),F(1,Rie,9,4,"div",58),I()),2&e){const n=t.$implicit,r=ne(2);let i;T(1),k("ngIf",n.name!==(null==(i=r.gameForm.get("userName"))?null:i.value))}}function xie(e,t){if(1&e){const n=ei();E(0,"div",68),ye("click",function(){const o=hn(n).$implicit;return fn(ne(2).action("centerDeckCard",o))}),E(1,"div",69),Z(2,"i",70),I(),E(3,"div",71),Z(4,"h1",72),I()()}if(2&e){const n=t.$implicit,r=ne(2);k("ngClass",r.getCardClasses(n)),T(4),k("ngClass",r.getCardCenterClass(n))}}function Pie(e,t){1&e&&(E(0,"div"),Z(1,"i",81),I())}function Oie(e,t){1&e&&(E(0,"div"),Z(1,"i",82),I())}function Fie(e,t){1&e&&(E(0,"div"),Z(1,"i",83),L(2,"2"),I())}function Lie(e,t){1&e&&(E(0,"div"),Z(1,"i",83),L(2,"4"),I())}function Vie(e,t){1&e&&(E(0,"div"),Z(1,"div",84),I())}function Uie(e,t){1&e&&(E(0,"div"),Z(1,"div",85),I())}function jie(e,t){1&e&&(E(0,"div"),Z(1,"div",86),I())}function Bie(e,t){1&e&&(E(0,"div"),Z(1,"div",87),I())}function $ie(e,t){1&e&&(E(0,"div"),Z(1,"div",88),I())}function Hie(e,t){if(1&e&&(E(0,"span",80),F(1,Pie,2,0,"div",18),F(2,Oie,2,0,"div",18),F(3,Fie,3,0,"div",18),F(4,Lie,3,0,"div",18),F(5,Vie,2,0,"div",18),F(6,Uie,2,0,"div",18),F(7,jie,2,0,"div",18),F(8,Bie,2,0,"div",18),F(9,$ie,2,0,"div",18),I()),2&e){const n=ne().$implicit;T(1),k("ngIf","reverse"==n.type),T(1),k("ngIf","skip"==n.type),T(1),k("ngIf","draw-two"==n.type),T(1),k("ngIf","wild-draw-four"==n.type),T(1),k("ngIf","wild"==n.type),T(1),k("ngIf",n.suit&&"Denari"==n.type),T(1),k("ngIf",n.suit&&"Spade"==n.type),T(1),k("ngIf",n.suit&&"Bastoni"==n.type),T(1),k("ngIf",n.suit&&"Coppe"==n.type)}}function zie(e,t){if(1&e&&(E(0,"span",80),L(1),I()),2&e){const n=ne().$implicit;T(1),$t(n.value)}}function Wie(e,t){1&e&&Z(0,"i",81)}function Gie(e,t){1&e&&Z(0,"i",82)}function qie(e,t){1&e&&(E(0,"span",94),L(1,"2"),I())}function Kie(e,t){1&e&&Z(0,"div",95)}function Yie(e,t){1&e&&Z(0,"div",96)}function Qie(e,t){if(1&e&&(E(0,"span",94),L(1),I()),2&e){const n=ne(2).$implicit;T(1),$t(n.value)}}function Xie(e,t){if(1&e&&(qa(0),F(1,Wie,1,0,"i",89),F(2,Gie,1,0,"i",90),F(3,qie,2,0,"span",91),F(4,Kie,1,0,"div",92),F(5,Yie,1,0,"div",93),F(6,Qie,2,1,"span",91),Ka()),2&e){const n=ne().$implicit;T(1),k("ngIf","reverse"===n.type),T(1),k("ngIf","skip"===n.type),T(1),k("ngIf","draw-two"===n.type),T(1),k("ngIf","wild-draw-four"===n.type),T(1),k("ngIf","wild"===n.type),T(1),k("ngIf",!n.type)}}function Zie(e,t){if(1&e&&(qa(0),Z(1,"div",97),Ka()),2&e){const n=ne().$implicit,r=ne(2);T(1),k("ngClass",r.getCardCenterClass(n))}}function Jie(e,t){1&e&&(E(0,"div"),Z(1,"i",81),I())}function eoe(e,t){1&e&&(E(0,"div"),Z(1,"i",82),I())}function toe(e,t){1&e&&(E(0,"div"),Z(1,"i",83),L(2,"2"),I())}function noe(e,t){1&e&&(E(0,"div"),Z(1,"i",83),L(2,"4"),I())}function roe(e,t){1&e&&(E(0,"div"),Z(1,"div",84),I())}function ioe(e,t){if(1&e&&(E(0,"span",80),F(1,Jie,2,0,"div",18),F(2,eoe,2,0,"div",18),F(3,toe,3,0,"div",18),F(4,noe,3,0,"div",18),F(5,roe,2,0,"div",18),I()),2&e){const n=ne(2).$implicit;T(1),k("ngIf","reverse"==n.type),T(1),k("ngIf","skip"==n.type),T(1),k("ngIf","draw-two"==n.type),T(1),k("ngIf","wild-draw-four"==n.type),T(1),k("ngIf","wild"==n.type)}}function ooe(e,t){if(1&e&&(E(0,"span",80),L(1),I()),2&e){const n=ne(2).$implicit;T(1),$t(n.value)}}function soe(e,t){if(1&e&&(E(0,"div",98),F(1,ioe,6,5,"span",76),F(2,ooe,2,1,"span",76),I()),2&e){const n=ne().$implicit;T(1),k("ngIf",n.type),T(1),k("ngIf",!n.type)}}const aoe=function(e,t){return{"margin-left":e,"z-index":t}};function coe(e,t){if(1&e){const n=ei();E(0,"div",73),ye("mouseenter",function(){const o=hn(n).$implicit;return fn(ne(2).onHover(o))})("mouseleave",function(){return hn(n),fn(ne(2).onLeave())})("click",function(){const o=hn(n).$implicit;return fn(ne(2).action("userDeckCard",o))}),E(1,"div",74)(2,"div",75),F(3,Hie,10,9,"span",76),F(4,zie,2,1,"span",76),I(),E(5,"div",77)(6,"h1",78),F(7,Xie,7,6,"ng-container",18),F(8,Zie,2,1,"ng-container",18),I()(),F(9,soe,3,2,"div",79),I()()}if(2&e){const n=t.$implicit,r=t.index,i=ne(2);let o,s;k("ngClass",i.getCardClasses(n))("ngStyle",um(7,aoe,i.calculateMargin(r,i.getMyUserDeck().length),i.hoveredCard===n?100:1)),T(3),k("ngIf",!n.suit&&n.type),T(1),k("ngIf",!n.type),T(3),k("ngIf","uno"===(null==(o=i.gameForm.get("gameName"))?null:o.value)),T(1),k("ngIf","scopa"===(null==(s=i.gameForm.get("gameName"))?null:s.value)&&n.suit&&n.rank),T(1),k("ngIf",!n.suit)}}const loe=function(e){return{"scopa-center-wrapper":e}},uoe=function(){return{}},lL=function(e){return{"margin-left":e}};function doe(e,t){if(1&e){const n=ei();E(0,"div",42)(1,"div",43)(2,"div",44),F(3,Nie,2,1,"div",45),I()(),E(4,"div",46)(5,"div",47)(6,"div",48),ye("click",function(){hn(n);const i=ne();let o;return fn(i.playerDrawCard(null==(o=i.gameForm.get("userName"))?null:o.value))}),Z(7,"div",49),I()(),E(8,"div",50)(9,"div",51),F(10,xie,5,2,"div",52),I()(),Z(11,"div",53),I(),E(12,"div",54)(13,"div",55),F(14,coe,10,10,"div",56),I()()()}if(2&e){const n=ne();let r,i,o,s,a,c;T(3),k("ngForOf",null==(r=n.gameForm.get("users"))?null:r.value),T(3),Qa((null==(i=n.gameForm.get("gameName"))||null==i.value?null:i.value.toLowerCase())+"-deck-card"),T(2),k("ngClass",ic(10,loe,"scopa"===(null==(o=n.gameForm.get("gameName"))||null==o.value?null:o.value.toLowerCase()))),T(1),Qa("scopa"===(null==(s=n.gameForm.get("gameName"))||null==s.value?null:s.value.toLowerCase())?"position-absolute":""),k("ngStyle","scopa"===(null==(a=n.gameForm.get("gameName"))||null==a.value?null:a.value.toLowerCase())?rc(12,uoe):ic(13,lL,n.calculateMarginForDeckContainer(null==(a=n.gameForm.get("centerDeck"))||null==a.value?null:a.value.length))),T(1),k("ngForOf",null==(c=n.gameForm.get("centerDeck"))?null:c.value),T(3),k("ngStyle",ic(15,lL,n.calculateMarginForDeckContainer(n.getMyUserDeck().length))),T(1),k("ngForOf",n.getMyUserDeck())}}function hoe(e,t){if(1&e&&(E(0,"tr")(1,"td"),L(2),I(),E(3,"td"),L(4),I(),E(5,"td"),L(6),I(),E(7,"td"),L(8),I(),E(9,"td"),L(10),I(),E(11,"td"),L(12),I(),E(13,"td")(14,"strong"),L(15),I()()()),2&e){const n=t.$implicit;T(2),$t(n.name),T(2),$t(n.scope),T(2),$t(n.carte),T(2),$t(n.denari),T(2),$t(n.settebello),T(2),$t(n.primiera),T(3),$t(n.total)}}function foe(e,t){if(1&e&&(E(0,"div")(1,"h2"),L(2,"Risultati finali"),I(),E(3,"table",99)(4,"thead")(5,"tr")(6,"th"),L(7,"Giocatore"),I(),E(8,"th"),L(9,"Scope"),I(),E(10,"th"),L(11,"Carte"),I(),E(12,"th"),L(13,"Denari"),I(),E(14,"th"),L(15,"Settebello"),I(),E(16,"th"),L(17,"Primiera"),I(),E(18,"th"),L(19,"Punteggio Totale"),I()()(),E(20,"tbody"),F(21,hoe,16,7,"tr",100),I()()()),2&e){const n=ne();T(21),k("ngForOf",n.getUserScores())}}const poe=[{path:"scopa",redirectTo:"game/scopa",pathMatch:"full"},{path:"uno",redirectTo:"game/uno",pathMatch:"full"},{path:"login",component:Ree},{path:"home",component:Oee,canActivate:[r1]},{path:"games",component:Uee,canActivate:[r1]},{path:"game/:gameName",component:(()=>{class e{constructor(n,r,i,o){this.fb=n,this.alertService=r,this.route=i,this.scopaService=o,this.nickname="",this.people=[],this.minPlayers=4,this.maxPlayers=4,this.hoveredCard=null,this.selectedCaptureCards=[],this.hasSelectableCards=!1,this.toCapture=[],this.toCenter=[],this.validCaptureCards=[]}ngOnInit(){const n=this.route.snapshot.params.gameName;n?this.gameForm=this.fb.group({gameName:[n],phase:["player-input"],users:[[]],peopleInTurn:[""],lastTaker:[""],mainDeck:[[]],originalDeck:[[]],centerDeck:[[]],userName:["Mimmo"],currentColor:[""],direction:[1]}):this.alertService.triggerAlert("warning","Nessun gioco selezionato! Verrai reindirizzato.","exclamation-circle")}ngAfterViewInit(){this.nicknameInput.nativeElement.focus()}getUserScores(){const n=this.gameForm.get("users")?.value||[],r=n.map(h=>h.pointsDeck?.deck?.length||0),i=Math.max(...r),o=n.map(h=>h.pointsDeck?.deck?.filter(f=>"denari"===f.suit.toLowerCase()).length||0),s=Math.max(...o),a=r.filter(h=>h===i).length,c=o.filter(h=>h===s).length,l=n.map(h=>this.calcPrimiera(h.pointsDeck?.deck||[])),u=Math.max(...l),d=l.filter(h=>h===u).length;return n.map((h,f)=>{const p=h.pointsDeck||{deck:[],scopa:0},g=p.deck||[],y=p.scopa||0,v=g.length,_=g.filter(Ae=>"denari"===Ae.suit.toLowerCase()).length,R=g.some(Ae=>"denari"===Ae.suit.toLowerCase()&&"7"===Ae.rank)?1:0,O=l[f];let V=0;return V+=y,V+=v===i&&1===a?1:0,V+=_===s&&1===c?1:0,V+=R,V+=O===u&&1===d?1:0,console.log({name:h.name,scope:y,carte:v,denari:_,settebello:R,primiera:O,total:V,pointsDeck:g}),{name:h.name,scope:y,carte:v,denari:_,settebello:R,primiera:O,total:V}})}calcPrimiera(n){const r={7:21,6:18,1:16,Asso:16,5:15,4:14,3:13,2:12,Re:10,Cavallo:10,Fante:10},i=["denari","coppe","spade","bastoni"];let o=0;for(let s of i){const a=n.filter(c=>c.suit.toLowerCase()===s);a.length>0&&(o+=Math.max(...a.map(l=>r[l.rank]||0)))}return o}getCardClasses(n){return{"not-selectable":this.hasSelectableCards&&!n.selectable,"selected-card":this.selectedCaptureCards.includes(n)}}onHover(n){this.hoveredCard=n}onLeave(){this.hoveredCard=null}getCardBackground(n){return"scopa"===this.gameForm.get("gameName")?.value?.toLowerCase()?{"deck-white":!0}:{"deck-red":"Rosso"===n.color&&this.isCardPlayable(n),"deck-green":"Verde"===n.color&&this.isCardPlayable(n),"deck-blue":"Blu"===n.color&&this.isCardPlayable(n),"deck-yellow":"Giallo"===n.color&&this.isCardPlayable(n),"deck-wild":!n.suit&&!n.color&&this.isCardPlayable(n),"deck-red-disabled":"Rosso"===n.color&&!this.isCardPlayable(n),"deck-green-disabled":"Verde"===n.color&&!this.isCardPlayable(n),"deck-blue-disabled":"Blu"===n.color&&!this.isCardPlayable(n),"deck-yellow-disabled":"Giallo"===n.color&&!this.isCardPlayable(n),"deck-wild-disabled":!n.color&&!this.isCardPlayable(n)}}getCardCenterClass(n){const r=this.gameForm.get("gameName")?.value?.toLowerCase();return"uno"===r?n.type?`uno-${n.type}`:"":"scopa"===r&&n.suit&&n.rank?`${n.suit.toLowerCase()} ${n.suit.toLowerCase()}-${n.rank.toLowerCase()}`:""}getCardIndexInDeck(n){const r=this.gameForm.get("users")?.value||[],i=this.gameForm.get("userName")?.value,o=r.find(s=>s.name===i);return o&&o.deck?o.deck.findIndex(s=>s===n):-1}endGame(){const n=this.gameForm.get("users")?.value||[],r=this.getUserScores();console.log("\u{1f4be} Stato pointsDeck:",n.map(i=>i.pointsDeck)),console.log("\u{1f3c1} Fine partita - punteggi finali:",r),this.gameForm.patchValue({phase:"finish-playing"}),setTimeout(()=>{this.alertService.triggerAlert("success","La partita \xe8 terminata! Ecco i punteggi finali.","check-circle",7e3)},2e3),this.gameForm.patchValue({users:n,gameOver:!0,finalScores:r})}cpuPlay(){const n=this.gameForm.get("users")?.value||[];let r=this.gameForm.value.centerDeck,i=this.gameForm.value.mainDeck||[],o=this.gameForm.value.lastTaker,s=n.findIndex(p=>p.name===this.gameForm.value.peopleInTurn);-1===s&&(s=0);const a=n[s];let c=a.deck,l=a.pointsDeck;l||(l={deck:[],scopa:0},a.pointsDeck=l),l.deck||(l.deck=[]);const u=this.suggestBestCard(c,r);if(u.capturedCards&&0!==u.capturedCards.length){const p=u.handCard,g=u.capturedCards||[],y=this.findMatchingIndices(g,r);this.moveCards(c,l.deck,[u.handCardIndex]),y.length>0&&this.moveCards(r,l.deck,y),o=a.name;let v=`\u{1f916} ${a.name} prende ${g.map(_=>`${_?.rank??"?"} di ${_?.suit??"?"}`).join(", ")} con ${p?.rank??"?"} di ${p?.suit??"?"}`;0===r.length&&(l.scopa+=1,v+=" ...e fa scopa!"),g.some(_=>"7"===_.rank&&"denari"===_.suit)&&(v=`\u{1f916} ${a.name} prende il Settebello!`),this.alertService.triggerAlert("success",v,"check-circle",5e3),console.log("\u{1f4bb} CPU played:",p),console.log("\u{1f4bb} CPU captured:",g)}else this.moveCards(c,r,[u.handCardIndex]),this.alertService.triggerAlert("info",`\u{1f916} ${a.name} gioca ${u.handCard.rank} di ${u.handCard.suit}.`,"info-circle",5e3);if(n.every(p=>0===p.deck.length)){if(!(i.length>0)){if(o){const p=n.find(g=>g.name===o).pointsDeck;p&&p.deck.push(...r)}return r=[],this.gameForm.patchValue({centerDeck:r}),console.log("\u{1f3c1} Fine partita, carte rimanenti assegnate al lastTaker"),void this.endGame()}{const p=this.dealCardsToPlayers(n,i,3);n.splice(0,n.length,...p),console.log("\u{1f4be} Nuove carte distribuite dal mazzo principale")}}const f=n[(s+1)%n.length];this.gameForm.patchValue({peopleInTurn:f.name,users:n,centerDeck:r,mainDeck:i,lastTaker:o}),console.log(`\u{1f504} Turno passato a: ${f.name}`),"human"!==f.playerType&&(console.log(`\u{1f916} ${f.name} \xe8 CPU, rilancio cpuPlay()`),setTimeout(()=>this.cpuPlay(),2e3))}sortCardsByImportance(n){const r=i=>{switch(i.rank.toLowerCase()){case"asso":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"fante":return 8;case"cavallo":return 9;case"re":return 10;default:return 0}};return n.slice().sort((i,o)=>"7"===i.rank&&"denari"===i.suit?-1:"7"===o.rank&&"denari"===o.suit?1:"6"===i.rank&&"denari"===i.suit?-1:"6"===o.rank&&"denari"===o.suit?1:"7"===i.rank&&"denari"!==i.suit?-1:"7"===o.rank&&"denari"!==o.suit?1:"6"===i.rank&&"denari"!==i.suit?-1:"6"===o.rank&&"denari"!==o.suit?1:r(i)-r(o))}suggestBestCard(n,r){const i=a=>{switch(String(a.rank).toLowerCase()){case"asso":case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"fante":return 8;case"cavallo":return 9;case"re":return 10;default:return 0}},o=this.sortCardsByImportance(n);for(const a of o){const c=this.findCaptureCombinationsFlat(a,r);if("7"===a.rank&&"denari"===a.suit){const u=c.find(d=>"7"===d.rank&&"denari"!==d.suit);if(u)return{handCardIndex:n.indexOf(a),handCard:a,capturedCards:[u]}}if(r.length>0&&c.length>0&&c.reduce((d,h)=>d+i(h),0)===i(a)&&1===r.length)return{handCardIndex:n.indexOf(a),handCard:a,capturedCards:[...c[0]]};const l=c.find(u=>"6"===u.rank);if(l)return{handCardIndex:n.indexOf(a),handCard:a,capturedCards:[l]};if(c.length>1)return{handCardIndex:n.indexOf(a),handCard:a,capturedCards:[...c[0]]};if(c.length>0)return{handCardIndex:n.indexOf(a),handCard:a,capturedCards:[...c[0]]}}const s=Math.floor(Math.random()*n.length);return{handCardIndex:s,handCard:n[s],capturedCards:[]}}passToNextPlayer(){const n=this.gameForm.get("users")?.value||[],r=this.gameForm.value.peopleInTurn,o=(n.findIndex(a=>a.name===r)+1)%n.length,s=n[o];this.gameForm.patchValue({peopleInTurn:s.name}),"human"!==s.playerType&&setTimeout(()=>this.cpuPlay(),2e3)}action(n,r){const i=this.gameForm.get("users")?.value||[],o=this.gameForm.get("centerDeck")?.value||[],s=this.gameForm.get("userName")?.value,c=(this.gameForm.get("gameName")?.value?.toLowerCase(),i.find(f=>f.name===s)),l=this.gameForm.get("peopleInTurn")?.value,d=(i.find(f=>f.name===l),i.findIndex(f=>f.name===l));let h=this.gameForm.value.users[d].deck.findIndex(f=>f.name==r.name);if(c&&c.deck)switch(n){case"userDeckCard":const f=this.findCaptureCombinationsFlat(r,o,!0);f&&f.length>0?(this.playedCard=r,this.toggleSelectableCards(this.gameForm.value.centerDeck,f)):(this.moveCards(this.gameForm.value.users[d].deck,this.gameForm.value.centerDeck,[h]),this.alertService.triggerAlert("info",`Hai giocato ${r.rank} di ${r.suit}.`,"info-circle",5e3),this.passToNextPlayer());break;case"centerDeckCard":this.selectedCaptureCards.push(r);const p=this.findMatchingIndices([this.playedCard],this.gameForm.value.users[d].deck),g=this.findMatchingIndices(this.selectedCaptureCards,this.gameForm.value.centerDeck);if("equal"===this.compareCardSums([this.playedCard],this.selectedCaptureCards)){this.moveCards(this.gameForm.value.users[d].deck,this.gameForm.value.users[d].pointsDeck.deck,p),this.moveCards(this.gameForm.value.centerDeck,this.gameForm.value.users[d].pointsDeck.deck,g),this.gameForm.patchValue({lastTaker:this.gameForm.value.peopleInTurn});let y=`Hai preso ${this.selectedCaptureCards.map(v=>`${v.rank} di ${v.suit}`).join(", ")} con ${this.playedCard.rank} di ${this.playedCard.suit}!`;0===this.gameForm.value.centerDeck.length&&(this.gameForm.value.users[d].pointsDeck.scopa+=1,y+=" ...e fai scopa!"),this.selectedCaptureCards.some(v=>"7"===v.rank&&"denari"===v.suit)&&(y="Hai preso il Settebello!"),this.alertService.triggerAlert("success",y,"check-circle",5e3),this.selectedCaptureCards=[],this.playedCard=null,this.hasSelectableCards=!1,this.passToNextPlayer()}else console.log("Somma non raggiunta");break;default:console.log("Azione non gestita:",n,r)}}getMyUserDeck(){const n=this.gameForm.get("userName")?.value;return(this.gameForm.get("users")?.value).find(i=>i.name===n)?.deck}calculateMargin(n,r){if(!r)return"0px";const i=Math.floor(r/2);return n<i?`-${30*(i-n)}px`:n>i?30*(n-i)+"px":"0px"}findMatchingIndices(n,r){const i=[];return r.forEach((o,s)=>{n.some(c=>c.rank===o.rank&&c.suit===o.suit)&&i.push(s)}),i}compareCardSums(n,r){const i=n.reduce((s,a)=>s+this.getCardNumericValue(a),0),o=r.reduce((s,a)=>s+this.getCardNumericValue(a),0);return i===o?"equal":i>o?"greater":"less"}findCaptureCombinationsFlat(n,r,i){const o=this.getCardNumericValue(n),s=[],a=(c,l=[],u=0,d=0)=>{if(u!==o){if(!(u>o))for(let h=d;h<c.length;h++){const f=this.getCardNumericValue(c[h]);l.push(c[h]),a(c,l,u+f,h+1),l.pop()}}else s.push([...l])};if(a(r),i){const l=s.flat().filter((u,d,h)=>d===h.findIndex(f=>f.rank===u.rank&&f.suit===u.suit));return this.findMatchingIndices(l,r)}return s}toggleSelectableCards(n,r){this.hasSelectableCards=!0,this.toggleCards(n,n.map((i,o)=>o),!1),this.toggleCards(n,r,!0)}toggleCards(n,r,i){r.forEach(o=>{n[o]&&(n[o].selectable=i)})}calculateMarginForDeckContainer(n){return!n||n<=1?"0px":30*-Math.floor(n/2)+"px"}addPlayer(){if(!this.nickname.trim())return;const n=this.gameForm.get("users")?.value||[],i={name:this.nickname.trim().charAt(0).toUpperCase()+this.nickname.trim().slice(1).toLowerCase(),deck:[],pointsDeck:{deck:[],scopa:0},scopa:0,played:!1,drawed:!1,playerType:"human"};this.people.push(i),this.gameForm.patchValue({users:[...n,i],phase:"waiting-room"}),this.nickname="",this.scopaService.saveForm(this.gameForm.value).then(()=>console.log("Form salvato correttamente")).catch(o=>console.error("Errore nel salvataggio del form",o))}addBots(){const n=this.gameForm.get("users")?.value||[],i=Array.from({length:this.minPlayers-n.length}).map((o,s)=>({name:`CPU ${s+1}`,deck:[],played:!1,drawed:!1,playerType:"cpu"}));this.gameForm.patchValue({users:[...n,...i]})}root(){var n=this;return m(function*(){if((n.gameForm.get("users")?.value?.length||0)<n.minPlayers)return;const r=n.gameForm.get("gameName")?.value;if(!r)return void console.error("Errore: nessun gioco selezionato!");let i=[],o=5;switch(r.toLowerCase()){case"uno":i=yield n.createUnoDeck(),o=7;break;case"scopa":i=n.createScopaDeck(),o=3;break;default:console.log(r)}if(n.gameForm.value.originalDeck=i,!i||0===i.length)return void console.error("Errore: mazzo non creato!");console.log(`Mazzo principale pronto: ${i.length} carte`),i=n.shuffleDeck([...i]);const s=n.dealCardsToPlayers(n.gameForm.get("users")?.value||[],i,o),a=n.gameForm.get("centerDeck")?.value||[];"scopa"===r&&(n.dealCardsToCenter(i,a,4),n.gameForm.patchValue({centerDeck:a,mainDeck:i})),n.gameForm.patchValue({centerDeck:a}),console.log(i,s),s.map(d=>d.name);const l=s[0]?.name||null;n.gameForm.patchValue({users:s,mainDeck:i,centerDeck:a,phase:"start-playing",peopleInTurn:l}),console.log(`Gioco "${r}" iniziato, carte distribuite:`,s),"cpu"===s.find(d=>d.name===l)?.playerType&&setTimeout(()=>{n.cpuPlay()},2e3)})()}dealCardsToPlayers(n,r,i){return(r?.length||0)<n.length*i?(console.log("\u{1f4be} Stato pointsDeck:",n.map(o=>o.pointsDeck)),this.alertService.triggerAlert("warning","Partita finita: non ci sono abbastanza carte nel mazzo principale!","info-circle",7e3),n):n.map(o=>{const s=[];for(let a=0;a<i;a++){const c=r.shift();c&&s.push(c)}return{...o,deck:s}})}dealCardsToCenter(n,r,i=4){const o=this.moveCards(n,r,Array.from({length:i},(s,a)=>a));console.log("Carte distribuite al centro:",o.map(s=>`${s.rank} di ${s.suit}`))}shuffleDeck(n){for(let r=n.length-1;r>0;r--){const i=Math.floor(Math.random()*(r+1));[n[r],n[i]]=[n[i],n[r]]}return n}createUnoDeck(){const n=["Rosso","Verde","Blu","Giallo"],r=[];for(const i of n){r.push({color:i,name:`0 ${i}`,value:0});for(let s=1;s<=9;s++)r.push({color:i,name:`${s} ${i}`,value:s}),r.push({color:i,name:`${s} ${i}`,value:s});const o=["draw-two","Reverse","Skip"];for(const s of o)r.push({color:i,name:`${s} ${i}`,type:s.toLowerCase()}),r.push({color:i,name:`${s} ${i}`,type:s.toLowerCase()})}for(let i=0;i<4;i++)r.push({name:"Wild",type:"wild"}),r.push({name:"Wild +4",type:"wild-draw-four"});return console.log(`Mazzo UNO creato: ${r.length} carte`),r}createScopaDeck(){const n=["Coppe","Denari","Spade","Bastoni"],r=["1","2","3","4","5","6","7","Fante","Cavallo","Re"],i=[];for(const o of n)for(const s of r)i.push({name:`${s} di ${o}`,suit:o,rank:s});return i}startGame(){(this.gameForm.get("users")?.value||[]).length>=this.minPlayers&&(this.gameForm.patchValue({phase:"start-waiting"}),this.root())}moveCards(n,r,i=[]){if(!n||!r)return n;const o=[];if(0===i.length){const s=n.pop();s&&o.push(s)}else i.sort((s,a)=>a-s).forEach(s=>{s>=0&&s<n.length&&o.push(n.splice(s,1)[0])});return r.push(...o),o}chooseColor(n){}findBestCaptureOrLowestCard(n,r){const i=c=>{switch(c.rank.toLowerCase()){case"asso":case"1":return 1;case"2":return 2;case"3":return 3;case"4":return 4;case"5":return 5;case"6":return 6;case"7":return 7;case"fante":return 8;case"cavallo":return 9;case"re":return 10;default:return 0}},o=(c,l)=>{let u=0;return u+=l.length,(l.some(d=>"7"===d.rank&&"denari"===d.suit)||"7"===c.rank&&"denari"===c.suit)&&(u+=10),u+=l.filter(d=>d.suit===c.suit).length,u},s=(c,l)=>{const u=[],d=(h,f,p)=>{if(f!==l)for(let g=p;g<c.length;g++){const y=i(c[g]);f+y<=l&&(h.push(c[g]),d(h,f+y,g+1),h.pop())}else u.push([...h])};return d([],0,0),u};let a=null;for(let c=0;c<n.length;c++){const l=n[c],u=i(l);let d=s(r,u);r.some(h=>i(h)===u)&&d.push(r.filter(h=>i(h)===u));for(const h of d){const f=o(l,h);(!a||f>a.score)&&(a={handCard:l,capturedCards:h,handCardIndex:c,score:f})}}if(!a&&n.length>0){let c=1/0,l=0;n.forEach((u,d)=>{const h=i(u);h<c&&(c=h,l=d)}),a={handCard:n[l],capturedCards:[],handCardIndex:l,score:0}}return a}getScopaCardsForValue(n){const r=this.gameForm.get("centerDeck")?.value||[],i=r.filter(a=>this.getCardNumericValue(a)===n);if(i.length>0)return i;const o=[],s=(a,c=[],l=0,u=0)=>{if(l!==n)for(let d=u;d<a.length;d++){const h=this.getCardNumericValue(a[d]);l+h<=n&&(c.push(a[d]),s(a,c,l+h,d+1),c.pop())}else o.push([...c])};return s(r),0===o.length?[]:(o.sort((a,c)=>a.length-c.length),o[0])}getCardNumericValue(n){switch(n.rank.toLowerCase()){case"1":case"asso":return 1;case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"10":return parseInt(n.rank,10);case"fante":return 8;case"cavallo":return 9;case"re":return 10;default:return 0}}playerDrawCard(n,r=1,i="mainDeck"){const o=this.gameForm.get("gameName")?.value?.toLowerCase(),s=this.gameForm.get("users")?.value||[],a=n||this.gameForm.get("userName")?.value,c=s.find(d=>d.name===a),l=this.gameForm.get(i)?.value||[];if(!c||!l||0===l.length)return[];const u=[];switch(o){case"uno":for(let d=0;d<r&&l.length>0;d++)u.push(l.shift());break;case"scopa":for(let d=0;d<r&&l.length>0;d++)u.push(l.shift());break;default:for(let d=0;d<r&&l.length>0;d++)u.push(l.shift())}return c.deck.push(...u),s.forEach(d=>d.played=d.name===a),this.gameForm.patchValue({users:s,[i]:l}),u.length>0&&(console.log("\u{1f4be} Stato pointsDeck:",s.map(d=>d.pointsDeck)),this.alertService.triggerAlert("warning",`${a} pesca ${u.length} carte${r>1?"s":""}: ${u.map(d=>d.name).join(", ")}`,"exclamation-circle")),u}isCardPlayable(n,r){const i=this.gameForm.get("gameName")?.value?.toLowerCase();if(!n)return!1;if(0===(this.gameForm.get("centerDeck")?.value||[]).length)return!0;if("uno"===i){let s=this.gameForm.get("currentColor")?.value;return!s&&r?.color&&(s=r.color),!n.color||n.color===s||["wild","wild-draw-four"].includes(n.type)}return!0}static{this.\u0275fac=function(r){return new(r||e)(w(mx),w(o1),w(Wi),w(yie))}}static{this.\u0275cmp=fr({type:e,selectors:[["app-base"]],viewQuery:function(r,i){if(1&r&&(ym(vie,5),ym(Cie,5)),2&r){let o;sd(o=ad())&&(i.modalTrigger=o.first),sd(o=ad())&&(i.nicknameInput=o.first)}},decls:26,vars:4,consts:[["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",2,"width","0","position","absolute","height","0","opacity","0"],["modalTrigger",""],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-body","d-flex","justify-content-around"],["id","colorModalLabel",1,"modal-title"],["data-bs-dismiss","modal",1,"btn","btn-danger","color-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-warning","color-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-blue","color-btn",3,"click"],["data-bs-dismiss","modal",1,"btn","btn-success","color-btn",3,"click"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],[1,"container-fluid","pt-5"],["class","container d-flex justify-content-center player-input-container h-100 px-0",4,"ngIf"],["class","container d-flex justify-content-center align-items-center h-100",4,"ngIf"],["class","container",4,"ngIf"],[4,"ngIf"],[1,"container","d-flex","justify-content-center","player-input-container","h-100","px-0"],[1,"d-flex","flex-column","h-100","justify-content-center","w-100","player-input-inner-container"],["type","text","placeholder","Nickname",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],["nicknameInput",""],[1,"mt-3","btn","btn-primary","w-100",3,"click"],[1,"container","d-flex","justify-content-center","align-items-center","h-100"],[1,"card","w-100","waiting-room",2,"max-width","500px"],[1,"card-body","text-center"],[1,"card-title"],["class","text-light",4,"ngIf"],[1,"list-group","list-group-flush","mb-3"],["class","list-group-item d-flex align-items-center",4,"ngFor","ngForOf"],[1,"btn","btn-primary","w-100","mb-2",3,"disabled","click"],["class","btn btn-primary w-100",3,"click",4,"ngIf"],[1,"text-light"],[1,"list-group-item","d-flex","align-items-center"],[1,"me-2"],[1,"badge","bg-secondary","d-flex","align-items-center"],["class","bi bi-person-fill me-1",4,"ngIf"],["class","bi bi-pc-display-horizontal me-1",4,"ngIf"],[1,"bi","bi-person-fill","me-1"],[1,"bi","bi-pc-display-horizontal","me-1"],[1,"btn","btn-primary","w-100",3,"click"],[1,"container"],[1,"position-absolute","players-wrapper"],[1,"d-flex","flex-column"],["class","d-flex flex-column text-end me-1 mt-2",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between","card-wrapper","center-deck-wrapper"],[1,"left-wrapper"],[1,"card","deck-card","position-absolute","shadow",3,"click"],[1,"card-body"],[1,"center-wrapper",3,"ngClass"],[1,"deck-container",2,"position","relative",3,"ngStyle"],["class","card deck-card shadow",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"right-wrapper"],[1,"d-flex","justify-content-center","card-wrapper",2,"margin-top","50px"],[1,"deck-container",2,"position","relative","height","135px",3,"ngStyle"],["class","card deck-card position-absolute  shadow",3,"ngClass","ngStyle","mouseenter","mouseleave","click",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","text-end","me-1","mt-2"],["class","d-flex flex-column text-end",4,"ngIf"],[1,"d-flex","flex-column","text-end"],[1,"d-flex","align-items-center"],["class","spinner-border spinner-border-sm mx-1 text-warning","role","status",4,"ngIf"],[1,"mb-1"],[1,"mini-card-wrapper","d-flex","flex-column"],["class","card mini-card me-1",4,"ngFor","ngForOf"],["role","status",1,"spinner-border","spinner-border-sm","mx-1","text-warning"],[1,"visually-hidden"],[1,"card","mini-card","me-1"],[1,"card","deck-card","shadow",3,"ngClass","click"],[1,"selected-card-icon","d-none","position-absolute"],[1,"bi","bi-check-lg","text-green"],[1,"card-body","w-100","d-flex","flex-column","justify-content-center","align-items-center"],[1,"center-value","m-0","center-icon-scopa",3,"ngClass"],[1,"card","deck-card","position-absolute","shadow",3,"ngClass","ngStyle","mouseenter","mouseleave","click"],[1,"card-body","w-100","d-flex","flex-column","justify-content-between"],[1,"d-flex","justify-content-start"],["class","small-value",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","flex-grow-1"],[1,"center-value","m-0","d-flex","justify-content-center","align-items-center"],["class","d-flex justify-content-end",4,"ngIf"],[1,"small-value"],[1,"bi","bi-arrow-repeat"],[1,"bi","bi-x-circle"],[1,"bi","bi-plus-lg"],[1,"change-color-icon"],[1,"denari"],[1,"spade"],[1,"bastoni"],[1,"coppe"],["class","bi bi-arrow-repeat",4,"ngIf"],["class","bi bi-x-circle",4,"ngIf"],["class","uno-number",4,"ngIf"],["class","plus-four-icon center-icon",4,"ngIf"],["class","change-color-icon center-icon",4,"ngIf"],[1,"uno-number"],[1,"plus-four-icon","center-icon"],[1,"change-color-icon","center-icon"],[1,"center-icon-scopa",3,"ngClass"],[1,"d-flex","justify-content-end"],["border","1","cellpadding","6",1,"table","table-striped","table-dark"],[4,"ngFor","ngForOf"]],template:function(r,i){if(1&r&&(Z(0,"button",0,1),E(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),L(7,"Scegli il colore:"),I(),E(8,"button",7),ye("click",function(){return i.chooseColor("rosso")}),L(9,"Rosso"),I(),E(10,"button",8),ye("click",function(){return i.chooseColor("giallo")}),L(11,"Giallo"),I(),E(12,"button",9),ye("click",function(){return i.chooseColor("blu")}),L(13,"Blu"),I(),E(14,"button",10),ye("click",function(){return i.chooseColor("verde")}),L(15,"Verde"),I()(),E(16,"div",11)(17,"button",12),L(18,"Close"),I(),E(19,"button",13),L(20,"Save changes"),I()()()()(),E(21,"div",14),F(22,wie,6,1,"div",15),F(23,Aie,12,5,"div",16),F(24,doe,15,17,"div",17),F(25,foe,22,1,"div",18),I()),2&r){let o,s,a,c;T(22),k("ngIf","player-input"===(null==(o=i.gameForm.get("phase"))?null:o.value)),T(1),k("ngIf","waiting-room"===(null==(s=i.gameForm.get("phase"))?null:s.value)),T(1),k("ngIf","start-waiting"===(null==(a=i.gameForm.get("phase"))?null:a.value)||"start-playing"===(null==(a=i.gameForm.get("phase"))?null:a.value)),T(1),k("ngIf","finish-playing"===(null==(c=i.gameForm.get("phase"))?null:c.value))}},dependencies:[Jm,e_,Sd,Mk,Rc,z_,ey],styles:['@charset "UTF-8";.player-input-container[_ngcontent-%COMP%]{max-width:750px}.player-input-inner-container[_ngcontent-%COMP%]{max-width:550px}.waiting-room[_ngcontent-%COMP%]{background-color:transparent!important;border:2px dashed #ccc;box-shadow:none}.waiting-room[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .waiting-room[_ngcontent-%COMP%]   .list-group[_ngcontent-%COMP%]{background-color:transparent!important}.waiting-room[_ngcontent-%COMP%]   .list-group-item[_ngcontent-%COMP%]{background-color:transparent!important;border:none;padding:.5rem 0}.player-list[_ngcontent-%COMP%], .player-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .list-group-item[_ngcontent-%COMP%]{background:transparent}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;transition:.2s}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#ffffff80}.card-wrapper[_ngcontent-%COMP%]{min-height:150px}.center-wrapper[_ngcontent-%COMP%]{width:100%}.center-wrapper-scopa[_ngcontent-%COMP%]{flex-wrap:wrap}.left-wrapper[_ngcontent-%COMP%], .center-wrapper[_ngcontent-%COMP%], .right-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;min-width:150px}.deck-card[_ngcontent-%COMP%]{min-width:100px;width:100px;height:135px;border-radius:10px;color:#fff;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:18px;text-align:center;margin:5px;transition:transform .2s;cursor:pointer}.deck-card[_ngcontent-%COMP%]:not(.deck-red-disabled):not(.deck-green-disabled):not(.deck-blue-disabled):not(.deck-yellow-disabled):not(.deck-wild-disabled):hover{transform:translateY(-20px)}.card-body[_ngcontent-%COMP%]{padding:10px}.change-color-icon[_ngcontent-%COMP%], .plus-four-icon[_ngcontent-%COMP%], .denari[_ngcontent-%COMP%], .spade[_ngcontent-%COMP%], .bastoni[_ngcontent-%COMP%], .coppe[_ngcontent-%COMP%]{background-position:center;background-size:contain;background-repeat:no-repeat;width:20px;height:20px}.denari-1[_ngcontent-%COMP%]{background-image:url(Denari_1.ecd12c9de70ab72e.svg)}.denari-2[_ngcontent-%COMP%]{background-image:url(Denari_2.31f4bdb222aeb63d.svg)}.denari-3[_ngcontent-%COMP%]{background-image:url(Denari_3.bab4bfb9207b7303.svg)}.denari-4[_ngcontent-%COMP%]{background-image:url(Denari_4.896019b52b773343.svg)}.denari-5[_ngcontent-%COMP%]{background-image:url(Denari_5.0a5d26bf6c2fb2c0.svg)}.denari-6[_ngcontent-%COMP%]{background-image:url(Denari_6.7b56a7dd54fc039e.svg)}.denari-7[_ngcontent-%COMP%]{background-image:url(Denari_7.6344a9c7a12d4072.svg)}.denari-fante[_ngcontent-%COMP%]{background-image:url(Denari_8.9b7aea748b665909.svg)}.denari-cavallo[_ngcontent-%COMP%]{background-image:url(Denari_9.fd08e52f50669f60.svg)}.denari-re[_ngcontent-%COMP%]{background-image:url(Denari_10.dfce3172ed779e9f.svg)}.coppe-1[_ngcontent-%COMP%]{background-image:url(Coppe_1.1b696a57fe58167a.svg)}.coppe-2[_ngcontent-%COMP%]{background-image:url(Coppe_2.e8a438ab90a8656b.svg)}.coppe-3[_ngcontent-%COMP%]{background-image:url(Coppe_3.78329df41b98e680.svg)}.coppe-4[_ngcontent-%COMP%]{background-image:url(Coppe_4.10e396e1595633d1.svg)}.coppe-5[_ngcontent-%COMP%]{background-image:url(Coppe_5.958cc83fe759b99a.svg)}.coppe-6[_ngcontent-%COMP%]{background-image:url(Coppe_6.43cc427b09089d87.svg)}.coppe-7[_ngcontent-%COMP%]{background-image:url(Coppe_7.f906752083c4eaaf.svg)}.coppe-fante[_ngcontent-%COMP%]{background-image:url(Coppe_8.b390e7d7e6bf2124.svg)}.coppe-cavallo[_ngcontent-%COMP%]{background-image:url(Coppe_9.33afccbcbd3798a6.svg)}.coppe-re[_ngcontent-%COMP%]{background-image:url(Coppe_10.7c54bdc294791a44.svg)}.spade-1[_ngcontent-%COMP%]{background-image:url(Spade_1.3d6e21c62a3fa88c.svg)}.spade-2[_ngcontent-%COMP%]{background-image:url(Spade_2.5a365380a4dce665.svg)}.spade-3[_ngcontent-%COMP%]{background-image:url(Spade_3.bc840bd5c8684c32.svg)}.spade-4[_ngcontent-%COMP%]{background-image:url(Spade_4.fcfe6e0705ff3263.svg)}.spade-5[_ngcontent-%COMP%]{background-image:url(Spade_5.dcdf188bdee4c5c7.svg)}.spade-6[_ngcontent-%COMP%]{background-image:url(Spade_6.1346cd26d61ac17d.svg)}.spade-7[_ngcontent-%COMP%]{background-image:url(Spade_7.6ed29559fee9345a.svg)}.spade-fante[_ngcontent-%COMP%]{background-image:url(Spade_8.9e4ebf80b55e0bf5.svg)}.spade-cavallo[_ngcontent-%COMP%]{background-image:url(Spade_9.78f6eb0ef300a5b6.svg)}.spade-re[_ngcontent-%COMP%]{background-image:url(Spade_10.5bba1c6844748473.svg)}.bastoni-1[_ngcontent-%COMP%]{background-image:url(Bastoni_1.5deedb66e5142535.svg)}.bastoni-2[_ngcontent-%COMP%]{background-image:url(Bastoni_2.dc381c0db529f884.svg)}.bastoni-3[_ngcontent-%COMP%]{background-image:url(Bastoni_3.b803f1f32de7372c.svg)}.bastoni-4[_ngcontent-%COMP%]{background-image:url(Bastoni_4.deaf489480a05497.svg)}.bastoni-5[_ngcontent-%COMP%]{background-image:url(Bastoni_5.90c6581357e474dc.svg)}.bastoni-6[_ngcontent-%COMP%]{background-image:url(Bastoni_6.7b88c33782f5c436.svg)}.bastoni-7[_ngcontent-%COMP%]{background-image:url(Bastoni_7.3f3a6cb946bb37ae.svg)}.bastoni-fante[_ngcontent-%COMP%]{background-image:url(Bastoni_8.507ee10f9e875165.svg)}.bastoni-cavallo[_ngcontent-%COMP%]{background-image:url(Bastoni_9.2fe2c8d4608eceee.svg)}.bastoni-re[_ngcontent-%COMP%]{background-image:url(Bastoni_10.ba6eb40e7832ebc0.svg)}.plus-four-icon[_ngcontent-%COMP%]{background-image:url(plus-four-icon.1f025be8b51ad587.svg)}.change-color-icon[_ngcontent-%COMP%]{background-image:url(change-color-icon.1ce9f735ea4c88cf.svg)}.players-wrapper[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;width:80px;right:0;height:100vh}.btn-blue[_ngcontent-%COMP%]{color:#fff;background-color:#0d6efd;border-color:#0d6efd;display:inline-block;font-weight:400;text-align:center;vertical-align:middle;-webkit-user-select:none;user-select:none;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.375rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;cursor:pointer}.btn-blue[_ngcontent-%COMP%]:hover{background-color:#0b5ed7;border-color:#0a58ca}.btn-blue[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .25rem #0d6efd80}.btn-blue[_ngcontent-%COMP%]:disabled{background-color:#0d6efd;opacity:.65;cursor:not-allowed}.center-deck-wrapper[_ngcontent-%COMP%]{min-height:300px}.deck-denari[_ngcontent-%COMP%], .deck-spade[_ngcontent-%COMP%], .deck-bastoni[_ngcontent-%COMP%], .deck-coppe[_ngcontent-%COMP%]{background-color:#fff}.deck-red[_ngcontent-%COMP%]{background-color:#e74c3c}.deck-green[_ngcontent-%COMP%]{background-color:#27ae60}.deck-blue[_ngcontent-%COMP%]{background-color:#3498db}.deck-yellow[_ngcontent-%COMP%]{background-color:#f1c40f;color:#000}.deck-wild[_ngcontent-%COMP%]{background:linear-gradient(135deg,#000000,#333333,#555555,#000000);background-size:400% 400%;animation:_ngcontent-%COMP%_wildGradientBlack 5s ease infinite;color:#fff}.center-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700}.small-value[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.center-icon[_ngcontent-%COMP%]{transform:scale(2.5)}.center-icon-scopa[_ngcontent-%COMP%]{transform:scale(6.2)!important}@keyframes _ngcontent-%COMP%_wildGradientBlack{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.uno-deck-card[_ngcontent-%COMP%]{background-color:transparent}.scopa-center-wrapper[_ngcontent-%COMP%]   .deck-container[_ngcontent-%COMP%]{flex-direction:row;display:flex;justify-content:center;width:400px;flex-wrap:wrap;overflow:auto}.not-selectable[_ngcontent-%COMP%]{background-color:#e4cfd5;pointer-events:none}.not-selectable[_ngcontent-%COMP%]   .center-icon-scopa[_ngcontent-%COMP%]{opacity:.5;filter:brightness(.8) contrast(1.2)}.selected-card-icon[_ngcontent-%COMP%]{width:10px;height:10px;z-index:2000;top:0;right:19px;transform:scale(1.5)}.text-green[_ngcontent-%COMP%]{color:#45bb32!important}.scopa-deck-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-image:url(scopa-deck-card.fbfdb0b1456eb143.svg);background-position:center;background-size:contain;background-repeat:no-repeat;width:100px;height:100px}.uno-deck-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-image:url(dos-deck-card.d36501d1b583e5a5.svg);background-position:center;background-size:contain;background-repeat:no-repeat;width:100%;height:100%}.deck-red-disabled[_ngcontent-%COMP%]{background-color:#ab3535;cursor:not-allowed}.deck-green-disabled[_ngcontent-%COMP%]{background-color:#418e34;cursor:not-allowed}.deck-blue-disabled[_ngcontent-%COMP%]{background-color:#2e4a74;cursor:not-allowed}.deck-yellow-disabled[_ngcontent-%COMP%]{background-color:#c0a850;color:#000;cursor:not-allowed}.deck-wild-disabled[_ngcontent-%COMP%]{background-color:#333;color:#fff;cursor:not-allowed}.mini-card-wrapper[_ngcontent-%COMP%]{margin-top:25px}.mini-card[_ngcontent-%COMP%]{width:55px;height:40px;background-color:#9f2467;border:1px solid #FFF;margin-top:-20px}']})}}return e})()},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"**",redirectTo:"/home"}];let goe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[cN.forRoot(poe),cN]})}}return e})();function moe(e,t){if(1&e){const n=ei();E(0,"div",2),Z(1,"i")(2,"span",3),E(3,"button",4),ye("click",function(){return hn(n),fn(ne().show=!1)}),I()()}if(2&e){const n=ne();k("ngClass","alert alert-"+n.alertType+" show"),T(1),Qa("bi bi-"+n.alertIcon),T(1),k("innerHTML",n.alertText,NT)}}let _oe=(()=>{class e{constructor(n){this.alertService=n,this.alertText="",this.alertType="info",this.alertIcon="info-circle",this.show=!1}ngOnInit(){this.alertService.showAlert$.subscribe(()=>{const n=this.alertService.currentMessage;this.alertText=n.color?`${n.text} <span class="color-box" style="background-color: ${n.color}"></span>`:n.text,this.alertType=n.type,this.alertIcon=n.icon,this.show=!0,this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(()=>{this.show=!1,this.hideTimeout=null},n.duration)})}static{this.\u0275fac=function(r){return new(r||e)(w(o1))}}static{this.\u0275cmp=fr({type:e,selectors:[["app-alert"]],decls:2,vars:1,consts:[[1,"alert-container"],["role","alert",3,"ngClass",4,"ngIf"],["role","alert",3,"ngClass"],[3,"innerHTML"],["type","button",1,"btn-close","ms-auto",3,"click"]],template:function(r,i){1&r&&(E(0,"div",0),F(1,moe,4,4,"div",1),I()),2&r&&(T(1),k("ngIf",i.show))},dependencies:[Jm,Sd],styles:['@charset "UTF-8";.alert-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:3000}.color-box[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;margin-left:5px;border-radius:3px;vertical-align:middle}.alert[_ngcontent-%COMP%]{position:absolute;margin-top:10px;right:30px;display:flex;align-items:center;padding:15px;border-radius:8px;min-width:250px;font-size:16px;opacity:0;transform:translateY(-20px);transition:opacity .4s ease,transform .4s ease}.alert.show[_ngcontent-%COMP%]{opacity:1;transform:translateY(0)}.alert-success[_ngcontent-%COMP%]{background-color:#198754;color:#fff}.alert-danger[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff}.alert-warning[_ngcontent-%COMP%]{background-color:#ffc107;color:#212529}.alert-info[_ngcontent-%COMP%]{background-color:#0dcaf0;color:#fff}.alert[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px}']})}}return e})(),yoe=(()=>{class e{constructor(){this.title="game"}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=fr({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(r,i){1&r&&Z(0,"app-alert")(1,"router-outlet")},dependencies:[N_,_oe]})}}return e})();const uL_firebase={apiKey:"AIzaSyAyPpwYB1X-e5VnUkUgJ2orPcDr9ybDHEU",authDomain:"draggable-9f92b.firebaseapp.com",databaseURL:"https://draggable-9f92b.firebaseio.com",projectId:"draggable-9f92b",storageBucket:"draggable-9f92b.appspot.com",messagingSenderId:"1010593277055",appId:"1:1010593277055:web:1b729dc7368b8f6f"},CL=new A("");let Woe=(()=>{class e{constructor(n){this.router=n}intercept(n,r){const i="https://thebabr27.github.io/expense/cardgame";return n.url.startsWith(i)?(console.log(`Intercepted request to ${i}, redirecting...`),this.router.navigate(["/"]),new Me):r.handle(n)}static{this.\u0275fac=function(r){return new(r||e)(x(mt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})(),Goe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e,bootstrap:[yoe]})}static{this.\u0275inj=Ct({providers:[{provide:CL,useClass:Woe,multi:!0}],imports:[Rk,H8,goe,w7,b7,BQ(()=>$Q(uL_firebase)),vee(()=>wee()),uie(()=>fie())]})}}return e})();B8().bootstrapModule(Goe).catch(e=>console.error(e))}},ge=>{ge(ge.s=902)}]);