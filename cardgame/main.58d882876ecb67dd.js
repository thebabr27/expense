"use strict";(self.webpackChunkgame=self.webpackChunkgame||[]).push([[792],{421:()=>{function pe(e){return"function"==typeof e}function sa(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Mu=sa(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function vo(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class Ot{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const o of n)o.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(pe(r))try{r()}catch(o){t=o instanceof Mu?o.errors:[o]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const o of i)try{HI(o)}catch(s){t=t??[],s instanceof Mu?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Mu(t)}}add(t){var n;if(t&&t!==this)if(this.closed)HI(t);else{if(t instanceof Ot){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&vo(n,t)}remove(t){const{_finalizers:n}=this;n&&vo(n,t),t instanceof Ot&&t._removeParent(this)}}Ot.EMPTY=(()=>{const e=new Ot;return e.closed=!0,e})();const $I=Ot.EMPTY;function BI(e){return e instanceof Ot||e&&"closed"in e&&pe(e.remove)&&pe(e.add)&&pe(e.unsubscribe)}function HI(e){pe(e)?e():e.unsubscribe()}const wi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ru={setTimeout(e,t,...n){const{delegate:r}=Ru;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=Ru;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function zI(e){Ru.setTimeout(()=>{const{onUnhandledError:t}=wi;if(!t)throw e;t(e)})}function xf(){}const TL=Pf("C",void 0,void 0);function Pf(e,t,n){return{kind:e,value:t,error:n}}let Ii=null;function Nu(e){if(wi.useDeprecatedSynchronousErrorHandling){const t=!Ii;if(t&&(Ii={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Ii;if(Ii=null,n)throw r}}else e()}class Of extends Ot{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,BI(t)&&t.add(this)):this.destination=xL}static create(t,n,r){return new aa(t,n,r)}next(t){this.isStopped?Lf(function AL(e){return Pf("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Lf(function SL(e){return Pf("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Lf(TL,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const RL=Function.prototype.bind;function Ff(e,t){return RL.call(e,t)}class NL{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ku(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ku(r)}else ku(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ku(n)}}}class aa extends Of{constructor(t,n,r){let i;if(super(),pe(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&wi.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Ff(t.next,o),error:t.error&&Ff(t.error,o),complete:t.complete&&Ff(t.complete,o)}):i=t}this.destination=new NL(i)}}function ku(e){wi.useDeprecatedSynchronousErrorHandling?function ML(e){wi.useDeprecatedSynchronousErrorHandling&&Ii&&(Ii.errorThrown=!0,Ii.error=e)}(e):zI(e)}function Lf(e,t){const{onStoppedNotification:n}=wi;n&&Ru.setTimeout(()=>n(e,t))}const xL={closed:!0,next:xf,error:function kL(e){throw e},complete:xf},Vf="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ur(e){return e}function GI(e){return 0===e.length?Ur:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let Se=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const o=function FL(e){return e&&e instanceof Of||function OL(e){return e&&pe(e.next)&&pe(e.error)&&pe(e.complete)}(e)&&BI(e)}(n)?n:new aa(n,r,i);return Nu(()=>{const{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=WI(r))((i,o)=>{const s=new aa({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[Vf](){return this}pipe(...n){return GI(n)(this)}toPromise(n){return new(n=WI(n))((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function WI(e){var t;return null!==(t=e??wi.Promise)&&void 0!==t?t:Promise}const LL=sa(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Cn=(()=>{class e extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new qI(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new LL}next(n){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Nu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:o}=this;return r||i?$I:(this.currentObservers=null,o.push(n),new Ot(()=>{this.currentObservers=null,vo(o,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){const n=new Se;return n.source=this,n}}return e.create=(t,n)=>new qI(t,n),e})();class qI extends Cn{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:$I}}function KI(e){return pe(e?.lift)}function ze(e){return t=>{if(KI(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(e,t,n,r,i){return new VL(e,t,n,r,i)}class VL extends Of{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function ge(e,t){return ze((n,r)=>{let i=0;n.subscribe(Be(r,o=>{r.next(e.call(t,o,i++))}))})}function xu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function jr(e){return this instanceof jr?(this.v=e,this):new jr(e)}function ZI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Bf(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){!function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}(a,c,(s=e[o](s)).done,s.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const JI=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function eb(e){return pe(e?.then)}function tb(e){return pe(e[Vf])}function nb(e){return Symbol.asyncIterator&&pe(e?.[Symbol.asyncIterator])}function rb(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ib=function lV(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ob(e){return pe(e?.[ib])}function sb(e){return function XI(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(f){return function(p){return Promise.resolve(p).then(f,d)}}),i[Symbol.asyncIterator]=function(){return this},i;function a(f,p){r[f]&&(i[f]=function(m){return new Promise(function(y,v){o.push([f,m,y,v])>1||c(f,m)})},p&&(i[f]=p(i[f])))}function c(f,p){try{!function u(f){f.value instanceof jr?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}(r[f](p))}catch(m){h(o[0][3],m)}}function l(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield jr(n.read());if(i)return yield jr(void 0);yield yield jr(r)}}finally{n.releaseLock()}})}function ab(e){return pe(e?.getReader)}function Kt(e){if(e instanceof Se)return e;if(null!=e){if(tb(e))return function dV(e){return new Se(t=>{const n=e[Vf]();if(pe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(JI(e))return function hV(e){return new Se(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(eb(e))return function fV(e){return new Se(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,zI)})}(e);if(nb(e))return cb(e);if(ob(e))return function pV(e){return new Se(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(ab(e))return function gV(e){return cb(sb(e))}(e)}throw rb(e)}function cb(e){return new Se(t=>{(function mV(e,t){var n,r,i,o;return function YI(e,t,n,r){return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):function i(o){return o instanceof n?o:new n(function(s){s(o)})}(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ZI(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function ar(e,t,n,r=0,i=!1){const o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function rt(e,t,n=1/0){return pe(t)?rt((r,i)=>ge((o,s)=>t(r,o,i,s))(Kt(e(r,i))),n):("number"==typeof t&&(n=t),ze((r,i)=>function _V(e,t,n,r,i,o,s,a){const c=[];let u=0,l=0,d=!1;const h=()=>{d&&!c.length&&!u&&t.complete()},f=m=>u<r?p(m):c.push(m),p=m=>{o&&t.next(m),u++;let y=!1;Kt(n(m,l++)).subscribe(Be(t,v=>{i?.(v),o?f(v):t.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){const v=c.shift();s?ar(t,s,()=>p(v)):p(v)}h()}catch(v){t.error(v)}}))};return e.subscribe(Be(t,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,e,n)))}function Co(e=1/0){return rt(Ur,e)}const On=new Se(e=>e.complete());function zf(e){return e[e.length-1]}function ub(e){return pe(zf(e))?e.pop():void 0}function ca(e){return function vV(e){return e&&pe(e.schedule)}(zf(e))?e.pop():void 0}function Pu(e,t=0){return ze((n,r)=>{n.subscribe(Be(r,i=>ar(r,e,()=>r.next(i),t),()=>ar(r,e,()=>r.complete(),t),i=>ar(r,e,()=>r.error(i),t)))})}function Ou(e,t=0){return ze((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function lb(e,t){if(!e)throw new Error("Iterable cannot be null");return new Se(n=>{ar(n,t,()=>{const r=e[Symbol.asyncIterator]();ar(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Xe(e,t){return t?function TV(e,t){if(null!=e){if(tb(e))return function EV(e,t){return Kt(e).pipe(Ou(t),Pu(t))}(e,t);if(JI(e))return function IV(e,t){return new Se(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(eb(e))return function wV(e,t){return Kt(e).pipe(Ou(t),Pu(t))}(e,t);if(nb(e))return lb(e,t);if(ob(e))return function bV(e,t){return new Se(n=>{let r;return ar(n,t,()=>{r=e[ib](),ar(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){return void n.error(s)}o?n.complete():n.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}(e,t);if(ab(e))return function DV(e,t){return lb(sb(e),t)}(e,t)}throw rb(e)}(e,t):Kt(e)}class Yt extends Cn{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}function $(...e){return Xe(e,ca(e))}function db(e={}){const{connector:t=(()=>new Cn),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return o=>{let s,a,c,u=0,l=!1,d=!1;const h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,l=d=!1},p=()=>{const m=s;f(),m?.unsubscribe()};return ze((m,y)=>{u++,!d&&!l&&h();const v=c=c??t();y.add(()=>{u--,0===u&&!d&&!l&&(a=Gf(p,i))}),v.subscribe(y),!s&&u>0&&(s=new aa({next:_=>v.next(_),error:_=>{d=!0,h(),a=Gf(f,n,_),v.error(_)},complete:()=>{l=!0,h(),a=Gf(f,r),v.complete()}}),Kt(m).subscribe(s))})(o)}}function Gf(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new aa({next:()=>{r.unsubscribe(),e()}});return Kt(t(...n)).subscribe(r)}function Fn(e,t){return ze((n,r)=>{let i=null,o=0,s=!1;const a=()=>s&&!i&&r.complete();n.subscribe(Be(r,c=>{i?.unsubscribe();let u=0;const l=o++;Kt(e(c,l)).subscribe(i=Be(r,d=>r.next(t?t(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function MV(e,t){return e===t}function de(e){for(let t in e)if(e[t]===de)return t;throw Error("Could not find renamed property on target object.")}function Fu(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ge(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(Ge).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Wf(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const RV=de({__forward_ref__:de});function Ce(e){return e.__forward_ref__=Ce,e.toString=function(){return Ge(this())},e}function U(e){return qf(e)?e():e}function qf(e){return"function"==typeof e&&e.hasOwnProperty(RV)&&e.__forward_ref__===Ce}function Kf(e){return e&&!!e.\u0275providers}const hb="https://g.co/ng/security#xss";class w extends Error{constructor(t,n){super(function Lu(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function B(e){return"string"==typeof e?e:null==e?"":String(e)}function Yf(e,t){throw new w(-201,!1)}function an(e,t){null==e&&function L(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function P(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ct(e){return{providers:e.providers||[],imports:e.imports||[]}}function Vu(e){return fb(e,ju)||fb(e,pb)}function fb(e,t){return e.hasOwnProperty(t)?e[t]:null}function Uu(e){return e&&(e.hasOwnProperty(Qf)||e.hasOwnProperty(VV))?e[Qf]:null}const ju=de({\u0275prov:de}),Qf=de({\u0275inj:de}),pb=de({ngInjectableDef:de}),VV=de({ngInjectorDef:de});var J=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}(J||{});let Xf;function Ft(e){const t=Xf;return Xf=e,t}function mb(e,t,n){const r=Vu(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&J.Optional?null:void 0!==t?t:void Yf(Ge(e))}const Ee=globalThis;class S{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const ua={},np="__NG_DI_FLAG__",$u="ngTempTokenPath",$V=/\n/gm,yb="__source";let Eo;function $r(e){const t=Eo;return Eo=e,t}function zV(e,t=J.Default){if(void 0===Eo)throw new w(-203,!1);return null===Eo?mb(e,void 0,t):Eo.get(e,t&J.Optional?null:void 0,t)}function x(e,t=J.Default){return(function gb(){return Xf}()||zV)(U(e),t)}function k(e,t=J.Default){return x(e,Bu(t))}function Bu(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function rp(e){const t=[];for(let n=0;n<e.length;n++){const r=U(e[n]);if(Array.isArray(r)){if(0===r.length)throw new w(900,!1);let i,o=J.Default;for(let s=0;s<r.length;s++){const a=r[s],c=GV(a);"number"==typeof c?-1===c?i=a.token:o|=c:i=a}t.push(x(i,o))}else t.push(x(r))}return t}function la(e,t){return e[np]=t,e.prototype[np]=t,e}function GV(e){return e[np]}function cr(e){return{toString:e}.toString()}var Hu=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Hu||{}),En=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(En||{});const Ln={},re=[],zu=de({\u0275cmp:de}),ip=de({\u0275dir:de}),op=de({\u0275pipe:de}),Cb=de({\u0275mod:de}),ur=de({\u0275fac:de}),da=de({__NG_ELEMENT_ID__:de}),Eb=de({__NG_ENV_ID__:de});function wb(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}function sp(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{const o=i,s=n[++r];bb(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Ib(e){return 3===e||4===e||6===e}function bb(e){return 64===e.charCodeAt(0)}function ha(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Db(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Db(e,t,n,r,i){let o=0,s=e.length;if(-1===t)s=-1;else for(;o<e.length;){const a=e[o++];if("number"==typeof a){if(a===t){s=-1;break}if(a>t){s=o-1;break}}}for(;o<e.length;){const a=e[o];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}const Tb="ng-template";function KV(e,t,n){let r=0,i=!0;for(;r<e.length;){let o=e[r++];if("string"==typeof o&&i){const s=e[r++];if(n&&"class"===o&&-1!==wb(s.toLowerCase(),t,0))return!0}else{if(1===o){for(;r<e.length&&"string"==typeof(o=e[r++]);)if(o.toLowerCase()===t)return!0;return!1}"number"==typeof o&&(i=!1)}}return!1}function Sb(e){return 4===e.type&&e.value!==Tb}function YV(e,t,n){return t===(4!==e.type||n?e.value:Tb)}function QV(e,t,n){let r=4;const i=e.attrs||[],o=function JV(e){for(let t=0;t<e.length;t++)if(Ib(e[t]))return t;return e.length}(i);let s=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!YV(e,c,n)||""===c&&1===t.length){if(wn(r))return!1;s=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!KV(e.attrs,u,n)){if(wn(r))return!1;s=!0}continue}const d=XV(8&r?"class":c,i,Sb(e),n);if(-1===d){if(wn(r))return!1;s=!0;continue}if(""!==u){let h;h=d>o?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==wb(f,u,0)||2&r&&u!==h){if(wn(r))return!1;s=!0}}}}else{if(!s&&!wn(r)&&!wn(c))return!1;if(s&&wn(c))continue;s=!1,r=c|1&r}}return wn(r)||s}function wn(e){return 0==(1&e)}function XV(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){const s=t[i];if(s===e)return i;if(3===s||6===s)o=!0;else{if(1===s||2===s){let a=t[++i];for(;"string"==typeof a;)a=t[++i];continue}if(4===s)break;if(0===s){i+=4;continue}}i+=o?1:2}return-1}return function e2(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ab(e,t,n=!1){for(let r=0;r<t.length;r++)if(QV(e,t[r],n))return!0;return!1}function Mb(e,t){return e?":not("+t.trim()+")":t}function n2(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if("string"==typeof s)if(2&r){const a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""!==i&&!wn(s)&&(t+=Mb(o,i),i=""),r=s,o=o||!wn(r);n++}return""!==i&&(t+=Mb(o,i)),t}function Br(e){return cr(()=>{const t=Nb(e),n={...t,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Hu.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||En.Emulated,styles:e.styles||re,_:null,schemas:e.schemas||null,tView:null,id:""};kb(n);const r=e.dependencies;return n.directiveDefs=Gu(r,!1),n.pipeDefs=Gu(r,!0),n.id=function l2(e){let t=0;const n=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery].join("|");for(const i of n)t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}(n),n})}function s2(e){return te(e)||it(e)}function a2(e){return null!==e}function Lt(e){return cr(()=>({type:e.type,bootstrap:e.bootstrap||re,declarations:e.declarations||re,imports:e.imports||re,exports:e.exports||re,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Rb(e,t){if(null==e)return Ln;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function j(e){return cr(()=>{const t=Nb(e);return kb(t),t})}function te(e){return e[zu]||null}function it(e){return e[ip]||null}function Et(e){return e[op]||null}function Xt(e,t){const n=e[Cb]||null;if(!n&&!0===t)throw new Error(`Type ${Ge(e)} does not have '\u0275mod' property.`);return n}function Nb(e){const t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:e.inputs||Ln,exportAs:e.exportAs||null,standalone:!0===e.standalone,signals:!0===e.signals,selectors:e.selectors||re,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Rb(e.inputs,t),outputs:Rb(e.outputs)}}function kb(e){e.features?.forEach(t=>t(e))}function Gu(e,t){if(!e)return null;const n=t?Et:s2;return()=>("function"==typeof e?e():e).map(r=>n(r)).filter(a2)}const xe=0,M=1,G=2,Ae=3,In=4,fa=5,ht=6,Io=7,Le=8,Hr=9,bo=10,H=11,pa=12,xb=13,Do=14,Ve=15,ga=16,To=17,Vn=18,ma=19,Pb=20,zr=21,lr=22,_a=23,ya=24,ee=25,ap=1,Ob=2,Un=7,So=9,ot=11;function Ut(e){return Array.isArray(e)&&"object"==typeof e[ap]}function wt(e){return Array.isArray(e)&&!0===e[ap]}function cp(e){return 0!=(4&e.flags)}function Di(e){return e.componentOffset>-1}function qu(e){return 1==(1&e.flags)}function bn(e){return!!e.template}function up(e){return 0!=(512&e[G])}function Ti(e,t){return e.hasOwnProperty(ur)?e[ur]:null}let st=null,Ku=!1;function cn(e){const t=st;return st=e,t}const Vb={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function jb(e){if(!Ca(e)||e.dirty){if(!e.producerMustRecompute(e)&&!Hb(e))return void(e.dirty=!1);e.producerRecomputeValue(e),e.dirty=!1}}function Bb(e){e.dirty=!0,function $b(e){if(void 0===e.liveConsumerNode)return;const t=Ku;Ku=!0;try{for(const n of e.liveConsumerNode)n.dirty||Bb(n)}finally{Ku=t}}(e),e.consumerMarkedDirty?.(e)}function dp(e){return e&&(e.nextProducerIndex=0),cn(e)}function hp(e,t){if(cn(t),e&&void 0!==e.producerNode&&void 0!==e.producerIndexOfThis&&void 0!==e.producerLastReadVersion){if(Ca(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)Yu(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function Hb(e){Ao(e);for(let t=0;t<e.producerNode.length;t++){const n=e.producerNode[t],r=e.producerLastReadVersion[t];if(r!==n.version||(jb(n),r!==n.version))return!0}return!1}function zb(e){if(Ao(e),Ca(e))for(let t=0;t<e.producerNode.length;t++)Yu(e.producerNode[t],e.producerIndexOfThis[t]);e.producerNode.length=e.producerLastReadVersion.length=e.producerIndexOfThis.length=0,e.liveConsumerNode&&(e.liveConsumerNode.length=e.liveConsumerIndexOfThis.length=0)}function Yu(e,t){if(function Wb(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}(e),Ao(e),1===e.liveConsumerNode.length)for(let r=0;r<e.producerNode.length;r++)Yu(e.producerNode[r],e.producerIndexOfThis[r]);const n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){const r=e.liveConsumerIndexOfThis[t],i=e.liveConsumerNode[t];Ao(i),i.producerIndexOfThis[r]=t}}function Ca(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function Ao(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}let qb=null;const Xb=()=>{},I2=(()=>({...Vb,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:e=>{e.schedule(e.ref)},hasRun:!1,cleanupFn:Xb}))();class b2{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function un(){return Zb}function Zb(e){return e.type.prototype.ngOnChanges&&(e.setInput=T2),D2}function D2(){const e=eD(this),t=e?.current;if(t){const n=e.previous;if(n===Ln)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function T2(e,t,n,r){const i=this.declaredInputs[n],o=eD(e)||function S2(e,t){return e[Jb]=t}(e,{previous:Ln,current:null}),s=o.current||(o.current={}),a=o.previous,c=a[i];s[i]=new b2(c&&c.currentValue,t,a===Ln),e[r]=t}un.ngInherit=!0;const Jb="__ngSimpleChanges__";function eD(e){return e[Jb]||null}const jn=function(e,t,n){};function we(e){for(;Array.isArray(e);)e=e[xe];return e}function Qu(e,t){return we(t[e])}function jt(e,t){return we(t[e.index])}function rD(e,t){return e.data[t]}function Zt(e,t){const n=t[e];return Ut(n)?n:n[xe]}function Wr(e,t){return null==t?null:e[t]}function iD(e){e[To]=0}function x2(e){1024&e[G]||(e[G]|=1024,sD(e,1))}function oD(e){1024&e[G]&&(e[G]&=-1025,sD(e,-1))}function sD(e,t){let n=e[Ae];if(null===n)return;n[fa]+=t;let r=n;for(n=n[Ae];null!==n&&(1===t&&1===r[fa]||-1===t&&0===r[fa]);)n[fa]+=t,r=n,n=n[Ae]}const V={lFrame:_D(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function uD(){return V.bindingsEnabled}function C(){return V.lFrame.lView}function ne(){return V.lFrame.tView}function Si(e){return V.lFrame.contextLView=e,e[Le]}function Ai(e){return V.lFrame.contextLView=null,e}function at(){let e=lD();for(;null!==e&&64===e.type;)e=e.parent;return e}function lD(){return V.lFrame.currentTNode}function $n(e,t){const n=V.lFrame;n.currentTNode=e,n.isParent=t}function _p(){return V.lFrame.isParent}function It(){const e=V.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function No(){return V.lFrame.bindingIndex++}function hr(e){const t=V.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function G2(e,t){const n=V.lFrame;n.bindingIndex=n.bindingRootIndex=e,vp(t)}function vp(e){V.lFrame.currentDirectiveIndex=e}function Ep(e){V.lFrame.currentQueryIndex=e}function q2(e){const t=e[M];return 2===t.type?t.declTNode:1===t.type?e[ht]:null}function gD(e,t,n){if(n&J.SkipSelf){let i=t,o=e;for(;!(i=i.parent,null!==i||n&J.Host||(i=q2(o),null===i||(o=o[Do],10&i.type))););if(null===i)return!1;t=i,e=o}const r=V.lFrame=mD();return r.currentTNode=t,r.lView=e,!0}function wp(e){const t=mD(),n=e[M];V.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function mD(){const e=V.lFrame,t=null===e?null:e.child;return null===t?_D(e):t}function _D(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function yD(){const e=V.lFrame;return V.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const vD=yD;function Ip(){const e=yD();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function bt(){return V.lFrame.selectedIndex}function Mi(e){V.lFrame.selectedIndex=e}function Ne(){const e=V.lFrame;return rD(e.tView,e.selectedIndex)}let ED=!0;function Xu(){return ED}function qr(e){ED=e}function Zu(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),null!=l&&(e.destroyHooks??=[]).push(n,l)}}function Ju(e,t,n){wD(e,t,3,n)}function el(e,t,n,r){(3&e[G])===n&&wD(e,t,n,r)}function bp(e,t){let n=e[G];(3&n)===t&&(n&=8191,n+=1,e[G]=n)}function wD(e,t,n,r){const o=r??-1,s=t.length-1;let a=0;for(let c=void 0!==r?65535&e[To]:0;c<s;c++)if("number"==typeof t[c+1]){if(a=t[c],null!=r&&a>=r)break}else t[c]<0&&(e[To]+=65536),(a<o||-1==o)&&(tU(e,n,t,c),e[To]=(4294901760&e[To])+c+2),c++}function ID(e,t){jn(4,e,t);const n=cn(null);try{t.call(e)}finally{cn(n),jn(5,e,t)}}function tU(e,t,n,r){const i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[G]>>13<e[To]>>16&&(3&e[G])===t&&(e[G]+=8192,ID(a,o)):ID(a,o)}const ko=-1;class wa{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Tp(e){return e!==ko}function Ia(e){return 32767&e}function ba(e,t){let n=function oU(e){return e>>16}(e),r=t;for(;n>0;)r=r[Do],n--;return r}let Sp=!0;function tl(e){const t=Sp;return Sp=e,t}const bD=255,DD=5;let sU=0;const Bn={};function nl(e,t){const n=TD(e,t);if(-1!==n)return n;const r=t[M];r.firstCreatePass&&(e.injectorIndex=t.length,Ap(r.data,e),Ap(t,null),Ap(r.blueprint,null));const i=rl(e,t),o=e.injectorIndex;if(Tp(i)){const s=Ia(i),a=ba(i,t),c=a[M].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|c[s+u]}return t[o+8]=i,o}function Ap(e,t){e.push(0,0,0,0,0,0,0,0,t)}function TD(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function rl(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=xD(i),null===r)return ko;if(n++,i=i[Do],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ko}function Mp(e,t,n){!function aU(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(da)&&(r=n[da]),null==r&&(r=n[da]=sU++);const i=r&bD;t.data[e+(i>>DD)]|=1<<i}(e,t,n)}function SD(e,t,n){if(n&J.Optional||void 0!==e)return e;Yf()}function AD(e,t,n,r){if(n&J.Optional&&void 0===r&&(r=null),!(n&(J.Self|J.Host))){const i=e[Hr],o=Ft(void 0);try{return i?i.get(t,r,n&J.Optional):mb(t,r,n&J.Optional)}finally{Ft(o)}}return SD(r,0,n)}function MD(e,t,n,r=J.Default,i){if(null!==e){if(2048&t[G]&&!(r&J.Self)){const s=function fU(e,t,n,r,i){let o=e,s=t;for(;null!==o&&null!==s&&2048&s[G]&&!(512&s[G]);){const a=RD(o,s,n,r|J.Self,Bn);if(a!==Bn)return a;let c=o.parent;if(!c){const u=s[Pb];if(u){const l=u.get(n,Bn,r);if(l!==Bn)return l}c=xD(s),s=s[Do]}o=c}return i}(e,t,n,r,Bn);if(s!==Bn)return s}const o=RD(e,t,n,r,Bn);if(o!==Bn)return o}return AD(t,n,r,i)}function RD(e,t,n,r,i){const o=function lU(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(da)?e[da]:void 0;return"number"==typeof t?t>=0?t&bD:hU:t}(n);if("function"==typeof o){if(!gD(t,e,r))return r&J.Host?SD(i,0,r):AD(t,n,r,i);try{let s;if(s=o(r),null!=s||r&J.Optional)return s;Yf()}finally{vD()}}else if("number"==typeof o){let s=null,a=TD(e,t),c=ko,u=r&J.Host?t[Ve][ht]:null;for((-1===a||r&J.SkipSelf)&&(c=-1===a?rl(e,t):t[a+8],c!==ko&&kD(r,!1)?(s=t[M],a=Ia(c),t=ba(c,t)):a=-1);-1!==a;){const l=t[M];if(ND(o,a,l.data)){const d=uU(a,t,n,s,r,u);if(d!==Bn)return d}c=t[a+8],c!==ko&&kD(r,t[M].data[a+8]===u)&&ND(o,a,t)?(s=l,a=Ia(c),t=ba(c,t)):a=-1}}return i}function uU(e,t,n,r,i,o){const s=t[M],a=s.data[e+8],l=function il(e,t,n,r,i){const o=e.providerIndexes,s=t.data,a=1048575&o,c=e.directiveStart,l=o>>20,h=i?a+l:e.directiveEnd;for(let f=r?a:a+l;f<h;f++){const p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){const f=s[c];if(f&&bn(f)&&f.type===n)return c}return null}(a,s,n,null==r?Di(a)&&Sp:r!=s&&0!=(3&a.type),i&J.Host&&o===a);return null!==l?Ri(t,s,l,a):Bn}function Ri(e,t,n,r){let i=e[n];const o=t.data;if(function nU(e){return e instanceof wa}(i)){const s=i;s.resolving&&function NV(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new w(-200,`Circular dependency in DI detected for ${e}${n}`)}(function ce(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():B(e)}(o[n]));const a=tl(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Ft(s.injectImpl):null;gD(e,r,J.Default);try{i=e[n]=s.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function eU(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){const s=Zb(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}(n,o[n],t)}finally{null!==u&&Ft(u),tl(a),s.resolving=!1,vD()}}return i}function ND(e,t,n){return!!(n[t+(e>>DD)]&1<<e)}function kD(e,t){return!(e&J.Self||e&J.Host&&t)}class Dt{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return MD(this._tNode,this._lView,t,Bu(r),n)}}function hU(){return new Dt(at(),C())}function ct(e){return cr(()=>{const t=e.prototype.constructor,n=t[ur]||Rp(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const o=i[ur]||Rp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Rp(e){return qf(e)?()=>{const t=Rp(U(e));return t&&t()}:Ti(e)}function xD(e){const t=e[M],n=t.type;return 2===n?t.declTNode:1===n?e[ht]:null}const Po="__parameters__";function Fo(e,t,n){return cr(()=>{const r=function Np(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...o){if(this instanceof i)return r.apply(this,o),this;const s=new i(...o);return a.annotation=s,a;function a(c,u,l){const d=c.hasOwnProperty(Po)?c[Po]:Object.defineProperty(c,Po,{value:[]})[Po];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function Vo(e,t){e.forEach(n=>Array.isArray(n)?Vo(n,t):t(n))}function OD(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function sl(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Jt(e,t,n){let r=Uo(e,t);return r>=0?e[1|r]=n:(r=~r,function CU(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function kp(e,t){const n=Uo(e,t);if(n>=0)return e[1|n]}function Uo(e,t){return function FD(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}(e,t,1)}const Tt=la(Fo("Optional"),8),cl=la(Fo("SkipSelf"),4);function fl(e){return 128==(128&e.flags)}var Kr=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(Kr||{});const Lp=new Map;let zU=0;const Up="__ngContext__";function ft(e,t){Ut(t)?(e[Up]=t[ma],function WU(e){Lp.set(e[ma],e)}(t)):e[Up]=t}let jp;function $p(e,t){return jp(e,t)}function Ra(e){const t=e[Ae];return wt(t)?t[Ae]:t}function nT(e){return iT(e[pa])}function rT(e){return iT(e[In])}function iT(e){for(;null!==e&&!wt(e);)e=e[In];return e}function Bo(e,t,n,r,i){if(null!=r){let o,s=!1;wt(r)?o=r:Ut(r)&&(s=!0,r=r[xe]);const a=we(r);0===e&&null!==n?null==i?cT(t,n,a):Ni(t,n,a,i||null,!0):1===e&&null!==n?Ni(t,n,a,i||null,!0):2===e?function Cl(e,t,n){const r=yl(e,t);r&&function dj(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,a,s):3===e&&t.destroyNode(a),null!=o&&function pj(e,t,n,r,i){const o=n[Un];o!==we(n)&&Bo(t,e,r,o,i);for(let a=ot;a<n.length;a++){const c=n[a];ka(c[M],c,e,t,r,o)}}(t,e,o,n,i)}}function ml(e,t,n){return e.createElement(t,n)}function sT(e,t){const n=e[So],r=n.indexOf(t);oD(t),n.splice(r,1)}function _l(e,t){if(e.length<=ot)return;const n=ot+t,r=e[n];if(r){const i=r[ga];null!==i&&i!==e&&sT(i,r),t>0&&(e[n-1][In]=r[In]);const o=sl(e,ot+t);!function rj(e,t){ka(e,t,t[H],2,null,null),t[xe]=null,t[ht]=null}(r[M],r);const s=o[Vn];null!==s&&s.detachView(o[M]),r[Ae]=null,r[In]=null,r[G]&=-129}return r}function Hp(e,t){if(!(256&t[G])){const n=t[H];t[_a]&&zb(t[_a]),t[ya]&&zb(t[ya]),n.destroyNode&&ka(e,t,n,3,null,null),function sj(e){let t=e[pa];if(!t)return zp(e[M],e);for(;t;){let n=null;if(Ut(t))n=t[pa];else{const r=t[ot];r&&(n=r)}if(!n){for(;t&&!t[In]&&t!==e;)Ut(t)&&zp(t[M],t),t=t[Ae];null===t&&(t=e),Ut(t)&&zp(t[M],t),n=t&&t[In]}t=n}}(t)}}function zp(e,t){if(!(256&t[G])){t[G]&=-129,t[G]|=256,function lj(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof wa)){const o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){const a=i[o[s]],c=o[s+1];jn(4,a,c);try{c.call(a)}finally{jn(5,a,c)}}else{jn(4,i,o);try{o.call(i)}finally{jn(5,i,o)}}}}}(e,t),function uj(e,t){const n=e.cleanup,r=t[Io];if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else n[o].call(r[n[o+1]]);null!==r&&(t[Io]=null);const i=t[zr];if(null!==i){t[zr]=null;for(let o=0;o<i.length;o++)(0,i[o])()}}(e,t),1===t[M].type&&t[H].destroy();const n=t[ga];if(null!==n&&wt(t[Ae])){n!==t[Ae]&&sT(n,t);const r=t[Vn];null!==r&&r.detachView(e)}!function qU(e){Lp.delete(e[ma])}(t)}}function Gp(e,t,n){return function aT(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[xe];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:o}=e.data[r.directiveStart+i];if(o===En.None||o===En.Emulated)return null}return jt(r,n)}}(e,t.parent,n)}function Ni(e,t,n,r,i){e.insertBefore(t,n,r,i)}function cT(e,t,n){e.appendChild(t,n)}function uT(e,t,n,r,i){null!==r?Ni(e,t,n,r,i):cT(e,t,n)}function yl(e,t){return e.parentNode(t)}let Wp,Qp,wl,hT=function dT(e,t,n){return 40&e.type?jt(e,n):null};function vl(e,t,n,r){const i=Gp(e,r,t),o=t[H],a=function lT(e,t,n){return hT(e,t,n)}(r.parent||t[ht],r,t);if(null!=i)if(Array.isArray(n))for(let c=0;c<n.length;c++)uT(o,i,n[c],a,!1);else uT(o,i,n,a,!1);void 0!==Wp&&Wp(o,r,t,n,i)}function Na(e,t){if(null!==t){const n=t.type;if(3&n)return jt(t,e);if(4&n)return qp(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return Na(e,r);{const i=e[t.index];return wt(i)?qp(-1,i):we(i)}}if(32&n)return $p(t,e)()||we(e[t.index]);{const r=pT(e,t);return null!==r?Array.isArray(r)?r[0]:Na(Ra(e[Ve]),r):Na(e,t.next)}}return null}function pT(e,t){return null!==t?e[Ve][ht].projection[t.projection]:null}function qp(e,t){const n=ot+e+1;if(n<t.length){const r=t[n],i=r[M].firstChild;if(null!==i)return Na(r,i)}return t[Un]}function Kp(e,t,n,r,i,o,s){for(;null!=n;){const a=r[n.index],c=n.type;if(s&&0===t&&(a&&ft(we(a),r),n.flags|=2),32!=(32&n.flags))if(8&c)Kp(e,t,n.child,r,i,o,!1),Bo(t,e,i,a,o);else if(32&c){const u=$p(n,r);let l;for(;l=u();)Bo(t,e,i,l,o);Bo(t,e,i,a,o)}else 16&c?mT(e,t,r,n,i,o):Bo(t,e,i,a,o);n=s?n.projectionNext:n.next}}function ka(e,t,n,r,i,o){Kp(n,r,e.firstChild,t,i,o,!1)}function mT(e,t,n,r,i,o){const s=n[Ve],c=s[ht].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Bo(t,e,i,c[u],o);else{let u=c;const l=s[Ae];fl(r)&&(u.flags|=128),Kp(e,t,u,l,i,o,!0)}}function _T(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function yT(e,t,n){const{mergedAttrs:r,classes:i,styles:o}=n;null!==r&&sp(e,t,r),null!==i&&_T(e,t,i),null!==o&&function mj(e,t,n){e.setAttribute(t,"style",n)}(e,t,o)}function ET(e){return function Xp(){if(void 0===wl&&(wl=null,Ee.trustedTypes))try{wl=Ee.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return wl}()?.createScriptURL(e)||e}class wT{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hb})`}}function Yr(e){return e instanceof wT?e.changingThisBreaksApplicationSecurity:e}function xa(e,t){const n=function Tj(e){return e instanceof wT&&e.getTypeName()||null}(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${hb})`)}return n===t}const Rj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Go=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(Go||{});function MT(e){const t=Oa();return t?t.sanitize(Go.URL,e)||"":xa(e,"URL")?Yr(e):function Zp(e){return(e=String(e)).match(Rj)?e:"unsafe:"+e}(B(e))}function RT(e){const t=Oa();if(t)return ET(t.sanitize(Go.RESOURCE_URL,e)||"");if(xa(e,"ResourceURL"))return ET(Yr(e));throw new w(904,!1)}function Oa(){const e=C();return e&&e[bo].sanitizer}const Fa=new S("ENVIRONMENT_INITIALIZER"),kT=new S("INJECTOR",-1),xT=new S("INJECTOR_DEF_TYPES");class ng{get(t,n=ua){if(n===ua){const r=new Error(`NullInjectorError: No provider for ${Ge(t)}!`);throw r.name="NullInjectorError",r}return n}}function Hj(...e){return{\u0275providers:OT(0,e),\u0275fromNgModule:!0}}function OT(e,...t){const n=[],r=new Set;let i;const o=s=>{n.push(s)};return Vo(t,s=>{const a=s;bl(a,o,[],r)&&(i||=[],i.push(a))}),void 0!==i&&FT(i,o),n}function FT(e,t){for(let n=0;n<e.length;n++){const{ngModule:r,providers:i}=e[n];rg(i,o=>{t(o,r)})}}function bl(e,t,n,r){if(!(e=U(e)))return!1;let i=null,o=Uu(e);const s=!o&&te(e);if(o||s){if(s&&!s.standalone)return!1;i=e}else{const c=e.ngModule;if(o=Uu(c),!o)return!1;i=c}const a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)bl(u,t,n,r)}}else{if(!o)return!1;{if(null!=o.imports&&!a){let u;r.add(i);try{Vo(o.imports,l=>{bl(l,t,n,r)&&(u||=[],u.push(l))})}finally{}void 0!==u&&FT(u,t)}if(!a){const u=Ti(i)||(()=>new i);t({provide:i,useFactory:u,deps:re},i),t({provide:xT,useValue:i,multi:!0},i),t({provide:Fa,useValue:()=>x(i),multi:!0},i)}const c=o.providers;if(null!=c&&!a){const u=e;rg(c,l=>{t(l,u)})}}}return i!==e&&void 0!==e.providers}function rg(e,t){for(let n of e)Kf(n)&&(n=n.\u0275providers),Array.isArray(n)?rg(n,t):t(n)}const zj=de({provide:String,useValue:de});function ig(e){return null!==e&&"object"==typeof e&&zj in e}function ki(e){return"function"==typeof e}const og=new S("Set Injector scope."),Dl={},Wj={};let sg;function Tl(){return void 0===sg&&(sg=new ng),sg}class dn{}class Wo extends dn{get destroyed(){return this._destroyed}constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cg(t,s=>this.processProvider(s)),this.records.set(kT,qo(void 0,this)),i.has("environment")&&this.records.set(dn,qo(void 0,this));const o=this.records.get(og);null!=o&&"string"==typeof o.value&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xT.multi,re,J.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const n of this._ngOnDestroyHooks)n.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();const n=$r(this),r=Ft(void 0);try{return t()}finally{$r(n),Ft(r)}}get(t,n=ua,r=J.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(Eb))return t[Eb](this);r=Bu(r);const o=$r(this),s=Ft(void 0);try{if(!(r&J.SkipSelf)){let c=this.records.get(t);if(void 0===c){const u=function Xj(e){return"function"==typeof e||"object"==typeof e&&e instanceof S}(t)&&Vu(t);c=u&&this.injectableDefInScope(u)?qo(ag(t),Dl):null,this.records.set(t,c)}if(null!=c)return this.hydrate(t,c)}return(r&J.Self?Tl():this.parent).get(t,n=r&J.Optional&&n===ua?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[$u]=a[$u]||[]).unshift(Ge(t)),o)throw a;return function WV(e,t,n,r){const i=e[$u];throw t[yb]&&i.unshift(t[yb]),e.message=function qV(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=Ge(t);if(Array.isArray(t))i=t.map(Ge).join(" -> ");else if("object"==typeof t){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+("string"==typeof a?JSON.stringify(a):Ge(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace($V,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[$u]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Ft(s),$r(o)}}resolveInjectorInitializers(){const t=$r(this),n=Ft(void 0);try{const i=this.get(Fa.multi,re,J.Self);for(const o of i)o()}finally{$r(t),Ft(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(Ge(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new w(205,!1)}processProvider(t){let n=ki(t=U(t))?t:U(t&&t.provide);const r=function Kj(e){return ig(e)?qo(void 0,e.useValue):qo(UT(e),Dl)}(t);if(ki(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=qo(void 0,Dl,!0),i.factory=()=>rp(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Dl&&(n.value=Wj,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Qj(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=U(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){const n=this._onDestroyHooks.indexOf(t);-1!==n&&this._onDestroyHooks.splice(n,1)}}function ag(e){const t=Vu(e),n=null!==t?t.factory:Ti(e);if(null!==n)return n;if(e instanceof S)throw new w(204,!1);if(e instanceof Function)return function qj(e){const t=e.length;if(t>0)throw function Sa(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new w(204,!1);const n=function LV(e){return e&&(e[ju]||e[pb])||null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new w(204,!1)}function UT(e,t,n){let r;if(ki(e)){const i=U(e);return Ti(i)||ag(i)}if(ig(e))r=()=>U(e.useValue);else if(function VT(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...rp(e.deps||[]));else if(function LT(e){return!(!e||!e.useExisting)}(e))r=()=>x(U(e.useExisting));else{const i=U(e&&(e.useClass||e.provide));if(!function Yj(e){return!!e.deps}(e))return Ti(i)||ag(i);r=()=>new i(...rp(e.deps))}return r}function qo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function cg(e,t){for(const n of e)Array.isArray(n)?cg(n,t):n&&Kf(n)?cg(n.\u0275providers,t):t(n)}const Sl=new S("AppId",{providedIn:"root",factory:()=>Zj}),Zj="ng",jT=new S("Platform Initializer"),Qr=new S("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),$T=new S("CSP nonce",{providedIn:"root",factory:()=>function zo(){if(void 0!==Qp)return Qp;if(typeof document<"u")return document;throw new w(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let BT=(e,t,n)=>null;function mg(e,t,n=!1){return BT(e,t,n)}class c${}class GT{}class l${resolveComponentFactory(t){throw function u$(e){const t=Error(`No component factory found for ${Ge(e)}.`);return t.ngComponent=e,t}(t)}}let xl=(()=>{class e{static{this.NULL=new l$}}return e})();function d$(){return Qo(at(),C())}function Qo(e,t){return new en(jt(e,t))}let en=(()=>{class e{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=d$}}return e})();class qT{}let pr=(()=>{class e{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>function f$(){const e=C(),n=Zt(at().index,e);return(Ut(n)?n:e)[H]}()}}return e})(),p$=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>null})}}return e})();class Xo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const KT=new Xo("16.2.12"),vg={};function ZT(e,t=null,n=null,r){const i=JT(e,t,n,r);return i.resolveInjectorInitializers(),i}function JT(e,t=null,n=null,r,i=new Set){const o=[n||re,Hj(e)];return r=r||("object"==typeof e?void 0:Ge(e)),new Wo(o,t||Tl(),r||null,i)}let pt=(()=>{class e{static{this.THROW_IF_NOT_FOUND=ua}static{this.NULL=new ng}static create(n,r){if(Array.isArray(n))return ZT({name:""},r,n,"");{const i=n.name??"";return ZT({name:i},n.parent,n.providers,i)}}static{this.\u0275prov=P({token:e,providedIn:"any",factory:()=>x(kT)})}static{this.__NG_ELEMENT_ID__=-1}}return e})();function Eg(e){return e.ngOriginalError}class gr{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Eg(t);for(;n&&Eg(n);)n=Eg(n);return n||null}}function wg(e){return t=>{setTimeout(e,void 0,t)}}const Pe=class w$ extends Cn{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&"object"==typeof t){const c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=wg(o),i&&(i=wg(i)),s&&(s=wg(s)));const a=super.subscribe({next:i,error:o,complete:s});return t instanceof Ot&&t.add(a),a}};function tS(...e){}class ue{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pe(!1),this.onMicrotaskEmpty=new Pe(!1),this.onStable=new Pe(!1),this.onError=new Pe(!1),typeof Zone>"u")throw new w(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function I$(){const e="function"==typeof Ee.requestAnimationFrame;let t=Ee[e?"requestAnimationFrame":"setTimeout"],n=Ee[e?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&n){const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r);const i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function T$(e){const t=()=>{!function D$(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(Ee,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,bg(e),e.isCheckStableRunning=!0,Ig(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),bg(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(function A$(e){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0].data?.__ignore_ng_zone__}(a))return n.invokeTask(i,o,s,a);try{return nS(e),n.invokeTask(i,o,s,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),rS(e)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return nS(e),n.invoke(i,o,s,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),rS(e)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&("microTask"==o.change?(e._hasPendingMicrotasks=o.microTask,bg(e),Ig(e)):"macroTask"==o.change&&(e.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),e.runOutsideAngular(()=>e.onError.emit(o)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ue.isInAngularZone())throw new w(909,!1)}static assertNotInAngularZone(){if(ue.isInAngularZone())throw new w(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,b$,tS,tS);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const b$={};function Ig(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function bg(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function nS(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rS(e){e._nesting--,Ig(e)}class S${constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pe,this.onMicrotaskEmpty=new Pe,this.onStable=new Pe,this.onError=new Pe}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const iS=new S("",{providedIn:"root",factory:oS});function oS(){const e=k(ue);let t=!0;return function SV(...e){const t=ca(e),n=function CV(e,t){return"number"==typeof zf(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Kt(r[0]):Co(n)(Xe(r,t)):On}(new Se(i=>{t=e.isStable&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks,e.runOutsideAngular(()=>{i.next(t),i.complete()})}),new Se(i=>{let o;e.runOutsideAngular(()=>{o=e.onStable.subscribe(()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{!t&&!e.hasPendingMacrotasks&&!e.hasPendingMicrotasks&&(t=!0,i.next(!0))})})});const s=e.onUnstable.subscribe(()=>{ue.assertInAngularZone(),t&&(t=!1,e.runOutsideAngular(()=>{i.next(!1)}))});return()=>{o.unsubscribe(),s.unsubscribe()}}).pipe(db()))}function mr(e){return e instanceof Function?e():e}let Dg=(()=>{class e{constructor(){this.renderDepth=0,this.handler=null}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){this.renderDepth--,0===this.renderDepth&&this.handler?.execute()}ngOnDestroy(){this.handler?.destroy(),this.handler=null}static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Ua(e){for(;e;){e[G]|=64;const t=Ra(e);if(up(e)&&!t)return e;e=t}return null}const lS=new S("",{providedIn:"root",factory:()=>!1});let Fl=null;function pS(e,t){return e[t]??_S()}function gS(e,t){const n=_S();n.producerNode?.length&&(e[t]=Fl,n.lView=e,Fl=mS())}const V$={...Vb,consumerIsAlwaysLive:!0,consumerMarkedDirty:e=>{Ua(e.lView)},lView:null};function mS(){return Object.create(V$)}function _S(){return Fl??=mS(),Fl}const z={};function A(e){yS(ne(),C(),bt()+e,!1)}function yS(e,t,n,r){if(!r)if(3==(3&t[G])){const o=e.preOrderCheckHooks;null!==o&&Ju(t,o,n)}else{const o=e.preOrderHooks;null!==o&&el(t,o,0,n)}Mi(n)}function E(e,t=J.Default){const n=C();return null===n?x(e,t):MD(at(),n,U(e),t)}function Ll(e,t,n,r,i,o,s,a,c,u,l){const d=t.blueprint.slice();return d[xe]=i,d[G]=140|r,(null!==u||e&&2048&e[G])&&(d[G]|=2048),iD(d),d[Ae]=d[Do]=e,d[Le]=n,d[bo]=s||e&&e[bo],d[H]=a||e&&e[H],d[Hr]=c||e&&e[Hr]||null,d[ht]=o,d[ma]=function GU(){return zU++}(),d[lr]=l,d[Pb]=u,d[Ve]=2==t.type?e[Ve]:d,d}function es(e,t,n,r,i){let o=e.data[t];if(null===o)o=function Tg(e,t,n,r,i){const o=lD(),s=_p(),c=e.data[t]=function W$(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return function Ro(){return null!==V.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=c),null!==o&&(s?null==o.child&&null!==c.parent&&(o.child=c):null===o.next&&(o.next=c,c.prev=o)),c}(e,t,n,r,i),function z2(){return V.lFrame.inI18n}()&&(o.flags|=32);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const s=function Ea(){const e=V.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();o.injectorIndex=null===s?-1:s.injectorIndex}return $n(o,!0),o}function ja(e,t,n,r){if(0===n)return-1;const i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function CS(e,t,n,r,i){const o=pS(t,_a),s=bt(),a=2&r;try{Mi(-1),a&&t.length>ee&&yS(e,t,ee,!1),jn(a?2:0,i);const u=a?o:null,l=dp(u);try{null!==u&&(u.dirty=!1),n(r,i)}finally{hp(u,l)}}finally{a&&null===t[_a]&&gS(t,_a),Mi(s),jn(a?3:1,i)}}function Sg(e,t,n){if(cp(t)){const r=cn(null);try{const o=t.directiveEnd;for(let s=t.directiveStart;s<o;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{cn(r)}}}function Ag(e,t,n){uD()&&(function J$(e,t,n,r){const i=n.directiveStart,o=n.directiveEnd;Di(n)&&function sB(e,t,n){const r=jt(t,e),i=ES(n);let s=16;n.signals?s=4096:n.onPush&&(s=64);const a=Vl(e,Ll(e,i,null,s,r,t,null,e[bo].rendererFactory.createRenderer(r,n),null,null,null));e[t.index]=a}(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||nl(n,t),ft(r,t);const s=n.initialInputs;for(let a=i;a<o;a++){const c=e.data[a],u=Ri(t,e,a,n);ft(u,t),null!==s&&aB(0,a-i,u,c,0,s),bn(c)&&(Zt(n.index,t)[Le]=Ri(t,e,a,n))}}(e,t,n,jt(n,t)),64==(64&n.flags)&&TS(e,t,n))}function Mg(e,t,n=jt){const r=t.localNames;if(null!==r){let i=t.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(t,e):e[s];e[i++]=a}}}function ES(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Rg(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Rg(e,t,n,r,i,o,s,a,c,u,l){const d=ee+r,h=d+i,f=function j$(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:z);return n}(d,h),p="function"==typeof u?u():u;return f[M]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}let wS=e=>null;function IS(e,t,n,r){for(let i in e)if(e.hasOwnProperty(i)){n=null===n?{}:n;const o=e[i];null===r?bS(n,t,i,o):r.hasOwnProperty(i)&&bS(n,t,r[i],o)}return n}function bS(e,t,n,r){e.hasOwnProperty(n)?e[n].push(t,r):e[n]=[t,r]}function Ng(e,t,n,r){if(uD()){const i=null===r?null:{"":-1},o=function tB(e,t){const n=e.directiveRegistry;let r=null,i=null;if(n)for(let o=0;o<n.length;o++){const s=n[o];if(Ab(t,s.selectors,!1))if(r||(r=[]),bn(s))if(null!==s.findHostDirectiveDefs){const a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s),kg(e,t,a.length)}else r.unshift(s),kg(e,t,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return null===r?null:[r,i]}(e,n);let s,a;null===o?s=a=null:[s,a]=o,null!==s&&DS(e,t,n,s,i,a),i&&function nB(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const o=n[t[i+1]];if(null==o)throw new w(-301,!1);r.push(t[i],o)}}}(n,r,i)}n.mergedAttrs=ha(n.mergedAttrs,n.attrs)}function DS(e,t,n,r,i,o){for(let u=0;u<r.length;u++)Mp(nl(n,t),e,r[u].type);!function iB(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}(n,e.data.length,r.length);for(let u=0;u<r.length;u++){const l=r[u];l.providersResolver&&l.providersResolver(l)}let s=!1,a=!1,c=ja(e,t,r.length,null);for(let u=0;u<r.length;u++){const l=r[u];n.mergedAttrs=ha(n.mergedAttrs,l.hostAttrs),oB(e,n,t,c,l),rB(c,l,i),null!==l.contentQueries&&(n.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(n.flags|=64);const d=l.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}!function q$(e,t,n){const i=t.directiveEnd,o=e.data,s=t.attrs,a=[];let c=null,u=null;for(let l=t.directiveStart;l<i;l++){const d=o[l],h=n?n.get(d):null,p=h?h.outputs:null;c=IS(d.inputs,l,c,h?h.inputs:null),u=IS(d.outputs,l,u,p);const m=null===c||null===s||Sb(t)?null:cB(c,l,s);a.push(m)}null!==c&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=u}(e,n,o)}function TS(e,t,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=function W2(){return V.lFrame.currentDirectiveIndex}();try{Mi(o);for(let a=r;a<i;a++){const c=e.data[a],u=t[a];vp(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&eB(c,u)}}finally{Mi(-1),vp(s)}}function eB(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function kg(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function rB(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;bn(t)&&(n[""]=e)}}function oB(e,t,n,r,i){e.data[r]=i;const o=i.factory||(i.factory=Ti(i.type)),s=new wa(o,bn(i),E);e.blueprint[r]=s,n[r]=s,function X$(e,t,n,r,i){const o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;null===s&&(s=e.hostBindingOpCodes=[]);const a=~t.index;(function Z$(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,o)}}(e,t,r,ja(e,n,i.hostVars,z),i)}function Hn(e,t,n,r,i,o){const s=jt(e,t);!function xg(e,t,n,r,i,o,s){if(null==o)e.removeAttribute(t,i,n);else{const a=null==s?B(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}(t[H],s,o,e.value,n,r,i)}function aB(e,t,n,r,i,o){const s=o[t];if(null!==s)for(let a=0;a<s.length;)SS(r,n,s[a++],s[a++],s[a++])}function SS(e,t,n,r,i){const o=cn(null);try{const s=e.inputTransforms;null!==s&&s.hasOwnProperty(r)&&(i=s[r].call(t,i)),null!==e.setInput?e.setInput(t,i,n,r):t[r]=i}finally{cn(o)}}function cB(e,t,n){let r=null,i=0;for(;i<n.length;){const o=n[i];if(0!==o)if(5!==o){if("number"==typeof o)break;if(e.hasOwnProperty(o)){null===r&&(r=[]);const s=e[o];for(let a=0;a<s.length;a+=2)if(s[a]===t){r.push(o,s[a+1],n[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function AS(e,t,n,r){return[e,!0,!1,t,null,0,r,n,null,null,null]}function MS(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r+1];if(-1!==o){const s=e.data[o];Ep(n[r]),s.contentQueries(2,t[o],o)}}}function Vl(e,t){return e[pa]?e[xb][In]=t:e[pa]=t,e[xb]=t,t}function Pg(e,t,n){Ep(0);const r=cn(null);try{t(e,n)}finally{cn(r)}}function xS(e,t){const n=e[Hr],r=n?n.get(gr,null):null;r&&r.handleError(t)}function Og(e,t,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++];SS(e.data[s],t[s],r,a,i)}}function uB(e,t){const n=Zt(t,e),r=n[M];!function lB(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n);const i=n[xe];null!==i&&null===n[lr]&&(n[lr]=mg(i,n[Hr])),Fg(r,n,n[Le])}function Fg(e,t,n){wp(t);try{const r=e.viewQuery;null!==r&&Pg(1,r,n);const i=e.template;null!==i&&CS(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&MS(e,t),e.staticViewQueries&&Pg(2,e.viewQuery,n);const o=e.components;null!==o&&function dB(e,t){for(let n=0;n<t.length;n++)uB(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[G]&=-5,Ip()}}let PS=(()=>{class e{constructor(){this.all=new Set,this.queue=new Map}create(n,r,i){const o=typeof Zone>"u"?null:Zone.current,s=function w2(e,t,n){const r=Object.create(I2);n&&(r.consumerAllowSignalWrites=!0),r.fn=e,r.schedule=t;const i=s=>{r.cleanupFn=s};return r.ref={notify:()=>Bb(r),run:()=>{if(r.dirty=!1,r.hasRun&&!Hb(r))return;r.hasRun=!0;const s=dp(r);try{r.cleanupFn(),r.cleanupFn=Xb,r.fn(i)}finally{hp(r,s)}},cleanup:()=>r.cleanupFn()},r.ref}(n,u=>{this.all.has(u)&&this.queue.set(u,o)},i);let a;this.all.add(s),s.notify();const c=()=>{s.cleanup(),a?.(),this.all.delete(s),this.queue.delete(s)};return a=r?.onDestroy(c),{destroy:c}}flush(){if(0!==this.queue.size)for(const[n,r]of this.queue)this.queue.delete(n),r?r.run(()=>n.run()):n.run()}get isQueueEmpty(){return 0===this.queue.size}static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>new e})}}return e})();function Ul(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(let s=0;s<t.length;s++){const a=t[s];"number"==typeof a?o=a:1==o?i=Wf(i,a):2==o&&(r=Wf(r,a+": "+t[++s]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function $a(e,t,n,r,i=!1){for(;null!==n;){const o=t[n.index];null!==o&&r.push(we(o)),wt(o)&&OS(o,r);const s=n.type;if(8&s)$a(e,t,n.child,r);else if(32&s){const a=$p(n,t);let c;for(;c=a();)r.push(c)}else if(16&s){const a=pT(t,n);if(Array.isArray(a))r.push(...a);else{const c=Ra(t[Ve]);$a(c[M],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function OS(e,t){for(let n=ot;n<e.length;n++){const r=e[n],i=r[M].firstChild;null!==i&&$a(r[M],r,i,t)}e[Un]!==e[xe]&&t.push(e[Un])}function jl(e,t,n,r=!0){const i=t[bo],o=i.rendererFactory,s=i.afterRenderEventManager;o.begin?.(),s?.begin();try{FS(e,t,e.template,n)}catch(c){throw r&&xS(t,c),c}finally{o.end?.(),i.effectManager?.flush(),s?.end()}}function FS(e,t,n,r){const i=t[G];if(256!=(256&i)){t[bo].effectManager?.flush(),wp(t);try{iD(t),function hD(e){return V.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&CS(e,t,n,2,r);const s=3==(3&i);if(s){const u=e.preOrderCheckHooks;null!==u&&Ju(t,u,null)}else{const u=e.preOrderHooks;null!==u&&el(t,u,0,null),bp(t,0)}if(function pB(e){for(let t=nT(e);null!==t;t=rT(t)){if(!t[Ob])continue;const n=t[So];for(let r=0;r<n.length;r++){x2(n[r])}}}(t),LS(t,2),null!==e.contentQueries&&MS(e,t),s){const u=e.contentCheckHooks;null!==u&&Ju(t,u)}else{const u=e.contentHooks;null!==u&&el(t,u,1),bp(t,1)}!function U$(e,t){const n=e.hostBindingOpCodes;if(null===n)return;const r=pS(t,ya);try{for(let i=0;i<n.length;i++){const o=n[i];if(o<0)Mi(~o);else{const s=o,a=n[++i],c=n[++i];G2(a,s),r.dirty=!1;const u=dp(r);try{c(2,t[s])}finally{hp(r,u)}}}}finally{null===t[ya]&&gS(t,ya),Mi(-1)}}(e,t);const a=e.components;null!==a&&US(t,a,0);const c=e.viewQuery;if(null!==c&&Pg(2,c,r),s){const u=e.viewCheckHooks;null!==u&&Ju(t,u)}else{const u=e.viewHooks;null!==u&&el(t,u,2),bp(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[G]&=-73,oD(t)}finally{Ip()}}}function LS(e,t){for(let n=nT(e);null!==n;n=rT(n))for(let r=ot;r<n.length;r++)VS(n[r],t)}function gB(e,t,n){VS(Zt(t,e),n)}function VS(e,t){if(!function N2(e){return 128==(128&e[G])}(e))return;const n=e[M],r=e[G];if(80&r&&0===t||1024&r||2===t)FS(n,e,n.template,e[Le]);else if(e[fa]>0){LS(e,1);const i=n.components;null!==i&&US(e,i,1)}}function US(e,t,n){for(let r=0;r<t.length;r++)gB(e,t[r],n)}class Ba{get rootNodes(){const t=this._lView,n=t[M];return $a(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Le]}set context(t){this._lView[Le]=t}get destroyed(){return 256==(256&this._lView[G])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Ae];if(wt(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(_l(t,r),sl(n,r))}this._attachedToViewContainer=!1}Hp(this._lView[M],this._lView)}onDestroy(t){!function aD(e,t){if(256==(256&e[G]))throw new w(911,!1);null===e[zr]&&(e[zr]=[]),e[zr].push(t)}(this._lView,t)}markForCheck(){Ua(this._cdRefInjectingView||this._lView)}detach(){this._lView[G]&=-129}reattach(){this._lView[G]|=128}detectChanges(){jl(this._lView[M],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new w(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oj(e,t){ka(e,t,t[H],2,null,null)}(this._lView[M],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new w(902,!1);this._appRef=t}}class mB extends Ba{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;jl(t[M],t,t[Le],!1)}checkNoChanges(){}get context(){return null}}class jS extends xl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=te(t);return new Ha(n,this.ngModule)}}function $S(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class yB{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){r=Bu(r);const i=this.injector.get(t,vg,r);return i!==vg||n===vg?i:this.parentInjector.get(t,n,r)}}class Ha extends GT{get inputs(){const t=this.componentDef,n=t.inputTransforms,r=$S(t.inputs);if(null!==n)for(const i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return $S(this.componentDef.outputs)}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function r2(e){return e.map(n2).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}create(t,n,r,i){let o=(i=i||this.ngModule)instanceof dn?i:i?.injector;o&&null!==this.componentDef.getStandaloneInjector&&(o=this.componentDef.getStandaloneInjector(o)||o);const s=o?new yB(t,o):t,a=s.get(qT,null);if(null===a)throw new w(407,!1);const d={rendererFactory:a,sanitizer:s.get(p$,null),effectManager:s.get(PS,null),afterRenderEventManager:s.get(Dg,null)},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function $$(e,t,n,r){const o=r.get(lS,!1)||n===En.ShadowDom,s=e.selectRootElement(t,o);return function B$(e){wS(e)}(s),s}(h,r,this.componentDef.encapsulation,s):ml(h,f,function _B(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(f)),v=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let _=null;null!==p&&(_=mg(p,s,!0));const N=Rg(0,null,null,1,0,null,null,null,null,null,null),F=Ll(null,N,null,v,null,null,d,h,s,null,_);let Y,$e;wp(F);try{const sn=this.componentDef;let Vr,yo=null;sn.findHostDirectiveDefs?(Vr=[],yo=new Map,sn.findHostDirectiveDefs(sn,Vr,yo),Vr.push(sn)):Vr=[sn];const jI=function CB(e,t){const n=e[M],r=ee;return e[r]=t,es(n,r,2,"#host",null)}(F,p),Woe=function EB(e,t,n,r,i,o,s){const a=i[M];!function wB(e,t,n,r){for(const i of e)t.mergedAttrs=ha(t.mergedAttrs,i.hostAttrs);null!==t.mergedAttrs&&(Ul(t,t.mergedAttrs,!0),null!==n&&yT(r,n,t))}(r,e,t,s);let c=null;null!==t&&(c=mg(t,i[Hr]));const u=o.rendererFactory.createRenderer(t,n);let l=16;n.signals?l=4096:n.onPush&&(l=64);const d=Ll(i,ES(n),null,l,i[e.index],e,o,u,null,null,c);return a.firstCreatePass&&kg(a,e,r.length-1),Vl(i,d),i[e.index]=d}(jI,p,sn,Vr,F,d,h);$e=rD(N,ee),p&&function bB(e,t,n,r){if(r)sp(e,n,["ng-version",KT.full]);else{const{attrs:i,classes:o}=function i2(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!wn(i))break;i=o}r++}return{attrs:t,classes:n}}(t.selectors[0]);i&&sp(e,n,i),o&&o.length>0&&_T(e,n,o.join(" "))}}(h,sn,p,r),void 0!==n&&function DB(e,t,n){const r=e.projection=[];for(let i=0;i<t.length;i++){const o=n[i];r.push(null!=o?Array.from(o):null)}}($e,this.ngContentSelectors,n),Y=function IB(e,t,n,r,i,o){const s=at(),a=i[M],c=jt(s,i);DS(a,i,s,n,null,r);for(let l=0;l<n.length;l++)ft(Ri(i,a,s.directiveStart+l,s),i);TS(a,i,s),c&&ft(c,i);const u=Ri(i,a,s.directiveStart+s.componentOffset,s);if(e[Le]=i[Le]=u,null!==o)for(const l of o)l(u,t);return Sg(a,s,e),u}(Woe,sn,Vr,yo,F,[TB]),Fg(N,F,null)}finally{Ip()}return new vB(this.componentType,Y,Qo($e,F),F,$e)}}class vB extends c${constructor(t,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new mB(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;const o=this._rootLView;Og(o[M],o,i,t,n),this.previousInputValues.set(t,n),Ua(Zt(this._tNode.index,o))}}get injector(){return new Dt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function TB(){const e=at();Zu(C()[M],e)}function he(e){let t=function BS(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(bn(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new w(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);const s=e;s.inputs=$l(e.inputs),s.inputTransforms=$l(e.inputTransforms),s.declaredInputs=$l(e.declaredInputs),s.outputs=$l(e.outputs);const a=i.hostBindings;a&&RB(e,a);const c=i.viewQuery,u=i.contentQueries;if(c&&AB(e,c),u&&MB(e,u),Fu(e.inputs,i.inputs),Fu(e.declaredInputs,i.declaredInputs),Fu(e.outputs,i.outputs),null!==i.inputTransforms&&(null===s.inputTransforms&&(s.inputTransforms={}),Fu(s.inputTransforms,i.inputTransforms)),bn(i)&&i.data.animation){const l=e.data;l.animation=(l.animation||[]).concat(i.data.animation)}}const o=i.features;if(o)for(let s=0;s<o.length;s++){const a=o[s];a&&a.ngInherit&&a(e),a===he&&(n=!1)}}t=Object.getPrototypeOf(t)}!function SB(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=ha(i.hostAttrs,n=ha(n,i.hostAttrs))}}(r)}function $l(e){return e===Ln?{}:e===re?[]:e}function AB(e,t){const n=e.viewQuery;e.viewQuery=n?(r,i)=>{t(r,i),n(r,i)}:t}function MB(e,t){const n=e.contentQueries;e.contentQueries=n?(r,i,o)=>{t(r,i,o),n(r,i,o)}:t}function RB(e,t){const n=e.hostBindings;e.hostBindings=n?(r,i)=>{t(r,i),n(r,i)}:t}function WS(e){const t=e.inputConfig,n={};for(const r in t)if(t.hasOwnProperty(r)){const i=t[r];Array.isArray(i)&&i[2]&&(n[r]=i[2])}e.inputTransforms=n}function Bl(e){return!!Lg(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function Lg(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function zn(e,t,n){return e[t]=n}function za(e,t){return e[t]}function gt(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function xi(e,t,n,r){const i=gt(e,t,n);return gt(e,t+1,r)||i}function Gn(e,t,n,r){const i=C();return gt(i,No(),t)&&(ne(),Hn(Ne(),i,e,t,n,r)),Gn}function O(e,t,n,r,i,o,s,a){const c=C(),u=ne(),l=e+ee,d=u.firstCreatePass?function tH(e,t,n,r,i,o,s,a,c){const u=t.consts,l=es(t,e,4,s||null,Wr(u,a));Ng(t,n,l,Wr(u,c)),Zu(t,l);const d=l.tView=Rg(2,l,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u,null);return null!==t.queries&&(t.queries.template(t,l),d.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,i,o,s):u.data[l];$n(d,!1);const h=oA(u,c,d,e);Xu()&&vl(u,c,h,d),ft(h,c),Vl(c,c[l]=AS(h,c,h,d)),qu(d)&&Ag(u,c,d),null!=s&&Mg(c,d,a)}let oA=function sA(e,t,n,r){return qr(!0),t[H].createComment("")};function R(e,t,n){const r=C();return gt(r,No(),t)&&function tn(e,t,n,r,i,o,s,a){const c=jt(t,n);let l,u=t.inputs;!a&&null!=u&&(l=u[r])?(Og(e,n,l,r,i),Di(t)&&function Y$(e,t){const n=Zt(t,e);16&n[G]||(n[G]|=64)}(n,t.index)):3&t.type&&(r=function K$(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=s?s(i,t.value||"",r):i,o.setProperty(c,r,i))}(ne(),Ne(),r,e,t,r[H],n,!1),R}function Hg(e,t,n,r,i){const s=i?"class":"style";Og(e,n,t.inputs[s],s,r)}function T(e,t,n,r){const i=C(),o=ne(),s=ee+e,a=i[H],c=o.firstCreatePass?function sH(e,t,n,r,i,o){const s=t.consts,c=es(t,e,2,r,Wr(s,i));return Ng(t,n,c,Wr(s,o)),null!==c.attrs&&Ul(c,c.attrs,!1),null!==c.mergedAttrs&&Ul(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(s,o,i,t,n,r):o.data[s],u=aA(o,i,c,a,t,e);i[s]=u;const l=qu(c);return $n(c,!0),yT(a,u,c),32!=(32&c.flags)&&Xu()&&vl(o,i,u,c),0===function O2(){return V.lFrame.elementDepthCount}()&&ft(u,i),function F2(){V.lFrame.elementDepthCount++}(),l&&(Ag(o,i,c),Sg(o,c,i)),null!==r&&Mg(i,c),T}function b(){let e=at();_p()?function yp(){V.lFrame.isParent=!1}():(e=e.parent,$n(e,!1));const t=e;(function V2(e){return V.skipHydrationRootTNode===e})(t)&&function B2(){V.skipHydrationRootTNode=null}(),function L2(){V.lFrame.elementDepthCount--}();const n=ne();return n.firstCreatePass&&(Zu(n,e),cp(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function rU(e){return 0!=(8&e.flags)}(t)&&Hg(n,t,C(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function iU(e){return 0!=(16&e.flags)}(t)&&Hg(n,t,C(),t.stylesWithoutHost,!1),b}function K(e,t,n,r){return T(e,t,n,r),b(),K}let aA=(e,t,n,r,i,o)=>(qr(!0),ml(r,i,function CD(){return V.lFrame.currentNamespace}()));function ls(){return C()}function Ka(e){return!!e&&"function"==typeof e.then}function lA(e){return!!e&&"function"==typeof e.subscribe}function Ue(e,t,n,r){const i=C(),o=ne(),s=at();return function hA(e,t,n,r,i,o,s){const a=qu(r),u=e.firstCreatePass&&function NS(e){return e.cleanup||(e.cleanup=[])}(e),l=t[Le],d=function RS(e){return e[Io]||(e[Io]=[])}(t);let h=!0;if(3&r.type||s){const m=jt(r,t),y=s?s(m):m,v=d.length,_=s?F=>s(we(F[r.index])):r.index;let N=null;if(!s&&a&&(N=function hH(e,t,n,r){const i=e.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const s=i[o];if(s===n&&i[o+1]===r){const a=t[Io],c=i[o+2];return a.length>c?a[c]:null}"string"==typeof s&&(o+=2)}return null}(e,t,i,r.index)),null!==N)(N.__ngLastListenerFn__||N).__ngNextListenerFn__=o,N.__ngLastListenerFn__=o,h=!1;else{o=pA(r,t,l,o,!1);const F=n.listen(y,i,o);d.push(o,F),u&&u.push(i,_,v,v+1)}}else o=pA(r,t,l,o,!1);const f=r.outputs;let p;if(h&&null!==f&&(p=f[i])){const m=p.length;if(m)for(let y=0;y<m;y+=2){const Y=t[p[y]][p[y+1]].subscribe(o),$e=d.length;d.push(o,Y),u&&u.push(i,r.index,$e,-($e+1))}}}(o,i,i[H],s,e,t,r),Ue}function fA(e,t,n,r){try{return jn(6,t,n),!1!==n(r)}catch(i){return xS(e,i),!1}finally{jn(7,t,n)}}function pA(e,t,n,r,i){return function o(s){if(s===Function)return r;Ua(e.componentOffset>-1?Zt(e.index,t):t);let c=fA(t,n,r,s),u=o.__ngNextListenerFn__;for(;u;)c=fA(t,n,u,s)&&c,u=u.__ngNextListenerFn__;return i&&!1===c&&s.preventDefault(),c}}function me(e=1){return function K2(e){return(V.lFrame.contextLView=function Y2(e,t){for(;e>0;)t=t[Do],e--;return t}(e,V.lFrame.contextLView))[Le]}(e)}function ql(e,t){return e<<17|t<<2}function Xr(e){return e>>17&32767}function qg(e){return 2|e}function Pi(e){return(131068&e)>>2}function Kg(e,t){return-131069&e|t<<2}function Yg(e){return 1|e}function bA(e,t,n,r,i){const o=e[n+1],s=null===t;let a=r?Xr(o):Pi(o),c=!1;for(;0!==a&&(!1===c||s);){const l=e[a+1];EH(e[a],t)&&(c=!0,e[a+1]=r?Yg(l):qg(l)),a=r?Xr(l):Pi(l)}c&&(e[n+1]=r?qg(o):Yg(o))}function EH(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Uo(e,t)>=0}const qe={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function DA(e){return e.substring(qe.key,qe.keyEnd)}function TA(e,t){const n=qe.textEnd;return n===t?-1:(t=qe.keyEnd=function DH(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,qe.key=t,n),ds(e,t,n))}function ds(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Kl(e,t){return function Dn(e,t,n,r){const i=C(),o=ne(),s=hr(2);o.firstUpdatePass&&PA(o,e,s,r),t!==z&&gt(i,s,t)&&FA(o,o.data[bt()],i,i[H],e,i[s+1]=function FH(e,t){return null==e||""===e||("string"==typeof t?e+=t:"object"==typeof e&&(e=Ge(Yr(e)))),e}(t,n),r,s)}(e,t,null,!0),Kl}function kA(e){!function Tn(e,t,n,r){const i=ne(),o=hr(2);i.firstUpdatePass&&PA(i,null,o,r);const s=C();if(n!==z&&gt(s,o,n)){const a=i.data[bt()];if(VA(a,r)&&!xA(i,o)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;null!==c&&(n=Wf(c,n||"")),Hg(i,a,s,n,r)}else!function OH(e,t,n,r,i,o,s,a){i===z&&(i=re);let c=0,u=0,l=0<i.length?i[0]:null,d=0<o.length?o[0]:null;for(;null!==l||null!==d;){const h=c<i.length?i[c+1]:void 0,f=u<o.length?o[u+1]:void 0;let m,p=null;l===d?(c+=2,u+=2,h!==f&&(p=d,m=f)):null===d||null!==l&&l<d?(c+=2,p=l):(u+=2,p=d,m=f),null!==p&&FA(e,t,n,r,p,m,s,a),l=c<i.length?i[c]:null,d=u<o.length?o[u]:null}}(i,a,s,s[H],s[o+1],s[o+1]=function xH(e,t,n){if(null==n||""===n)return re;const r=[],i=Yr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&e(r,o,i[o]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,o)}}(PH,qn,e,!0)}function qn(e,t){for(let n=function IH(e){return function AA(e){qe.key=0,qe.keyEnd=0,qe.value=0,qe.valueEnd=0,qe.textEnd=e.length}(e),TA(e,ds(e,0,qe.textEnd))}(t);n>=0;n=TA(t,n))Jt(e,DA(t),!0)}function xA(e,t){return t>=e.expandoStartIndex}function PA(e,t,n,r){const i=e.data;if(null===i[n+1]){const o=i[bt()],s=xA(e,n);VA(o,r)&&null===t&&!s&&(t=!1),t=function MH(e,t,n,r){const i=function Cp(e){const t=V.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=Ya(n=Qg(null,e,t,n,r),t.attrs,r),o=null);else{const s=t.directiveStylingLast;if(-1===s||e[s]!==i)if(n=Qg(i,e,t,n,r),null===o){let c=function RH(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Pi(r))return e[Xr(r)]}(e,t,r);void 0!==c&&Array.isArray(c)&&(c=Qg(null,e,t,c[1],r),c=Ya(c,t.attrs,r),function NH(e,t,n,r){e[Xr(n?t.classBindings:t.styleBindings)]=r}(e,t,r,c))}else o=function kH(e,t,n){let r;const i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++)r=Ya(r,e[o].hostAttrs,n);return Ya(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function vH(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Xr(s),c=Pi(s);e[r]=n;let l,u=!1;if(Array.isArray(n)?(l=n[1],(null===l||Uo(n,l)>0)&&(u=!0)):l=n,i)if(0!==c){const h=Xr(e[a+1]);e[r+1]=ql(h,a),0!==h&&(e[h+1]=Kg(e[h+1],r)),e[a+1]=function _H(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=ql(a,0),0!==a&&(e[a+1]=Kg(e[a+1],r)),a=r;else e[r+1]=ql(c,0),0===a?a=r:e[c+1]=Kg(e[c+1],r),c=r;u&&(e[r+1]=qg(e[r+1])),bA(e,l,r,!0),bA(e,l,r,!1),function CH(e,t,n,r,i){const o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Uo(o,t)>=0&&(n[r+1]=Yg(n[r+1]))}(t,l,e,r,o),s=ql(a,c),o?t.classBindings=s:t.styleBindings=s}(i,o,t,n,s,r)}}function Qg(e,t,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=t[a],r=Ya(r,o.hostAttrs,i),o!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function Ya(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let o=0;o<t.length;o++){const s=t[o];"number"==typeof s?i=s:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Jt(e,s,!!n||t[++o]))}return void 0===e?null:e}function PH(e,t,n){const r=String(t);""!==r&&!r.includes(" ")&&Jt(e,r,n)}function FA(e,t,n,r,i,o,s,a){if(!(3&t.type))return;const c=e.data,u=c[a+1],l=function yH(e){return 1==(1&e)}(u)?LA(c,t,n,i,Pi(u),s):void 0;Yl(l)||(Yl(o)||function mH(e){return 2==(2&e)}(u)&&(o=LA(c,null,n,i,a,s)),function gj(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=-1===r.indexOf("-")?void 0:Kr.DashCase;null==i?e.removeStyle(n,r,o):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Kr.Important),e.setStyle(n,r,i,o))}}(r,s,Qu(bt(),n),i,o))}function LA(e,t,n,r,i,o){const s=null===t;let a;for(;i>0;){const c=e[i],u=Array.isArray(c),l=u?c[1]:c,d=null===l;let h=n[i+1];h===z&&(h=d?re:void 0);let f=d?kp(h,r):l===r?h:void 0;if(u&&!Yl(f)&&(f=kp(c,r)),Yl(f)&&(a=f,s))return a;const p=e[i+1];i=s?Xr(p):Pi(p)}if(null!==t){let c=o?t.residualClasses:t.residualStyles;null!=c&&(a=kp(c,r))}return a}function Yl(e){return void 0!==e}function VA(e,t){return 0!=(e.flags&(t?8:16))}function ie(e,t=""){const n=C(),r=ne(),i=e+ee,o=r.firstCreatePass?es(r,i,1,t,null):r.data[i],s=UA(r,n,o,t,e);n[i]=s,Xu()&&vl(r,n,s,o),$n(o,!1)}let UA=(e,t,n,r,i)=>(qr(!0),function gl(e,t){return e.createText(t)}(t[H],r));function Zr(e){return hs("",e,""),Zr}function hs(e,t,n){const r=C(),i=function ns(e,t,n,r){return gt(e,No(),n)?t+B(n)+r:z}(r,e,t,n);return i!==z&&function _r(e,t,n){const r=Qu(t,e);!function oT(e,t,n){e.setValue(t,n)}(e[H],r,n)}(r,bt(),i),hs}const ps="en-US";let c0=ps;function Jg(e,t,n,r,i){if(e=U(e),Array.isArray(e))for(let o=0;o<e.length;o++)Jg(e[o],t,n,r,i);else{const o=ne(),s=C(),a=at();let c=ki(e)?e:U(e.provide);const u=UT(e),l=1048575&a.providerIndexes,d=a.directiveStart,h=a.providerIndexes>>20;if(ki(e)||!e.multi){const f=new wa(u,i,E),p=tm(c,t,i?l:l+h,d);-1===p?(Mp(nl(a,s),o,c),em(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{const f=tm(c,t,l+h,d),p=tm(c,t,l,l+h),y=p>=0&&n[p];if(i&&!y||!i&&!(f>=0&&n[f])){Mp(nl(a,s),o,c);const v=function rG(e,t,n,r,i){const o=new wa(e,n,E);return o.multi=[],o.index=t,o.componentProviders=0,x0(o,i,r&&!n),o}(i?nG:tG,n.length,i,r,u);!i&&y&&(n[p].providerFactory=v),em(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)}else em(o,e,f>-1?f:p,x0(n[i?p:f],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function em(e,t,n,r){const i=ki(t),o=function Gj(e){return!!e.useClass}(t);if(i||o){const c=(o?U(t.useClass):t).prototype.ngOnDestroy;if(c){const u=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const l=u.indexOf(n);-1===l?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function x0(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function tm(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function tG(e,t,n,r){return nm(this.multi,[])}function nG(e,t,n,r){const i=this.multi;let o;if(this.providerFactory){const s=this.providerFactory.componentProviders,a=Ri(n,n[M],this.providerFactory.index,r);o=a.slice(0,s),nm(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],nm(i,o);return o}function nm(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Me(e,t=[]){return n=>{n.providersResolver=(r,i)=>function eG(e,t,n){const r=ne();if(r.firstCreatePass){const i=bn(e);Jg(n,r.data,r.blueprint,i,!0),Jg(t,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,t)}}class Fi{}class P0{}class rm extends Fi{constructor(t,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new jS(this);const i=Xt(t);this._bootstrapComponents=mr(i.bootstrap),this._r3Injector=JT(t,n,[{provide:Fi,useValue:this},{provide:xl,useValue:this.componentFactoryResolver},...r],Ge(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class im extends P0{constructor(t){super(),this.moduleType=t}create(t){return new rm(this.moduleType,t,[])}}class O0 extends Fi{constructor(t){super(),this.componentFactoryResolver=new jS(this),this.instance=null;const n=new Wo([...t.providers,{provide:Fi,useValue:this},{provide:xl,useValue:this.componentFactoryResolver}],t.parent||Tl(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function om(e,t,n=null){return new O0({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}let sG=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=OT(0,n.type),i=r.length>0?om([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=P({token:e,providedIn:"environment",factory:()=>new e(x(dn))})}}return e})();function F0(e){e.getStandaloneInjector=t=>t.get(sG).getOrCreateStandaloneInjector(e)}function am(e,t,n){const r=It()+e,i=C();return i[r]===z?zn(i,r,n?t.call(n):t()):za(i,r)}function gs(e,t,n,r){return function H0(e,t,n,r,i,o){const s=t+n;return gt(e,s,i)?zn(e,s+1,o?r.call(o,i):r(i)):function tc(e,t){const n=e[t];return n===z?void 0:n}(e,s+1)}(C(),It(),e,t,n,r)}function cm(e,t,n,r,i,o,s,a){const c=It()+e,u=C(),l=function hn(e,t,n,r,i,o){const s=xi(e,t,n,r);return xi(e,t+2,i,o)||s}(u,c,n,r,i,o);return gt(u,c+4,s)||l?zn(u,c+5,a?t.call(a,n,r,i,o,s):t(n,r,i,o,s)):za(u,c+5)}function NG(e,t,n,r=!0){const i=t[M];if(function aj(e,t,n,r){const i=ot+r,o=n.length;r>0&&(n[i-1][In]=t),r<o-ot?(t[In]=n[i],OD(n,ot+r,t)):(n.push(t),t[In]=null),t[Ae]=n;const s=t[ga];null!==s&&n!==s&&function cj(e,t){const n=e[So];t[Ve]!==t[Ae][Ae][Ve]&&(e[Ob]=!0),null===n?e[So]=[t]:n.push(t)}(s,t);const a=t[Vn];null!==a&&a.insertView(e),t[G]|=128}(i,t,e,n),r){const o=qp(n,e),s=t[H],a=yl(s,e[Un]);null!==a&&function ij(e,t,n,r,i,o){r[xe]=i,r[ht]=t,ka(e,r,n,1,i,o)}(i,e[ht],s,t,a,o)}}let yr=(()=>{class e{static{this.__NG_ELEMENT_ID__=PG}}return e})();const kG=yr,xG=class extends kG{constructor(t,n,r){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,n){return this.createEmbeddedViewImpl(t,n)}createEmbeddedViewImpl(t,n,r){const i=function RG(e,t,n,r){const i=t.tView,a=Ll(e,i,n,4096&e[G]?4096:16,null,t,null,null,null,r?.injector??null,r?.hydrationInfo??null);a[ga]=e[t.index];const u=e[Vn];return null!==u&&(a[Vn]=u.createEmbeddedView(i)),Fg(i,a,n),a}(this._declarationLView,this._declarationTContainer,t,{injector:n,hydrationInfo:r});return new Ba(i)}};function PG(){return function ed(e,t){return 4&e.type?new xG(t,e,Qo(e,t)):null}(at(),C())}let Sn=(()=>{class e{static{this.__NG_ELEMENT_ID__=jG}}return e})();function jG(){return function eM(e,t){let n;const r=t[e.index];return wt(r)?n=r:(n=AS(r,t,null,e),t[e.index]=n,Vl(t,n)),tM(n,t,e,r),new Z0(n,e,t)}(at(),C())}const $G=Sn,Z0=class extends $G{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Qo(this._hostTNode,this._hostLView)}get injector(){return new Dt(this._hostTNode,this._hostLView)}get parentInjector(){const t=rl(this._hostTNode,this._hostLView);if(Tp(t)){const n=ba(t,this._hostLView),r=Ia(t);return new Dt(n[M].data[r+8],n)}return new Dt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=J0(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-ot}createEmbeddedView(t,n,r){let i,o;"number"==typeof r?i=r:null!=r&&(i=r.index,o=r.injector);const a=t.createEmbeddedViewImpl(n||{},o,null);return this.insertImpl(a,i,false),a}createComponent(t,n,r,i,o){const s=t&&!function Ta(e){return"function"==typeof e}(t);let a;if(s)a=n;else{const m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}const c=s?t:new Ha(te(t)),u=r||this.parentInjector;if(!o&&null==c.ngModule){const y=(s?u:this.parentInjector).get(dn,null);y&&(o=y)}te(c.componentType??{});const f=c.create(u,i,null,o);return this.insertImpl(f.hostView,a,false),f}insert(t,n){return this.insertImpl(t,n,!1)}insertImpl(t,n,r){const i=t._lView;if(function k2(e){return wt(e[Ae])}(i)){const c=this.indexOf(t);if(-1!==c)this.detach(c);else{const u=i[Ae],l=new Z0(u,u[ht],u[Ae]);l.detach(l.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;return NG(a,i,s,!r),t.attachToViewContainerRef(),OD(lm(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=J0(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=_l(this._lContainer,n);r&&(sl(lm(this._lContainer),n),Hp(r[M],r))}detach(t){const n=this._adjustIndex(t,-1),r=_l(this._lContainer,n);return r&&null!=sl(lm(this._lContainer),n)?new Ba(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function J0(e){return e[8]}function lm(e){return e[8]||(e[8]=[])}let tM=function nM(e,t,n,r){if(e[Un])return;let i;i=8&n.type?we(r):function BG(e,t){const n=e[H],r=n.createComment(""),i=jt(t,e);return Ni(n,yl(n,i),r,function hj(e,t){return e.nextSibling(t)}(n,i),!1),r}(t,n),e[Un]=i};const Em=new S("Application Initializer");let wm=(()=>{class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=k(Em,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const n=[];for(const i of this.appInits){const o=i();if(Ka(o))n.push(o);else if(lA(o)){const s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),SM=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();const vr=new S("LocaleId",{providedIn:"root",factory:()=>k(vr,J.Optional|J.SkipSelf)||function vW(){return typeof $localize<"u"&&$localize.locale||ps}()});let AM=(()=>{class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Yt(!1)}add(){this.hasPendingTasks.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();class wW{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let MM=(()=>{class e{compileModuleSync(n){return new im(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),o=mr(Xt(n).declarations).reduce((s,a)=>{const c=te(a);return c&&s.push(new Ha(c)),s},[]);return new wW(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const xM=new S(""),id=new S("");let Sm,Dm=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sm||(function zW(e){Sm=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ue.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:o,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}static{this.\u0275fac=function(r){return new(r||e)(x(ue),x(Tm),x(id))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})(),Tm=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Sm?.findTestabilityInTree(this,n,r)??null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})(),Jr=null;const PM=new S("AllowMultipleToken"),Am=new S("PlatformDestroyListeners"),Mm=new S("appBootstrapListener");class FM{constructor(t,n){this.name=t,this.token=n}}function VM(e,t,n=[]){const r=`Platform: ${t}`,i=new S(r);return(o=[])=>{let s=Rm();if(!s||s.injector.get(PM,!1)){const a=[...n,...o,{provide:i,useValue:!0}];e?e(a):function qW(e){if(Jr&&!Jr.get(PM,!1))throw new w(400,!1);(function OM(){!function _2(e){qb=e}(()=>{throw new w(600,!1)})})(),Jr=e;const t=e.get(jM);(function LM(e){e.get(jT,null)?.forEach(n=>n())})(e)}(function UM(e=[],t){return pt.create({name:t,providers:[{provide:og,useValue:"platform"},{provide:Am,useValue:new Set([()=>Jr=null])},...e]})}(a,r))}return function YW(e){const t=Rm();if(!t)throw new w(401,!1);return t}()}}function Rm(){return Jr?.get(jM)??null}let jM=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function QW(e="zone.js",t){return"noop"===e?new S$:"zone.js"===e?new ue(t):e}(r?.ngZone,function $M(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const o=function oG(e,t,n){return new rm(e,t,n)}(n.moduleType,this.injector,function WM(e){return[{provide:ue,useFactory:e},{provide:Fa,multi:!0,useFactory:()=>{const t=k(ZW,{optional:!0});return()=>t.initialize()}},{provide:GM,useFactory:XW},{provide:iS,useFactory:oS}]}(()=>i)),s=o.injector.get(gr,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{od(this._modules,o),a.unsubscribe()})}),function BM(e,t,n){try{const r=n();return Ka(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,i,()=>{const a=o.injector.get(wm);return a.runInitializers(),a.donePromise.then(()=>(function u0(e){an(e,"Expected localeId to be defined"),"string"==typeof e&&(c0=e.toLowerCase().replace(/_/g,"-"))}(o.injector.get(vr,ps)||ps),this._moduleDoBootstrap(o),o))})})}bootstrapModule(n,r=[]){const i=HM({},r);return function GW(e,t,n){const r=new im(n);return Promise.resolve(r)}(0,0,n).then(o=>this.bootstrapModuleFactory(o,i))}_moduleDoBootstrap(n){const r=n.injector.get(ys);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new w(-403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new w(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Am,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||e)(x(pt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"platform"})}}return e})();function HM(e,t){return Array.isArray(t)?t.reduce(HM,e):{...e,...t}}let ys=(()=>{class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=k(GM),this.zoneIsStable=k(iS),this.componentTypes=[],this.components=[],this.isStable=k(AM).hasPendingTasks.pipe(Fn(n=>n?$(!1):this.zoneIsStable),function AV(e,t=Ur){return e=e??MV,ze((n,r)=>{let i,o=!0;n.subscribe(Be(r,s=>{const a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}(),db()),this._injector=k(dn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof GT;if(!this._injector.get(wm).done)throw!i&&function wo(e){const t=te(e)||it(e)||Et(e);return null!==t&&t.standalone}(n),new w(405,!1);let s;s=i?n:this._injector.get(xl).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const a=function WW(e){return e.isBoundToModule}(s)?void 0:this._injector.get(Fi),u=s.create(pt.NULL,[],r||s.selector,a),l=u.location.nativeElement,d=u.injector.get(xM,null);return d?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),od(this.components,u),d?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new w(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this.internalErrorHandler(n)}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;od(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const r=this._injector.get(Mm,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>od(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new w(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function od(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const GM=new S("",{providedIn:"root",factory:()=>k(gr).handleError.bind(void 0)});function XW(){const e=k(ue),t=k(gr);return n=>e.runOutsideAngular(()=>t.handleError(n))}let ZW=(()=>{class e{constructor(){this.zone=k(ue),this.applicationRef=k(ys)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();let sd=(()=>{class e{static{this.__NG_ELEMENT_ID__=e3}}return e})();function e3(e){return function t3(e,t,n){if(Di(e)&&!n){const r=Zt(e.index,t);return new Ba(r,r)}return 47&e.type?new Ba(t[Ve],t):null}(at(),C(),16==(16&e))}class XM{constructor(){}supports(t){return Bl(t)}create(t){return new s3(t)}}const o3=(e,t)=>t;class s3{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||o3}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<JM(r,i,o)?n:r,a=JM(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)i++;else{o||(o=[]);const u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){const f=h<o.length?o[h]:o[h]=0,p=f+h;l<=p&&p<u&&(o[h]=f+1)}o[s.previousIndex]=l-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!Bl(t))throw new w(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let i,o,s,n=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)):(n=this._mismatch(n,o,s,a),r=!0),n=n._next}else i=0,function LB(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}(t,a=>{s=this._trackByFn(i,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,i),r=!0),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return null===t?o=this._itTail:(o=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new a3(n,r),o,i),t}_verifyReinsertion(t,n,r,i){let o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==o?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return null===i?this._removalsHead=o:i._nextRemoved=o,null===o?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=null===n?this._itHead:n._next;return t._next=i,t._prev=n,null===i?this._itTail=t:i._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new ZM),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ZM),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class a3{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class c3{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class ZM{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new c3,this.map.set(n,r)),r.add(t)}get(t,n){const i=this.map.get(t);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function JM(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class eR{constructor(){}supports(t){return t instanceof Map||Lg(t)}create(){return new u3}}class u3{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||Lg(t)))throw new w(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,i)=>{if(n&&n.key===i)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const o=this._getOrCreateRecordForKey(i,r);n=this._insertBeforeOrAppend(n,o)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const r=t._prev;return n._next=t,n._prev=r,t._prev=n,r&&(r._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const i=this._records.get(t);this._maybeAddToChanges(i,n);const o=i._prev,s=i._next;return o&&(o._next=s),s&&(s._prev=o),i._next=null,i._prev=null,i}const r=new l3(t);return this._records.set(t,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(r=>n(t[r],r))}}class l3{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function tR(){return new ud([new XM])}let ud=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:tR})}constructor(n){this.factories=n}static create(n,r){if(null!=r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||tR()),deps:[[e,new cl,new Tt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(null!=r)return r;throw new w(901,!1)}}return e})();function nR(){return new oc([new eR])}let oc=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:nR})}constructor(n){this.factories=n}static create(n,r){if(r){const i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:r=>e.create(n,r||nR()),deps:[[e,new cl,new Tt]]}}find(n){const r=this.factories.find(i=>i.supports(n));if(r)return r;throw new w(901,!1)}}return e})();const f3=VM(null,"core",[]);let p3=(()=>{class e{constructor(n){}static{this.\u0275fac=function(r){return new(r||e)(x(ys))}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();function vs(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}let Fm=null;function ei(){return Fm}class A3{}const fn=new S("DocumentToken");let Lm=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return k(R3)},providedIn:"platform"})}}return e})();const M3=new S("Location Initialized");let R3=(()=>{class e extends Lm{constructor(){super(),this._doc=k(fn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ei().getBaseHref(this._doc)}onPopState(n){const r=ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return new e},providedIn:"platform"})}}return e})();function Vm(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function dR(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function Cr(e){return e&&"?"!==e[0]?"?"+e:e}let Vi=(()=>{class e{historyGo(n){throw new Error("Not implemented")}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return k(fR)},providedIn:"root"})}}return e})();const hR=new S("appBaseHref");let fR=(()=>{class e extends Vi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(fn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Vm(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Cr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){const s=this.prepareExternalUrl(i+Cr(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){const s=this.prepareExternalUrl(i+Cr(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(x(Lm),x(hR,8))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),N3=(()=>{class e extends Vi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Vm(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Cr(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Cr(o));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||e)(x(Lm),x(hR,8))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})(),Um=(()=>{class e{constructor(n){this._subject=new Pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function P3(e){if(new RegExp("^(https?:)?//").test(e)){const[,n]=e.split(/\/\/[^\/]+/);return n}return e}(dR(pR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Cr(r))}normalize(n){return e.stripTrailingSlash(function x3(e,t){if(!e||!t.startsWith(e))return t;const n=t.substring(e.length);return""===n||["/",";","?","#"].includes(n[0])?n:t}(this._basePath,pR(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Cr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Cr}static{this.joinWithSlash=Vm}static{this.stripTrailingSlash=dR}static{this.\u0275fac=function(r){return new(r||e)(x(Vi))}}static{this.\u0275prov=P({token:e,factory:function(){return function k3(){return new Um(x(Vi))}()},providedIn:"root"})}}return e})();function pR(e){return e.replace(/\/index.html$/,"")}const Ym=/\s+/,IR=[];let bR=(()=>{class e{constructor(n,r,i,o){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=i,this._renderer=o,this.initialClasses=IR,this.stateMap=new Map}set klass(n){this.initialClasses=null!=n?n.trim().split(Ym):IR}set ngClass(n){this.rawClass="string"==typeof n?n.trim().split(Ym):n}ngDoCheck(){for(const r of this.initialClasses)this._updateState(r,!0);const n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(const r of n)this._updateState(r,!0);else if(null!=n)for(const r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){const i=this.stateMap.get(n);void 0!==i?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(const n of this.stateMap){const r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){(n=n.trim()).length>0&&n.split(Ym).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||e)(E(ud),E(oc),E(en),E(pr))}}static{this.\u0275dir=j({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0})}}return e})();class Cq{constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qm=(()=>{class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Cq(i.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===o?void 0:o);else if(null!==o){const a=r.get(o);r.move(a,s),TR(a,i)}});for(let i=0,o=r.length;i<o;i++){const a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{TR(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(E(Sn),E(yr),E(ud))}}static{this.\u0275dir=j({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return e})();function TR(e,t){e.context.$implicit=t.item}let Xm=(()=>{class e{constructor(n,r){this._viewContainer=n,this._context=new Eq,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){SR("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){SR("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||e)(E(Sn),E(yr))}}static{this.\u0275dir=j({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return e})();class Eq{constructor(){this.$implicit=null,this.ngIf=null}}function SR(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${Ge(t)}'.`)}let MR=(()=>{class e{constructor(n,r,i){this._ngEl=n,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,r){const[i,o]=n.split("."),s=-1===i.indexOf("-")?void 0:Kr.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,o?`${r}${o}`:r,s):this._renderer.removeStyle(this._ngEl.nativeElement,i,s)}_applyChanges(n){n.forEachRemovedItem(r=>this._setStyle(r.key,null)),n.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),n.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static{this.\u0275fac=function(r){return new(r||e)(E(en),E(oc),E(pr))}}static{this.\u0275dir=j({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}}return e})(),NR=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();function xR(e){return"server"===e}let Qq=(()=>{class e{static{this.\u0275prov=P({token:e,providedIn:"root",factory:()=>new Xq(x(fn),window)})}}return e})();class Xq{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function Zq(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const o=i.shadowRoot;if(o){const s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){this.supportsScrolling()&&(this.window.history.scrollRestoration=t)}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class w4 extends A3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class i_ extends w4{static makeCurrent(){!function S3(e){Fm||(Fm=e)}(new i_)}onAndCancel(t,n,r){return t.addEventListener(n,r),()=>{t.removeEventListener(n,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function I4(){return uc=uc||document.querySelector("base"),uc?uc.getAttribute("href"):null}();return null==n?null:function b4(e){Id=Id||document.createElement("a"),Id.setAttribute("href",e);const t=Id.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){uc=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function yq(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,o]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}(document.cookie,t)}}let Id,uc=null,T4=(()=>{class e{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const o_=new S("EventManagerPlugins");let VR=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new w(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||e)(x(o_),x(ue))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();class UR{constructor(t){this._doc=t}}const s_="ng-app-id";let jR=(()=>{class e{constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xR(o),this.resetHostNodes()}addStyles(n){for(const r of n)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(n){for(const r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(const r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(const r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){const r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){const n=this.doc.head?.querySelectorAll(`style[${s_}="${this.appId}"]`);if(n?.length){const r=new Map;return n.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){const i=this.styleRef;if(i.has(n)){const o=i.get(n);return o.usage+=r,o.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){const i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===n)return i.delete(r),o.removeAttribute(s_),o;{const s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(s_,this.appId),s}}addStyleToHost(n,r){const i=this.getStyleElement(n,r);n.appendChild(i);const o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){const n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||e)(x(fn),x(Sl),x($T,8),x(Qr))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const a_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},c_=/%COMP%/g,R4=new S("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function BR(e,t){return t.map(n=>n.replace(c_,e))}let HR=(()=>{class e{constructor(n,r,i,o,s,a,c,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=xR(a),this.defaultRenderer=new u_(n,s,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===En.ShadowDom&&(r={...r,encapsulation:En.Emulated});const i=this.getOrCreateRenderer(n,r);return i instanceof GR?i.applyToHost(n):i instanceof l_&&i.applyStyles(),i}getOrCreateRenderer(n,r){const i=this.rendererByCompId;let o=i.get(r.id);if(!o){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case En.Emulated:o=new GR(c,u,r,this.appId,l,s,a,d);break;case En.ShadowDom:return new P4(c,u,n,r,s,a,this.nonce,d);default:o=new l_(c,u,r,l,s,a,d)}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||e)(x(VR),x(jR),x(Sl),x(R4),x(fn),x(Qr),x(ue),x($T))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();class u_{constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(a_[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(zR(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(zR(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?this.doc.querySelector(t):t;if(!r)throw new w(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const o=a_[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=a_[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Kr.DashCase|Kr.Important)?t.style.setProperty(n,r,i&Kr.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Kr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){if("string"==typeof t&&!(t=ei().getGlobalEventTarget(this.doc,t)))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(r))}decoratePreventDefault(t){return n=>{if("__ngUnwrap__"===n)return t;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))&&n.preventDefault()}}}function zR(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class P4 extends u_{constructor(t,n,r,i,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=BR(i.id,i.styles);for(const l of u){const d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class l_ extends u_{constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?BR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class GR extends l_{constructor(t,n,r,i,o,s,a,c){const u=i+"-"+r.id;super(t,n,r,o,s,a,c,u),this.contentAttr=function N4(e){return"_ngcontent-%COMP%".replace(c_,e)}(u),this.hostAttr=function k4(e){return"_nghost-%COMP%".replace(c_,e)}(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}let O4=(()=>{class e extends UR{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||e)(x(fn))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const WR=["alt","control","meta","shift"],F4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},L4={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let V4=(()=>{class e extends UR{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const o=e.parseEventName(r),s=e.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ei().onAndCancel(n,o.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const o=e._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),WR.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,0!=r.length||0===o.length)return null;const c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=F4[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),WR.forEach(s=>{s!==i&&(0,L4[s])(n)&&(o+=s+".")}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return"esc"===n?"escape":n}static{this.\u0275fac=function(r){return new(r||e)(x(fn))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();const B4=VM(f3,"browser",[{provide:Qr,useValue:"browser"},{provide:jT,useValue:function U4(){i_.makeCurrent()},multi:!0},{provide:fn,useFactory:function $4(){return function Cj(e){Qp=e}(document),document},deps:[]}]),H4=new S(""),YR=[{provide:id,useClass:class D4{addToWindow(t){Ee.getAngularTestability=(r,i=!0)=>{const o=t.findTestabilityInTree(r,i);if(null==o)throw new w(5103,!1);return o},Ee.getAllAngularTestabilities=()=>t.getAllTestabilities(),Ee.getAllAngularRootElements=()=>t.getAllRootElements(),Ee.frameworkStabilizers||(Ee.frameworkStabilizers=[]),Ee.frameworkStabilizers.push(r=>{const i=Ee.getAllAngularTestabilities();let o=i.length,s=!1;const a=function(c){s=s||c,o--,0==o&&r(s)};i.forEach(c=>{c.whenStable(a)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?ei().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:xM,useClass:Dm,deps:[ue,Tm,id]},{provide:Dm,useClass:Dm,deps:[ue,Tm,id]}],QR=[{provide:og,useValue:"root"},{provide:gr,useFactory:function j4(){return new gr},deps:[]},{provide:o_,useClass:O4,multi:!0,deps:[fn,ue,Qr]},{provide:o_,useClass:V4,multi:!0,deps:[fn]},HR,jR,VR,{provide:qT,useExisting:HR},{provide:class Jq{},useClass:T4,deps:[]},[]];let z4=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:Sl,useValue:n.appId}]}}static{this.\u0275fac=function(r){return new(r||e)(x(H4,12))}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({providers:[...QR,...YR],imports:[NR,p3]})}}return e})(),XR=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||e)(x(fn))}}static{this.\u0275prov=P({token:e,factory:function(r){let i=null;return i=r?new r:function W4(){return new XR(x(fn))}(),i},providedIn:"root"})}}return e})();typeof window<"u"&&window;const{isArray:Z4}=Array,{getPrototypeOf:J4,prototype:e8,keys:t8}=Object;function tN(e){if(1===e.length){const t=e[0];if(Z4(t))return{args:t,keys:null};if(function n8(e){return e&&"object"==typeof e&&J4(e)===e8}(t)){const n=t8(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}const{isArray:r8}=Array;function nN(e){return ge(t=>function i8(e,t){return r8(t)?e(...t):e(t)}(e,t))}function rN(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function h_(...e){const t=ca(e),n=ub(e),{args:r,keys:i}=tN(e);if(0===r.length)return Xe([],t);const o=new Se(function o8(e,t,n=Ur){return r=>{iN(t,()=>{const{length:i}=e,o=new Array(i);let s=i,a=i;for(let c=0;c<i;c++)iN(t,()=>{const u=Xe(e[c],t);let l=!1;u.subscribe(Be(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,t,i?s=>rN(i,s):Ur));return n?o.pipe(nN(n)):o}function iN(e,t,n){e?ar(n,e,t):t()}const bd=sa(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function f_(...e){return function s8(){return Co(1)}()(Xe(e,ca(e)))}function oN(e){return new Se(t=>{Kt(e()).subscribe(t)})}function lc(e,t){const n=pe(e)?e:()=>e,r=i=>i.error(n());return new Se(t?i=>t.schedule(r,0,i):r)}function p_(){return ze((e,t)=>{let n=null;e._refCount++;const r=Be(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class sN extends Se{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,KI(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Ot;const n=this.getSubject();t.add(this.source.subscribe(Be(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Ot.EMPTY)}return t}refCount(){return p_()(this)}}function Es(e){return e<=0?()=>On:ze((t,n)=>{let r=0;t.subscribe(Be(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function ni(e,t){return ze((n,r)=>{let i=0;n.subscribe(Be(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Dd(e){return ze((t,n)=>{let r=!1;t.subscribe(Be(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function aN(e=c8){return ze((t,n)=>{let r=!1;t.subscribe(Be(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function c8(){return new bd}function Ui(e,t){const n=arguments.length>=2;return r=>r.pipe(e?ni((i,o)=>e(i,o,r)):Ur,Es(1),n?Dd(t):aN(()=>new bd))}function dc(e,t){return pe(t)?rt(e,t,1):rt(e,1)}function ut(e,t,n){const r=pe(e)||t||n?{next:e,error:t,complete:n}:e;return r?ze((i,o)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;i.subscribe(Be(o,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),o.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),o.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),o.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Ur}function ji(e){return ze((t,n)=>{let o,r=null,i=!1;r=t.subscribe(Be(n,void 0,void 0,s=>{o=Kt(e(s,ji(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function g_(e){return e<=0?()=>On:ze((t,n)=>{let r=[];t.subscribe(Be(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function m_(e){return ze((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const q="primary",hc=Symbol("RouteTitle");class p8{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ws(e){return new p8(e)}function g8(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let o=0;o<r.length;o++){const s=r[o],a=e[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Kn(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!cN(e[i],t[i]))return!1;return!0}function cN(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}return e===t}function uN(e){return e.length>0?e[e.length-1]:null}function ri(e){return function X4(e){return!!e&&(e instanceof Se||pe(e.lift)&&pe(e.subscribe))}(e)?e:Ka(e)?Xe(Promise.resolve(e)):$(e)}const _8={exact:function hN(e,t,n){if(!$i(e.segments,t.segments)||!Td(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!hN(e.children[r],t.children[r],n))return!1;return!0},subset:fN},lN={exact:function y8(e,t){return Kn(e,t)},subset:function v8(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>cN(e[n],t[n]))},ignored:()=>!0};function dN(e,t,n){return _8[n.paths](e.root,t.root,n.matrixParams)&&lN[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function fN(e,t,n){return pN(e,t,t.segments,n)}function pN(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!$i(i,n)||t.hasChildren()||!Td(i,n,r))}if(e.segments.length===n.length){if(!$i(e.segments,n)||!Td(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!fN(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!!($i(e.segments,i)&&Td(e.segments,i,r)&&e.children[q])&&pN(e.children[q],t,o,r)}}function Td(e,t,n){return t.every((r,i)=>lN[n](e[i].parameters,r.parameters))}class Is{constructor(t=new fe([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ws(this.queryParams)),this._queryParamMap}toString(){return w8.serialize(this)}}class fe{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sd(this)}}class fc{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ws(this.parameters)),this._parameterMap}toString(){return _N(this)}}function $i(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let pc=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return new __},providedIn:"root"})}}return e})();class __{parse(t){const n=new x8(t);return new Is(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${gc(t.root,!0)}`,r=function D8(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Ad(n)}=${Ad(i)}`).join("&"):`${Ad(n)}=${Ad(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function I8(e){return encodeURI(e)}(t.fragment)}`:""}`}}const w8=new __;function Sd(e){return e.segments.map(t=>_N(t)).join("/")}function gc(e,t){if(!e.hasChildren())return Sd(e);if(t){const n=e.children[q]?gc(e.children[q],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==q&&r.push(`${i}:${gc(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function E8(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===q&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==q&&(n=n.concat(t(i,r)))}),n}(e,(r,i)=>i===q?[gc(e.children[q],!1)]:[`${i}:${gc(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[q]?`${Sd(e)}/${n[0]}`:`${Sd(e)}/(${n.join("//")})`}}function gN(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ad(e){return gN(e).replace(/%3B/gi,";")}function y_(e){return gN(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Md(e){return decodeURIComponent(e)}function mN(e){return Md(e.replace(/\+/g,"%20"))}function _N(e){return`${y_(e.path)}${function b8(e){return Object.keys(e).map(t=>`;${y_(t)}=${y_(e[t])}`).join("")}(e.parameters)}`}const T8=/^[^\/()?;#]+/;function v_(e){const t=e.match(T8);return t?t[0]:""}const S8=/^[^\/()?;=#]+/,M8=/^[^=?&#]+/,N8=/^[^&#]+/;class x8{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[q]=new fe(t,n)),r}parseSegment(){const t=v_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new w(4009,!1);return this.capture(t),new fc(Md(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=function A8(e){const t=e.match(S8);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=v_(this.remaining);i&&(r=i,this.capture(r))}t[Md(n)]=Md(r)}parseQueryParam(t){const n=function R8(e){const t=e.match(M8);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function k8(e){const t=e.match(N8);return t?t[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const i=mN(n),o=mN(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=v_(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new w(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=q);const s=this.parseChildren();n[o]=1===Object.keys(s).length?s[q]:new fe([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new w(4011,!1)}}function yN(e){return e.segments.length>0?new fe([],{[q]:e}):e}function vN(e){const t={};for(const r of Object.keys(e.children)){const o=vN(e.children[r]);if(r===q&&0===o.segments.length&&o.hasChildren())for(const[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}return function P8(e){if(1===e.numberOfChildren&&e.children[q]){const t=e.children[q];return new fe(e.segments.concat(t.segments),t.children)}return e}(new fe(e.segments,t))}function Bi(e){return e instanceof Is}function CN(e){let t;const i=yN(function n(o){const s={};for(const c of o.children){const u=n(c);s[c.outlet]=u}const a=new fe(o.url,s);return o===e&&(t=a),a}(e.root));return t??i}function EN(e,t,n,r){let i=e;for(;i.parent;)i=i.parent;if(0===t.length)return C_(i,i,i,n,r);const o=function F8(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new IN(!0,0,e);let t=0,n=!1;const r=e.reduce((i,o,s)=>{if("object"==typeof o&&null!=o){if(o.outlets){const a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return"string"!=typeof o?[...i,o]:0===s?(o.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?t++:""!=a&&i.push(a))}),i):[...i,o]},[]);return new IN(n,t,r)}(t);if(o.toRoot())return C_(i,i,new fe([],{}),n,r);const s=function L8(e,t,n){if(e.isAbsolute)return new Nd(t,!0,0);if(!n)return new Nd(t,!1,NaN);if(null===n.parent)return new Nd(n,!0,0);const r=Rd(e.commands[0])?0:1;return function V8(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new w(4005,!1);i=r.segments.length}return new Nd(r,!1,i-o)}(n,n.segments.length-1+r,e.numberOfDoubleDots)}(o,i,e),a=s.processChildren?_c(s.segmentGroup,s.index,o.commands):bN(s.segmentGroup,s.index,o.commands);return C_(i,s.segmentGroup,a,n,r)}function Rd(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function mc(e){return"object"==typeof e&&null!=e&&e.outlets}function C_(e,t,n,r,i){let s,o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`}),s=e===t?n:wN(e,t,n);const a=yN(vN(s));return new Is(a,o,i)}function wN(e,t,n){const r={};return Object.entries(e.children).forEach(([i,o])=>{r[i]=o===t?n:wN(o,t,n)}),new fe(e.segments,r)}class IN{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Rd(r[0]))throw new w(4003,!1);const i=r.find(mc);if(i&&i!==uN(r))throw new w(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nd{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function bN(e,t,n){if(e||(e=new fe([],{})),0===e.segments.length&&e.hasChildren())return _c(e,t,n);const r=function j8(e,t,n){let r=0,i=t;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;const s=e.segments[i],a=n[r];if(mc(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!TN(c,u,s))return o;r+=2}else{if(!TN(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const o=new fe(e.segments.slice(0,r.pathIndex),{});return o.children[q]=new fe(e.segments.slice(r.pathIndex),e.children),_c(o,0,i)}return r.match&&0===i.length?new fe(e.segments,{}):r.match&&!e.hasChildren()?E_(e,t,n):r.match?_c(e,0,i):E_(e,t,n)}function _c(e,t,n){if(0===n.length)return new fe(e.segments,{});{const r=function U8(e){return mc(e[0])?e[0].outlets:{[q]:e}}(n),i={};if(Object.keys(r).some(o=>o!==q)&&e.children[q]&&1===e.numberOfChildren&&0===e.children[q].segments.length){const o=_c(e.children[q],t,n);return new fe(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=bN(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{void 0===r[o]&&(i[o]=s)}),new fe(e.segments,i)}}function E_(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const o=n[i];if(mc(o)){const c=$8(o.outlets);return new fe(r,c)}if(0===i&&Rd(n[0])){r.push(new fc(e.segments[t].path,DN(n[0]))),i++;continue}const s=mc(o)?o.outlets[q]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Rd(a)?(r.push(new fc(s,DN(a))),i+=2):(r.push(new fc(s,{})),i++)}return new fe(r,{})}function $8(e){const t={};return Object.entries(e).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(t[n]=E_(new fe([],{}),0,r))}),t}function DN(e){const t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function TN(e,t,n){return e==n.path&&Kn(t,n.parameters)}const yc="imperative";class Yn{constructor(t,n){this.id=t,this.url=n}}class kd extends Yn{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ii extends Yn{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class vc extends Yn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bs extends Yn{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=16}}class xd extends Yn{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class SN extends Yn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B8 extends Yn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H8 extends Yn{constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class z8 extends Yn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G8 extends Yn{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W8{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class q8{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class K8{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y8{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q8{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X8{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AN{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class w_{}class I_{constructor(t){this.url=t}}class Z8{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Cc,this.attachRef=null}}let Cc=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Z8,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();class MN{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=b_(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=b_(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=D_(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return D_(t,this._root).map(n=>n.value)}}function b_(e,t){if(e===t.value)return t;for(const n of t.children){const r=b_(e,n);if(r)return r}return null}function D_(e,t){if(e===t.value)return[t];for(const n of t.children){const r=D_(e,n);if(r.length)return r.unshift(t),r}return[]}class Ir{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function Ds(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class RN extends MN{constructor(t,n){super(t),this.snapshot=n,T_(this,t)}toString(){return this.snapshot.toString()}}function NN(e,t){const n=function J8(e,t){const s=new Pd([],{},{},"",{},q,t,null,{});return new xN("",new Ir(s,[]))}(0,t),r=new Yt([new fc("",{})]),i=new Yt({}),o=new Yt({}),s=new Yt({}),a=new Yt(""),c=new Ts(r,i,s,a,o,q,t,n.root);return c.snapshot=n.root,new RN(new Ir(c,[]),n)}class Ts{constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ge(u=>u[hc]))??$(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ge(t=>ws(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ge(t=>ws(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function kN(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function e6(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Pd{get title(){return this.data?.[hc]}constructor(t,n,r,i,o,s,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ws(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ws(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class xN extends MN{constructor(t,n){super(n),this.url=t,T_(this,n)}toString(){return PN(this._root)}}function T_(e,t){t.value._routerState=e,t.children.forEach(n=>T_(e,n))}function PN(e){const t=e.children.length>0?` { ${e.children.map(PN).join(", ")} } `:"";return`${e.value}${t}`}function S_(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Kn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Kn(t.params,n.params)||e.paramsSubject.next(n.params),function m8(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Kn(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.urlSubject.next(n.url),Kn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function A_(e,t){const n=Kn(e.params,t.params)&&function C8(e,t){return $i(e,t)&&e.every((n,r)=>Kn(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||A_(e.parent,t.parent))}let M_=(()=>{class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=q,this.activateEvents=new Pe,this.deactivateEvents=new Pe,this.attachEvents=new Pe,this.detachEvents=new Pe,this.parentContexts=k(Cc),this.location=k(Sn),this.changeDetector=k(sd),this.environmentInjector=k(dn),this.inputBinder=k(Od,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new w(4013,!1);this._activatedRoute=n;const i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new t6(n,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=j({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[un]})}}return e})();class t6{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Ts?this.route:t===Cc?this.childContexts:this.parent.get(t,n)}}const Od=new S("");let ON=(()=>{class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,i=h_([r.queryParams,r.params,r.data]).pipe(Fn(([o,s,a],c)=>(a={...o,...s,...a},0===c?$(a):Promise.resolve(a)))).subscribe(o=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function T3(e){const t=te(e);if(!t)return null;const n=new Ha(t);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,o[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,i)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();function Ec(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function r6(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Ec(e,r,i);return Ec(e,r)})}(e,t,n);return new Ir(r,i)}{if(e.shouldAttach(t.value)){const o=e.retrieve(t.value);if(null!==o){const s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Ec(e,a)),s}}const r=function i6(e){return new Ts(new Yt(e.url),new Yt(e.params),new Yt(e.queryParams),new Yt(e.fragment),new Yt(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(o=>Ec(e,o));return new Ir(r,i)}}const R_="ngNavigationCancelingError";function FN(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=Bi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=LN(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function LN(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[R_]=!0,r.cancellationCode=t,n&&(r.url=n),r}function VN(e){return e&&e[R_]}let UN=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Br({type:e,selectors:[["ng-component"]],standalone:!0,features:[F0],decls:1,vars:0,template:function(r,i){1&r&&K(0,"router-outlet")},dependencies:[M_],encapsulation:2})}}return e})();function N_(e){const t=e.children&&e.children.map(N_),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==q&&(n.component=UN),n}function Rn(e){return e.outlet||q}function wc(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class h6{constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),S_(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=Ds(n);t.children.forEach(o=>{const s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(i===o)if(i.component){const s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ds(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Ds(t);for(const s of Object.keys(o))this.deactivateRouteAndItsChildren(o[s],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){const i=Ds(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new X8(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Y8(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,o=n?n.value:null;if(S_(i),i===o)if(i.component){const s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),S_(a.route.value),this.activateChildRoutes(t,null,s.children)}else{const a=wc(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,r)}}class jN{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Fd{constructor(t,n){this.component=t,this.route=n}}function f6(e,t,n){const r=e._root;return Ic(r,t?t._root:null,n,[r.value])}function Ss(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function FV(e){return null!==Vu(e)}(e)?t.get(e):e:r}function Ic(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Ds(t);return e.children.forEach(s=>{(function g6(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const c=function m6(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!$i(e.url,t.url);case"pathParamsOrQueryParamsChange":return!$i(e.url,t.url)||!Kn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!A_(e,t)||!Kn(e.queryParams,t.queryParams);default:return!A_(e,t)}}(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new jN(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ic(e,t,o.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fd(a.outlet.component,s))}else s&&bc(t,a,i),i.canActivateChecks.push(new jN(r)),Ic(e,null,o.component?a?a.children:null:n,r,i)})(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bc(a,n.getContext(s),i)),i}function bc(e,t,n){const r=Ds(e),i=e.value;Object.entries(r).forEach(([o,s])=>{bc(s,i.component?t?t.children.getContext(o):null:t,n)}),n.canDeactivateChecks.push(new Fd(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Dc(e){return"function"==typeof e}function $N(e){return e instanceof bd||"EmptyError"===e?.name}const Ld=Symbol("INITIAL_VALUE");function As(){return Fn(e=>h_(e.map(t=>t.pipe(Es(1),function a8(...e){const t=ca(e);return ze((n,r)=>{(t?f_(e,n,t):f_(e,n)).subscribe(r)})}(Ld)))).pipe(ge(t=>{for(const n of t)if(!0!==n){if(n===Ld)return Ld;if(!1===n||n instanceof Is)return n}return!0}),ni(t=>t!==Ld),Es(1)))}function BN(e){return function PL(...e){return GI(e)}(ut(t=>{if(Bi(t))throw FN(0,t)}),ge(t=>!0===t))}class Vd{constructor(t){this.segmentGroup=t||null}}class HN{constructor(t){this.urlTree=t}}function Ms(e){return lc(new Vd(e))}function zN(e){return lc(new HN(e))}class F6{constructor(t,n){this.urlSerializer=t,this.urlTree=n}noMatchError(t){return new w(4002,!1)}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return $(r);if(i.numberOfChildren>1||!i.children[q])return lc(new w(4e3,!1));i=i.children[q]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const o=this.createSegmentGroup(t,n.root,r,i);return new Is(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Object.entries(t).forEach(([i,o])=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){const o=this.createSegments(t,n.segments,r,i);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new fe(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new w(4001,!1);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}const k_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function L6(e,t,n,r,i){const o=x_(e,t,n);return o.matched?(r=function s6(e,t){return e.providers&&!e._injector&&(e._injector=om(e.providers,t,`Route: ${e.path}`)),e._injector??t}(t,r),function x6(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?$(i.map(s=>{const a=Ss(s,e);return ri(function w6(e){return e&&Dc(e.canMatch)}(a)?a.canMatch(t,n):e.runInContext(()=>a(t,n)))})).pipe(As(),BN()):$(!0)}(r,t,n).pipe(ge(s=>!0===s?o:{...k_}))):$(o)}function x_(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...k_}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||g8)(n,e,t);if(!i)return{...k_};const o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});const s=i.consumed.length>0?{...o,...i.consumed[i.consumed.length-1].parameters}:o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function GN(e,t,n,r){return n.length>0&&function j6(e,t,n){return n.some(r=>Ud(e,t,r)&&Rn(r)!==q)}(e,n,r)?{segmentGroup:new fe(t,U6(r,new fe(n,e.children))),slicedSegments:[]}:0===n.length&&function $6(e,t,n){return n.some(r=>Ud(e,t,r))}(e,n,r)?{segmentGroup:new fe(e.segments,V6(e,0,n,r,e.children)),slicedSegments:n}:{segmentGroup:new fe(e.segments,e.children),slicedSegments:n}}function V6(e,t,n,r,i){const o={};for(const s of r)if(Ud(e,n,s)&&!i[Rn(s)]){const a=new fe([],{});o[Rn(s)]=a}return{...i,...o}}function U6(e,t){const n={};n[q]=t;for(const r of e)if(""===r.path&&Rn(r)!==q){const i=new fe([],{});n[Rn(r)]=i}return n}function Ud(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}class G6{constructor(t,n,r,i,o,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new F6(this.urlSerializer,this.urlTree)}noMatchError(t){return new w(4002,!1)}recognize(){const t=GN(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,q).pipe(ji(n=>{if(n instanceof HN)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof Vd?this.noMatchError(n):n}),ge(n=>{const r=new Pd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},q,this.rootComponentType,null,{}),i=new Ir(r,n),o=new xN("",i),s=function O8(e,t,n=null,r=null){return EN(CN(e),t,n,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t.root,q).pipe(ji(r=>{throw r instanceof Vd?this.noMatchError(r):r}))}inheritParamsAndData(t){const n=t.value,r=kN(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i,!0)}processChildren(t,n,r){const i=[];for(const o of Object.keys(r.children))"primary"===o?i.unshift(o):i.push(o);return Xe(i).pipe(dc(o=>{const s=r.children[o],a=function l6(e,t){const n=e.filter(r=>Rn(r)===t);return n.push(...e.filter(r=>Rn(r)!==t)),n}(n,o);return this.processSegmentGroup(t,a,s,o)}),function l8(e,t){return ze(function u8(e,t,n,r,i){return(o,s)=>{let a=n,c=t,u=0;o.subscribe(Be(s,l=>{const d=u++;c=a?e(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}(e,t,arguments.length>=2,!0))}((o,s)=>(o.push(...s),o)),Dd(null),function d8(e,t){const n=arguments.length>=2;return r=>r.pipe(e?ni((i,o)=>e(i,o,r)):Ur,g_(1),n?Dd(t):aN(()=>new bd))}(),rt(o=>{if(null===o)return Ms(r);const s=WN(o);return function W6(e){e.sort((t,n)=>t.value.outlet===q?-1:n.value.outlet===q?1:t.value.outlet.localeCompare(n.value.outlet))}(s),$(s)}))}processSegment(t,n,r,i,o,s){return Xe(n).pipe(dc(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,r,i,o,s).pipe(ji(c=>{if(c instanceof Vd)return $(null);throw c}))),Ui(a=>!!a),ji(a=>{if($N(a))return function H6(e,t,n){return 0===t.length&&!e.children[n]}(r,i,o)?$([]):Ms(r);throw a}))}processSegmentAgainstRoute(t,n,r,i,o,s,a){return function B6(e,t,n,r){return!!(Rn(e)===r||r!==q&&Ud(t,n,e))&&("**"===e.path||x_(t,e,n).matched)}(r,i,o,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,i,r,o,s,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s):Ms(i):Ms(i)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const o=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zN(o):this.applyRedirects.lineralizeSegments(r,o).pipe(rt(s=>{const a=new fe(s,{});return this.processSegment(t,n,a,s,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:l}=x_(n,i,o);if(!a)return Ms(n);const d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return i.redirectTo.startsWith("/")?zN(d):this.applyRedirects.lineralizeSegments(i,d).pipe(rt(h=>this.processSegment(t,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(t,n,r,i,o,s){let a;if("**"===r.path){const c=i.length>0?uN(i).parameters:{};a=$({snapshot:new Pd(i,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qN(r),Rn(r),r.component??r._loadedComponent??null,r,KN(r)),consumedSegments:[],remainingSegments:[]}),n.children={}}else a=L6(n,r,i,t).pipe(ge(({matched:c,consumedSegments:u,remainingSegments:l,parameters:d})=>c?{snapshot:new Pd(u,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,qN(r),Rn(r),r.component??r._loadedComponent??null,r,KN(r)),consumedSegments:u,remainingSegments:l}:null));return a.pipe(Fn(c=>null===c?Ms(n):this.getChildConfig(t=r._injector??t,r,i).pipe(Fn(({routes:u})=>{const l=r._loadedInjector??t,{snapshot:d,consumedSegments:h,remainingSegments:f}=c,{segmentGroup:p,slicedSegments:m}=GN(n,h,f,u);if(0===m.length&&p.hasChildren())return this.processChildren(l,u,p).pipe(ge(v=>null===v?null:[new Ir(d,v)]));if(0===u.length&&0===m.length)return $([new Ir(d,[])]);const y=Rn(r)===o;return this.processSegment(l,u,p,m,y?q:o,!0).pipe(ge(v=>[new Ir(d,v)]))}))))}getChildConfig(t,n,r){return n.children?$({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?$({routes:n._loadedRoutes,injector:n._loadedInjector}):function k6(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?$(!0):$(i.map(s=>{const a=Ss(s,e);return ri(function y6(e){return e&&Dc(e.canLoad)}(a)?a.canLoad(t,n):e.runInContext(()=>a(t,n)))})).pipe(As(),BN())}(t,n,r).pipe(rt(i=>i?this.configLoader.loadChildren(t,n).pipe(ut(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):function O6(e){return lc(LN(!1,3))}())):$({routes:[],injector:t})}}function q6(e){const t=e.value.routeConfig;return t&&""===t.path}function WN(e){const t=[],n=new Set;for(const r of e){if(!q6(r)){t.push(r);continue}const i=t.find(o=>r.value.routeConfig===o.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=WN(r.children);t.push(new Ir(r.value,i))}return t.filter(r=>!n.has(r))}function qN(e){return e.data||{}}function KN(e){return e.resolve||{}}function YN(e){return"string"==typeof e.title||null===e.title}function P_(e){return Fn(t=>{const n=e(t);return n?Xe(n).pipe(ge(()=>t)):$(t)})}const Rs=new S("ROUTES");let O_=(()=>{class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=k(MM)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return $(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ri(n.loadComponent()).pipe(ge(QN),ut(o=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=o}),m_(()=>{this.componentLoaders.delete(n)})),i=new sN(r,()=>new Cn).pipe(p_());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return $({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=function e5(e,t,n,r){return ri(e.loadChildren()).pipe(ge(QN),rt(i=>i instanceof P0||Array.isArray(i)?$(i):Xe(t.compileModuleAsync(i))),ge(i=>{r&&r(e);let o,s,a=!1;return Array.isArray(i)?(s=i,!0):(o=i.create(n).injector,s=o.get(Rs,[],{optional:!0,self:!0}).flat()),{routes:s.map(N_),injector:o}}))}(r,this.compiler,n,this.onLoadEndListener).pipe(m_(()=>{this.childrenLoaders.delete(r)})),s=new sN(o,()=>new Cn).pipe(p_());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function QN(e){return function t5(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}let jd=(()=>{class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Cn,this.transitionAbortSubject=new Cn,this.configLoader=k(O_),this.environmentInjector=k(dn),this.urlSerializer=k(pc),this.rootContexts=k(Cc),this.inputBindingEnabled=null!==k(Od,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>$(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new q8(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new W8(i))}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:r})}setupNavigations(n,r,i){return this.transitions=new Yt({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:n.urlHandlingStrategy.extract(r),urlAfterRedirects:n.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:yc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ni(o=>0!==o.id),ge(o=>({...o,extractedUrl:n.urlHandlingStrategy.extract(o.rawUrl)})),Fn(o=>{this.currentTransition=o;let s=!1,a=!1;return $(o).pipe(ut(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fn(c=>{const u=c.currentBrowserUrl.toString(),l=!n.navigated||c.extractedUrl.toString()!==u||u!==c.currentUrlTree.toString();if(!l&&"reload"!==(c.extras.onSameUrlNavigation??n.onSameUrlNavigation)){const h="";return this.events.next(new bs(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),On}if(n.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return $(c).pipe(Fn(h=>{const f=this.transitions?.getValue();return this.events.next(new kd(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?On:Promise.resolve(h)}),function K6(e,t,n,r,i,o){return rt(s=>function z6(e,t,n,r,i,o,s="emptyOnly"){return new G6(e,t,n,r,i,s,o).recognize()}(e,t,n,r,s.extractedUrl,i,o).pipe(ge(({state:a,tree:c})=>({...s,targetSnapshot:a,urlAfterRedirects:c}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),ut(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects};const f=new SN(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&n.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){const{id:h,extractedUrl:f,source:p,restoredState:m,extras:y}=c,v=new kd(h,this.urlSerializer.serialize(f),p,m);this.events.next(v);const _=NN(0,this.rootComponentType).snapshot;return this.currentTransition=o={...c,targetSnapshot:_,urlAfterRedirects:f,extras:{...y,skipLocationChange:!1,replaceUrl:!1}},$(o)}{const h="";return this.events.next(new bs(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),On}}),ut(c=>{const u=new B8(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ge(c=>(this.currentTransition=o={...c,guards:f6(c.targetSnapshot,c.currentSnapshot,this.rootContexts)},o)),function b6(e,t){return rt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?$({...n,guardsResult:!0}):function D6(e,t,n,r){return Xe(e).pipe(rt(i=>function N6(e,t,n,r,i){const o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return o&&0!==o.length?$(o.map(a=>{const c=wc(t)??i,u=Ss(a,c);return ri(function E6(e){return e&&Dc(e.canDeactivate)}(u)?u.canDeactivate(e,t,n,r):c.runInContext(()=>u(e,t,n,r))).pipe(Ui())})).pipe(As()):$(!0)}(i.component,i.route,n,t,r)),Ui(i=>!0!==i,!0))}(s,r,i,e).pipe(rt(a=>a&&function _6(e){return"boolean"==typeof e}(a)?function T6(e,t,n,r){return Xe(t).pipe(dc(i=>f_(function A6(e,t){return null!==e&&t&&t(new K8(e)),$(!0)}(i.route.parent,r),function S6(e,t){return null!==e&&t&&t(new Q8(e)),$(!0)}(i.route,r),function R6(e,t,n){const r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>function p6(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(s)).filter(s=>null!==s).map(s=>oN(()=>$(s.guards.map(c=>{const u=wc(s.node)??n,l=Ss(c,u);return ri(function C6(e){return e&&Dc(e.canActivateChild)}(l)?l.canActivateChild(r,e):u.runInContext(()=>l(r,e))).pipe(Ui())})).pipe(As())));return $(o).pipe(As())}(e,i.path,n),function M6(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return $(!0);const i=r.map(o=>oN(()=>{const s=wc(t)??n,a=Ss(o,s);return ri(function v6(e){return e&&Dc(e.canActivate)}(a)?a.canActivate(t,e):s.runInContext(()=>a(t,e))).pipe(Ui())}));return $(i).pipe(As())}(e,i.route,n))),Ui(i=>!0!==i,!0))}(r,o,e,t):$(a)),ge(a=>({...n,guardsResult:a})))})}(this.environmentInjector,c=>this.events.next(c)),ut(c=>{if(o.guardsResult=c.guardsResult,Bi(c.guardsResult))throw FN(0,c.guardsResult);const u=new H8(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),ni(c=>!!c.guardsResult||(this.cancelNavigationTransition(c,"",3),!1)),P_(c=>{if(c.guards.canActivateChecks.length)return $(c).pipe(ut(u=>{const l=new z8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Fn(u=>{let l=!1;return $(u).pipe(function Y6(e,t){return rt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return $(n);let o=0;return Xe(i).pipe(dc(s=>function Q6(e,t,n,r){const i=e.routeConfig,o=e._resolve;return void 0!==i?.title&&!YN(i)&&(o[hc]=i.title),function X6(e,t,n,r){const i=function Z6(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return $({});const o={};return Xe(i).pipe(rt(s=>function J6(e,t,n,r){const i=wc(t)??r,o=Ss(e,i);return ri(o.resolve?o.resolve(t,n):i.runInContext(()=>o(t,n)))}(e[s],t,n,r).pipe(Ui(),ut(a=>{o[s]=a}))),g_(1),function h8(e){return ge(()=>e)}(o),ji(s=>$N(s)?On:lc(s)))}(o,e,t,r).pipe(ge(s=>(e._resolvedData=s,e.data=kN(e,n).resolve,i&&YN(i)&&(e.data[hc]=i.title),null)))}(s.route,r,e,t)),ut(()=>o++),g_(1),rt(s=>o===i.length?$(n):On))})}(n.paramsInheritanceStrategy,this.environmentInjector),ut({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(u,"",2)}}))}),ut(u=>{const l=new G8(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}))}),P_(c=>{const u=l=>{const d=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(l.routeConfig).pipe(ut(h=>{l.component=h}),ge(()=>{})));for(const h of l.children)d.push(...u(h));return d};return h_(u(c.targetSnapshot.root)).pipe(Dd(),Es(1))}),P_(()=>this.afterPreactivation()),ge(c=>{const u=function n6(e,t,n){const r=Ec(e,t._root,n?n._root:void 0);return new RN(r,t)}(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o={...c,targetRouterState:u},o}),ut(()=>{this.events.next(new w_)}),((e,t,n,r)=>ge(i=>(new h6(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)))(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Es(1),ut({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ii(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),n.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),function f8(e){return ze((t,n)=>{Kt(e).subscribe(Be(n,()=>n.complete(),xf)),!n.closed&&t.subscribe(n)})}(this.transitionAbortSubject.pipe(ut(c=>{throw c}))),m_(()=>{s||a||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ji(c=>{if(a=!0,VN(c))this.events.next(new vc(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),function o6(e){return VN(e)&&Bi(e.url)}(c)?this.events.next(new I_(c.url)):o.resolve(!1);else{this.events.next(new xd(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(n.errorHandler(c))}catch(u){o.reject(u)}}return On}))}))}cancelNavigationTransition(n,r,i){const o=new vc(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function XN(e){return e!==yc}let ZN=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===q);return r}getResolvedTitleForRoute(n){return n.data[hc]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return k(n5)},providedIn:"root"})}}return e})(),n5=(()=>{class e extends ZN{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||e)(x(XR))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),r5=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return k(o5)},providedIn:"root"})}}return e})();class i5{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}let o5=(()=>{class e extends i5{static{this.\u0275fac=function(){let n;return function(i){return(n||(n=ct(e)))(i||e)}}()}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const $d=new S("",{providedIn:"root",factory:()=>({})});let s5=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:function(){return k(a5)},providedIn:"root"})}}return e})(),a5=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var Tc=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Tc||{});function JN(e,t){e.events.pipe(ni(n=>n instanceof ii||n instanceof vc||n instanceof xd||n instanceof bs),ge(n=>n instanceof ii||n instanceof bs?Tc.COMPLETE:n instanceof vc&&(0===n.code||1===n.code)?Tc.REDIRECTING:Tc.FAILED),ni(n=>n!==Tc.REDIRECTING),Es(1)).subscribe(()=>{t()})}function c5(e){throw e}function u5(e,t,n){return t.parse("/")}const l5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},d5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mt=(()=>{class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=k(SM),this.isNgZoneEnabled=!1,this._events=new Cn,this.options=k($d,{optional:!0})||{},this.pendingTasks=k(AM),this.errorHandler=this.options.errorHandler||c5,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||u5,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=k(s5),this.routeReuseStrategy=k(r5),this.titleStrategy=k(ZN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=k(Rs,{optional:!0})?.flat()??[],this.navigationTransitions=k(jd),this.urlSerializer=k(pc),this.location=k(Um),this.componentInputBindingEnabled=!!k(Od,{optional:!0}),this.eventsSubscription=new Ot,this.isNgZoneEnabled=k(ue)instanceof ue&&ue.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Is,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NN(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:i}=this.navigationTransitions;if(null===i)return void(ek(r)&&this._events.next(r));if(r instanceof kd)XN(i.source)&&(this.browserUrlTree=i.extractedUrl);else if(r instanceof bs)this.rawUrlTree=i.rawUrl;else if(r instanceof SN){if("eager"===this.urlUpdateStrategy){if(!i.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl);this.setBrowserUrl(o,i)}this.browserUrlTree=i.urlAfterRedirects}}else if(r instanceof w_)this.currentUrlTree=i.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(i.urlAfterRedirects,i.rawUrl),this.routerState=i.targetRouterState,"deferred"===this.urlUpdateStrategy&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i),this.browserUrlTree=i.urlAfterRedirects);else if(r instanceof vc)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(i);else if(r instanceof I_){const o=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),s={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||XN(i.source)};this.scheduleNavigation(o,yc,null,s,{resolve:i.resolve,reject:i.reject,promise:i.promise})}r instanceof xd&&this.restoreHistory(i,!0),r instanceof ii&&(this.navigated=!0),ek(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const n=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),yc,n)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(n.url,r,n.state)},0)}))}navigateToSyncWithBrowser(n,r,i){const o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){const c={...i};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(o.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(N_),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let d,l=null;switch(a){case"merge":l={...this.currentUrlTree.queryParams,...o};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}null!==l&&(l=this.removeEmptyProps(l));try{d=CN(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||!n[0].startsWith("/"))&&(n=[]),d=this.currentUrlTree.root}return EN(d,n,l,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Bi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,yc,null,r)}navigate(n,r={skipLocationChange:!1}){return function h5(e){for(let t=0;t<e.length;t++)if(null==e[t])throw new w(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...l5}:!1===r?{...d5}:r,Bi(n))return dN(this.currentUrlTree,n,i);const o=this.parseUrl(n);return dN(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const o=n[i];return null!=o&&(r[i]=o),r},{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,h)=>{a=d,c=h});const l=this.pendingTasks.add();return JN(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const s={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",s)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(i,"",o)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function ek(e){return!(e instanceof w_||e instanceof I_)}let Bd=(()=>{class e{constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new Cn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c,this.isAnchorElement?this.subscription=n.events.subscribe(u=>{u instanceof ii&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(n,r,i,o,s){return!!(null===this.urlTree||this.isAnchorElement&&(0!==n||r||i||o||s||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const n=null===this.href?null:function NT(e,t,n){return function Bj(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?RT:MT}(t,n)(e)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(n,r){const i=this.renderer,o=this.el.nativeElement;null!==r?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||e)(E(mt),E(Ts),function ol(e){return function cU(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const o=n[i];if(Ib(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}}return null}(at(),e)}("tabindex"),E(pr),E(en),E(Vi))}}static{this.\u0275dir=j({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){1&r&&Ue("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Gn("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",vs],skipLocationChange:["skipLocationChange","skipLocationChange",vs],replaceUrl:["replaceUrl","replaceUrl",vs],routerLink:"routerLink"},standalone:!0,features:[WS,un]})}}return e})();class tk{}let g5=(()=>{class e{constructor(n,r,i,o,s){this.router=n,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ni(n=>n instanceof ii),dc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const o of r){o.providers&&!o._injector&&(o._injector=om(o.providers,n,`Route: ${o.path}`));const s=o._injector??n,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Xe(i).pipe(Co())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):$(null);const o=i.pipe(rt(s=>null===s?$(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?Xe([o,this.loader.loadComponent(r)]).pipe(Co()):o})}static{this.\u0275fac=function(r){return new(r||e)(x(mt),x(MM),x(dn),x(tk),x(O_))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const F_=new S("");let nk=(()=>{class e{constructor(n,r,i,o,s={}){this.urlSerializer=n,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration=s.scrollPositionRestoration||"disabled",s.anchorScrolling=s.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof kd?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ii?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof bs&&0===n.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof AN&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new AN(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){!function vS(){throw new Error("invalid")}()}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})();function br(e,t){return{\u0275kind:e,\u0275providers:t}}function ik(){const e=k(pt);return t=>{const n=e.get(ys);if(t!==n.components[0])return;const r=e.get(mt),i=e.get(ok);1===e.get(L_)&&r.initialNavigation(),e.get(sk,null,J.Optional)?.setUpPreloading(),e.get(F_,null,J.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const ok=new S("",{factory:()=>new Cn}),L_=new S("",{providedIn:"root",factory:()=>1}),sk=new S("");function v5(e){return br(0,[{provide:sk,useExisting:g5},{provide:tk,useExisting:e}])}const ak=new S("ROUTER_FORROOT_GUARD"),E5=[Um,{provide:pc,useClass:__},mt,Cc,{provide:Ts,useFactory:function rk(e){return e.routerState.root},deps:[mt]},O_,[]];function w5(){return new FM("Router",mt)}let ck=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[E5,[],{provide:Rs,multi:!0,useValue:n},{provide:ak,useFactory:T5,deps:[[mt,new Tt,new cl]]},{provide:$d,useValue:r||{}},r?.useHash?{provide:Vi,useClass:N3}:{provide:Vi,useClass:fR},{provide:F_,useFactory:()=>{const e=k(Qq),t=k(ue),n=k($d),r=k(jd),i=k(pc);return n.scrollOffset&&e.setOffset(n.scrollOffset),new nk(i,r,e,t,n)}},r?.preloadingStrategy?v5(r.preloadingStrategy).\u0275providers:[],{provide:FM,multi:!0,useFactory:w5},r?.initialNavigation?S5(r):[],r?.bindToComponentInputs?br(8,[ON,{provide:Od,useExisting:ON}]).\u0275providers:[],[{provide:uk,useFactory:ik},{provide:Mm,multi:!0,useExisting:uk}]]}}static forChild(n){return{ngModule:e,providers:[{provide:Rs,multi:!0,useValue:n}]}}static{this.\u0275fac=function(r){return new(r||e)(x(ak,8))}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();function T5(e){return"guarded"}function S5(e){return["disabled"===e.initialNavigation?br(3,[{provide:Em,multi:!0,useFactory:()=>{const t=k(mt);return()=>{t.setUpLocationChangeListener()}}},{provide:L_,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?br(2,[{provide:L_,useValue:0},{provide:Em,multi:!0,deps:[pt],useFactory:t=>{const n=t.get(M3,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const i=t.get(mt),o=t.get(ok);JN(i,()=>{r(!0)}),t.get(jd).afterPreactivation=()=>(r(!0),o.closed?$(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const uk=new S("");function lk(e,t,n,r,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function g(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function s(c){lk(o,r,i,s,a,"next",c)}function a(c){lk(o,r,i,s,a,"throw",c)}s(void 0)})}}let dk=(()=>{class e{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||e)(E(pr),E(en))}}static{this.\u0275dir=j({type:e})}}return e})(),Hi=(()=>{class e extends dk{static{this.\u0275fac=function(){let n;return function(i){return(n||(n=ct(e)))(i||e)}}()}static{this.\u0275dir=j({type:e,features:[he]})}}return e})();const Qn=new S("NgValueAccessor"),N5={provide:Qn,useExisting:Ce(()=>Sc),multi:!0},x5=new S("CompositionEventMode");let Sc=(()=>{class e extends dk{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function k5(){const e=ei()?ei().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||e)(E(pr),E(en),E(x5,8))}}static{this.\u0275dir=j({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){1&r&&Ue("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Me([N5]),he]})}}return e})();function oi(e){return null==e||("string"==typeof e||Array.isArray(e))&&0===e.length}function fk(e){return null!=e&&"number"==typeof e.length}const _t=new S("NgValidators"),si=new S("NgAsyncValidators"),P5=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Hd{static min(t){return function pk(e){return t=>{if(oi(t.value)||oi(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(t)}static max(t){return function gk(e){return t=>{if(oi(t.value)||oi(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(t)}static required(t){return function mk(e){return oi(e.value)?{required:!0}:null}(t)}static requiredTrue(t){return function _k(e){return!0===e.value?null:{required:!0}}(t)}static email(t){return function yk(e){return oi(e.value)||P5.test(e.value)?null:{email:!0}}(t)}static minLength(t){return function vk(e){return t=>oi(t.value)||!fk(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function Ck(e){return t=>fk(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(t)}static pattern(t){return function Ek(e){if(!e)return zd;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),r=>{if(oi(r.value))return null;const i=r.value;return t.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return Sk(t)}static composeAsync(t){return Ak(t)}}function zd(e){return null}function wk(e){return null!=e}function Ik(e){return Ka(e)?Xe(e):e}function bk(e){let t={};return e.forEach(n=>{t=null!=n?{...t,...n}:t}),0===Object.keys(t).length?null:t}function Dk(e,t){return t.map(n=>n(e))}function Tk(e){return e.map(t=>function O5(e){return!e.validate}(t)?t:n=>t.validate(n))}function Sk(e){if(!e)return null;const t=e.filter(wk);return 0==t.length?null:function(n){return bk(Dk(n,t))}}function V_(e){return null!=e?Sk(Tk(e)):null}function Ak(e){if(!e)return null;const t=e.filter(wk);return 0==t.length?null:function(n){return function M5(...e){const t=ub(e),{args:n,keys:r}=tN(e),i=new Se(o=>{const{length:s}=n;if(!s)return void o.complete();const a=new Array(s);let c=s,u=s;for(let l=0;l<s;l++){let d=!1;Kt(n[l]).subscribe(Be(o,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?rN(r,a):a),o.complete())}))}});return t?i.pipe(nN(t)):i}(Dk(n,t).map(Ik)).pipe(ge(bk))}}function U_(e){return null!=e?Ak(Tk(e)):null}function Mk(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function Rk(e){return e._rawValidators}function Nk(e){return e._rawAsyncValidators}function j_(e){return e?Array.isArray(e)?e:[e]:[]}function Gd(e,t){return Array.isArray(e)?e.includes(t):e===t}function kk(e,t){const n=j_(t);return j_(e).forEach(i=>{Gd(n,i)||n.push(i)}),n}function xk(e,t){return j_(t).filter(n=>!Gd(e,n))}class Pk{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=V_(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=U_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return!!this.control&&this.control.hasError(t,n)}getError(t,n){return this.control?this.control.getError(t,n):null}}class Rt extends Pk{get formDirective(){return null}get path(){return null}}class ai extends Pk{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ok{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let $_=(()=>{class e extends Ok{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(E(ai,2))}}static{this.\u0275dir=j({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){2&r&&Kl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[he]})}}return e})(),Fk=(()=>{class e extends Ok{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||e)(E(Rt,10))}}static{this.\u0275dir=j({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){2&r&&Kl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[he]})}}return e})();const Ac="VALID",qd="INVALID",Ns="PENDING",Mc="DISABLED";function z_(e){return(Kd(e)?e.validators:e)||null}function G_(e,t){return(Kd(t)?t.asyncValidators:e)||null}function Kd(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}function Vk(e,t,n){const r=e.controls;if(!(t?Object.keys(r):r).length)throw new w(1e3,"");if(!r[n])throw new w(1001,"")}function Uk(e,t,n){e._forEachChild((r,i)=>{if(void 0===n[i])throw new w(1002,"")})}class Yd{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ac}get invalid(){return this.status===qd}get pending(){return this.status==Ns}get disabled(){return this.status===Mc}get enabled(){return this.status!==Mc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(kk(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(kk(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(xk(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(xk(t,this._rawAsyncValidators))}hasValidator(t){return Gd(this._rawValidators,t)}hasAsyncValidator(t){return Gd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Ns,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Mc,this.errors=null,this._forEachChild(r=>{r.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Ac,this._forEachChild(r=>{r.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:n}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ac||this.status===Ns)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Mc:Ac}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Ns,this._hasOwnPendingAsyncValidator=!0;const n=Ik(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){let n=t;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Pe,this.statusChanges=new Pe}_calculateStatus(){return this._allControlsDisabled()?Mc:this.errors?qd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ns)?Ns:this._anyControlsHaveStatus(qd)?qd:Ac}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Kd(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function U5(e){return Array.isArray(e)?V_(e):e||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function j5(e){return Array.isArray(e)?U_(e):e||null}(this._rawAsyncValidators)}}class Rc extends Yd{constructor(t,n,r){super(z_(n),G_(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){Uk(this,0,t),Object.keys(t).forEach(r=>{Vk(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(r=>{const i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class jk extends Rc{}const zi=new S("CallSetDisabledState",{providedIn:"root",factory:()=>Nc}),Nc="always";function Qd(e,t){return[...t.path,e]}function kc(e,t,n=Nc){W_(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||"always"===n)&&t.valueAccessor.setDisabledState?.(e.disabled),function B5(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&$k(e,t)})}(e,t),function z5(e,t){const n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function H5(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&$k(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function $5(e,t){if(t.valueAccessor.setDisabledState){const n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function Xd(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),Jd(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function Zd(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function W_(e,t){const n=Rk(e);null!==t.validator?e.setValidators(Mk(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=Nk(e);null!==t.asyncValidator?e.setAsyncValidators(Mk(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();Zd(t._rawValidators,i),Zd(t._rawAsyncValidators,i)}function Jd(e,t){let n=!1;if(null!==e){if(null!==t.validator){const i=Rk(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.validator);o.length!==i.length&&(n=!0,e.setValidators(o))}}if(null!==t.asyncValidator){const i=Nk(e);if(Array.isArray(i)&&i.length>0){const o=i.filter(s=>s!==t.asyncValidator);o.length!==i.length&&(n=!0,e.setAsyncValidators(o))}}}const r=()=>{};return Zd(t._rawValidators,r),Zd(t._rawAsyncValidators,r),n}function $k(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function K_(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function Y_(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(o=>{o.constructor===Sc?n=o:function q5(e){return Object.getPrototypeOf(e.constructor)===Hi}(o)?r=o:i=o}),i||r||n||null}function zk(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}function Gk(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}const Pc=class extends Yd{constructor(t=null,n,r){super(z_(n),G_(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Kd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=Gk(t)?t.value:t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){zk(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){zk(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){Gk(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},Z5={provide:ai,useExisting:Ce(()=>X_)},Kk=(()=>Promise.resolve())();let X_=(()=>{class e extends ai{constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new Pc,this._registered=!1,this.name="",this.update=new Pe,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Y_(0,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),K_(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){Kk.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,i=0!==r&&vs(r);Kk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?Qd(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||e)(E(Rt,9),E(_t,10),E(si,10),E(Qn,10),E(sd,8),E(zi,8))}}static{this.\u0275dir=j({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Me([Z5]),he,un]})}}return e})(),Yk=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275dir=j({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return e})(),Xk=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({})}}return e})();const Z_=new S("NgModelWithFormControlWarning"),i7={provide:Rt,useExisting:Ce(()=>eh)};let eh=(()=>{class e extends Rt{constructor(n,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Pe,this._setValidators(n),this._setAsyncValidators(r)}ngOnChanges(n){this._checkFormPresent(),n.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Jd(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(n){const r=this.form.get(n.path);return kc(r,n,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(n),r}getControl(n){return this.form.get(n.path)}removeControl(n){Xd(n.control||null,n,!1),function K5(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}(this.directives,n)}addFormGroup(n){this._setUpFormContainer(n)}removeFormGroup(n){this._cleanUpFormContainer(n)}getFormGroup(n){return this.form.get(n.path)}addFormArray(n){this._setUpFormContainer(n)}removeFormArray(n){this._cleanUpFormContainer(n)}getFormArray(n){return this.form.get(n.path)}updateModel(n,r){this.form.get(n.path).setValue(r)}onSubmit(n){return this.submitted=!0,function Hk(e,t){e._syncPendingControls(),t.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(n),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submitted=!1}_updateDomValue(){this.directives.forEach(n=>{const r=n.control,i=this.form.get(n.path);r!==i&&(Xd(r||null,n),(e=>e instanceof Pc)(i)&&(kc(i,n,this.callSetDisabledState),n.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(n){const r=this.form.get(n.path);(function Bk(e,t){W_(e,t)})(r,n),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(n){if(this.form){const r=this.form.get(n.path);r&&function G5(e,t){return Jd(e,t)}(r,n)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){W_(this.form,this),this._oldForm&&Jd(this._oldForm,this)}_checkFormPresent(){}static{this.\u0275fac=function(r){return new(r||e)(E(_t,10),E(si,10),E(zi,8))}}static{this.\u0275dir=j({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,i){1&r&&Ue("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Me([i7]),he,un]})}}return e})();const a7={provide:ai,useExisting:Ce(()=>ty)};let ty=(()=>{class e extends ai{set isDisabled(n){}static{this._ngModelWarningSentOnce=!1}constructor(n,r,i,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Pe,this._ngModelWarningSent=!1,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Y_(0,o)}ngOnChanges(n){this._added||this._setUpControl(),K_(n,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}get path(){return Qd(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(r){return new(r||e)(E(Rt,13),E(_t,10),E(si,10),E(Qn,10),E(Z_,8))}}static{this.\u0275dir=j({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Me([a7]),he,un]})}}return e})(),fx=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[Xk]})}}return e})();class px extends Yd{constructor(t,n,r){super(z_(n),G_(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,r={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,r={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){Uk(this,0,t),t.forEach((r,i)=>{Vk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((r,i)=>{r.reset(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,r)=>!!r._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,r)=>{t(n,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function gx(e){return!!e&&(void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn)}let mx=(()=>{class e{constructor(){this.useNonNullable=!1}get nonNullable(){const n=new e;return n.useNonNullable=!0,n}group(n,r=null){const i=this._reduceControls(n);let o={};return gx(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Rc(i,o)}record(n,r=null){const i=this._reduceControls(n);return new jk(i,r)}control(n,r,i){let o={};return this.useNonNullable?(gx(r)?o=r:(o.validators=r,o.asyncValidators=i),new Pc(n,{...o,nonNullable:!0})):new Pc(n,r,i)}array(n,r,i){const o=n.map(s=>this._createControl(s));return new px(o,r,i)}_reduceControls(n){const r={};return Object.keys(n).forEach(i=>{r[i]=this._createControl(n[i])}),r}_createControl(n){return n instanceof Pc||n instanceof Yd?n:Array.isArray(n)?this.control(n[0],n.length>1?n[1]:null,n.length>2?n[2]:null):this.control(n)}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),w7=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:zi,useValue:n.callSetDisabledState??Nc}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[fx]})}}return e})(),I7=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:Z_,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:zi,useValue:n.callSetDisabledState??Nc}]}}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[fx]})}}return e})();const I=function(e,t){if(!e)throw ks(t)},ks=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},_x=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},th={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const o=e[i],s=i+1<e.length,a=s?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0;let h=(15&a)<<2|u>>6,f=63&u;c||(f=64,s||(h=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[h],n[f])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(_x(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const c=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(1023&c))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==d)throw Error();r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==d&&r.push(u<<6&192|d))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},yx=function(e){const t=_x(e);return th.encodeByteArray(t,!0)},nh=function(e){return yx(e).replace(/\./g,"")},sy=function(e){try{return th.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function D7(e){return vx(void 0,e)}function vx(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!T7(n)||(e[n]=vx(e[n],t[n]));return e}function T7(e){return"__proto__"!==e}class xs{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),"function"==typeof t&&(this.promise.catch(()=>{}),1===t.length?t(n):t(n,r))}}}function Ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ay(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ze())}function cy(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function Cx(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Wi(){return"object"==typeof indexedDB}function Oc(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;t((null===(o=i.error)||void 0===o?void 0:o.message)||"")}}catch(n){t(n)}})}function uy(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Tr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xn.prototype.create)}}class Xn{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,o=this.errors[t],s=o?function R7(e,t){return e.replace(N7,(n,r)=>{const i=t[r];return null!=i?String(i):`<${r}?>`})}(o,r):"Error";return new Tr(i,`${this.serviceName}: ${s} (${i}).`,r)}}const N7=/\{\$([^}]+)}/g;function Fc(e){return JSON.parse(e)}function Ke(e){return JSON.stringify(e)}const rh=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Fc(sy(o[0])||""),n=Fc(sy(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}};function Zn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Ps(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function ly(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ih(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function oh(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const o=e[i],s=t[i];if(Ex(o)&&Ex(s)){if(!oh(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ex(e){return null!==e&&"object"==typeof e}function Os(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Lc(e){const t={};return e.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");t[decodeURIComponent(i)]=decodeURIComponent(o)}}),t}function Vc(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class P7{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,n){n||(n=0);const r=this.W_;if("string"==typeof t)for(let d=0;d<16;d++)r[d]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(let d=16;d<80;d++){const h=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=4294967295&(h<<1|h>>>31)}let u,l,i=this.chain_[0],o=this.chain_[1],s=this.chain_[2],a=this.chain_[3],c=this.chain_[4];for(let d=0;d<80;d++){d<40?d<20?(u=a^o&(s^a),l=1518500249):(u=o^s^a,l=1859775393):d<60?(u=o&s|a&(o|s),l=2400959708):(u=o^s^a,l=3395469782);const h=(i<<5|i>>>27)+u+c+l+r[d]&4294967295;c=a,a=s,s=4294967295&(o<<30|o>>>2),o=i,i=h}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+s&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,n){if(null==t)return;void 0===n&&(n=t.length);const r=n-this.blockSize;let i=0;const o=this.buf_;let s=this.inbuf_;for(;i<n;){if(0===s)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if("string"==typeof t){for(;i<n;)if(o[s]=t.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}else for(;i<n;)if(o[s]=t[i],++s,++i,s===this.blockSize){this.compress_(o),s=0;break}}this.inbuf_=s,this.total_+=n}digest(){const t=[];let n=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&n,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let o=24;o>=0;o-=8)t[r]=this.chain_[i]>>o&255,++r;return t}}class F7{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(void 0===t&&void 0===n&&void 0===r)throw new Error("Missing Observer.");i=function L7(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(t,["next","error","complete"])?t:{next:t,error:n,complete:r},void 0===i.next&&(i.next=dy),void 0===i.error&&(i.error=dy),void 0===i.complete&&(i.complete=dy);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(t){void 0===this.observers||void 0===this.observers[t]||(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dy(){}function Fs(e,t){return`${e} failed: ${t} argument `}const sh=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},U7=1e3,j7=2,$7=144e5,B7=.5;function hy(e,t=U7,n=j7){const r=t*Math.pow(n,e),i=Math.round(B7*r*(Math.random()-.5)*2);return Math.min($7,r+i)}function Nt(e){return e&&e._delegate?e._delegate:e}class yt{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}const qi="[DEFAULT]";class z7{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new xs;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t?.identifier),i=null!==(n=t?.optional)&&void 0!==n&&n;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(function W7(e){return"EAGER"===e.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=qi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){var t=this;return g(function*(){const n=Array.from(t.instances.values());yield Promise.all([...n.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...n.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(t=qi){return this.instances.has(t)}getOptions(t=qi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(o)&&s.resolve(i);return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),o=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&t(s,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t,e===qi?void 0:e),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var e;return r||null}normalizeInstanceIdentifier(t=qi){return this.component?this.component.multipleInstances?t:qi:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class q7{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new z7(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}const fy=[];var _e=function(e){return e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",e}(_e||{});const wx={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},K7=_e.INFO,Y7={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},Q7=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Y7[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class Ls{constructor(t){this.name=t,this._logLevel=K7,this._logHandler=Q7,this._userLogHandler=null,fy.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _e))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"==typeof t?wx[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...t),this._logHandler(this,_e.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...t),this._logHandler(this,_e.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...t),this._logHandler(this,_e.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...t),this._logHandler(this,_e.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...t),this._logHandler(this,_e.ERROR,...t)}}const X7=(e,t)=>t.some(n=>e instanceof n);let Ix,bx;const Dx=new WeakMap,py=new WeakMap,Tx=new WeakMap,gy=new WeakMap,my=new WeakMap;let _y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return py.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Tx.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function i9(e){return"function"==typeof e?function r9(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function J7(){return bx||(bx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(e)?function(...t){return e.apply(yy(this),t),Sr(Dx.get(this))}:function(...t){return Sr(e.apply(yy(this),t))}:function(t,...n){const r=e.call(yy(this),t,...n);return Tx.set(r,t.sort?t.sort():[t]),Sr(r)}}(e):(e instanceof IDBTransaction&&function t9(e){if(py.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});py.set(e,t)}(e),X7(e,function Z7(){return Ix||(Ix=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(e,_y):e)}function Sr(e){if(e instanceof IDBRequest)return function e9(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{n(Sr(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(n=>{n instanceof IDBCursor&&Dx.set(n,e)}).catch(()=>{}),my.set(t,e),t}(e);if(gy.has(e))return gy.get(e);const t=i9(e);return t!==e&&(gy.set(e,t),my.set(t,e)),t}const yy=e=>my.get(e);function ah(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(e,t),a=Sr(s);return r&&s.addEventListener("upgradeneeded",c=>{r(Sr(s.result),c.oldVersion,c.newVersion,Sr(s.transaction))}),n&&s.addEventListener("blocked",()=>n()),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",()=>i())}).catch(()=>{}),a}function vy(e,{blocked:t}={}){const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",()=>t()),Sr(n).then(()=>{})}const o9=["get","getKey","getAll","getAllKeys","count"],s9=["put","add","delete","clear"],Cy=new Map;function Sx(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Cy.get(t))return Cy.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=s9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!o9.includes(n))return;const o=function(){var s=g(function*(a,...c){const u=this.transaction(a,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(c.shift())),(yield Promise.all([l[n](...c),i&&u.done]))[0]});return function(c){return s.apply(this,arguments)}}();return Cy.set(t,o),o}!function n9(e){_y=e(_y)}(e=>({...e,get:(t,n,r)=>Sx(t,n)||e.get(t,n,r),has:(t,n)=>!!Sx(t,n)||e.has(t,n)}));class a9{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(function c9(e){const t=e.getComponent();return"VERSION"===t?.type}(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}return null}).filter(n=>n).join(" ")}}const Ey="@firebase/app",wy=new Ls("@firebase/app"),Iy="[DEFAULT]",P9={[Ey]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ki=new Map,ch=new Map;function O9(e,t){try{e.container.addComponent(t)}catch(n){wy.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function kt(e){const t=e.name;if(ch.has(t))return wy.debug(`There were multiple attempts to register component ${t}.`),!1;ch.set(t,e);for(const n of Ki.values())O9(n,e);return!0}function Vs(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ci=new Xn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class L9{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}const Us="9.8.0";function V9(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:Iy,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw ci.create("bad-app-name",{appName:String(r)});const i=Ki.get(r);if(i){if(oh(e,i.options)&&oh(n,i.config))return i;throw ci.create("duplicate-app",{appName:r})}const o=new q7(r);for(const a of ch.values())o.addComponent(a);const s=new L9(e,n,o);return Ki.set(r,s),s}function by(e=Iy){const t=Ki.get(e);if(!t)throw ci.create("no-app",{appName:e});return t}function Mx(){return Array.from(Ki.values())}function Fe(e,t,n){var r;let i=null!==(r=P9[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${t}":`];return o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void wy.warn(a.join(" "))}kt(new yt(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const U9="firebase-heartbeat-database",j9=1,Uc="firebase-heartbeat-store";let Ty=null;function Rx(){return Ty||(Ty=ah(U9,j9,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Uc)}}).catch(e=>{throw ci.create("storage-open",{originalErrorMessage:e.message})})),Ty}function Sy(){return(Sy=g(function*(e){try{return(yield Rx()).transaction(Uc).objectStore(Uc).get(kx(e))}catch(t){throw ci.create("storage-get",{originalErrorMessage:t.message})}})).apply(this,arguments)}function Nx(e,t){return Ay.apply(this,arguments)}function Ay(){return(Ay=g(function*(e,t){try{const r=(yield Rx()).transaction(Uc,"readwrite");return yield r.objectStore(Uc).put(t,kx(e)),r.done}catch(n){throw ci.create("storage-set",{originalErrorMessage:n.message})}})).apply(this,arguments)}function kx(e){return`${e.name}!${e.options.appId}`}class z9{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new W9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var t=this;return g(function*(){const r=t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xx();if(null===t._heartbeatsCache&&(t._heartbeatsCache=yield t._heartbeatsCachePromise),t._heartbeatsCache.lastSentHeartbeatDate!==i&&!t._heartbeatsCache.heartbeats.some(o=>o.date===i))return t._heartbeatsCache.heartbeats.push({date:i,agent:r}),t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter(o=>{const s=new Date(o.date).valueOf();return Date.now()-s<=2592e6}),t._storage.overwrite(t._heartbeatsCache)})()}getHeartbeatsHeader(){var t=this;return g(function*(){if(null===t._heartbeatsCache&&(yield t._heartbeatsCachePromise),null===t._heartbeatsCache||0===t._heartbeatsCache.heartbeats.length)return"";const n=xx(),{heartbeatsToSend:r,unsentEntries:i}=function G9(e,t=1024){const n=[];let r=e.slice();for(const i of e){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Px(n)>t){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Px(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(t._heartbeatsCache.heartbeats),o=nh(JSON.stringify({version:2,heartbeats:r}));return t._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(t._heartbeatsCache.heartbeats=i,yield t._storage.overwrite(t._heartbeatsCache)):(t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache)),o})()}}function xx(){return(new Date).toISOString().substring(0,10)}class W9{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return g(function*(){return!!Wi()&&Oc().then(()=>!0).catch(()=>!1)})()}read(){var t=this;return g(function*(){return(yield t._canUseIndexedDBPromise)&&(yield function $9(e){return Sy.apply(this,arguments)}(t.app))||{heartbeats:[]}})()}overwrite(t){var n=this;return g(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return Nx(n.app,{lastSentHeartbeatDate:null!==(r=t.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:t.heartbeats})}})()}add(t){var n=this;return g(function*(){var r;if(yield n._canUseIndexedDBPromise){const o=yield n.read();return Nx(n.app,{lastSentHeartbeatDate:null!==(r=t.lastSentHeartbeatDate)&&void 0!==r?r:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...t.heartbeats]})}})()}}function Px(e){return nh(JSON.stringify({version:2,heartbeats:e})).length}!function q9(e){kt(new yt("platform-logger",t=>new a9(t),"PRIVATE")),kt(new yt("heartbeat",t=>new z9(t),"PRIVATE")),Fe(Ey,"0.7.23",e),Fe(Ey,"0.7.23","esm2017"),Fe("fire-js","")}(""),Fe("firebase","9.8.0","app");const Ox="@firebase/installations",My="0.5.9",Fx=1e4,Lx=`w:${My}`,Vx="FIS_v2",Q9="https://firebaseinstallations.googleapis.com/v1",X9=36e5,Ar=new Xn("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ux(e){return e instanceof Tr&&e.code.includes("request-failed")}function Ry({projectId:e}){return`${Q9}/projects/${e}/installations`}function jx(e){return{token:e.token,requestStatus:2,expiresIn:tK(e.expiresIn),creationTime:Date.now()}}function Ny(e,t){return ky.apply(this,arguments)}function ky(){return(ky=g(function*(e,t){const r=(yield t.json()).error;return Ar.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function $x({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function xy(e){return Py.apply(this,arguments)}function Py(){return(Py=g(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function tK(e){return Number(e.replace("s","000"))}function Oy(){return(Oy=g(function*({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Ry(e),i=$x(e),o=t.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({fid:n,authVersion:Vx,appId:e.appId,sdkVersion:Lx})},c=yield xy(()=>fetch(r,a));if(c.ok){const u=yield c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:jx(u.authToken)}}throw yield Ny("Create Installation",c)})).apply(this,arguments)}function Hx(e){return new Promise(t=>{setTimeout(t,e)})}const oK=/^[cdef][\w-]{21}$/,Fy="";function sK(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=function aK(e){return function iK(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return oK.test(n)?n:Fy}catch{return Fy}}function js(e){return`${e.appName}!${e.appId}`}const $s=new Map;function zx(e,t){const n=js(e);Gx(n,t),function lK(e,t){const n=function Wx(){return!Yi&&"BroadcastChannel"in self&&(Yi=new BroadcastChannel("[Firebase] FID Change"),Yi.onmessage=e=>{Gx(e.data.key,e.data.fid)}),Yi}();n&&n.postMessage({key:e,fid:t}),function qx(){0===$s.size&&Yi&&(Yi.close(),Yi=null)}()}(n,t)}function Gx(e,t){const n=$s.get(e);if(n)for(const r of n)r(t)}let Yi=null;const dK="firebase-installations-database",hK=1,Qi="firebase-installations-store";let Ly=null;function Vy(){return Ly||(Ly=ah(dK,hK,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Qi)}})),Ly}function uh(e,t){return Uy.apply(this,arguments)}function Uy(){return(Uy=g(function*(e,t){const n=js(e),i=(yield Vy()).transaction(Qi,"readwrite"),o=i.objectStore(Qi),s=yield o.get(n);return yield o.put(t,n),yield i.done,(!s||s.fid!==t.fid)&&zx(e,t.fid),t})).apply(this,arguments)}function jy(e){return $y.apply(this,arguments)}function $y(){return($y=g(function*(e){const t=js(e),r=(yield Vy()).transaction(Qi,"readwrite");yield r.objectStore(Qi).delete(t),yield r.done})).apply(this,arguments)}function jc(e,t){return By.apply(this,arguments)}function By(){return(By=g(function*(e,t){const n=js(e),i=(yield Vy()).transaction(Qi,"readwrite"),o=i.objectStore(Qi),s=yield o.get(n),a=t(s);return void 0===a?yield o.delete(n):yield o.put(a,n),yield i.done,a&&(!s||s.fid!==a.fid)&&zx(e,a.fid),a})).apply(this,arguments)}function Hy(e){return zy.apply(this,arguments)}function zy(){return zy=g(function*(e){let t;const n=yield jc(e.appConfig,r=>{const i=function fK(e){return Yx(e||{fid:sK(),registrationStatus:0})}(r),o=function pK(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Ar.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function gK(e,t){return Gy.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:mK(e)}:{installationEntry:t}}(e,i);return t=o.registrationPromise,o.installationEntry});return n.fid===Fy?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}}),zy.apply(this,arguments)}function Gy(){return Gy=g(function*(e,t){try{const n=yield function rK(e,t){return Oy.apply(this,arguments)}(e,t);return uh(e.appConfig,n)}catch(n){throw Ux(n)&&409===n.customData.serverCode?yield jy(e.appConfig):yield uh(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}),Gy.apply(this,arguments)}function mK(e){return Wy.apply(this,arguments)}function Wy(){return(Wy=g(function*(e){let t=yield Kx(e.appConfig);for(;1===t.registrationStatus;)yield Hx(100),t=yield Kx(e.appConfig);if(0===t.registrationStatus){const{installationEntry:n,registrationPromise:r}=yield Hy(e);return r||n}return t})).apply(this,arguments)}function Kx(e){return jc(e,t=>{if(!t)throw Ar.create("installation-not-found");return Yx(t)})}function Yx(e){return function _K(e){return 1===e.registrationStatus&&e.registrationTime+Fx<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function qy(){return(qy=g(function*({appConfig:e,heartbeatServiceProvider:t},n){const r=function vK(e,{fid:t}){return`${Ry(e)}/${t}/authTokens:generate`}(e,n),i=function Bx(e,{refreshToken:t}){const n=$x(e);return n.append("Authorization",function nK(e){return`${Vx} ${e}`}(t)),n}(e,n),o=t.getImmediate({optional:!0});if(o){const u=yield o.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:Lx,appId:e.appId}})},c=yield xy(()=>fetch(r,a));if(c.ok)return jx(yield c.json());throw yield Ny("Generate Auth Token",c)})).apply(this,arguments)}function Ky(e){return Yy.apply(this,arguments)}function Yy(){return Yy=g(function*(e,t=!1){let n;const r=yield jc(e.appConfig,o=>{if(!Xx(o))throw Ar.create("not-registered");const s=o.authToken;if(!t&&function wK(e){return 2===e.requestStatus&&!function IK(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+X9}(e)}(s))return o;if(1===s.requestStatus)return n=function CK(e,t){return Qy.apply(this,arguments)}(e,t),o;{if(!navigator.onLine)throw Ar.create("app-offline");const a=function bK(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(o);return n=function EK(e,t){return Xy.apply(this,arguments)}(e,a),a}});return n?yield n:r.authToken}),Yy.apply(this,arguments)}function Qy(){return(Qy=g(function*(e,t){let n=yield Qx(e.appConfig);for(;1===n.authToken.requestStatus;)yield Hx(100),n=yield Qx(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Ky(e,t):r})).apply(this,arguments)}function Qx(e){return jc(e,t=>{if(!Xx(t))throw Ar.create("not-registered");return function DK(e){return 1===e.requestStatus&&e.requestTime+Fx<Date.now()}(t.authToken)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function Xy(){return Xy=g(function*(e,t){try{const n=yield function yK(e,t){return qy.apply(this,arguments)}(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield uh(e.appConfig,r),n}catch(n){if(!Ux(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const r=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield uh(e.appConfig,r)}else yield jy(e.appConfig);throw n}}),Xy.apply(this,arguments)}function Xx(e){return void 0!==e&&2===e.registrationStatus}function Zy(){return(Zy=g(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield Hy(t);return r?r.catch(console.error):Ky(t).catch(console.error),n.fid})).apply(this,arguments)}function Jy(){return Jy=g(function*(e,t=!1){const n=e;return yield function AK(e){return ev.apply(this,arguments)}(n),(yield Ky(n,t)).token}),Jy.apply(this,arguments)}function ev(){return(ev=g(function*(e){const{registrationPromise:t}=yield Hy(e);t&&(yield t)})).apply(this,arguments)}function rv(e){return Ar.create("missing-app-config-values",{valueName:e})}const Zx="installations",xK=e=>{const t=e.getProvider("app").getImmediate(),n=function NK(e){if(!e||!e.options)throw rv("App Configuration");if(!e.name)throw rv("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw rv(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Vs(t,"heartbeat"),_delete:()=>Promise.resolve()}},PK=e=>{const n=Vs(e.getProvider("app").getImmediate(),Zx).getImmediate();return{getId:()=>function TK(e){return Zy.apply(this,arguments)}(n),getToken:i=>function SK(e){return Jy.apply(this,arguments)}(n,i)}};(function OK(){kt(new yt(Zx,xK,"PUBLIC")),kt(new yt("installations-internal",PK,"PRIVATE"))})(),Fe(Ox,My),Fe(Ox,My,"esm2017");const iv="@firebase/remote-config",zt=new Xn("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class WK{constructor(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-n,i=r<=t;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${t}. Is cache hit: ${i}.`),i}fetch(t){var n=this;return g(function*(){const[r,i]=yield Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);if(i&&n.isCachedDataFresh(t.cacheMaxAgeMillis,r))return i;t.eTag=i&&i.eTag;const o=yield n.client.fetch(t),s=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===o.status&&s.push(n.storage.setLastSuccessfulFetchResponse(o)),yield Promise.all(s),o})()}}function qK(e=navigator){return e.languages&&e.languages[0]||e.language}class KK{constructor(t,n,r,i,o,s){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(t){var n=this;return g(function*(){const[r,i]=yield Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${n.projectId}/namespaces/${n.namespace}:fetch?key=${n.apiKey}`,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},c={sdk_version:n.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:n.appId,language_code:qK()},u={method:"POST",headers:a,body:JSON.stringify(c)},l=fetch(s,u),d=new Promise((v,_)=>{t.signal.addEventListener(()=>{const N=new Error("The operation was aborted.");N.name="AbortError",_(N)})});let h;try{yield Promise.race([l,d]),h=yield l}catch(v){let _="fetch-client-network";throw"AbortError"===v.name&&(_="fetch-timeout"),zt.create(_,{originalErrorMessage:v.message})}let f=h.status;const p=h.headers.get("ETag")||void 0;let m,y;if(200===h.status){let v;try{v=yield h.json()}catch(_){throw zt.create("fetch-client-parse",{originalErrorMessage:_.message})}m=v.entries,y=v.state}if("INSTANCE_STATE_UNSPECIFIED"===y?f=500:"NO_CHANGE"===y?f=304:("NO_TEMPLATE"===y||"EMPTY_CONFIG"===y)&&(m={}),304!==f&&200!==f)throw zt.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:m}})()}}class XK{constructor(t,n){this.client=t,this.storage=n}fetch(t){var n=this;return g(function*(){const r=(yield n.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return n.attemptFetch(t,r)})()}attemptFetch(t,n){var r=this;return g(function*(i,{throttleEndTimeMillis:o,backoffCount:s}){yield function YK(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(zt.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(i.signal,o);try{const a=yield r.client.fetch(i);return yield r.storage.deleteThrottleMetadata(),a}catch(a){if(!function QK(e){if(!(e instanceof Tr&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a))throw a;const c={throttleEndTimeMillis:Date.now()+hy(s),backoffCount:s+1};return yield r.storage.setThrottleMetadata(c),r.attemptFetch(i,c)}}).apply(this,arguments)}}class eY{constructor(t,n,r,i,o){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function dh(e,t){const n=e.target.error||void 0;return zt.create(t,{originalErrorMessage:n&&n.message})}const Xi="app_namespace_store";class iY{constructor(t,n,r,i=function rY(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=r=>{t(dh(r,"storage-open"))},n.onsuccess=r=>{e(r.target.result)},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Xi,{keyPath:"compositeKey"})}}catch(n){t(zt.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(t){return this.set("last_fetch_status",t)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(t){return this.set("last_successful_fetch_timestamp_millis",t)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(t){return this.set("last_successful_fetch_response",t)}getActiveConfig(){return this.get("active_config")}setActiveConfig(t){return this.set("active_config",t)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(t){return this.set("active_config_etag",t)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(t){return this.set("throttle_metadata",t)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(t){var n=this;return g(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Xi],"readonly").objectStore(Xi),c=n.createCompositeKey(t);try{const u=a.get(c);u.onerror=l=>{o(dh(l,"storage-get"))},u.onsuccess=l=>{const d=l.target.result;i(d?d.value:void 0)}}catch(u){o(zt.create("storage-get",{originalErrorMessage:u&&u.message}))}})})()}set(t,n){var r=this;return g(function*(){const i=yield r.openDbPromise;return new Promise((o,s)=>{const c=i.transaction([Xi],"readwrite").objectStore(Xi),u=r.createCompositeKey(t);try{const l=c.put({compositeKey:u,value:n});l.onerror=d=>{s(dh(d,"storage-set"))},l.onsuccess=()=>{o()}}catch(l){s(zt.create("storage-set",{originalErrorMessage:l&&l.message}))}})})()}delete(t){var n=this;return g(function*(){const r=yield n.openDbPromise;return new Promise((i,o)=>{const a=r.transaction([Xi],"readwrite").objectStore(Xi),c=n.createCompositeKey(t);try{const u=a.delete(c);u.onerror=l=>{o(dh(l,"storage-delete"))},u.onsuccess=()=>{i()}}catch(u){o(zt.create("storage-delete",{originalErrorMessage:u&&u.message}))}})})()}createCompositeKey(t){return[this.appId,this.appName,this.namespace,t].join()}}class oY{constructor(t){this.storage=t}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var t=this;return g(function*(){const n=t.storage.getLastFetchStatus(),r=t.storage.getLastSuccessfulFetchTimestampMillis(),i=t.storage.getActiveConfig(),o=yield n;o&&(t.lastFetchStatus=o);const s=yield r;s&&(t.lastSuccessfulFetchTimestampMillis=s);const a=yield i;a&&(t.activeConfig=a)})()}setLastFetchStatus(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)}setLastSuccessfulFetchTimestampMillis(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)}setActiveConfig(t){return this.activeConfig=t,this.storage.setActiveConfig(t)}}function aY(){return uv.apply(this,arguments)}function uv(){return(uv=g(function*(){if(!Wi())return!1;try{return yield Oc()}catch{return!1}})).apply(this,arguments)}!function sY(){kt(new yt("remote-config",function e(t,{instanceIdentifier:n}){const r=t.getProvider("app").getImmediate(),i=t.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw zt.create("registration-window");if(!Wi())throw zt.create("indexed-db-unavailable");const{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw zt.create("registration-project-id");if(!s)throw zt.create("registration-api-key");if(!a)throw zt.create("registration-app-id");const c=new iY(a,r.name,n=n||"firebase"),u=new oY(c),l=new Ls(iv);l.logLevel=_e.ERROR;const d=new KK(i,Us,n,o,s,a),h=new XK(d,c),f=new WK(h,c,u,l),p=new eY(r,f,u,c,l);return function HK(e){const t=Nt(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(p),p},"PUBLIC").setMultipleInstances(!0)),Fe(iv,"0.3.8"),Fe(iv,"0.3.8","esm2017")}();const cY="/firebase-messaging-sw.js",uY="/firebase-cloud-messaging-push-scope",nP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lY="https://fcmregistrations.googleapis.com/v1",rP="google.c.a.c_id",dY="google.c.a.c_l",hY="google.c.a.ts";var hh=function(e){return e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",e}(hh||{});function Mr(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gY(e){const n=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}const lv="fcm_token_details_db",mY=5,iP="fcm_token_object_Store";function dv(){return dv=g(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(lv))return null;let t=null;return(yield ah(lv,mY,{upgrade:(r=g(function*(i,o,s,a){var c;if(o<2||!i.objectStoreNames.contains(iP))return;const u=a.objectStore(iP),l=yield u.index("fcmSenderId").get(e);if(yield u.clear(),l)if(2===o){const d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;t={token:d.fcmToken,createTime:null!==(c=d.createTime)&&void 0!==c?c:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:"string"==typeof d.vapidKey?d.vapidKey:Mr(d.vapidKey)}}}else if(3===o){const d=l;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Mr(d.auth),p256dh:Mr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Mr(d.vapidKey)}}}else if(4===o){const d=l;t={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Mr(d.auth),p256dh:Mr(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Mr(d.vapidKey)}}}}),function(o,s,a,c){return r.apply(this,arguments)})})).close(),yield vy(lv),yield vy("fcm_vapid_details_db"),yield vy("undefined"),function yY(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null;var r}),dv.apply(this,arguments)}const vY="firebase-messaging-database",CY=1,Zi="firebase-messaging-store";let hv=null;function fv(){return hv||(hv=ah(vY,CY,{upgrade:(e,t)=>{0===t&&e.createObjectStore(Zi)}})),hv}function oP(e){return pv.apply(this,arguments)}function pv(){return pv=g(function*(e){const t=yv(e),r=yield(yield fv()).transaction(Zi).objectStore(Zi).get(t);if(r)return r;{const i=yield function _Y(e){return dv.apply(this,arguments)}(e.appConfig.senderId);if(i)return yield gv(e,i),i}}),pv.apply(this,arguments)}function gv(e,t){return mv.apply(this,arguments)}function mv(){return(mv=g(function*(e,t){const n=yv(e),i=(yield fv()).transaction(Zi,"readwrite");return yield i.objectStore(Zi).put(t,n),yield i.done,t})).apply(this,arguments)}function _v(){return(_v=g(function*(e){const t=yv(e),r=(yield fv()).transaction(Zi,"readwrite");yield r.objectStore(Zi).delete(t),yield r.done})).apply(this,arguments)}function yv({appConfig:e}){return e.appId}const lt=new Xn("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function IY(e,t){return vv.apply(this,arguments)}function vv(){return(vv=g(function*(e,t){const n=yield Iv(e),r=aP(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(wv(e.appConfig),i)).json()}catch(s){throw lt.create("token-subscribe-failed",{errorInfo:s})}if(o.error)throw lt.create("token-subscribe-failed",{errorInfo:o.error.message});if(!o.token)throw lt.create("token-subscribe-no-token");return o.token})).apply(this,arguments)}function Cv(){return(Cv=g(function*(e,t){const n=yield Iv(e),r=aP(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let o;try{o=yield(yield fetch(`${wv(e.appConfig)}/${t.token}`,i)).json()}catch(s){throw lt.create("token-update-failed",{errorInfo:s})}if(o.error)throw lt.create("token-update-failed",{errorInfo:o.error.message});if(!o.token)throw lt.create("token-update-no-token");return o.token})).apply(this,arguments)}function sP(e,t){return Ev.apply(this,arguments)}function Ev(){return(Ev=g(function*(e,t){const r={method:"DELETE",headers:yield Iv(e)};try{const o=yield(yield fetch(`${wv(e.appConfig)}/${t}`,r)).json();if(o.error)throw lt.create("token-unsubscribe-failed",{errorInfo:o.error.message})}catch(i){throw lt.create("token-unsubscribe-failed",{errorInfo:i})}})).apply(this,arguments)}function wv({projectId:e}){return`${lY}/projects/${e}/registrations`}function Iv(e){return bv.apply(this,arguments)}function bv(){return(bv=g(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function aP({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==nP&&(i.web.applicationPubKey=r),i}const DY=6048e5;function Dv(){return Dv=g(function*(e){const t=yield function AY(e,t){return Mv.apply(this,arguments)}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Mr(t.getKey("auth")),p256dh:Mr(t.getKey("p256dh"))},r=yield oP(e.firebaseDependencies);if(r){if(function MY(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}(r.subscriptionOptions,n))return Date.now()>=r.createTime+DY?function SY(e,t){return Sv.apply(this,arguments)}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield sP(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return uP(e.firebaseDependencies,n)}return uP(e.firebaseDependencies,n)}),Dv.apply(this,arguments)}function Tv(){return Tv=g(function*(e){const t=yield oP(e.firebaseDependencies);t&&(yield sP(e.firebaseDependencies,t.token),yield function EY(e){return _v.apply(this,arguments)}(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}),Tv.apply(this,arguments)}function Sv(){return Sv=g(function*(e,t){try{const n=yield function bY(e,t){return Cv.apply(this,arguments)}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield gv(e.firebaseDependencies,r),n}catch(n){throw yield function cP(e){return Tv.apply(this,arguments)}(e),n}}),Sv.apply(this,arguments)}function uP(e,t){return Av.apply(this,arguments)}function Av(){return(Av=g(function*(e,t){const r={token:yield IY(e,t),createTime:Date.now(),subscriptionOptions:t};return yield gv(e,r),r.token})).apply(this,arguments)}function Mv(){return(Mv=g(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gY(t)})})).apply(this,arguments)}function lP(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function RY(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function NY(e,t){t.data&&(e.data=t.data)}(t,e),function kY(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function dP(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Rv(e){return lt.create("missing-app-config-values",{valueName:e})}dP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),dP("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class OY{constructor(t,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function PY(e){if(!e||!e.options)throw Rv("App Configuration Object");if(!e.name)throw Rv("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw Rv(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Nv(){return(Nv=g(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(cY,{scope:uY}),e.swRegistration.update().catch(()=>{})}catch(t){throw lt.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function kv(){return(kv=g(function*(e,t){if(!t&&!e.swRegistration&&(yield function hP(e){return Nv.apply(this,arguments)}(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw lt.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function xv(){return(xv=g(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=nP)})).apply(this,arguments)}function Pv(){return Pv=g(function*(e,t){if(!navigator)throw lt.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw lt.create("permission-blocked");return yield function LY(e,t){return xv.apply(this,arguments)}(e,t?.vapidKey),yield function FY(e,t){return kv.apply(this,arguments)}(e,t?.serviceWorkerRegistration),function TY(e){return Dv.apply(this,arguments)}(e)}),Pv.apply(this,arguments)}function Ov(){return(Ov=g(function*(e,t,n){const r=function UY(e){switch(e){case hh.NOTIFICATION_CLICKED:return"notification_open";case hh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[rP],message_name:n[dY],message_time:n[hY],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fv(){return Fv=g(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===hh.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(lP(n)):e.onMessageHandler.next(lP(n)));const r=n.data;(function xY(e){return"object"==typeof e&&!!e&&rP in e})(r)&&"1"===r["google.c.a.e"]&&(yield function VY(e,t,n){return Ov.apply(this,arguments)}(e,n.messageType,r))}),Fv.apply(this,arguments)}const pP="@firebase/messaging",$Y=e=>{const t=new OY(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>function jY(e,t){return Fv.apply(this,arguments)}(t,n)),t},BY=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:r=>function fP(e,t){return Pv.apply(this,arguments)}(t,r)}};function mP(){return Lv.apply(this,arguments)}function Lv(){return(Lv=g(function*(){try{yield Oc()}catch{return!1}return typeof window<"u"&&Wi()&&uy()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function HY(){kt(new yt("messaging",$Y,"PUBLIC")),kt(new yt("messaging-internal",BY,"PRIVATE")),Fe(pP,"0.9.13"),Fe(pP,"0.9.13","esm2017")}();const fh="analytics",WY="firebase_id",qY="origin",KY=6e4,YY="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_P="https://www.googletagmanager.com/gtag/js",dt=new Ls("@firebase/analytics");function yP(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function jv(){return(jv=g(function*(e,t,n,r,i,o){const s=r[i];try{if(s)yield t[s];else{const c=(yield yP(n)).find(u=>u.measurementId===i);c&&(yield t[c.appId])}}catch(a){dt.error(a)}e("config",i,o)})).apply(this,arguments)}function $v(){return($v=g(function*(e,t,n,r,i){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);const a=yield yP(n);for(const c of s){const u=a.find(d=>d.measurementId===c),l=u&&t[u.appId];if(!l){o=[];break}o.push(l)}}0===o.length&&(o=Object.values(t)),yield Promise.all(o),e("event",r,i||{})}catch(o){dt.error(o)}})).apply(this,arguments)}const rn=new Xn("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),iQ=30,vP=new class sQ{constructor(t={},n=1e3){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function aQ(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Bv(){return(Bv=g(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:aQ(r)},o=YY.replace("{app-id}",n),s=yield fetch(o,i);if(200!==s.status&&304!==s.status){let a="";try{const c=yield s.json();null!==(t=c.error)&&void 0!==t&&t.message&&(a=c.error.message)}catch{}throw rn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})).apply(this,arguments)}function Hv(){return(Hv=g(function*(e,t=vP,n){const{appId:r,apiKey:i,measurementId:o}=e.options;if(!r)throw rn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw rn.create("no-api-key")}const s=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new hQ;return setTimeout(g(function*(){a.abort()}),void 0!==n?n:KY),CP({appId:r,apiKey:i,measurementId:o},s,a,t)})).apply(this,arguments)}function CP(e,t,n){return zv.apply(this,arguments)}function zv(){return zv=g(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=vP){const{appId:o,measurementId:s}=e;try{yield function lQ(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(o),r(rn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(r,t)}catch(a){if(s)return dt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:o,measurementId:s};throw a}try{const a=yield function cQ(e){return Bv.apply(this,arguments)}(e);return i.deleteThrottleMetadata(o),a}catch(a){if(!function dQ(e){if(!(e instanceof Tr&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(a)){if(i.deleteThrottleMetadata(o),s)return dt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${s} provided in the "measurementId" field in the local Firebase config. [${a.message}]`),{appId:o,measurementId:s};throw a}const c=503===Number(a.customData.httpStatus)?hy(n,i.intervalMillis,iQ):hy(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:n+1};return i.setThrottleMetadata(o,u),dt.debug(`Calling attemptFetch again in ${c} millis`),CP(e,u,r,i)}}),zv.apply(this,arguments)}class hQ{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}function Gv(){return(Gv=g(function*(){if(!Wi())return dt.warn(rn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield Oc()}catch(e){return dt.warn(rn.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function Wv(){return Wv=g(function*(e,t,n,r,i,o,s){var a;const c=function uQ(e){return Hv.apply(this,arguments)}(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&dt.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>dt.error(f)),t.push(c);const u=function fQ(){return Gv.apply(this,arguments)}().then(f=>{if(f)return r.getId()}),[l,d]=yield Promise.all([c,u]);(function nQ(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(_P))return t;return null})()||function QY(e,t){const n=document.createElement("script");n.src=`${_P}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}(o,l.measurementId),i("js",new Date);const h=null!==(a=s?.config)&&void 0!==a?a:{};return h[qY]="firebase",h.update=!0,null!=d&&(h[WY]=d),i("config",l.measurementId,h),l.measurementId}),Wv.apply(this,arguments)}class gQ{constructor(t){this.app=t}_delete(){return delete Rr[this.app.options.appId],Promise.resolve()}}let Rr={},EP=[];const wP={};let bP,$c,ph="dataLayer",qv=!1;function _Q(e,t,n){!function mQ(){const e=[];if(cy()&&e.push("This is a browser extension environment."),uy()||e.push("Cookies are not available."),e.length>0){const t=e.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=rn.create("invalid-analytics-context",{errorInfo:t});dt.warn(n.message)}}();const r=e.options.appId;if(!r)throw rn.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rn.create("no-api-key");dt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Rr[r])throw rn.create("already-exists",{id:r});if(!qv){!function XY(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ph);const{wrappedGtag:o,gtagCore:s}=function tQ(e,t,n,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function eQ(e,t,n,r){function o(){return o=g(function*(s,a,c){try{"event"===s?yield function JY(e,t,n,r,i){return $v.apply(this,arguments)}(e,t,n,a,c):"config"===s?yield function ZY(e,t,n,r,i,o){return jv.apply(this,arguments)}(e,t,n,r,a,c):e("set",a)}catch(u){dt.error(u)}}),o.apply(this,arguments)}return function i(s,a,c){return o.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}(Rr,EP,wP,ph,"gtag");$c=o,bP=s,qv=!0}return Rr[r]=function pQ(e,t,n,r,i,o,s){return Wv.apply(this,arguments)}(e,EP,wP,t,bP,ph,n),new gQ(e)}function Kv(){return(Kv=g(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const o=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:o}))}})).apply(this,arguments)}function bQ(){return Jv.apply(this,arguments)}function Jv(){return(Jv=g(function*(){if(cy()||!uy()||!Wi())return!1;try{return yield Oc()}catch{return!1}})).apply(this,arguments)}const DP="@firebase/analytics";!function TQ(){kt(new yt(fh,(t,{options:n})=>_Q(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),n),"PUBLIC")),kt(new yt("analytics-internal",function e(t){try{const n=t.getProvider(fh).getImmediate();return{logEvent:(r,i,o)=>function DQ(e,t,n,r){e=Nt(e),function yQ(e,t,n,r,i){return Kv.apply(this,arguments)}($c,Rr[e.app.options.appId],t,n,r).catch(i=>dt.error(i))}(n,r,i,o)}}catch(n){throw rn.create("interop-component-reg-failed",{reason:n})}},"PRIVATE")),Fe(DP,"0.7.9"),Fe(DP,"0.7.9","esm2017")}();class SQ extends Ot{constructor(t,n){super()}schedule(t,n=0){return this}}const gh={setInterval(e,t,...n){const{delegate:r}=gh;return r?.setInterval?r.setInterval(e,t,...n):setInterval(e,t,...n)},clearInterval(e){const{delegate:t}=gh;return(t?.clearInterval||clearInterval)(e)},delegate:void 0};class SP extends SQ{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){var r;if(this.closed)return this;this.state=t;const i=this.id,o=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(t,n,r=0){return gh.setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;null!=n&&gh.clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let i,r=!1;try{this.work(t)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:t,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,vo(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,super.unsubscribe()}}}const AP={now:()=>(AP.delegate||Date).now(),delegate:void 0};class Bc{constructor(t,n=Bc.now){this.schedulerActionCtor=t,this.now=n}schedule(t,n=0,r){return new this.schedulerActionCtor(this,t).schedule(r,n)}}Bc.now=AP.now;class MP extends Bc{constructor(t,n=Bc.now){super(t,n),this.actions=[],this._active=!1}flush(t){const{actions:n}=this;if(this._active)return void n.push(t);let r;this._active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,r){for(;t=n.shift();)t.unsubscribe();throw r}}}const RQ=new class MQ extends MP{}(class AQ extends SP{constructor(t,n){super(t,n),this.scheduler=t,this.work=n}schedule(t,n=0){return n>0?super.schedule(t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)}execute(t,n){return n>0||this.closed?super.execute(t,n):this._execute(t,n)}requestAsyncId(t,n,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(t,n,r):(t.flush(this),0)}}),NQ=new MP(SP),mh=new Xo("7.5.0"),eC="__angularfire_symbol__analyticsIsSupportedValue",tC="__angularfire_symbol__analyticsIsSupported",nC="__angularfire_symbol__remoteConfigIsSupportedValue",rC="__angularfire_symbol__remoteConfigIsSupported",iC="__angularfire_symbol__messagingIsSupportedValue",oC="__angularfire_symbol__messagingIsSupported";function aC(e,t,n){if(t){if(1===t.length)return t[0];const o=t.filter(s=>s.app===n);if(1===o.length)return o[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[tC]||(globalThis[tC]=bQ().then(e=>globalThis[eC]=e).catch(()=>globalThis[eC]=!1)),globalThis[oC]||(globalThis[oC]=mP().then(e=>globalThis[iC]=e).catch(()=>globalThis[iC]=!1)),globalThis[rC]||(globalThis[rC]=aY().then(e=>globalThis[nC]=e).catch(()=>globalThis[nC]=!1));const cC=(e,t)=>{const n=t?[t]:Mx(),r=[];return n.forEach(i=>{i.container.getProvider(e).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r};function Bs(){}class RP{constructor(t,n=RQ){this.zone=t,this.delegate=n}now(){return this.delegate.now()}schedule(t,n,r){const i=this.zone;return this.delegate.schedule(function(s){i.runGuarded(()=>{t.apply(this,[s])})},n,r)}}class kQ{constructor(t){this.zone=t,this.task=null}call(t,n){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bs,{},Bs,Bs)),n.pipe(ut({next:r,complete:r,error:r})).subscribe(t).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let uC=(()=>{class e{constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new RP(Zone.current)),this.insideAngular=n.run(()=>new RP(Zone.current,NQ)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(n){return new(n||e)(x(ue))},e.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Ji(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function eo(e){return Ji().ngZone.run(()=>e())}function PQ(e){return Ji(),function OQ(e){return function(n){return(n=n.lift(new kQ(e.ngZone))).pipe(Ou(e.outsideAngular),Pu(e.insideAngular))}}(Ji())(e)}const FQ=(e,t)=>function(){const r=arguments;return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),eo(()=>e.apply(void 0,r))},mn=(e,t)=>function(){let n;const r=arguments;for(let o=0;o<arguments.length;o++)"function"==typeof r[o]&&(t&&(n||(n=eo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bs,{},Bs,Bs)))),r[o]=FQ(r[o],n));const i=function xQ(e){return Ji().ngZone.runOutsideAngular(()=>e())}(()=>e.apply(this,r));if(!t){if(i instanceof Se){const o=Ji();return i.pipe(Ou(o.outsideAngular),Pu(o.insideAngular))}return eo(()=>i)}return i instanceof Se?i.pipe(PQ):i instanceof Promise?eo(()=>new Promise((o,s)=>i.then(a=>eo(()=>o(a)),a=>eo(()=>s(a))))):"function"==typeof i&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),i.apply(this,arguments)}:eo(()=>i)};class Hs{constructor(t){return t}}class lC{constructor(){return Mx()}}const dC=new S("angularfire2._apps"),VQ={provide:Hs,useFactory:function LQ(e){return e&&1===e.length?e[0]:new Hs(by())},deps:[[new Tt,dC]]},UQ={provide:lC,deps:[[new Tt,dC]]};function jQ(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Hs(r)}}let $Q=(()=>{class e{constructor(n){Fe("angularfire",mh.full,"core"),Fe("angularfire",mh.full,"app"),Fe("angular",KT.full,n.toString())}}return e.\u0275fac=function(n){return new(n||e)(x(Qr))},e.\u0275mod=Lt({type:e}),e.\u0275inj=Ct({providers:[VQ,UQ]}),e})();function BQ(e,...t){return{ngModule:$Q,providers:[{provide:dC,useFactory:jQ(e),multi:!0,deps:[ue,pt,uC,...t]}]}}const HQ=mn(V9,!0),NP=new Map,zQ={activated:!1,tokenObservers:[]},GQ={initialized:!1,enabled:!1};function Je(e){return NP.get(e)||zQ}function Nn(e,t){NP.set(e,t)}function _h(){return GQ}const hC="https://content-firebaseappcheck.googleapis.com/v1",KQ="exchangeDebugToken",kP={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class QQ{constructor(t,n,r,i,o){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var n=this;return g(function*(){n.stop();try{n.pending=new xs,yield function XQ(e){return new Promise(t=>{setTimeout(t,e)})}(n.getNextRun(t)),n.pending.resolve(),yield n.pending.promise,n.pending=new xs,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(r){n.retryPolicy(r)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const xt=new Xn("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function gC(){return(gC=g(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=yield i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const o={method:"POST",body:JSON.stringify(t),headers:r};let s,a;try{s=yield fetch(e,o)}catch(d){throw xt.create("fetch-network-error",{originalErrorMessage:d.message})}if(200!==s.status)throw xt.create("fetch-status-error",{httpStatus:s.status});try{a=yield s.json()}catch(d){throw xt.create("fetch-parse-error",{originalErrorMessage:d.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw xt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.token,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}const rX="firebase-app-check-database",iX=1,Hc="firebase-app-check-store";let Ch=null;function mC(){return(mC=g(function*(e,t){const r=(yield function OP(){return Ch||(Ch=new Promise((e,t)=>{try{const n=indexedDB.open(rX,iX);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(xt.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},n.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Hc,{keyPath:"compositeKey"})}}catch(n){t(xt.create("storage-open",{originalErrorMessage:n.message}))}}),Ch)}()).transaction(Hc,"readwrite"),o=r.objectStore(Hc).put({compositeKey:e,value:t});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(xt.create("storage-set",{originalErrorMessage:null===(u=c.target.error)||void 0===u?void 0:u.message}))}})})).apply(this,arguments)}const zc=new Ls("@firebase/app-check");function UP(e,t){return Wi()?function sX(e,t){return function FP(e,t){return mC.apply(this,arguments)}(function VP(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(n=>{zc.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function CC(){return(CC=g(function*(){const e=_h();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const hX={error:"UNKNOWN_ERROR"};function fX(e){return th.encodeString(JSON.stringify(e),!1)}function Eh(e){return EC.apply(this,arguments)}function EC(){return(EC=g(function*(e,t=!1){const n=e.app;!function xP(e){if(!Je(e).activated)throw xt.create("use-before-activation",{appName:e.name})}(n);const r=Je(n);let o,i=r.token;if(!i){const c=yield r.cachedTokenPromise;c&&wh(c)&&(i=c)}if(!t&&i&&wh(i))return{token:i.token};let a,s=!1;if(function jP(){return _h().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function pC(e,t){return gC.apply(this,arguments)}(function nX(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${hC}/projects/${n}/apps/${r}:${KQ}?key=${i}`,body:{debug_token:t}}}(n,yield function $P(){return CC.apply(this,arguments)}()),e.heartbeatServiceProvider).then(u=>(r.exchangeTokenPromise=void 0,u)),s=!0);const c=yield r.exchangeTokenPromise;return yield UP(n,c),Nn(n,Object.assign(Object.assign({},r),{token:c})),{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(c=>(r.exchangeTokenPromise=void 0,c)),s=!0),i=yield r.exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?zc.warn(c.message):zc.error(c),o=c}return i?(a={token:i.token},Nn(n,Object.assign(Object.assign({},r),{token:i})),yield UP(n,i)):a=function gX(e){return{token:fX(hX),error:e}}(o),s&&function HP(e,t){const n=Je(e).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch{}}(n,a),a})).apply(this,arguments)}function IC(e,t){const n=Je(e),r=n.tokenObservers.filter(i=>i.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),Nn(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function BP(e){const{app:t}=e,n=Je(t);let r=n.tokenRefresher;r||(r=function pX(e){const{app:t}=e;return new QQ(g(function*(){let r;if(r=Je(t).token?yield Eh(e,!0):yield Eh(e),r.error)throw r.error}),()=>!0,()=>{const n=Je(t);if(n.token){let r=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,n.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},kP.RETRIAL_MIN_WAIT,kP.RETRIAL_MAX_WAIT)}(e),Nn(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function wh(e){return e.expireTimeMillis-Date.now()>0}class mX{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Je(this.app);for(const n of t)IC(this.app,n.next);return Promise.resolve()}}const XP="app-check-internal";!function RX(){kt(new yt("app-check",e=>function _X(e,t){return new mX(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(XP).initialize()})),kt(new yt(XP,e=>function yX(e){return{getToken:t=>Eh(e,t),addTokenListener:t=>function wC(e,t,n,r){const{app:i}=e,o=Je(i),s={next:n,error:r,type:t};if(Nn(i,Object.assign(Object.assign({},o),{tokenObservers:[...o.tokenObservers,s]})),o.token&&wh(o.token)){const a=o.token;Promise.resolve().then(()=>{n({token:a.token}),BP(e)}).catch(()=>{})}o.cachedTokenPromise.then(()=>BP(e))}(e,"INTERNAL",t),removeTokenListener:t=>IC(e.app,t)}}(e.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),Fe("@firebase/app-check","0.5.8")}();class SC{constructor(){return cC("app-check")}}typeof window<"u"&&window;const OX=function JP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},eO=new Xn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tO=new Ls("@firebase/auth");function bh(e,...t){tO.logLevel<=_e.ERROR&&tO.error(`Auth (${Us}): ${e}`,...t)}function Gt(e,...t){throw MC(e,...t)}function Jn(e,...t){return MC(e,...t)}function MC(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return eO.create(e,...t)}function D(e,t,...n){if(!e)throw MC(t,...n)}function er(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bh(t),new Error(t)}function ui(e,t){e||er(t)}const rO=new Map;function Nr(e){ui(e instanceof Function,"Expected a class definition");let t=rO.get(e);return t?(ui(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rO.set(e,t),t)}function Gc(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function iO(){var e;return typeof self<"u"&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Wc{constructor(t,n){this.shortDelay=t,this.longDelay=n,ui(n>t,"Short delay should be less than long delay!"),this.isMobile=ay()||Cx()}get(){return function VX(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function RC(){return"http:"===iO()||"https:"===iO()}()||cy()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function NC(e,t){ui(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class oO{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},$X=new Wc(3e4,6e4);function Ye(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function et(e,t,n,r){return kC.apply(this,arguments)}function kC(){return(kC=g(function*(e,t,n,r,i={}){return sO(e,i,g(function*(){let o={},s={};r&&("GET"===t?s=r:o={body:JSON.stringify(r)});const a=Os(Object.assign({key:e.config.apiKey},s)).slice(1),c=yield e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),oO.fetch()(aO(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},o))}))})).apply(this,arguments)}function sO(e,t,n){return xC.apply(this,arguments)}function xC(){return(xC=g(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},jX),t);try{const i=new BX(e),o=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=yield o.json();if("needConfirmation"in s)throw Dh(e,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===c)throw Dh(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===c)throw Dh(e,"email-already-in-use",s);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw function nO(e,t,n){const r=Object.assign(Object.assign({},OX()),{[t]:n});return new Xn("auth","Firebase",r).create(t,{appName:e.name})}(e,l,u);Gt(e,l)}}catch(i){if(i instanceof Tr)throw i;Gt(e,"network-request-failed")}})).apply(this,arguments)}function kr(e,t,n,r){return PC.apply(this,arguments)}function PC(){return(PC=g(function*(e,t,n,r,i={}){const o=yield et(e,t,n,r,i);return"mfaPendingCredential"in o&&Gt(e,"multi-factor-auth-required",{_serverResponse:o}),o})).apply(this,arguments)}function aO(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?NC(e.config,i):`${e.config.apiScheme}://${i}`}class BX{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Jn(this.auth,"network-request-failed")),$X.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Dh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Jn(e,t,r);return i.customData._tokenResponse=n,i}function OC(){return(OC=g(function*(e,t){return et(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function LC(){return(LC=g(function*(e,t){return et(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function qc(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function VC(){return(VC=g(function*(e,t=!1){const n=Nt(e),r=yield n.getIdToken(t),i=Th(r);D(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:qc(UC(i.auth_time)),issuedAtTime:qc(UC(i.iat)),expirationTime:qc(UC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}function UC(e){return 1e3*Number(e)}function Th(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const i=sy(n);return i?JSON.parse(i):(bh("Failed to decode base64 JWT payload"),null)}catch(i){return bh("Caught error parsing JWT payload as JSON",i),null}}function xr(e,t){return jC.apply(this,arguments)}function jC(){return(jC=g(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof Tr&&function KX({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}class YX{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),r}{this.errorBackoff=3e4;const i=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){var n=this;if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(g(function*(){yield n.iteration()}),r)}iteration(){var t=this;return g(function*(){try{yield t.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n.code&&t.schedule(!0))}t.schedule()})()}}class cO{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Kc(e){return $C.apply(this,arguments)}function $C(){return $C=g(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield xr(e,function GX(e,t){return LC.apply(this,arguments)}(n,{idToken:r}));D(i?.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?function ZX(e){return e.map(t=>{var{providerId:n}=t,r=xu(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}(o.providerUserInfo):[],a=function XX(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}(e.providerData,s),l=!!e.isAnonymous&&!(e.email&&o.passwordHash||a?.length),d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new cO(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(e,d)}),$C.apply(this,arguments)}function BC(){return(BC=g(function*(e){const t=Nt(e);yield Kc(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function HC(){return(HC=g(function*(e,t){const n=yield sO(e,{},g(function*(){const r=Os({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:o}=e.config,s=aO(e,i,"/v1/token",`key=${o}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",oO.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class Yc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){D(t.idToken,"internal-error"),D(typeof t.idToken<"u","internal-error"),D(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):function qX(e){const t=Th(e);return D(t,"internal-error"),D(typeof t.exp<"u","internal-error"),D(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}getToken(t){var n=this;return g(function*(r,i=!1){return D(!n.accessToken||n.refreshToken,r,"user-token-expired"),i||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(r,n.refreshToken),n.accessToken):null:n.accessToken}).apply(this,arguments)}clearRefreshToken(){this.refreshToken=null}refresh(t,n){var r=this;return g(function*(){const{accessToken:i,refreshToken:o,expiresIn:s}=yield function JX(e,t){return HC.apply(this,arguments)}(t,n);r.updateTokensAndExpiration(i,o,Number(s))})()}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*r}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Yc;return r&&(D("string"==typeof r,"internal-error",{appName:t}),s.refreshToken=r),i&&(D("string"==typeof i,"internal-error",{appName:t}),s.accessToken=i),o&&(D("number"==typeof o,"internal-error",{appName:t}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Yc,this.toJSON())}_performRefresh(){return er("not implemented")}}function li(e,t){D("string"==typeof e||typeof e>"u","internal-error",{appName:t})}class to{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,o=xu(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new cO(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(t){var n=this;return g(function*(){const r=yield xr(n,n.stsTokenManager.getToken(n.auth,t));return D(r,n.auth,"internal-error"),n.accessToken!==r&&(n.accessToken=r,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),r})()}getIdTokenResult(t){return function WX(e){return VC.apply(this,arguments)}(this,t)}reload(){return function QX(e){return BC.apply(this,arguments)}(this)}_assign(t){this!==t&&(D(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){return new to(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(t){D(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t){var n=this;return g(function*(r,i=!1){let o=!1;r.idToken&&r.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(r),o=!0),i&&(yield Kc(n)),yield n.auth._persistUserIfCurrent(n),o&&n.auth._notifyListenersIfCurrent(n)}).apply(this,arguments)}delete(){var t=this;return g(function*(){const n=yield t.getIdToken();return yield xr(t,function HX(e,t){return OC.apply(this,arguments)}(t.auth,{idToken:n})),t.stsTokenManager.clearRefreshToken(),t.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,o,s,a,c,u,l;const d=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,f=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(s=n.photoURL)&&void 0!==s?s:void 0,m=null!==(a=n.tenantId)&&void 0!==a?a:void 0,y=null!==(c=n._redirectEventId)&&void 0!==c?c:void 0,v=null!==(u=n.createdAt)&&void 0!==u?u:void 0,_=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,{uid:N,emailVerified:F,isAnonymous:Y,providerData:$e,stsTokenManager:sn}=n;D(N&&sn,t,"internal-error");const Vr=Yc.fromJSON(this.name,sn);D("string"==typeof N,t,"internal-error"),li(d,t.name),li(h,t.name),D("boolean"==typeof F,t,"internal-error"),D("boolean"==typeof Y,t,"internal-error"),li(f,t.name),li(p,t.name),li(m,t.name),li(y,t.name),li(v,t.name),li(_,t.name);const yo=new to({uid:N,auth:t,email:h,emailVerified:F,displayName:d,isAnonymous:Y,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:Vr,createdAt:v,lastLoginAt:_});return $e&&Array.isArray($e)&&(yo.providerData=$e.map(jI=>Object.assign({},jI))),y&&(yo._redirectEventId=y),yo}static _fromIdTokenResponse(t,n){return g(function*(r,i,o=!1){const s=new Yc;s.updateFromServerResponse(i);const a=new to({uid:i.localId,auth:r,stsTokenManager:s,isAnonymous:o});return yield Kc(a),a}).apply(this,arguments)}}const uO=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return g(function*(){return!0})()}_set(n,r){var i=this;return g(function*(){i.storage[n]=r})()}_get(n){var r=this;return g(function*(){const i=r.storage[n];return void 0===i?null:i})()}_remove(n){var r=this;return g(function*(){delete r.storage[n]})()}_addListener(n,r){}_removeListener(n,r){}}return e.type="NONE",e})();function Sh(e,t,n){return`firebase:${e}:${t}:${n}`}class Gs{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Sh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Sh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){var t=this;return g(function*(){const n=yield t.persistence._get(t.fullUserKey);return n?to._fromJSON(t.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){var n=this;return g(function*(){if(n.persistence===t)return;const r=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=t,r?n.setCurrentUser(r):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,n){return g(function*(r,i,o="authUser"){if(!i.length)return new Gs(Nr(uO),r,o);const s=(yield Promise.all(i.map(function(){var d=g(function*(h){if(yield h._isAvailable())return h});return function(h){return d.apply(this,arguments)}}()))).filter(d=>d);let a=s[0]||Nr(uO);const c=Sh(o,r.config.apiKey,r.name);let u=null;for(const d of i)try{const h=yield d._get(c);if(h){const f=to._fromJSON(r,h);d!==a&&(u=f),a=d;break}}catch{}const l=s.filter(d=>d._shouldAllowMigration);return a._shouldAllowMigration&&l.length?(a=l[0],u&&(yield a._set(c,u.toJSON())),yield Promise.all(i.map(function(){var d=g(function*(h){if(h!==a)try{yield h._remove(c)}catch{}});return function(h){return d.apply(this,arguments)}}())),new Gs(a,r,o)):new Gs(a,r,o)}).apply(this,arguments)}}function lO(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(fO(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dO(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(gO(t))return"Blackberry";if(mO(t))return"Webos";if(zC(t))return"Safari";if((t.includes("chrome/")||hO(t))&&!t.includes("edge/"))return"Chrome";if(pO(t))return"Android";{const r=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===r?.length)return r[1]}return"Other"}function dO(e=Ze()){return/firefox\//i.test(e)}function zC(e=Ze()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function hO(e=Ze()){return/crios\//i.test(e)}function fO(e=Ze()){return/iemobile/i.test(e)}function pO(e=Ze()){return/android/i.test(e)}function gO(e=Ze()){return/blackberry/i.test(e)}function mO(e=Ze()){return/webos/i.test(e)}function Ah(e=Ze()){return/iphone|ipad|ipod/i.test(e)}function _O(e=Ze()){return Ah(e)||pO(e)||mO(e)||gO(e)||/windows phone/i.test(e)||fO(e)}function yO(e,t=[]){let n;switch(e){case"Browser":n=lO(Ze());break;case"Worker":n=`${lO(Ze())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Us}/${r}`}class rZ{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=o=>new Promise((s,a)=>{try{s(t(o))}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(t){var n=this;return g(function*(){if(n.auth.currentUser===t)return;const r=[];try{for(const i of n.queue)yield i(t),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const o of r)try{o()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:i.message})}})()}}class iZ{constructor(t,n,r){this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vO(this),this.idTokenSubscription=new vO(this),this.beforeStateQueue=new rZ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eO,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,n){var r=this;return n&&(this._popupRedirectResolver=Nr(n)),this._initializationPromise=this.queue(g(function*(){var i,o;if(!r._deleted&&(r.persistenceManager=yield Gs.create(r,t),!r._deleted)){if(null!==(i=r._popupRedirectResolver)&&void 0!==i&&i._shouldInitProactively)try{yield r._popupRedirectResolver._initialize(r)}catch{}yield r.initializeCurrentUser(n),r.lastNotifiedUid=(null===(o=r.currentUser)||void 0===o?void 0:o.uid)||null,!r._deleted&&(r._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var t=this;return g(function*(){if(t._deleted)return;const n=yield t.assertedPersistence.getCurrentUser();if(t.currentUser||n){if(t.currentUser&&n&&t.currentUser.uid===n.uid)return t._currentUser._assign(n),void(yield t.currentUser.getIdToken());yield t._updateCurrentUser(n,!0)}})()}initializeCurrentUser(t){var n=this;return g(function*(){var r;const i=yield n.assertedPersistence.getCurrentUser();let o=i,s=!1;if(t&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const a=null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId,c=o?._redirectEventId,u=yield n.tryRedirectSignIn(t);(!a||a===c)&&u?.user&&(o=u.user,s=!0)}if(!o)return n.directlySetCurrentUser(null);if(!o._redirectEventId){if(s)try{yield n.beforeStateQueue.runMiddleware(o)}catch(a){o=i,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(a))}return o?n.reloadAndSetCurrentUserOrClear(o):n.directlySetCurrentUser(null)}return D(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===o._redirectEventId?n.directlySetCurrentUser(o):n.reloadAndSetCurrentUserOrClear(o)})()}tryRedirectSignIn(t){var n=this;return g(function*(){let r=null;try{r=yield n._popupRedirectResolver._completeRedirectFn(n,t,!0)}catch{yield n._setRedirectUser(null)}return r})()}reloadAndSetCurrentUserOrClear(t){var n=this;return g(function*(){try{yield Kc(t)}catch(r){if("auth/network-request-failed"!==r.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(t)})()}useDeviceLanguage(){this.languageCode=function UX(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var t=this;return g(function*(){t._deleted=!0})()}updateCurrentUser(t){var n=this;return g(function*(){const r=t?Nt(t):null;return r&&D(r.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(r&&r._clone(n))})()}_updateCurrentUser(t){var n=this;return g(function*(r,i=!1){if(!n._deleted)return r&&D(n.tenantId===r.tenantId,n,"tenant-id-mismatch"),i||(yield n.beforeStateQueue.runMiddleware(r)),n.queue(g(function*(){yield n.directlySetCurrentUser(r),n.notifyAuthListeners()}))}).apply(this,arguments)}signOut(){var t=this;return g(function*(){return yield t.beforeStateQueue.runMiddleware(null),(t.redirectPersistenceManager||t._popupRedirectResolver)&&(yield t._setRedirectUser(null)),t._updateCurrentUser(null,!0)})()}setPersistence(t){var n=this;return this.queue(g(function*(){yield n.assertedPersistence.setPersistence(Nr(t))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new Xn("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}_setRedirectUser(t,n){var r=this;return g(function*(){const i=yield r.getOrInitRedirectPersistenceManager(n);return null===t?i.removeCurrentUser():i.setCurrentUser(t)})()}getOrInitRedirectPersistenceManager(t){var n=this;return g(function*(){if(!n.redirectPersistenceManager){const r=t&&Nr(t)||n._popupRedirectResolver;D(r,n,"argument-error"),n.redirectPersistenceManager=yield Gs.create(n,[Nr(r._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(t){var n=this;return g(function*(){var r,i;return n._isInitialized&&(yield n.queue(g(function*(){}))),(null===(r=n._currentUser)||void 0===r?void 0:r._redirectEventId)===t?n._currentUser:(null===(i=n.redirectUser)||void 0===i?void 0:i._redirectEventId)===t?n.redirectUser:null})()}_persistUserIfCurrent(t){var n=this;return g(function*(){if(t===n.currentUser)return n.queue(g(function*(){return n.directlySetCurrentUser(t)}))})()}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=null!==(n=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const o="function"==typeof n?n:n.next.bind(n),s=this._isInitialized?Promise.resolve():this._initializationPromise;return D(s,this,"internal-error"),s.then(()=>o(this.currentUser)),"function"==typeof n?t.addObserver(n,r,i):t.addObserver(n)}directlySetCurrentUser(t){var n=this;return g(function*(){n.currentUser&&n.currentUser!==t&&(n._currentUser._stopProactiveRefresh(),t&&n.isProactiveRefreshEnabled&&t._startProactiveRefresh()),n.currentUser=t,t?yield n.assertedPersistence.setCurrentUser(t):yield n.assertedPersistence.removeCurrentUser()})()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return D(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var t=this;return g(function*(){var n;const r={"X-Client-Version":t.clientVersion};t.app.options.appId&&(r["X-Firebase-gmpid"]=t.app.options.appId);const i=yield null===(n=t.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();return i&&(r["X-Firebase-Client"]=i),r})()}}function Wt(e){return Nt(e)}class vO{constructor(t){this.auth=t,this.observer=null,this.addObserver=function O7(e,t){const n=new F7(e,t);return n.subscribe.bind(n)}(n=>this.observer=n)}get next(){return D(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class Qc{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(t){return er("not implemented")}_linkToIdToken(t,n){return er("not implemented")}_getReauthenticationResolver(t){return er("not implemented")}}function IO(e,t){return WC.apply(this,arguments)}function WC(){return(WC=g(function*(e,t){return et(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function KC(){return(KC=g(function*(e,t){return kr(e,"POST","/v1/accounts:signInWithPassword",Ye(e,t))})).apply(this,arguments)}function eE(){return(eE=g(function*(e,t){return kr(e,"POST","/v1/accounts:signInWithEmailLink",Ye(e,t))})).apply(this,arguments)}function tE(){return(tE=g(function*(e,t){return kr(e,"POST","/v1/accounts:signInWithEmailLink",Ye(e,t))})).apply(this,arguments)}class Xc extends Qc{constructor(t,n,r,i=null){super("password",r),this._email=t,this._password=n,this._tenantId=i}static _fromEmailAndPassword(t,n){return new Xc(t,n,"password")}static _fromEmailAndCode(t,n,r=null){return new Xc(t,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n="string"==typeof t?JSON.parse(t):t;if(n?.email&&n?.password){if("password"===n.signInMethod)return this._fromEmailAndPassword(n.email,n.password);if("emailLink"===n.signInMethod)return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(t){var n=this;return g(function*(){switch(n.signInMethod){case"password":return function cZ(e,t){return KC.apply(this,arguments)}(t,{returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function fZ(e,t){return eE.apply(this,arguments)}(t,{email:n._email,oobCode:n._password});default:Gt(t,"internal-error")}})()}_linkToIdToken(t,n){var r=this;return g(function*(){switch(r.signInMethod){case"password":return IO(t,{idToken:n,returnSecureToken:!0,email:r._email,password:r._password});case"emailLink":return function pZ(e,t){return tE.apply(this,arguments)}(t,{idToken:n,email:r._email,oobCode:r._password});default:Gt(t,"internal-error")}})()}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}function Pr(e,t){return nE.apply(this,arguments)}function nE(){return(nE=g(function*(e,t){return kr(e,"POST","/v1/accounts:signInWithIdp",Ye(e,t))})).apply(this,arguments)}class eu{constructor(t){var n,r,i,o,s,a;const c=Lc(Vc(t)),u=null!==(n=c.apiKey)&&void 0!==n?n:null,l=null!==(r=c.oobCode)&&void 0!==r?r:null,d=function EZ(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);D(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=null!==(o=c.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(s=c.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(t){const n=function wZ(e){const t=Lc(Vc(e)).link,n=t?Lc(Vc(t)).deep_link_id:null,r=Lc(Vc(e)).deep_link_id;return(r?Lc(Vc(r)).link:null)||r||n||t||e}(t);try{return new eu(n)}catch{return null}}}let bO=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(n,r){return Xc._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){const i=eu.parseLink(r);return D(i,"argument-error"),Xc._fromEmailAndCode(n,i.code,i.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class Or{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}class IZ extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}function cE(){return(cE=g(function*(e,t){return kr(e,"POST","/v1/accounts:signUp",Ye(e,t))})).apply(this,arguments)}class _n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,n,r){return g(function*(i,o,s,a=!1){const c=yield to._fromIdTokenResponse(i,s,a),u=TO(s);return new _n({user:c,providerId:u,_tokenResponse:s,operationType:o})}).apply(this,arguments)}static _forOperation(t,n,r){return g(function*(){yield t._updateTokensIfNecessary(r,!0);const i=TO(r);return new _n({user:t,providerId:i,_tokenResponse:r,operationType:n})})()}}function TO(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Nh extends Tr{constructor(t,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Nh.prototype),this.customData={appName:t.name,tenantId:null!==(o=t.tenantId)&&void 0!==o?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new Nh(t,n,r,i)}}function SO(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(o=>{throw"auth/multi-factor-auth-required"===o.code?Nh._fromErrorAndOperation(e,o,t,r):o})}function hE(){return(hE=g(function*(e,t,n=!1){const r=yield xr(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return _n._forOperation(e,"link",r)})).apply(this,arguments)}function pE(){return(pE=g(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const o=yield xr(e,SO(r,i,t,e),n);D(o.idToken,r,"internal-error");const s=Th(o.idToken);D(s,r,"internal-error");const{sub:a}=s;return D(e.uid===a,r,"user-mismatch"),_n._forOperation(e,i,o)}catch(o){throw"auth/user-not-found"===o?.code&&Gt(r,"user-mismatch"),o}})).apply(this,arguments)}function RO(e,t){return gE.apply(this,arguments)}function gE(){return(gE=g(function*(e,t,n=!1){const r="signIn",i=yield SO(e,r,t),o=yield _n._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(o.user)),o})).apply(this,arguments)}function _E(){return(_E=g(function*(e,t){return RO(Wt(e),t)})).apply(this,arguments)}function RZ(e,t,n){return AE.apply(this,arguments)}function AE(){return(AE=g(function*(e,t,n){const r=Wt(e),i=yield function DO(e,t){return cE.apply(this,arguments)}(r,{returnSecureToken:!0,email:t,password:n}),o=yield _n._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(o.user),o})).apply(this,arguments)}function NZ(e,t,n){return function mE(e,t){return _E.apply(this,arguments)}(Nt(e),bO.credential(t,n))}function jZ(e){return Nt(e).signOut()}const Oh="__sak";class xO{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Oh,"1"),this.storage.removeItem(Oh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}const qZ=(()=>{class e extends xO{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function zZ(){const e=Ze();return zC(e)||Ah(e)}()&&function nZ(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=_O(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),o=this.localCache[r];i!==o&&n(r,o,i)}}onStorageEvent(n,r=!1){if(!n.key)return void this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});const i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const a=this.storage.getItem(i);if(n.newValue!==a)null!==n.newValue?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}const o=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);!function tZ(){return function A7(){const e=Ze();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}()||s===n.newValue||n.newValue===n.oldValue?o():setTimeout(o,10)}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(n,r){var i=()=>super._set,o=this;return g(function*(){yield i().call(o,n,r),o.localCache[n]=JSON.stringify(r)})()}_get(n){var r=()=>super._get,i=this;return g(function*(){const o=yield r().call(i,n);return i.localCache[n]=JSON.stringify(o),o})()}_remove(n){var r=()=>super._remove,i=this;return g(function*(){yield r().call(i,n),delete i.localCache[n]})()}}return e.type="LOCAL",e})(),PO=(()=>{class e extends xO{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return e.type="SESSION",e})();let YZ=(()=>{class e{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){const r=this.receivers.find(o=>o.isListeningto(n));if(r)return r;const i=new e(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){var r=this;return g(function*(){const i=n,{eventId:o,eventType:s,data:a}=i.data,c=r.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:s});const u=Array.from(c).map(function(){var d=g(function*(h){return h(i.origin,a)});return function(h){return d.apply(this,arguments)}}()),l=yield function KZ(e){return Promise.all(e.map(function(){var t=g(function*(n){try{return{fulfilled:!0,value:yield n}}catch(r){return{fulfilled:!1,reason:r}}});return function(n){return t.apply(this,arguments)}}()))}(u);i.ports[0].postMessage({status:"done",eventId:o,eventType:s,response:l})})()}_subscribe(n,r){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||0===this.handlersMap[n].size)&&delete this.handlersMap[n],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function BE(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class QZ{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,n){var r=this;return g(function*(i,o,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let c,u;return new Promise((l,d)=>{const h=BE("",20);a.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},s);u={messageChannel:a,onMessage(p){const m=p;if(m.data.eventId===h)switch(m.data.status){case"ack":clearTimeout(f),c=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),l(m.data.response);break;default:clearTimeout(f),clearTimeout(c),d(new Error("invalid_response"))}}},r.handlers.add(u),a.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:i,eventId:h,data:o},[a.port2])}).finally(()=>{u&&r.removeMessageHandler(u)})}).apply(this,arguments)}}function Qe(){return window}function HE(){return typeof Qe().WorkerGlobalScope<"u"&&"function"==typeof Qe().importScripts}function zE(){return(zE=g(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const OO="firebaseLocalStorageDb",Fh="firebaseLocalStorage",FO="fbase_key";class nu{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Lh(e,t){return e.transaction([Fh],t?"readwrite":"readonly").objectStore(Fh)}function GE(){const e=indexedDB.open(OO,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(Fh,{keyPath:FO})}catch(i){n(i)}}),e.addEventListener("success",g(function*(){const r=e.result;r.objectStoreNames.contains(Fh)?t(r):(r.close(),yield function nJ(){const e=indexedDB.deleteDatabase(OO);return new nu(e).toPromise()}(),t(yield GE()))}))})}function LO(e,t,n){return WE.apply(this,arguments)}function WE(){return(WE=g(function*(e,t,n){const r=Lh(e,!0).put({[FO]:t,value:n});return new nu(r).toPromise()})).apply(this,arguments)}function qE(){return(qE=g(function*(e,t){const n=Lh(e,!1).get(t),r=yield new nu(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function VO(e,t){const n=Lh(e,!0).delete(t);return new nu(n).toPromise()}const sJ=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var n=this;return g(function*(){return n.db||(n.db=yield GE()),n.db})()}_withRetries(n){var r=this;return g(function*(){let i=0;for(;;)try{const o=yield r._openDb();return yield n(o)}catch(o){if(i++>3)throw o;r.db&&(r.db.close(),r.db=void 0)}})()}initializeServiceWorkerMessaging(){var n=this;return g(function*(){return HE()?n.initializeReceiver():n.initializeSender()})()}initializeReceiver(){var n=this;return g(function*(){n.receiver=YZ._getInstance(function eJ(){return HE()?self:null}()),n.receiver._subscribe("keyChanged",function(){var r=g(function*(i,o){return{keyProcessed:(yield n._poll()).includes(o.key)}});return function(i,o){return r.apply(this,arguments)}}()),n.receiver._subscribe("ping",function(){var r=g(function*(i,o){return["keyChanged"]});return function(i,o){return r.apply(this,arguments)}}())})()}initializeSender(){var n=this;return g(function*(){var r,i;if(n.activeServiceWorker=yield function ZZ(){return zE.apply(this,arguments)}(),!n.activeServiceWorker)return;n.sender=new QZ(n.activeServiceWorker);const o=yield n.sender._send("ping",{},800);o&&null!==(r=o[0])&&void 0!==r&&r.fulfilled&&null!==(i=o[0])&&void 0!==i&&i.value.includes("keyChanged")&&(n.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(n){var r=this;return g(function*(){if(r.sender&&r.activeServiceWorker&&function JZ(){var e;return(null===(e=navigator?.serviceWorker)||void 0===e?void 0:e.controller)||null}()===r.activeServiceWorker)try{yield r.sender._send("keyChanged",{key:n},r.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return g(function*(){try{if(!indexedDB)return!1;const n=yield GE();return yield LO(n,Oh,"1"),yield VO(n,Oh),!0}catch{}return!1})()}_withPendingWrite(n){var r=this;return g(function*(){r.pendingWrites++;try{yield n()}finally{r.pendingWrites--}})()}_set(n,r){var i=this;return g(function*(){return i._withPendingWrite(g(function*(){return yield i._withRetries(o=>LO(o,n,r)),i.localCache[n]=r,i.notifyServiceWorker(n)}))})()}_get(n){var r=this;return g(function*(){const i=yield r._withRetries(o=>function rJ(e,t){return qE.apply(this,arguments)}(o,n));return r.localCache[n]=i,i})()}_remove(n){var r=this;return g(function*(){return r._withPendingWrite(g(function*(){return yield r._withRetries(i=>VO(i,n)),delete r.localCache[n],r.notifyServiceWorker(n)}))})()}_poll(){var n=this;return g(function*(){const r=yield n._withRetries(s=>{const a=Lh(s,!1).getAll();return new nu(a).toPromise()});if(!r)return[];if(0!==n.pendingWrites)return[];const i=[],o=new Set;for(const{fbase_key:s,value:a}of r)o.add(s),JSON.stringify(n.localCache[s])!==JSON.stringify(a)&&(n.notifyListeners(s,a),i.push(s));for(const s of Object.keys(n.localCache))n.localCache[s]&&!o.has(s)&&(n.notifyListeners(s,null),i.push(s));return i})()}notifyListeners(n,r){this.localCache[n]=r;const i=this.listeners[n];if(i)for(const o of Array.from(i))o(r)}startPolling(){var n=this;this.stopPolling(),this.pollTimer=setInterval(g(function*(){return n._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),0===this.listeners[n].size&&delete this.listeners[n]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function jO(e){return`__${e}${Math.floor(1e6*Math.random())}`}jO("rcb"),new Wc(3e4,6e4);class rw extends Qc{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Pr(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Pr(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Pr(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function IJ(e){return RO(e.auth,new rw(e),e.bypassAuthState)}function bJ(e){const{auth:t,user:n}=e;return D(n,t,"internal-error"),function MO(e,t){return pE.apply(this,arguments)}(n,new rw(e),e.bypassAuthState)}function DJ(e){return iw.apply(this,arguments)}function iw(){return(iw=g(function*(e){const{auth:t,user:n}=e;return D(n,t,"internal-error"),function dE(e,t){return hE.apply(this,arguments)}(n,new rw(e),e.bypassAuthState)})).apply(this,arguments)}class TJ{constructor(t,n,r,i,o=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){var t=this;return new Promise(function(){var n=g(function*(r,i){t.pendingPromise={resolve:r,reject:i};try{t.eventManager=yield t.resolver._initialize(t.auth),yield t.onExecution(),t.eventManager.registerConsumer(t)}catch(o){t.reject(o)}});return function(r,i){return n.apply(this,arguments)}}())}onAuthEvent(t){var n=this;return g(function*(){const{urlResponse:r,sessionId:i,postBody:o,tenantId:s,error:a,type:c}=t;if(a)return void n.reject(a);const u={auth:n.auth,requestUri:r,sessionId:i,tenantId:s||void 0,postBody:o||void 0,user:n.user,bypassAuthState:n.bypassAuthState};try{n.resolve(yield n.getIdpTask(c)(u))}catch(l){n.reject(l)}})()}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return IJ;case"linkViaPopup":case"linkViaRedirect":return DJ;case"reauthViaPopup":case"reauthViaRedirect":return bJ;default:Gt(this.auth,"internal-error")}}resolve(t){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}new Wc(2e3,1e4);const SJ="pendingRedirect",ru=new Map;class AJ extends TJ{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){var t=()=>super.execute,n=this;return g(function*(){let r=ru.get(n.auth._key());if(!r){try{const o=(yield function MJ(e,t){return uw.apply(this,arguments)}(n.resolver,n.auth))?yield t().call(n):null;r=()=>Promise.resolve(o)}catch(i){r=()=>Promise.reject(i)}ru.set(n.auth._key(),r)}return n.bypassAuthState||ru.set(n.auth._key(),()=>Promise.resolve(null)),r()})()}onAuthEvent(t){var n=()=>super.onAuthEvent,r=this;return g(function*(){if("signInViaRedirect"===t.type)return n().call(r,t);if("unknown"!==t.type){if(t.eventId){const i=yield r.auth._redirectUserForId(t.eventId);if(i)return r.user=i,n().call(r,t);r.resolve(null)}}else r.resolve(null)})()}onExecution(){return g(function*(){})()}cleanUp(){}}function uw(){return(uw=g(function*(e,t){const n=function HO(e){return Sh(SJ,e.config.apiKey,e.name)}(t),r=function BO(e){return Nr(e._redirectPersistence)}(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function RJ(e,t){ru.set(e._key(),t)}function zO(e,t){return mw.apply(this,arguments)}function mw(){return(mw=g(function*(e,t,n=!1){const r=Wt(e),i=function ro(e,t){return t?Nr(t):(D(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(r,t),s=yield new AJ(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})).apply(this,arguments)}class OJ{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!function FJ(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qO(e);default:return!1}}(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!qO(t)){const i=(null===(r=t.error.code)||void 0===r?void 0:r.split("auth/")[1])||"internal-error";n.onError(Jn(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=null===n.eventId||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(WO(t))}saveEventToCache(t){this.cachedEventUids.add(WO(t)),this.lastProcessedEventTime=Date.now()}}function WO(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function qO({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===t?.code}function yw(){return(yw=g(function*(e,t={}){return et(e,"GET","/v1/projects",t)})).apply(this,arguments)}const VJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UJ=/^https?/;function vw(){return vw=g(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield function LJ(e){return yw.apply(this,arguments)}(e);for(const n of t)try{if($J(n))return}catch{}Gt(e,"unauthorized-domain")}),vw.apply(this,arguments)}function $J(e){const t=Gc(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!UJ.test(n))return!1;if(VJ.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const BJ=new Wc(3e4,6e4);function KO(){const e=Qe().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Uh=null;function zJ(e){return Uh=Uh||function HJ(e){return new Promise((t,n)=>{var r,i,o;function s(){KO(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{KO(),n(Jn(e,"network-request-failed"))},timeout:BJ.get()})}if(null!==(i=null===(r=Qe().gapi)||void 0===r?void 0:r.iframes)&&void 0!==i&&i.Iframe)t(gapi.iframes.getContext());else{if(null===(o=Qe().gapi)||void 0===o||!o.load){const a=jO("iframefcb");return Qe()[a]=()=>{gapi.load?s():n(Jn(e,"network-request-failed"))},function UO(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const o=Jn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",function lJ(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}(`https://apis.google.com/js/api.js?onload=${a}`).catch(c=>n(c))}s()}}).catch(t=>{throw Uh=null,t})}(e),Uh}const GJ=new Wc(5e3,15e3),WJ="__/auth/iframe",qJ="emulator/auth/iframe",KJ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YJ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QJ(e){const t=e.config;D(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?NC(t,qJ):`https://${e.config.authDomain}/${WJ}`,r={apiKey:t.apiKey,appName:e.name,v:Us},i=YJ.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Os(r).slice(1)}`}function Cw(){return Cw=g(function*(e){const t=yield zJ(e),n=Qe().gapi;return D(n,e,"internal-error"),t.open({where:document.body,url:QJ(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KJ,dontclear:!0},r=>new Promise(function(){var i=g(function*(o,s){yield r.restyle({setHideOnLeave:!1});const a=Jn(e,"network-request-failed"),c=Qe().setTimeout(()=>{s(a)},GJ.get());function u(){Qe().clearTimeout(c),o(r)}r.ping(u).then(u,()=>{s(a)})});return function(o,s){return i.apply(this,arguments)}}()))}),Cw.apply(this,arguments)}const ZJ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class YO{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QO(e,t,n,r,i,o){D(e.config.authDomain,e,"auth-domain-config-required"),D(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Us,eventId:i};if(t instanceof Or){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",ly(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,u]of Object.entries(o||{}))s[c]=u}if(t instanceof IZ){const c=t.getScopes().filter(u=>""!==u);c.length>0&&(s.scopes=c.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const c of Object.keys(a))void 0===a[c]&&delete a[c];return`${function aee({config:e}){return e.emulator?NC(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${Os(a).slice(1)}`}const Ew="webStorageSupport",uee=class cee{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=PO,this._completeRedirectFn=zO,this._overrideRedirectResult=RJ}_openPopup(t,n,r,i){var o=this;return g(function*(){var s;ui(null===(s=o.eventManagers[t._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const a=QO(t,n,r,Gc(),i);return function ree(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},ZJ),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Ze().toLowerCase();n&&(a=hO(u)?"_blank":n),dO(u)&&(t=t||"http://localhost",c.scrollbars="yes");const l=Object.entries(c).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if(function eZ(e=Ze()){var t;return Ah(e)&&!(null===(t=window.navigator)||void 0===t||!t.standalone)}(u)&&"_self"!==a)return function iee(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new YO(null);const d=window.open(t||"",a,l);D(d,e,"popup-blocked");try{d.focus()}catch{}return new YO(d)}(t,a,BE())})()}_openRedirect(t,n,r,i){var o=this;return g(function*(){return yield o._originValidation(t),function XZ(e){Qe().location.href=e}(QO(t,n,r,Gc(),i)),new Promise(()=>{})})()}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ui(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(t){var n=this;return g(function*(){const r=yield function XJ(e){return Cw.apply(this,arguments)}(t),i=new OJ(t);return r.register("authEvent",o=>(D(o?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),n.eventManagers[t._key()]={manager:i},n.iframes[t._key()]=r,i})()}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Ew,{type:Ew},i=>{var o;const s=null===(o=i?.[0])||void 0===o?void 0:o[Ew];void 0!==s&&n(!!s),Gt(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=function jJ(e){return vw.apply(this,arguments)}(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return _O()||zC()||Ah()}};var ZO="@firebase/auth";class dee{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}getToken(t){var n=this;return g(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(t)}:null})()}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{var i;t((null===(i=r)||void 0===i?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){D(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pee(e=by()){const t=Vs(e,"auth");return t.isInitialized()?t.getImmediate():function FX(e,t){const n=Vs(e,"auth");if(n.isInitialized()){const i=n.getImmediate();if(oh(n.getOptions(),t??{}))return i;Gt(i,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:uee,persistence:[sJ,qZ,PO]})}!function fee(e){kt(new yt("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),{apiKey:o,authDomain:s}=r.options;return((a,c)=>{D(o&&!o.includes(":"),"invalid-api-key",{appName:a.name}),D(!s?.includes(":"),"argument-error",{appName:a.name});const u={apiKey:o,authDomain:s,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yO(e)},l=new iZ(a,c,u);return function LX(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Nr);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(l,n),l})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),kt(new yt("auth-internal",t=>{const n=Wt(t.getProvider("auth").getImmediate());return new dee(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(ZO,"0.20.0",function hee(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(e)),Fe(ZO,"0.20.0","esm2017")}("Browser");class jh{constructor(t){return t}}class t1{constructor(){return cC("auth")}}const ww=new S("angularfire2.auth-instances");function mee(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new jh(r)}}const _ee={provide:t1,deps:[[new Tt,ww]]},yee={provide:jh,useFactory:function gee(e,t){const n=aC("auth",e,t);return n&&new jh(n)},deps:[[new Tt,ww],Hs]};let vee=(()=>{class e{constructor(){Fe("angularfire",mh.full,"auth")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Ct({providers:[yee,_ee]}),e})();function Cee(e,...t){return{ngModule:vee,providers:[{provide:ww,useFactory:mee(e),multi:!0,deps:[ue,pt,uC,lC,[new Tt,SC],...t]}]}}const Eee=mn(RZ,!0),wee=mn(pee,!0),Iee=mn(NZ,!0),bee=mn(jZ,!0);let $h=(()=>{class e{constructor(n,r){this.auth=n,this.router=r,this.currentUserSubject=new Yt(null),this.authState$=this.currentUserSubject.asObservable(),this.monitorAuthState()}signUp(n,r){var i=this;return g(function*(){return(yield Eee(i.auth,n,r)).user})()}signIn(n,r){var i=this;return g(function*(){return(yield Iee(i.auth,n,r)).user})()}signOut(){var n=this;return g(function*(){return bee(n.auth)})()}getCurrentUser(){return this.auth.currentUser}monitorAuthState(){!function UZ(e,t,n,r){Nt(e).onAuthStateChanged(t,n,r)}(this.auth,n=>{this.currentUserSubject.next(n),n?(console.log("Utente loggato:",n.email),this.router.navigate(["/home"])):(console.log("Utente non loggato, redirect a login"),this.router.navigate(["/login"]))})}static{this.\u0275fac=function(r){return new(r||e)(x(jh),x(mt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Dee(e,t){1&e&&(T(0,"div"),ie(1,"Email obbligatoria."),b())}function Tee(e,t){1&e&&(T(0,"div"),ie(1,"Formato email non valido."),b())}function See(e,t){if(1&e&&(T(0,"div",15),O(1,Dee,2,0,"div",16),O(2,Tee,2,0,"div",16),b()),2&e){const n=me();A(1),R("ngIf",null==n.email||null==n.email.errors?null:n.email.errors.required),A(1),R("ngIf",null==n.email||null==n.email.errors?null:n.email.errors.email)}}function Aee(e,t){1&e&&(T(0,"div"),ie(1,"Password obbligatoria."),b())}function Mee(e,t){if(1&e&&(T(0,"div"),ie(1),b()),2&e){const n=me(2);A(1),hs(" Minimo ",null==n.password||null==n.password.errors?null:n.password.errors.minlength.requiredLength," caratteri. ")}}function Ree(e,t){if(1&e&&(T(0,"div",15),O(1,Aee,2,0,"div",16),O(2,Mee,2,1,"div",16),b()),2&e){const n=me();A(1),R("ngIf",null==n.password||null==n.password.errors?null:n.password.errors.required),A(1),R("ngIf",null==n.password||null==n.password.errors?null:n.password.errors.minlength)}}function Nee(e,t){if(1&e&&(T(0,"div",17),ie(1),b()),2&e){const n=me();A(1),hs(" ",n.errorMessage," ")}}let kee=(()=>{class e{constructor(n,r,i){this.fb=n,this.authService=r,this.router=i,this.errorMessage="",this.user$=this.authService.authState$}ngOnInit(){this.loginForm=this.fb.group({email:["",[Hd.required,Hd.email]],password:["",[Hd.required,Hd.minLength(6)]]})}login(){var n=this;return g(function*(){if(n.loginForm.invalid)return;const{email:r,password:i}=n.loginForm.value;try{yield n.authService.signIn(r,i),n.errorMessage="",n.loginForm.reset()}catch(o){n.errorMessage=o.message}})()}register(){var n=this;return g(function*(){if(n.loginForm.invalid)return;const{email:r,password:i}=n.loginForm.value;try{yield n.authService.signUp(r,i),n.errorMessage="",n.loginForm.reset()}catch(o){n.errorMessage=o.message}})()}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}static{this.\u0275fac=function(r){return new(r||e)(E(mx),E($h),E(mt))}}static{this.\u0275cmp=Br({type:e,selectors:[["app-login"]],decls:23,vars:6,consts:[[1,"container-fluid"],[1,"container",2,"max-width","700px"],[1,"d-flex","justify-content-center","text-light","ciao"],[1,"p-5","text-light"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","email",1,"form-label"],["type","email","id","email","formControlName","email",1,"form-control"],["class","text-danger small mt-1",4,"ngIf"],["for","password",1,"form-label"],["type","password","id","password","formControlName","password",1,"form-control"],["class","alert alert-danger py-2",4,"ngIf"],[1,"d-flex","justify-content-between"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[1,"text-danger","small","mt-1"],[4,"ngIf"],[1,"alert","alert-danger","py-2"]],template:function(r,i){1&r&&(T(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),ie(4,"Ciao!"),b()(),T(5,"div",3)(6,"form",4),Ue("ngSubmit",function(){return i.login()}),T(7,"div",5)(8,"label",6),ie(9,"Email"),b(),K(10,"input",7),O(11,See,3,2,"div",8),b(),T(12,"div",5)(13,"label",9),ie(14,"Password"),b(),K(15,"input",10),O(16,Ree,3,2,"div",8),b(),O(17,Nee,2,1,"div",11),T(18,"div",12)(19,"button",13),ie(20," Login "),b(),T(21,"button",14),Ue("click",function(){return i.register()}),ie(22," Registrati "),b()()()()()()),2&r&&(A(6),R("formGroup",i.loginForm),A(5),R("ngIf",(null==i.email?null:i.email.invalid)&&((null==i.email?null:i.email.dirty)||(null==i.email?null:i.email.touched))),A(5),R("ngIf",(null==i.password?null:i.password.invalid)&&((null==i.password?null:i.password.dirty)||(null==i.password?null:i.password.touched))),A(1),R("ngIf",i.errorMessage),A(2),R("disabled",i.loginForm.invalid),A(2),R("disabled",i.loginForm.invalid))},dependencies:[Xm,Yk,Sc,$_,Fk,eh,ty],styles:[".container-fluid[_ngcontent-%COMP%]{background:linear-gradient(180deg,#A80077 0%,#7F9F2D 100%);height:100vh;width:100%;margin:0}.ciao[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:100px;transform:rotate(-10deg)}"]})}}return e})();function xee(e,t){if(1&e&&(T(0,"div",3)(1,"div",4),K(2,"div"),b()()),2&e){const n=t.$implicit;R("routerLink",n.link),A(2),kA(n.name)}}let n1=(()=>{class e{constructor(){this.iconList=[]}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Br({type:e,selectors:[["app-icon-link-list"]],inputs:{iconList:"iconList"},decls:3,vars:1,consts:[[1,"d-flex","justify-content-center"],[1,"d-flex","flex-wrap"],["class","card link-card",3,"routerLink",4,"ngFor","ngForOf"],[1,"card","link-card",3,"routerLink"],[1,"card-body"]],template:function(r,i){1&r&&(T(0,"div",0)(1,"div",1),O(2,xee,3,3,"div",2),b()()),2&r&&(A(2),R("ngForOf",i.iconList))},dependencies:[Qm,Bd],styles:[".link-card[_ngcontent-%COMP%], .link-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background:transparent}.link-card[_ngcontent-%COMP%]{margin:15px;padding:30px;cursor:pointer;transition:.2s}.link-card[_ngcontent-%COMP%]:hover{background-color:#ffffff1a;transition:.2s}.gamepad[_ngcontent-%COMP%], .dos-icon[_ngcontent-%COMP%]{background-position:center;background-repeat:no-repeat;background-size:contain;width:90px;height:90px}.gamepad[_ngcontent-%COMP%]{background-image:url(gamepad.a5df2d2502607b4d.svg)}.dos-icon[_ngcontent-%COMP%]{background-image:url(dos_icon.e116e5fa792768cd.svg)}"]})}}return e})();const Pee=function(){return{name:"gamepad",link:"/games"}},Oee=function(e){return[e]};let Fee=(()=>{class e{constructor(n){this.authService=n,this.user$=this.authService.authState$}logout(){var n=this;return g(function*(){yield n.authService.signOut()})()}static{this.\u0275fac=function(r){return new(r||e)(E($h))}}static{this.\u0275cmp=Br({type:e,selectors:[["app-home"]],decls:5,vars:4,consts:[[1,"container-fluid"],[1,"d-flex","justify-content-end"],[1,"btn","btn-outline-danger",3,"click"],[3,"iconList"]],template:function(r,i){1&r&&(T(0,"div",0)(1,"div",1)(2,"button",2),Ue("click",function(){return i.logout()}),ie(3,"Logout"),b()(),K(4,"app-icon-link-list",3),b()),2&r&&(A(4),R("iconList",gs(2,Oee,am(1,Pee))))},dependencies:[n1]})}}return e})(),Iw=(()=>{class e{constructor(n,r){this.authService=n,this.router=r}canActivate(){return this.authService.authState$.pipe(ge(n=>!!n||this.router.createUrlTree(["/login"])))}static{this.\u0275fac=function(r){return new(r||e)(x($h),x(mt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();const Lee=function(){return{name:"dos-icon",link:"/dos"}},Vee=function(e){return[e]};let Uee=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Br({type:e,selectors:[["app-games"]],decls:2,vars:4,consts:[[1,"container-fluid"],[3,"iconList"]],template:function(r,i){1&r&&(T(0,"div",0),K(1,"app-icon-link-list",1),b()),2&r&&(A(1),R("iconList",gs(2,Vee,am(1,Lee))))},dependencies:[n1]})}}return e})();const r1="@firebase/database";let bw="";class $ee{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,n){null==n?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ke(n))}get(t){const n=this.domStorage_.getItem(this.prefixedName_(t));return null==n?null:Fc(n)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class Bee{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,n){null==n?delete this.cache_[t]:this.cache_[t]=n}get(t){return Zn(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const s1=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new $ee(t)}}catch{}return new Bee},io=s1("localStorage"),Dw=s1("sessionStorage"),qs=new Ls("@firebase/database"),a1=function(){let e=1;return function(){return e++}}(),c1=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const o=i-55296;r++,I(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new P7;n.update(t);const r=n.digest();return th.encodeByteArray(r)},iu=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=iu.apply(null,r):t+="object"==typeof r?Ke(r):r,t+=" "}return t};let oo=null,u1=!0;const tt=function(...e){if(!0===u1&&(u1=!1,null===oo&&!0===Dw.get("logging_enabled")&&function(e,t){I(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(qs.logLevel=_e.VERBOSE,oo=qs.log.bind(qs),t&&Dw.set("logging_enabled",!0)):"function"==typeof e?oo=e:(oo=null,Dw.remove("logging_enabled"))}(!0)),oo){const t=iu.apply(null,e);oo(t)}},ou=function(e){return function(...t){tt(e,...t)}},Tw=function(...e){const t="FIREBASE INTERNAL ERROR: "+iu(...e);qs.error(t)},tr=function(...e){const t=`FIREBASE FATAL ERROR: ${iu(...e)}`;throw qs.error(t),new Error(t)},vt=function(...e){const t="FIREBASE WARNING: "+iu(...e);qs.warn(t)},Bh=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Fr="[MIN_NAME]",nr="[MAX_NAME]",so=function(e,t){if(e===t)return 0;if(e===Fr||t===nr)return-1;if(t===Fr||e===nr)return 1;{const n=Hh(e),r=Hh(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Gee=function(e,t){return e===t?0:e<t?-1:1},su=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ke(t))},Sw=function(e){if("object"!=typeof e||null===e)return Ke(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=Ke(t[r]),n+=":",n+=Sw(e[t[r]]);return n+="}",n},d1=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function nt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const h1=function(e){I(!Bh(e),"Invalid JSON number");const r=1023;let i,o,s,a,c;0===e?(o=0,s=0,i=1/e==-1/0?1:0):(i=e<0,(e=Math.abs(e))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(e)/Math.LN2),r),o=a+r,s=Math.round(e*Math.pow(2,52-a)-Math.pow(2,52))):(o=0,s=Math.round(e/Math.pow(2,-1074))));const u=[];for(c=52;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=11;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();const l=u.join("");let d="";for(c=0;c<64;c+=8){let h=parseInt(l.substr(c,8),2).toString(16);1===h.length&&(h="0"+h),d+=h}return d.toLowerCase()},Yee=new RegExp("^-?(0*)\\d{1,10}$"),Hh=function(e){if(Yee.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ks=function(e){try{e()}catch(t){setTimeout(()=>{throw vt("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},au=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class Xee{constructor(t,n){this.appName_=t,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(r=>r.addTokenListener(t))}notifyForInvalidToken(){vt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Zee{constructor(t,n,r){this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(n=>n&&"auth/token-not-initialized"===n.code?(tt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(n,r):n(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(n=>n.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(n=>n.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vt(t)}}let cu=(()=>{class e{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const y1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,E1="websocket",w1="long_polling";class Rw{constructor(t,n,r,i,o=!1,s="",a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=io.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&io.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function I1(e,t,n){let r;if(I("string"==typeof t,"typeof type must == string"),I("object"==typeof n,"typeof params must == object"),t===E1)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==w1)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function Jee(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return nt(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}class ete{constructor(){this.counters_={}}incrementCounter(t,n=1){Zn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n}get(){return D7(this.counters_)}}const Nw={},kw={};function xw(e){const t=e.toString();return Nw[t]||(Nw[t]=new ete),Nw[t]}class nte{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,n){for(this.pendingResponses[t]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ks(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class di{constructor(t,n,r,i,o,s,a){this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ou(t),this.stats_=xw(n),this.urlFn=c=>(this.appCheckToken&&(c.ac=this.appCheckToken),I1(n,w1,c))}open(t,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new nte(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if("complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Pw((...o)=>{const[s,a,c,u,l]=o;if(this.incrementIncomingBytes_(o),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===s)this.id=a,this.password=c;else{if("close"!==s)throw new Error("Unrecognized command received: "+s);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...o)=>{const[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&y1.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){di.forceAllow_=!0}static forceDisallow(){di.forceDisallow_=!0}static isAvailable(){return!(!di.forceAllow_&&(di.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const n=Ke(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=yx(n),i=d1(r,1840);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(t,n){this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=t,r.pw=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const n=Ke(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Pw{constructor(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=a1(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=Pw.createIFrame_();let o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(o='<script>document.domain="'+document.domain+'";<\/script>');const s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){tt("frame writing exception"),a.stack&&tt(a.stack),tt(a)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||tt("No IE domain setting required")}catch{const r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let n=this.urlFn(t),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const s=this.pendingSegs.shift();r=r+"&seg"+i+"="+s.seg+"&ts"+i+"="+s.ts+"&d"+i+"="+s.d,i++}return n+=r,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(t,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(i),r()})}addTag(t,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{tt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Gh=null;typeof MozWebSocket<"u"?Gh=MozWebSocket:typeof WebSocket<"u"&&(Gh=WebSocket);let Ys=(()=>{class e{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ou(this.connId),this.stats_=xw(r),this.connURL=e.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){const a={v:"5"};return typeof location<"u"&&location.hostname&&y1.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),o&&(a.ac=o),s&&(a.p=s),I1(n,E1,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,io.set("previous_websocket_failure",!0);try{let i;0,this.mySock=new Gh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const o=i.message||i.data;return o&&this.log_(o),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&null!==Gh&&!e.forceDisallow_}static previouslyFailed(){return io.isInMemoryStorage||!0===io.get("previous_websocket_failure")}markConnectionHealthy(){io.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=Fc(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(I(null===this.frames,"We already have a frame buffer"),n.length<=6){const r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();const r=Ke(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=d1(r,16384);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})(),R1=(()=>{class e{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[di,Ys]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const r=Ys&&Ys.isAvailable();let i=r&&!Ys.previouslyFailed();if(n.webSocketOnly&&(r||vt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ys];else{const o=this.transports_=[];for(const s of e.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);e.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return e.globalTransportInitialized_=!1,e})();class L1{constructor(t,n,r,i,o,s,a,c,u,l){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ou("c:"+this.id+":"),this.transportManager_=new R1(n),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=au(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return n=>{t===this.conn_?this.onConnectionLost_(n):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return n=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(n):t===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const n=t.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const n=su("t",t),r=su("d",t);if("c"===n)this.onSecondaryControl_(r);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const n=su("t",t),r=su("d",t);"c"===n?this.onControl_(r):"d"===n&&this.onDataMessage_(r)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const n=su("t",t);if("d"in t){const r=t.d;if("h"===n)this.onHandshake_(r);else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(r):"r"===n?this.onReset_(r):"e"===n?Tw("Server Error: "+r):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Tw("Unknown control packet command: "+n)}}onHandshake_(t){const n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==r&&vt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),au(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,n){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):au(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(io.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class V1{put(t,n,r,i){}merge(t,n,r,i){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,n,r){}onDisconnectMerge(t,n,r){}onDisconnectCancel(t,n){}reportStats(t){}}class U1{constructor(t){this.allowedEvents_=t,this.listeners_={},I(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...n){if(Array.isArray(this.listeners_[t])){const r=[...this.listeners_[t]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});const i=this.getInitialEvent(t);i&&n.apply(r,i)}off(t,n,r){this.validateEventType_(t);const i=this.listeners_[t]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context))return void i.splice(o,1)}validateEventType_(t){I(this.allowedEvents_.find(n=>n===t),"Unknown event: "+t)}}class Wh extends U1{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ay()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Wh}getInitialEvent(t){return I("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class le{constructor(t,n){if(void 0===n){this.pieces_=t.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}toString(){let t="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(t+="/"+this.pieces_[n]);return t||"/"}}function oe(){return new le("")}function Q(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function hi(e){return e.pieces_.length-e.pieceNum_}function ve(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new le(e.pieces_,t)}function Fw(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function uu(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function B1(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new le(t,0)}function Re(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof le)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const r=t.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new le(n,0)}function X(e){return e.pieceNum_>=e.pieces_.length}function Pt(e,t){const n=Q(e),r=Q(t);if(null===n)return t;if(n===r)return Pt(ve(e),ve(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Lw(e,t){if(hi(e)!==hi(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function yn(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(hi(e)>hi(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Dte{constructor(t,n){this.errorPrefix_=n,this.parts_=uu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=sh(this.parts_[r]);H1(this)}}function H1(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ao(e))}function ao(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Vw extends U1{constructor(){let t,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[t];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Vw}getInitialEvent(t){return I("visible"===t,"Unknown event type: "+t),[this.visible_]}}const lu=1e3;let Kh,co=(()=>{class e extends V1{constructor(n,r,i,o,s,a,c,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=e.nextPersistentConnectionId_++,this.log_=ou("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lu,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Vw.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&Wh.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){const o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(Ke(s)),I(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();const r=new xs,i={p:n._path.toString(),q:n._queryObject},o={action:"g",request:i,onComplete:a=>{const c=a.d;"ok"===a.s?(this.onDataUpdate_(i.p,c,!1,null),r.resolve(c)):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const a=this.outstandingGets_[s];void 0===a||o!==a||(delete this.outstandingGets_[s],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+s+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();const s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),I(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");const c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){const r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){const r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);const s={p:i};n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest("q",s,c=>{const u=c.d,l=c.s;e.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),"ok"!==l&&this.removeListen_(i,o),n.onComplete&&n.onComplete(l,u))})}static warnOnListenWarnings_(n,r){if(n&&"object"==typeof n&&Zn(n,"w")){const i=Ps(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();vt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||function(e){const t=rh(e).claims;return"object"==typeof t&&!0===t.admin}(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,r=function(e){const n=rh(e).claims;return!!n&&"object"==typeof n&&n.hasOwnProperty("iat")}(n)?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{const s=o.s,a=o.d||"error";this.authToken_===n&&("ok"===s?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const r=n.s,i=n.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){const i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),I(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);const s={p:n};o&&(s.q=i,s.t=o),this.sendRequest("n",s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){const s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();const a={p:r,d:i};void 0!==s&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(n){const r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){const r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Ke(n));const r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),"d"===n?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===n?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===n?this.onListenRevoked_(r.p,r.q):"ac"===n?this.onAuthRevoked_(r.s,r.d):"apc"===n?this.onAppCheckRevoked_(r.s,r.d):"sd"===n?this.onSecurityDebugPacket_(r):Tw("Unrecognized action received from server: "+Ke(n)+"\nAre you using the latest client?")}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){I(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=lu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return g(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const r=n.onDataMessage_.bind(n),i=n.onReady_.bind(n),o=n.onRealtimeDisconnect_.bind(n),s=n.id+":"+e.nextConnectionId_++,a=n.lastSessionId;let c=!1,u=null;const l=function(){u?u.close():(c=!0,o())};n.realtime_={close:l,sendRequest:function(f){I(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(f)}};const h=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[f,p]=yield Promise.all([n.authTokenProvider_.getToken(h),n.appCheckTokenProvider_.getToken(h)]);c?tt("getToken() completed but was canceled"):(tt("getToken() completed. Creating connection."),n.authToken_=f&&f.accessToken,n.appCheckToken_=p&&p.token,u=new L1(s,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,r,i,o,m=>{vt(m+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},a))}catch(f){n.log_("Failed to get token: "+f),c||(n.repoInfo_.nodeAdmin&&vt(f),l())}}})()}interrupt(n){tt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){tt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],ly(this.interruptReasons_)&&(this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const r=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;i=r?r.map(s=>Sw(s)).join("$"):"default";const o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){const i=new le(n).toString();let o;if(this.listens.has(i)){const s=this.listens.get(i);o=s.get(r),s.delete(r),0===s.size&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){tt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){tt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let r="js";n["sdk."+r+"."+bw.replace(/\./g,"-")]=1,ay()?n["framework.cordova"]=1:Cx()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=Wh.getInstance().currentlyOnline();return ly(this.interruptReasons_)&&n}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class Z{constructor(t,n){this.name=t,this.node=n}static Wrap(t,n){return new Z(t,n)}}class qh{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,n){const r=new Z(Fr,t),i=new Z(Fr,n);return 0!==this.compare(r,i)}minPost(){return Z.MIN}}class W1 extends qh{static get __EMPTY_NODE(){return Kh}static set __EMPTY_NODE(t){Kh=t}compare(t,n){return so(t.name,n.name)}isDefinedOn(t){throw ks("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,n){return!1}minPost(){return Z.MIN}maxPost(){return new Z(nr,Kh)}makePost(t,n){return I("string"==typeof t,"KeyIndex indexValue must always be a string."),new Z(t,Kh)}toString(){return".key"}}const rr=new W1;class Yh{constructor(t,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.isReverse_?t.left:t.right;else{if(0===s){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,t=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let jw,kn=(()=>{class e{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??e.RED,this.left=o??qt.EMPTY_NODE,this.right=s??qt.EMPTY_NODE}copy(n,r,i,o,s){return new e(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this;const s=i(n,o.key);return o=s<0?o.copy(null,null,null,o.left.insert(n,r,i),null):0===s?o.copy(null,r,null,null,null):o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return qt.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(n,i.key)){if(i.right.isEmpty())return qt.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class qt{constructor(t,n=qt.EMPTY_NODE){this.comparator_=t,this.root_=n}insert(t,n){return new qt(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,kn.BLACK,null,null))}remove(t){return new qt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,kn.BLACK,null,null))}get(t){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(t){let n,r=this.root_,i=null;for(;!r.isEmpty();){if(n=this.comparator_(t,r.key),0===n){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}n<0?r=r.left:n>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new Yh(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,n){return new Yh(this.root_,t,this.comparator_,!1,n)}getReverseIteratorFrom(t,n){return new Yh(this.root_,t,this.comparator_,!0,n)}getReverseIterator(t){return new Yh(this.root_,null,this.comparator_,!0,t)}}function Pte(e,t){return so(e.name,t.name)}function Uw(e,t){return so(e,t)}qt.EMPTY_NODE=new class xte{copy(t,n,r,i,o){return this}insert(t,n,r){return new kn(t,n,null)}remove(t,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const q1=function(e){return"number"==typeof e?"number:"+h1(e):"string:"+e},K1=function(e){if(e.isLeafNode()){const t=e.val();I("string"==typeof t||"number"==typeof t||"object"==typeof t&&Zn(t,".sv"),"Priority must be a string or number.")}else I(e===jw||e.isEmpty(),"priority of unexpected type.");I(e===jw||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Y1,Q1,X1,Qs=(()=>{class e{constructor(n,r=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,I(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),K1(this.priorityNode_)}static set __childrenNodeConstructor(n){Y1=n}static get __childrenNodeConstructor(){return Y1}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new e(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return X(n)?this:".priority"===Q(n)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return".priority"===n?this.updatePriority(r):r.isEmpty()&&".priority"!==n?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){const i=Q(n);return null===i?r:r.isEmpty()&&".priority"!==i?this:(I(".priority"!==i||1===hi(n),".priority must be the last token in a path"),this.updateImmediateChild(i,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(ve(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+q1(this.priorityNode_.val())+":");const r=typeof this.value_;n+=r+":",n+="number"===r?h1(this.value_):this.value_,this.lazyHash_=c1(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===e.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof e.__childrenNodeConstructor?-1:(I(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const r=typeof n.value_,i=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(r),s=e.VALUE_TYPE_ORDER.indexOf(i);return I(o>=0,"Unknown leaf type: "+r),I(s>=0,"Unknown leaf type: "+i),o===s?"object"===i?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const De=new class Vte extends qh{compare(t,n){const r=t.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return 0===o?so(t.name,n.name):o}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,n){return!t.getPriority().equals(n.getPriority())}minPost(){return Z.MIN}maxPost(){return new Z(nr,new Qs("[PRIORITY-POST]",X1))}makePost(t,n){const r=Q1(t);return new Z(n,new Qs("[PRIORITY-POST]",r))}toString(){return".priority"}},Ute=Math.log(2);class jte{constructor(t){this.count=parseInt(Math.log(t+1)/Ute,10),this.current_=this.count-1;const i=(o=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&i}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const Qh=function(e,t,n,r){e.sort(t);const i=function(c,u){const l=u-c;let d,h;if(0===l)return null;if(1===l)return d=e[c],h=n?n(d):d,new kn(h,d.node,kn.BLACK,null,null);{const f=parseInt(l/2,10)+c,p=i(c,f),m=i(f+1,u);return d=e[f],h=n?n(d):d,new kn(h,d.node,kn.BLACK,p,m)}},a=function(c){let u=null,l=null,d=e.length;const h=function(p,m){const y=d-p,v=d;d-=p;const _=i(y+1,v),N=e[y],F=n?n(N):N;f(new kn(F,N.node,m,null,_))},f=function(p){u?(u.left=p,u=p):(l=p,u=p)};for(let p=0;p<c.count;++p){const m=c.nextBitIsOne(),y=Math.pow(2,c.count-(p+1));m?h(y,kn.BLACK):(h(y,kn.BLACK),h(y,kn.RED))}return l}(new jte(e.length));return new qt(r||t,a)};let $w;const Xs={};class Lr{constructor(t,n){this.indexes_=t,this.indexSet_=n}static get Default(){return I(Xs&&De,"ChildrenNode.ts has not been loaded"),$w=$w||new Lr({".priority":Xs},{".priority":De}),$w}get(t){const n=Ps(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof qt?n:null}hasIndex(t){return Zn(this.indexSet_,t.toString())}addIndex(t,n){I(t!==rr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const o=n.getIterator(Z.Wrap);let a,s=o.getNext();for(;s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();a=i?Qh(r,t.getCompare()):Xs;const c=t.toString(),u=Object.assign({},this.indexSet_);u[c]=t;const l=Object.assign({},this.indexes_);return l[c]=a,new Lr(l,u)}addToIndexes(t,n){const r=ih(this.indexes_,(i,o)=>{const s=Ps(this.indexSet_,o);if(I(s,"Missing index implementation for "+o),i===Xs){if(s.isDefinedOn(t.node)){const a=[],c=n.getIterator(Z.Wrap);let u=c.getNext();for(;u;)u.name!==t.name&&a.push(u),u=c.getNext();return a.push(t),Qh(a,s.getCompare())}return Xs}{const a=n.get(t.name);let c=i;return a&&(c=c.remove(new Z(t.name,a))),c.insert(t,t.node)}});return new Lr(r,this.indexSet_)}removeFromIndexes(t,n){const r=ih(this.indexes_,i=>{if(i===Xs)return i;{const o=n.get(t.name);return o?i.remove(new Z(t.name,o)):i}});return new Lr(r,this.indexSet_)}}let du,W=(()=>{class e{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&K1(this.priorityNode_),this.children_.isEmpty()&&I(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return du||(du=new e(new qt(Uw),null,Lr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||du}updatePriority(n){return this.children_.isEmpty()?this:new e(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const r=this.children_.get(n);return null===r?du:r}}getChild(n){const r=Q(n);return null===r?this:this.getImmediateChild(r).getChild(ve(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,r){if(I(r,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(r);{const i=new Z(n,r);let o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));const a=o.isEmpty()?du:this.priorityNode_;return new e(o,a,s)}}updateChild(n,r){const i=Q(n);if(null===i)return r;{I(".priority"!==Q(n)||1===hi(n),".priority must be the last token in a path");const o=this.getImmediateChild(i).updateChild(ve(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const r={};let i=0,o=0,s=!0;if(this.forEachChild(De,(a,c)=>{r[a]=c.val(n),i++,s&&e.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){const a=[];for(const c in r)a[c]=r[c];return a}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+q1(this.getPriority().val())+":"),this.forEachChild(De,(r,i)=>{const o=i.hash();""!==o&&(n+=":"+r+":"+o)}),this.lazyHash_=""===n?"":c1(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){const o=this.resolveIndex_(i);if(o){const s=o.getPredecessorKey(new Z(n,r));return s?s.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(n){const r=this.getFirstChildName(n);return r?new Z(r,this.children_.get(r)):null}getLastChildName(n){const r=this.resolveIndex_(n);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(n){const r=this.getLastChildName(n);return r?new Z(r,this.children_.get(r)):null}forEachChild(n,r){const i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{const o=this.children_.getIteratorFrom(n.name,Z.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{const o=this.children_.getReverseIteratorFrom(n.name,Z.Wrap);let s=o.peek();for(;null!=s&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===hu?-1:0}withIndex(n){if(n===rr||this.indexMap_.hasIndex(n))return this;{const r=this.indexMap_.addIndex(n,this.children_);return new e(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===rr||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const r=n;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(De),o=r.getIterator(De);let s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return null===s&&null===a}return!1}return!1}}resolveIndex_(n){return n===rr?null:this.indexMap_.get(n.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const hu=new class $te extends W{constructor(){super(new qt(Uw),W.EMPTY_NODE,Lr.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return W.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Z,{MIN:{value:new Z(Fr,W.EMPTY_NODE)},MAX:{value:new Z(nr,hu)}}),W1.__EMPTY_NODE=W.EMPTY_NODE,Qs.__childrenNodeConstructor=W,function Ote(e){jw=e}(hu),function Lte(e){X1=e}(hu);const Bte=!0;function ke(e,t=null){if(null===e)return W.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),I(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Qs(e,ke(t));if(e instanceof Array||!Bte){let n=W.EMPTY_NODE;return nt(e,(r,i)=>{if(Zn(e,r)&&"."!==r.substring(0,1)){const o=ke(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(ke(t))}{const n=[];let r=!1;if(nt(e,(s,a)=>{if("."!==s.substring(0,1)){const c=ke(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Z(s,c)))}}),0===n.length)return W.EMPTY_NODE;const o=Qh(n,Pte,s=>s.name,Uw);if(r){const s=Qh(n,De.getCompare());return new W(o,ke(t),new Lr({".priority":s},{".priority":De}))}return new W(o,ke(t),Lr.Default)}}!function Fte(e){Q1=e}(ke);class Bw extends qh{constructor(t){super(),this.indexPath_=t,I(!X(t)&&".priority"!==Q(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,n){const r=this.extractChild(t.node),i=this.extractChild(n.node),o=r.compareTo(i);return 0===o?so(t.name,n.name):o}makePost(t,n){const r=ke(t),i=W.EMPTY_NODE.updateChild(this.indexPath_,r);return new Z(n,i)}maxPost(){const t=W.EMPTY_NODE.updateChild(this.indexPath_,hu);return new Z(nr,t)}toString(){return uu(this.indexPath_,0).join("/")}}const Hw=new class Hte extends qh{compare(t,n){const r=t.node.compareTo(n.node);return 0===r?so(t.name,n.name):r}isDefinedOn(t){return!0}indexedValueChanged(t,n){return!t.equals(n)}minPost(){return Z.MIN}maxPost(){return Z.MAX}makePost(t,n){const r=ke(t);return new Z(n,r)}toString(){return".value"}},Zs="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zte=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=Zs.charAt(n%64),n=Math.floor(n/64);I(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=Zs.charAt(t[i]);return I(20===s.length,"nextPushId: Length should be 20."),s}}();function nF(e){return{type:"value",snapshotNode:e}}function Js(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function fu(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function pu(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Gw{constructor(t){this.index_=t}updateChild(t,n,r,i,o,s){I(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=t.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=s&&(r.isEmpty()?t.hasChild(n)?s.trackChildChange(fu(n,a)):I(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Js(n,r)):s.trackChildChange(pu(n,r,a))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(t,n,r){return null!=r&&(t.isLeafNode()||t.forEachChild(De,(i,o)=>{n.hasChild(i)||r.trackChildChange(fu(i,o))}),n.isLeafNode()||n.forEachChild(De,(i,o)=>{if(t.hasChild(i)){const s=t.getImmediateChild(i);s.equals(o)||r.trackChildChange(pu(i,o,s))}else r.trackChildChange(Js(i,o))})),n.withIndex(this.index_)}updatePriority(t,n){return t.isEmpty()?W.EMPTY_NODE:t.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gu{constructor(t){this.indexedFilter_=new Gw(t.getIndex()),this.index_=t.getIndex(),this.startPost_=gu.getStartPost_(t),this.endPost_=gu.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,n,r,i,o,s){return this.matches(new Z(n,r))||(r=W.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,o,s)}updateFullNode(t,n,r){n.isLeafNode()&&(n=W.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(W.EMPTY_NODE);const o=this;return n.forEachChild(De,(s,a)=>{o.matches(new Z(s,a))||(i=i.updateImmediateChild(s,W.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}return t.getIndex().maxPost()}}class Wte{constructor(t){this.rangedFilter_=new gu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,n,r,i,o,s){return this.rangedFilter_.matches(new Z(n,r))||(r=W.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,o,s):this.fullLimitUpdateChild_(t,n,r,o,s)}updateFullNode(t,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=W.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let o;i=W.EMPTY_NODE.withIndex(this.index_),o=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){const a=o.getNext();let c;if(c=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!c)break;i=i.updateImmediateChild(a.name,a.node),s++}}else{let o,s,a,c;if(i=n.withIndex(this.index_),i=i.updatePriority(W.EMPTY_NODE),this.reverse_){c=i.getReverseIterator(this.index_),o=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();const d=this.index_.getCompare();a=(h,f)=>d(f,h)}else c=i.getIterator(this.index_),o=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),a=this.index_.getCompare();let u=0,l=!1;for(;c.hasNext();){const d=c.getNext();!l&&a(o,d)<=0&&(l=!0),l&&u<this.limit_&&a(d,s)<=0?u++:i=i.updateImmediateChild(d.name,W.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)}updatePriority(t,n){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,n,r,i,o){let s;if(this.reverse_){const d=this.index_.getCompare();s=(h,f)=>d(f,h)}else s=this.index_.getCompare();const a=t;I(a.numChildren()===this.limit_,"");const c=new Z(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(a.hasChild(n)){const d=a.getImmediateChild(n);let h=i.getChildAfterChild(this.index_,u,this.reverse_);for(;null!=h&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);const f=null==h?1:s(h,c);if(l&&!r.isEmpty()&&f>=0)return o?.trackChildChange(pu(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(fu(n,d));const m=a.updateImmediateChild(n,W.EMPTY_NODE);return null!=h&&this.rangedFilter_.matches(h)?(o?.trackChildChange(Js(h.name,h.node)),m.updateImmediateChild(h.name,h.node)):m}}return r.isEmpty()?t:l&&s(u,c)>=0?(null!=o&&(o.trackChildChange(fu(u.name,u.node)),o.trackChildChange(Js(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,W.EMPTY_NODE)):t}}class Ww{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=De}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return I(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return I(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fr}hasEnd(){return this.endSet_}getIndexEndValue(){return I(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return I(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:nr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return I(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===De}copy(){const t=new Ww;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function rF(e){const t={};if(e.isDefault())return t;let n;return e.index_===De?n="$priority":e.index_===Hw?n="$value":e.index_===rr?n="$key":(I(e.index_ instanceof Bw,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=Ke(n),e.startSet_&&(t.startAt=Ke(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+Ke(e.indexStartName_))),e.endSet_&&(t.endAt=Ke(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+Ke(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function iF(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==De&&(t.i=e.index_.toString()),t}class Zh extends V1{constructor(t,n,r,i){super(),this.repoInfo_=t,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ou("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,n){return void 0!==n?"tag$"+n:(I(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,n,r,i){const o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);const s=Zh.getListenId_(t,r),a={};this.listens_[s]=a;const c=rF(t._queryParams);this.restRequest_(o+".json",c,(u,l)=>{let d=l;if(404===u&&(d=null,u=null),null===u&&this.onDataUpdate_(o,d,!1,r),Ps(this.listens_,s)===a){let h;h=u?401===u?"permission_denied":"rest_error:"+u:"ok",i(h,null)}})}unlisten(t,n){const r=Zh.getListenId_(t,n);delete this.listens_[r]}get(t){const n=rF(t._queryParams),r=t._path.toString(),i=new xs;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;404===o&&(a=null,o=null),null===o?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(t){}restRequest_(t,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+Os(n);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Fc(a.responseText)}catch{vt("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else 401!==a.status&&404!==a.status&&vt("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}}class Zte{constructor(){this.rootNode_=W.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)}}function Jh(){return{value:null,children:new Map}}function ea(e,t,n){if(X(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=Q(t);e.children.has(r)||e.children.set(r,Jh()),ea(e.children.get(r),t=ve(t),n)}}function Qw(e,t,n){null!==e.value?n(t,e.value):function Jte(e,t){e.children.forEach((n,r)=>{t(r,n)})}(e,(r,i)=>{Qw(i,new le(t.toString()+"/"+r),n)})}class ene{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),n=Object.assign({},t);return this.last_&&nt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=t,n}}class rne{constructor(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ene(t);const r=1e4+2e4*Math.random();au(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const t=this.statsListener_.get(),n={};let r=!1;nt(t,(i,o)=>{o>0&&Zn(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),au(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ir=function(e){return e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",e}(ir||{});function Jw(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class ef{constructor(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=ir.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(X(this.path)){if(null!=this.affectedTree.value)return I(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new le(t));return new ef(oe(),n,this.revert)}}return I(Q(this.path)===t,"operationForChild called for unrelated child."),new ef(ve(this.path),this.affectedTree,this.revert)}}class mu{constructor(t,n){this.source=t,this.path=n,this.type=ir.LISTEN_COMPLETE}operationForChild(t){return X(this.path)?new mu(this.source,oe()):new mu(this.source,ve(this.path))}}class uo{constructor(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=ir.OVERWRITE}operationForChild(t){return X(this.path)?new uo(this.source,oe(),this.snap.getImmediateChild(t)):new uo(this.source,ve(this.path),this.snap)}}class ta{constructor(t,n,r){this.source=t,this.path=n,this.children=r,this.type=ir.MERGE}operationForChild(t){if(X(this.path)){const n=this.children.subtree(new le(t));return n.isEmpty()?null:n.value?new uo(this.source,oe(),n.value):new ta(this.source,oe(),n)}return I(Q(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ta(this.source,ve(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class fi{constructor(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(X(t))return this.isFullyInitialized()&&!this.filtered_;const n=Q(t);return this.isCompleteForChild(n)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class ine{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function _u(e,t,n,r,i,o){const s=r.filter(a=>a.type===n);s.sort((a,c)=>function ane(e,t,n){if(null==t.childName||null==n.childName)throw ks("Should only compare child_ events.");const r=new Z(t.childName,t.snapshotNode),i=new Z(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,a,c)),s.forEach(a=>{const c=function sne(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,a,o);i.forEach(u=>{u.respondsTo(a.type)&&t.push(u.createEvent(c,e.query_))})})}function tf(e,t){return{eventCache:e,serverCache:t}}function yu(e,t,n,r){return tf(new fi(t,n,r),e.serverCache)}function sF(e,t,n,r){return tf(e.eventCache,new fi(t,n,r))}function nf(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function lo(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let eI;class Te{constructor(t,n=(()=>(eI||(eI=new qt(Gee)),eI))()){this.value=t,this.children=n}static fromObject(t){let n=new Te(null);return nt(t,(r,i)=>{n=n.set(new le(r),i)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,n){if(null!=this.value&&n(this.value))return{path:oe(),value:this.value};if(X(t))return null;{const r=Q(t),i=this.children.get(r);if(null!==i){const o=i.findRootMostMatchingPathAndValue(ve(t),n);return null!=o?{path:Re(new le(r),o.path),value:o.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(X(t))return this;{const n=Q(t),r=this.children.get(n);return null!==r?r.subtree(ve(t)):new Te(null)}}set(t,n){if(X(t))return new Te(n,this.children);{const r=Q(t),o=(this.children.get(r)||new Te(null)).set(ve(t),n),s=this.children.insert(r,o);return new Te(this.value,s)}}remove(t){if(X(t))return this.children.isEmpty()?new Te(null):new Te(null,this.children);{const n=Q(t),r=this.children.get(n);if(r){const i=r.remove(ve(t));let o;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new Te(null):new Te(this.value,o)}return this}}get(t){if(X(t))return this.value;{const n=Q(t),r=this.children.get(n);return r?r.get(ve(t)):null}}setTree(t,n){if(X(t))return n;{const r=Q(t),o=(this.children.get(r)||new Te(null)).setTree(ve(t),n);let s;return s=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new Te(this.value,s)}}fold(t){return this.fold_(oe(),t)}fold_(t,n){const r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Re(t,i),n)}),n(t,this.value,r)}findOnPath(t,n){return this.findOnPath_(t,oe(),n)}findOnPath_(t,n,r){const i=!!this.value&&r(n,this.value);if(i)return i;if(X(t))return null;{const o=Q(t),s=this.children.get(o);return s?s.findOnPath_(ve(t),Re(n,o),r):null}}foreachOnPath(t,n){return this.foreachOnPath_(t,oe(),n)}foreachOnPath_(t,n,r){if(X(t))return this;{this.value&&r(n,this.value);const i=Q(t),o=this.children.get(i);return o?o.foreachOnPath_(ve(t),Re(n,i),r):new Te(null)}}foreach(t){this.foreach_(oe(),t)}foreach_(t,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Re(t,r),n)}),this.value&&n(t,this.value)}foreachChild(t){this.children.inorderTraversal((n,r)=>{r.value&&t(n,r.value)})}}class xn{constructor(t){this.writeTree_=t}static empty(){return new xn(new Te(null))}}function vu(e,t,n){if(X(t))return new xn(new Te(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=Pt(i,t);return o=o.updateChild(s,n),new xn(e.writeTree_.set(i,o))}{const i=new Te(n),o=e.writeTree_.setTree(t,i);return new xn(o)}}}function tI(e,t,n){let r=e;return nt(n,(i,o)=>{r=vu(r,Re(t,i),o)}),r}function aF(e,t){if(X(t))return xn.empty();{const n=e.writeTree_.setTree(t,new Te(null));return new xn(n)}}function nI(e,t){return null!=ho(e,t)}function ho(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Pt(n.path,t)):null}function cF(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(De,(r,i)=>{t.push(new Z(r,i))}):e.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&t.push(new Z(r,i.value))}),t}function pi(e,t){if(X(t))return e;{const n=ho(e,t);return new xn(null!=n?new Te(n):e.writeTree_.subtree(t))}}function rI(e){return e.writeTree_.isEmpty()}function na(e,t){return uF(oe(),e.writeTree_,t)}function uF(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((i,o)=>{".priority"===i?(I(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=uF(Re(e,i),o,n)}),!n.getChild(e).isEmpty()&&null!==r&&(n=n.updateChild(Re(e,".priority"),r)),n}}function rf(e,t){return pF(t,e)}function fne(e,t){if(e.snap)return yn(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&yn(Re(e.path,n),t))return!0;return!1}function gne(e){return e.visible}function lF(e,t,n){let r=xn.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const s=o.path;let a;if(o.snap)yn(n,s)?(a=Pt(n,s),r=vu(r,a,o.snap)):yn(s,n)&&(a=Pt(s,n),r=vu(r,oe(),o.snap.getChild(a)));else{if(!o.children)throw ks("WriteRecord should have .snap or .children");if(yn(n,s))a=Pt(n,s),r=tI(r,a,o.children);else if(yn(s,n))if(a=Pt(s,n),X(a))r=tI(r,oe(),o.children);else{const c=Ps(o.children,Q(a));if(c){const u=c.getChild(ve(a));r=vu(r,oe(),u)}}}}}return r}function dF(e,t,n,r,i){if(r||i){const o=pi(e.visibleWrites,t);return!i&&rI(o)?n:i||null!=n||nI(o,oe())?na(lF(e.allWrites,function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(yn(u.path,t)||yn(t,u.path))},t),n||W.EMPTY_NODE):null}{const o=ho(e.visibleWrites,t);if(null!=o)return o;{const s=pi(e.visibleWrites,t);return rI(s)?n:null!=n||nI(s,oe())?na(s,n||W.EMPTY_NODE):null}}}function sf(e,t,n,r){return dF(e.writeTree,e.treePath,t,n,r)}function iI(e,t){return function mne(e,t,n){let r=W.EMPTY_NODE;const i=ho(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(De,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){const o=pi(e.visibleWrites,t);return n.forEachChild(De,(s,a)=>{const c=na(pi(o,new le(s)),a);r=r.updateImmediateChild(s,c)}),cF(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}return cF(pi(e.visibleWrites,t)).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}(e.writeTree,e.treePath,t)}function hF(e,t,n,r){return function _ne(e,t,n,r,i){I(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=Re(t,n);if(nI(e.visibleWrites,o))return null;{const s=pi(e.visibleWrites,o);return rI(s)?i.getChild(n):na(s,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function af(e,t){return function vne(e,t){return ho(e.visibleWrites,t)}(e.writeTree,Re(e.treePath,t))}function oI(e,t,n){return function yne(e,t,n,r){const i=Re(t,n),o=ho(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?na(pi(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function fF(e,t){return pF(Re(e.treePath,t),e.writeTree)}function pF(e,t){return{treePath:e,writeTree:t}}class Ine{constructor(){this.changeMap=new Map}trackChildChange(t){const n=t.type,r=t.childName;I("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),I(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const o=i.type;if("child_added"===n&&"child_removed"===o)this.changeMap.set(r,pu(r,t.snapshotNode,i.snapshotNode));else if("child_removed"===n&&"child_added"===o)this.changeMap.delete(r);else if("child_removed"===n&&"child_changed"===o)this.changeMap.set(r,fu(r,i.oldSnap));else if("child_changed"===n&&"child_added"===o)this.changeMap.set(r,Js(r,t.snapshotNode));else{if("child_changed"!==n||"child_changed"!==o)throw ks("Illegal combination of changes: "+t+" occurred after "+i);this.changeMap.set(r,pu(r,t.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,t)}getChanges(){return Array.from(this.changeMap.values())}}const gF=new class bne{getCompleteChild(t){return null}getChildAfterChild(t,n,r){return null}};class sI{constructor(t,n,r=null){this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(t){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);{const r=null!=this.optCompleteServerCache_?new fi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oI(this.writes_,t,r)}}getChildAfterChild(t,n,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lo(this.viewCache_),o=function wne(e,t,n,r,i,o){return function Cne(e,t,n,r,i,o,s){let a;const c=pi(e.visibleWrites,t),u=ho(c,oe());if(null!=u)a=u;else{if(null==n)return[];a=na(c,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const l=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let f=h.getNext();for(;f&&l.length<i;)0!==d(f,r)&&l.push(f),f=h.getNext();return l}}(e.writeTree,e.treePath,t,n,r,i,o)}(this.writes_,i,n,1,r,t);return 0===o.length?null:o[0]}}function mF(e,t,n,r,i,o){const s=t.eventCache;if(null!=af(r,n))return t;{let a,c;if(X(n))if(I(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=lo(t),d=iI(r,u instanceof W?u:W.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),d,o)}else{const u=sf(r,lo(t));a=e.filter.updateFullNode(t.eventCache.getNode(),u,o)}else{const u=Q(n);if(".priority"===u){I(1===hi(n),"Can't have a priority with additional path components");const l=s.getNode();c=t.serverCache.getNode();const d=hF(r,n,l,c);a=null!=d?e.filter.updatePriority(l,d):s.getNode()}else{const l=ve(n);let d;if(s.isCompleteForChild(u)){c=t.serverCache.getNode();const h=hF(r,n,s.getNode(),c);d=null!=h?s.getNode().getImmediateChild(u).updateChild(l,h):s.getNode().getImmediateChild(u)}else d=oI(r,u,t.serverCache);a=null!=d?e.filter.updateChild(s.getNode(),u,d,l,i,o):s.getNode()}}return yu(t,a,s.isFullyInitialized()||X(n),e.filter.filtersNodes())}}function cf(e,t,n,r,i,o,s,a){const c=t.serverCache;let u;const l=s?e.filter:e.filter.getIndexedFilter();if(X(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const f=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),f,null)}else{const f=Q(n);if(!c.isCompleteForPath(n)&&hi(n)>1)return t;const p=ve(n),y=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),y):l.updateChild(c.getNode(),f,y,p,gF,null)}const d=sF(t,u,c.isFullyInitialized()||X(n),l.filtersNodes());return mF(e,d,n,i,new sI(i,d,o),a)}function aI(e,t,n,r,i,o,s){const a=t.eventCache;let c,u;const l=new sI(i,t,o);if(X(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,s),c=yu(t,u,!0,e.filter.filtersNodes());else{const d=Q(n);if(".priority"===d)u=e.filter.updatePriority(t.eventCache.getNode(),r),c=yu(t,u,a.isFullyInitialized(),a.isFiltered());else{const h=ve(n),f=a.getNode().getImmediateChild(d);let p;if(X(h))p=r;else{const m=l.getCompleteChild(d);p=null!=m?".priority"===Fw(h)&&m.getChild(B1(h)).isEmpty()?m:m.updateChild(h,r):W.EMPTY_NODE}c=f.equals(p)?t:yu(t,e.filter.updateChild(a.getNode(),d,p,h,l,s),a.isFullyInitialized(),e.filter.filtersNodes())}}return c}function _F(e,t){return e.eventCache.isCompleteForChild(t)}function yF(e,t,n){return n.foreach((r,i)=>{t=t.updateChild(r,i)}),t}function cI(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let u,c=t;u=X(n)?r:new Te(null).setTree(n,r);const l=t.serverCache.getNode();return u.children.inorderTraversal((d,h)=>{if(l.hasChild(d)){const p=yF(0,t.serverCache.getNode().getImmediateChild(d),h);c=cf(e,c,new le(d),p,i,o,s,a)}}),u.children.inorderTraversal((d,h)=>{const f=!t.serverCache.isCompleteForChild(d)&&void 0===h.value;if(!l.hasChild(d)&&!f){const m=yF(0,t.serverCache.getNode().getImmediateChild(d),h);c=cf(e,c,new le(d),m,i,o,s,a)}}),c}class xne{constructor(t,n){this.query_=t,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Gw(r.getIndex()),o=function qte(e){return e.loadsAllData()?new Gw(e.getIndex()):e.hasLimit()?new Wte(e):new gu(e)}(r);this.processor_=function Dne(e){return{filter:e}}(o);const s=n.serverCache,a=n.eventCache,c=i.updateFullNode(W.EMPTY_NODE,s.getNode(),null),u=o.updateFullNode(W.EMPTY_NODE,a.getNode(),null),l=new fi(c,s.isFullyInitialized(),i.filtersNodes()),d=new fi(u,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=tf(d,l),this.eventGenerator_=new ine(this.query_)}get query(){return this.query_}}function Fne(e,t){const n=lo(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!X(t)&&!n.getImmediateChild(Q(t)).isEmpty())?n.getChild(t):null}function vF(e){return 0===e.eventRegistrations_.length}function CF(e,t,n){const r=[];if(n){I(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(o=>{const s=o.createCancelEvent(n,i);s&&r.push(s)})}if(t){let i=[];for(let o=0;o<e.eventRegistrations_.length;++o){const s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(e.eventRegistrations_.slice(o+1));break}}else i.push(s)}e.eventRegistrations_=i}else e.eventRegistrations_=[];return r}function EF(e,t,n,r){t.type===ir.MERGE&&null!==t.source.queryId&&(I(lo(e.viewCache_),"We should always have a full cache before handling merges"),I(nf(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=function Sne(e,t,n,r,i){const o=new Ine;let s,a;if(n.type===ir.OVERWRITE){const u=n;u.source.fromUser?s=aI(e,t,u.path,u.snap,r,i,o):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered()&&!X(u.path),s=cf(e,t,u.path,u.snap,r,i,a,o))}else if(n.type===ir.MERGE){const u=n;u.source.fromUser?s=function Mne(e,t,n,r,i,o,s){let a=t;return r.foreach((c,u)=>{const l=Re(n,c);_F(t,Q(l))&&(a=aI(e,a,l,u,i,o,s))}),r.foreach((c,u)=>{const l=Re(n,c);_F(t,Q(l))||(a=aI(e,a,l,u,i,o,s))}),a}(e,t,u.path,u.children,r,i,o):(I(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.serverCache.isFiltered(),s=cI(e,t,u.path,u.children,r,i,a,o))}else if(n.type===ir.ACK_USER_WRITE){const u=n;s=u.revert?function kne(e,t,n,r,i,o){let s;if(null!=af(r,n))return t;{const a=new sI(r,t,i),c=t.eventCache.getNode();let u;if(X(n)||".priority"===Q(n)){let l;if(t.serverCache.isFullyInitialized())l=sf(r,lo(t));else{const d=t.serverCache.getNode();I(d instanceof W,"serverChildren would be complete if leaf node"),l=iI(r,d)}u=e.filter.updateFullNode(c,l,o)}else{const l=Q(n);let d=oI(r,l,t.serverCache);null==d&&t.serverCache.isCompleteForChild(l)&&(d=c.getImmediateChild(l)),u=null!=d?e.filter.updateChild(c,l,d,ve(n),a,o):t.eventCache.getNode().hasChild(l)?e.filter.updateChild(c,l,W.EMPTY_NODE,ve(n),a,o):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=sf(r,lo(t)),s.isLeafNode()&&(u=e.filter.updateFullNode(u,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=af(r,oe()),yu(t,u,s,e.filter.filtersNodes())}}(e,t,u.path,r,i,o):function Rne(e,t,n,r,i,o,s){if(null!=af(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(X(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return cf(e,t,n,c.getNode().getChild(n),i,o,a,s);if(X(n)){let u=new Te(null);return c.getNode().forEachChild(rr,(l,d)=>{u=u.set(new le(l),d)}),cI(e,t,n,u,i,o,a,s)}return t}{let u=new Te(null);return r.foreach((l,d)=>{const h=Re(n,l);c.isCompleteForPath(h)&&(u=u.set(l,c.getNode().getChild(h)))}),cI(e,t,n,u,i,o,a,s)}}(e,t,u.path,u.affectedTree,r,i,o)}else{if(n.type!==ir.LISTEN_COMPLETE)throw ks("Unknown operation type: "+n.type);s=function Nne(e,t,n,r,i){const o=t.serverCache;return mF(e,sF(t,o.getNode(),o.isFullyInitialized()||X(n),o.isFiltered()),n,r,gF,i)}(e,t,n.path,r,o)}const c=o.getChanges();return function Ane(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=nf(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(nF(nf(t)))}}(t,s,c),{viewCache:s,changes:c}}(e.processor_,i,t,n,r);return function Tne(e,t){I(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),I(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,o.viewCache),I(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,wF(e,o.changes,o.viewCache.eventCache.getNode(),null)}function wF(e,t,n,r){return function one(e,t,n,r){const i=[],o=[];return t.forEach(s=>{"child_changed"===s.type&&e.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(function Gte(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(s.childName,s.snapshotNode))}),_u(e,i,"child_removed",t,r,n),_u(e,i,"child_added",t,r,n),_u(e,i,"child_moved",o,r,n),_u(e,i,"child_changed",t,r,n),_u(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let uf,df;class IF{constructor(){this.views=new Map}}function uI(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return I(null!=o,"SyncTree gave us an op for an invalid query."),EF(o,t,n,r)}{let o=[];for(const s of e.views.values())o=o.concat(EF(s,t,n,r));return o}}function bF(e,t,n,r,i){const s=e.views.get(t._queryIdentifier);if(!s){let a=sf(n,i?r:null),c=!1;a?c=!0:r instanceof W?(a=iI(n,r),c=!1):(a=W.EMPTY_NODE,c=!1);const u=tf(new fi(a,c,!1),new fi(r,i,!1));return new xne(t,u)}return s}function DF(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function gi(e,t){let n=null;for(const r of e.views.values())n=n||Fne(r,t);return n}function TF(e,t){return t._queryParams.loadsAllData()?lf(e):e.views.get(t._queryIdentifier)}function SF(e,t){return null!=TF(e,t)}function mi(e){return null!=lf(e)}function lf(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Wne=1;class AF{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Te(null),this.pendingWriteTree_=function Ene(){return{visibleWrites:xn.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function lI(e,t,n,r,i){return function une(e,t,n,r,i){I(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=vu(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?ra(e,new uo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function _i(e,t,n=!1){const r=function dne(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function hne(e,t){const n=e.allWrites.findIndex(a=>a.writeId===t);I(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const a=e.allWrites[s];a.visible&&(s>=n&&fne(a,r.path)?i=!1:yn(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?(function pne(e){e.visibleWrites=lF(e.allWrites,gne,oe()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=aF(e.visibleWrites,r.path):nt(r.children,c=>{e.visibleWrites=aF(e.visibleWrites,Re(r.path,c))}),!0))}(e.pendingWriteTree_,t)){let o=new Te(null);return null!=r.snap?o=o.set(oe(),!0):nt(r.children,s=>{o=o.set(new le(s),!0)}),ra(e,new ef(r.path,o,n))}return[]}function Cu(e,t,n){return ra(e,new uo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function dI(e,t,n,r){const i=t._path,o=e.syncPointTree_.get(i);let s=[];if(o&&("default"===t._queryIdentifier||SF(o,t))){const a=function Hne(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=mi(e);if("default"===i)for(const[c,u]of e.views.entries())s=s.concat(CF(u,n,r)),vF(u)&&(e.views.delete(c),u.query._queryParams.loadsAllData()||o.push(u.query));else{const c=e.views.get(i);c&&(s=s.concat(CF(c,n,r)),vF(c)&&(e.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!mi(e)&&o.push(new(function jne(){return I(uf,"Reference.ts has not been loaded"),uf}())(t._repo,t._path)),{removed:o,events:s}}(o,t,n,r);(function $ne(e){return 0===e.views.size})(o)&&(e.syncPointTree_=e.syncPointTree_.remove(i));const c=a.removed;s=a.events;const u=-1!==c.findIndex(d=>d._queryParams.loadsAllData()),l=e.syncPointTree_.findOnPath(i,(d,h)=>mi(h));if(u&&!l){const d=e.syncPointTree_.subtree(i);if(!d.isEmpty()){const h=function ere(e){return e.fold((t,n,r)=>{if(n&&mi(n))return[lf(n)];{let i=[];return n&&(i=DF(n)),nt(r,(o,s)=>{i=i.concat(s)}),i}})}(d);for(let f=0;f<h.length;++f){const p=h[f],m=p.query,y=kF(e,p);e.listenProvider_.startListening(Eu(m),ff(e,m),y.hashFn,y.onComplete)}}}!l&&c.length>0&&!r&&(u?e.listenProvider_.stopListening(Eu(t),null):c.forEach(d=>{const h=e.queryToTagMap.get(pf(d));e.listenProvider_.stopListening(Eu(d),h)})),function tre(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const i=pf(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,c)}return s}function MF(e,t,n){const r=t._path;let i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(d,h)=>{const f=Pt(d,r);i=i||gi(h,f),o=o||mi(h)});let a,s=e.syncPointTree_.get(r);s?(o=o||mi(s),i=i||gi(s,oe())):(s=new IF,e.syncPointTree_=e.syncPointTree_.set(r,s)),null!=i?a=!0:(a=!1,i=W.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((h,f)=>{const p=gi(f,oe());p&&(i=i.updateImmediateChild(h,p))}));const c=SF(s,t);if(!c&&!t._queryParams.loadsAllData()){const d=pf(t);I(!e.queryToTagMap.has(d),"View does not exist, but we have a tag");const h=function nre(){return Wne++}();e.queryToTagMap.set(d,h),e.tagToQueryMap.set(h,d)}let l=function Bne(e,t,n,r,i,o){const s=bF(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function Lne(e,t){e.eventRegistrations_.push(t)}(s,n),function Vne(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(De,(o,s)=>{r.push(Js(o,s))}),n.isFullyInitialized()&&r.push(nF(n.getNode())),wF(e,r,n.getNode(),t)}(s,n)}(s,t,n,rf(e.pendingWriteTree_,r),i,a);if(!c&&!o){const d=TF(s,t);l=l.concat(function rre(e,t,n){const r=t._path,i=ff(e,t),o=kF(e,n),s=e.listenProvider_.startListening(Eu(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)I(!mi(a.value),"If we're adding a query, it shouldn't be shadowed");else{const c=a.fold((u,l,d)=>{if(!X(u)&&l&&mi(l))return[lf(l).query];{let h=[];return l&&(h=h.concat(DF(l).map(f=>f.query))),nt(d,(f,p)=>{h=h.concat(p)}),h}});for(let u=0;u<c.length;++u){const l=c[u];e.listenProvider_.stopListening(Eu(l),ff(e,l))}}return s}(e,t,d))}return l}function hf(e,t,n){const i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(s,a)=>{const u=gi(a,Pt(s,t));if(u)return u});return dF(i,t,o,n,!0)}function ra(e,t){return RF(t,e.syncPointTree_,null,rf(e.pendingWriteTree_,oe()))}function RF(e,t,n,r){if(X(e.path))return NF(e,t,n,r);{const i=t.get(oe());null==n&&null!=i&&(n=gi(i,oe()));let o=[];const s=Q(e.path),a=e.operationForChild(s),c=t.children.get(s);if(c&&a){const u=n?n.getImmediateChild(s):null,l=fF(r,s);o=o.concat(RF(a,c,u,l))}return i&&(o=o.concat(uI(i,e,r,n))),o}}function NF(e,t,n,r){const i=t.get(oe());null==n&&null!=i&&(n=gi(i,oe()));let o=[];return t.children.inorderTraversal((s,a)=>{const c=n?n.getImmediateChild(s):null,u=fF(r,s),l=e.operationForChild(s);l&&(o=o.concat(NF(l,a,c,u)))}),i&&(o=o.concat(uI(i,e,r,n))),o}function kF(e,t){const n=t.query,r=ff(e,n);return{hashFn:()=>(function Pne(e){return e.viewCache_.serverCache.getNode()}(t)||W.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function Qne(e,t,n){const r=hI(e,n);if(r){const i=fI(r),o=i.path,s=i.queryId,a=Pt(o,t);return pI(e,o,new mu(Jw(s),a))}return[]}(e,n._path,r):function Yne(e,t){return ra(e,new mu({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const o=function Kee(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(i,n);return dI(e,n,null,o)}}}}function ff(e,t){const n=pf(t);return e.queryToTagMap.get(n)}function pf(e){return e._path.toString()+"$"+e._queryIdentifier}function hI(e,t){return e.tagToQueryMap.get(t)}function fI(e){const t=e.indexOf("$");return I(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new le(e.substr(0,t))}}function pI(e,t,n){const r=e.syncPointTree_.get(t);return I(r,"Missing sync point for query tag that we're tracking"),uI(r,n,rf(e.pendingWriteTree_,t),null)}function Eu(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(function Gne(){return I(df,"Reference.ts has not been loaded"),df}())(e._repo,e._path):e}class gI{constructor(t){this.node_=t}getImmediateChild(t){const n=this.node_.getImmediateChild(t);return new gI(n)}node(){return this.node_}}class mI{constructor(t,n){this.syncTree_=t,this.path_=n}getImmediateChild(t){const n=Re(this.path_,t);return new mI(this.syncTree_,n)}node(){return hf(this.syncTree_,this.path_)}}const ire=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},xF=function(e,t,n){return e&&"object"==typeof e?(I(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ore(e[".sv"],t,n):"object"==typeof e[".sv"]?sre(e[".sv"],t):void I(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ore=function(e,t,n){if("timestamp"===e)return n.timestamp;I(!1,"Unexpected server value: "+e)},sre=function(e,t,n){e.hasOwnProperty("increment")||I(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&I(!1,"Unexpected increment value: "+r);const i=t.node();if(I(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},PF=function(e,t,n,r){return yI(t,new mI(n,e),r)},_I=function(e,t,n){return yI(e,new gI(t),n)};function yI(e,t,n){const r=e.getPriority().val(),i=xF(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const s=e,a=xF(s.getValue(),t,n);return a!==s.getValue()||i!==s.getPriority().val()?new Qs(a,ke(i)):e}{const s=e;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Qs(i))),s.forEachChild(De,(a,c)=>{const u=yI(c,t.getImmediateChild(a),n);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}class vI{constructor(t="",n=null,r={children:{},childCount:0}){this.name=t,this.parent=n,this.node=r}}function gf(e,t){let n=t instanceof le?t:new le(t),r=e,i=Q(n);for(;null!==i;){const o=Ps(r.node.children,i)||{children:{},childCount:0};r=new vI(i,r,o),n=ve(n),i=Q(n)}return r}function fo(e){return e.node.value}function CI(e,t){e.node.value=t,EI(e)}function OF(e){return e.node.childCount>0}function mf(e,t){nt(e.node.children,(n,r)=>{t(new vI(n,e,r))})}function FF(e,t,n,r){n&&!r&&t(e),mf(e,i=>{FF(i,t,!0,r)}),n&&r&&t(e)}function wu(e){return new le(null===e.parent?e.name:wu(e.parent)+"/"+e.name)}function EI(e){null!==e.parent&&function ure(e,t,n){const r=function are(e){return void 0===fo(e)&&!OF(e)}(n),i=Zn(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,EI(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,EI(e))}(e.parent,e.name,e)}const lre=/[\[\].#$\/\u0000-\u001F\u007F]/,dre=/[\[\].#$\u0000-\u001F\u007F]/,wI=10485760,_f=function(e){return"string"==typeof e&&0!==e.length&&!lre.test(e)},LF=function(e){return"string"==typeof e&&0!==e.length&&!dre.test(e)},or=function(e,t,n,r){r&&void 0===t||bu(Fs(e,"value"),t,n)},bu=function(e,t,n){const r=n instanceof le?new Dte(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+ao(r));if("function"==typeof t)throw new Error(e+"contains a function "+ao(r)+" with contents = "+t.toString());if(Bh(t))throw new Error(e+"contains "+t.toString()+" "+ao(r));if("string"==typeof t&&t.length>wI/3&&sh(t)>wI)throw new Error(e+"contains a string greater than "+wI+" utf8 bytes "+ao(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let i=!1,o=!1;if(nt(t,(s,a)=>{if(".value"===s)i=!0;else if(".priority"!==s&&".sv"!==s&&(o=!0,!_f(s)))throw new Error(e+" contains an invalid key ("+s+") "+ao(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Tte(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=sh(t),H1(e)})(r,s),bu(e,a,r),function Ste(e){const t=e.parts_.pop();e.byteLength_-=sh(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),i&&o)throw new Error(e+' contains ".value" child '+ao(r)+" in addition to actual children.")}},bI=function(e,t,n,r){if(!(r&&void 0===n||LF(n)))throw new Error(Fs(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},pre=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),bI(e,t,n,r)},sr=function(e,t){if(".info"===Q(t))throw new Error(e+" failed = Can't modify data under /.info/")};class gre{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yf(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null!==n&&!Lw(o,n.path)&&(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function DI(e,t,n){yf(e,n),jF(e,r=>Lw(r,t))}function vn(e,t,n){yf(e,n),jF(e,r=>yn(r,t)||yn(t,r))}function jF(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(mre(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function mre(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();oo&&tt("event: "+n.toString()),Ks(r)}}}const _re=25;class yre{constructor(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new gre,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jh(),this.transactionQueueTree_=new vI,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function BF(e){const n=e.infoData_.getNode(new le(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function Tu(e){return ire({timestamp:BF(e)})}function HF(e,t,n,r,i){e.dataUpdateCount++;const o=new le(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const c=ih(n,u=>ke(u));s=function Zne(e,t,n,r){const i=hI(e,r);if(i){const o=fI(i),s=o.path,a=o.queryId,c=Pt(s,t),u=Te.fromObject(n);return pI(e,s,new ta(Jw(a),c,u))}return[]}(e.serverSyncTree_,o,c,i)}else{const c=ke(n);s=function Xne(e,t,n,r){const i=hI(e,r);if(null!=i){const o=fI(i),s=o.path,a=o.queryId,c=Pt(s,t);return pI(e,s,new uo(Jw(a),c,n))}return[]}(e.serverSyncTree_,o,c,i)}else if(r){const c=ih(n,u=>ke(u));s=function Kne(e,t,n){const r=Te.fromObject(n);return ra(e,new ta({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,c)}else{const c=ke(n);s=Cu(e.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=oa(e,o)),vn(e.eventQueue_,a,s)}function zF(e,t){TI(e,"connected",t),!1===t&&function Ire(e){ia(e,"onDisconnectEvents");const t=Tu(e),n=Jh();Qw(e.onDisconnect_,oe(),(i,o)=>{const s=PF(i,o,e.serverSyncTree_,t);ea(n,i,s)});let r=[];Qw(n,oe(),(i,o)=>{r=r.concat(Cu(e.serverSyncTree_,i,o));const s=RI(e,i);oa(e,s)}),e.onDisconnect_=Jh(),vn(e.eventQueue_,oe(),r)}(e)}function TI(e,t,n){const r=new le("/.info/"+t),i=ke(n);e.infoData_.updateSnapshot(r,i);const o=Cu(e.infoSyncTree_,r,i);vn(e.eventQueue_,r,o)}function vf(e){return e.nextWriteId_++}function SI(e,t,n,r,i){ia(e,"set",{path:t.toString(),value:n,priority:r});const o=Tu(e),s=ke(n,r),a=hf(e.serverSyncTree_,t),c=_I(s,a,o),u=vf(e),l=lI(e.serverSyncTree_,t,c,u,!0);yf(e.eventQueue_,l),e.server_.put(t.toString(),s.val(!0),(h,f)=>{const p="ok"===h;p||vt("set at "+t+" failed: "+h);const m=_i(e.serverSyncTree_,u,!p);vn(e.eventQueue_,t,m),function yi(e,t,n,r){t&&Ks(()=>{if("ok"===n)t(null);else{const i=(n||"error").toUpperCase();let o=i;r&&(o+=": "+r);const s=new Error(o);s.code=i,t(s)}})}(0,i,h,f)});const d=RI(e,t);oa(e,d),vn(e.eventQueue_,d,[])}function AI(e,t,n){let r;r=".info"===Q(t._path)?dI(e.infoSyncTree_,t,n):dI(e.serverSyncTree_,t,n),DI(e.eventQueue_,t._path,r)}function ia(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),tt(n,...t)}function MI(e,t,n){return hf(e.serverSyncTree_,t,n)||W.EMPTY_NODE}function Cf(e,t=e.transactionQueueTree_){if(t||Ef(e,t),fo(t)){const n=KF(e,t);I(n.length>0,"Sending zero length transaction queue"),n.every(i=>0===i.status)&&function Rre(e,t,n){const r=n.map(u=>u.currentWriteId),i=MI(e,t,r);let o=i;const s=i.hash();for(let u=0;u<n.length;u++){const l=n[u];I(0===l.status,"tryToSendTransactionQueue_: items in queue should all be run."),l.status=1,l.retryCount++;const d=Pt(t,l.path);o=o.updateChild(d,l.currentOutputSnapshotRaw)}const a=o.val(!0),c=t;e.server_.put(c.toString(),a,u=>{ia(e,"transaction put response",{path:c.toString(),status:u});let l=[];if("ok"===u){const d=[];for(let h=0;h<n.length;h++)n[h].status=2,l=l.concat(_i(e.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();Ef(e,gf(e.transactionQueueTree_,t)),Cf(e,e.transactionQueueTree_),vn(e.eventQueue_,t,l);for(let h=0;h<d.length;h++)Ks(d[h])}else{if("datastale"===u)for(let d=0;d<n.length;d++)n[d].status=3===n[d].status?4:0;else{vt("transaction at "+c.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}oa(e,t)}},s)}(e,wu(t),n)}else OF(t)&&mf(t,n=>{Cf(e,n)})}function oa(e,t){const n=qF(e,t),r=wu(n);return function Nre(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){const c=t[a],u=Pt(n,c.path);let d,l=!1;if(I(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)l=!0,d=c.abortReason,i=i.concat(_i(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=_re)l=!0,d="maxretry",i=i.concat(_i(e.serverSyncTree_,c.currentWriteId,!0));else{const h=MI(e,c.path,s);c.currentInputSnapshot=h;const f=t[a].update(h.val());if(void 0!==f){bu("transaction failed: Data returned ",f,c.path);let p=ke(f);"object"==typeof f&&null!=f&&Zn(f,".priority")||(p=p.updatePriority(h.getPriority()));const y=c.currentWriteId,v=Tu(e),_=_I(p,h,v);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=_,c.currentWriteId=vf(e),s.splice(s.indexOf(y),1),i=i.concat(lI(e.serverSyncTree_,c.path,_,c.currentWriteId,c.applyLocally)),i=i.concat(_i(e.serverSyncTree_,y,!0))}else l=!0,d="nodata",i=i.concat(_i(e.serverSyncTree_,c.currentWriteId,!0))}vn(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&r.push("nodata"===d?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(d),!1,null)))}Ef(e,e.transactionQueueTree_);for(let a=0;a<r.length;a++)Ks(r[a]);Cf(e,e.transactionQueueTree_)}(e,KF(e,n),r),r}function qF(e,t){let n,r=e.transactionQueueTree_;for(n=Q(t);null!==n&&void 0===fo(r);)r=gf(r,n),n=Q(t=ve(t));return r}function KF(e,t){const n=[];return YF(e,t,n),n.sort((r,i)=>r.order-i.order),n}function YF(e,t,n){const r=fo(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);mf(t,i=>{YF(e,i,n)})}function Ef(e,t){const n=fo(t);if(n){let r=0;for(let i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,CI(t,n.length>0?n:void 0)}mf(t,r=>{Ef(e,r)})}function RI(e,t){const n=wu(qF(e,t)),r=gf(e.transactionQueueTree_,t);return function cre(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,i=>{NI(e,i)}),NI(e,r),FF(r,i=>{NI(e,i)}),n}function NI(e,t){const n=fo(t);if(n){const r=[];let i=[],o=-1;for(let s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(I(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(I(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(_i(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?CI(t,void 0):n.length=o+1,vn(e.eventQueue_,wu(t),i);for(let s=0;s<r.length;s++)Ks(r[s])}}const kI=function(e,t){const n=Pre(e),r=n.namespace;return"firebase.com"===n.domain&&tr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&tr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&vt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Rw(n.host,n.secure,r,"ws"===n.scheme||"wss"===n.scheme,t,"",r!==n.subdomain),path:new le(n.pathString)}},Pre=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",c=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let l=e.indexOf("/");-1===l&&(l=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(l,d)),l<d&&(i=function kre(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}(e.substring(l,d)));const h=function xre(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):vt(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));u=t.indexOf(":"),u>=0?(s="https"===a||"wss"===a,c=parseInt(t.substring(u+1),10)):u=t.length;const f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in h&&(o=h.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};class QF{constructor(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Ke(this.snapshot.exportVal())}}class XF{constructor(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ZF{constructor(t,n){this.snapshotCallback=t,this.cancelCallback=n}onValue(t,n){this.snapshotCallback.call(null,t,n)}onCancel(t){return I(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class on{constructor(t,n,r,i){this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return X(this._path)?null:Fw(this._path)}get ref(){return new Pn(this._repo,this._path)}get _queryIdentifier(){const t=iF(this._queryParams),n=Sw(t);return"{}"===n?"default":n}get _queryObject(){return iF(this._queryParams)}isEqual(t){if(!((t=Nt(t))instanceof on))return!1;const n=this._repo===t._repo,r=Lw(this._path,t._path);return n&&r&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Ite(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Pn extends on{constructor(t,n){super(t,n,new Ww,!1)}get parent(){const t=B1(this._path);return null===t?null:new Pn(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class po{constructor(t,n,r){this._node=t,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const n=new le(t),r=go(this.ref,t);return new po(this._node.getChild(n),r,De)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>t(new po(i,go(this.ref,r),De)))}hasChild(t){const n=new le(t);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function JF(e,t){return(e=Nt(e))._checkNotDeleted("ref"),void 0!==t?go(e._root,t):e._root}function go(e,t){return null===Q((e=Nt(e))._path)?pre("child","path",t,!1):bI("child","path",t,!1),new Pn(e._repo,Re(e._path,t))}function Fre(e,t){e=Nt(e),sr("push",e._path),or("push",t,e._path,!0);const n=BF(e._repo),r=zte(n),i=go(e,r),o=go(e,r);let s;return s=null!=t?xI(o,t).then(()=>o):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function xI(e,t){e=Nt(e),sr("set",e._path),or("set",t,e._path,!1);const n=new xs;return SI(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Lre(e){return function Ere(e,t){const n=function Jne(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(u,l)=>{const d=Pt(u,n);r=r||gi(l,d)});let i=e.syncPointTree_.get(n);i?r=r||gi(i,oe()):(i=new IF,e.syncPointTree_=e.syncPointTree_.set(n,i));const o=null!=r,s=o?new fi(r,!0,!1):null;return function One(e){return nf(e.viewCache_)}(bF(i,t,rf(e.pendingWriteTree_,t._path),o?s.getNode():W.EMPTY_NODE,o))}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(r=>{const i=ke(r).withIndex(t._queryParams.getIndex()),o=Cu(e.serverSyncTree_,t._path,i);return DI(e.eventQueue_,t._path,o),Promise.resolve(i)},r=>(ia(e,"get for query "+Ke(t)+" failed: "+r),Promise.reject(new Error(r))))}((e=Nt(e))._repo,e).then(t=>new po(t,new Pn(e._repo,e._path),e._queryParams.getIndex()))}class bf{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,n){const r=n._queryParams.getIndex();return new QF("value",this,new po(t.snapshotNode,new Pn(n._repo,n._path),r))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new XF(this,t,n):null}matches(t){return t instanceof bf&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Df{constructor(t,n){this.eventType=t,this.callbackContext=n}respondsTo(t){let n="children_added"===t?"child_added":t;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(t,n){return this.callbackContext.hasCancelCallback?new XF(this,t,n):null}createEvent(t,n){I(null!=t.childName,"Child events should have a childName.");const r=go(new Pn(n._repo,n._path),t.childName),i=n._queryParams.getIndex();return new QF(t.type,this,new po(t.snapshotNode,r,i),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof Df&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function eL(e,t,n,r){return function Su(e,t,n,r,i){let o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){const c=n,u=(l,d)=>{AI(e._repo,e,a),c(l,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const s=new ZF(n,o||void 0),a="value"===t?new bf(s):new Df(t,s);return function Sre(e,t,n){let r;r=".info"===Q(t._path)?MF(e.infoSyncTree_,t,n):MF(e.serverSyncTree_,t,n),DI(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>AI(e._repo,e,a)}(e,"value",t,n,r)}(function Une(e){I(!uf,"__referenceConstructor has already been defined"),uf=e})(Pn),function zne(e){I(!df,"__referenceConstructor has already been defined"),df=e}(Pn);const PI={};function Yre(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||tr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),tt("Using default host for project ",e.options.projectId),o=`${e.options.projectId}-default-rtdb.firebaseio.com`);let c,u,s=kI(o,i),a=s.repoInfo;typeof process<"u"&&process.env&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=kI(o,i),a=s.repoInfo):c=!s.repoInfo.secure;const l=i&&c?new cu(cu.OWNER):new Zee(e.name,e.options,t);(function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!_f(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),LF(e)}(n))throw new Error(Fs(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",s),X(s.path)||tr("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function Xre(e,t,n,r){let i=PI[t.name];i||(i={},PI[t.name]=i);let o=i[e.toURLString()];return o&&tr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new yre(e,false,n,r),i[e.toURLString()]=o,o}(a,e,l,new Xee(e.name,n));return new Jre(d,e)}class Jre{constructor(t,n){this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function vre(e,t,n){if(e.stats_=xw(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Zh(e.repoInfo_,(r,i,o,s)=>{HF(e,r,i,o,s)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>zF(e,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ke(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new co(e.repoInfo_,t,(r,i,o,s)=>{HF(e,r,i,o,s)},r=>{zF(e,r)},r=>{!function Cre(e,t){nt(t,(n,r)=>{TI(e,n,r)})}(e,r)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(r=>{e.server_.refreshAuthToken(r)}),e.appCheckProvider_.addTokenChangeListener(r=>{e.server_.refreshAppCheckToken(r.token)}),e.statsReporter_=function tte(e,t){const n=e.toString();return kw[n]||(kw[n]=t()),kw[n]}(e.repoInfo_,()=>new rne(e.stats_,e.server_)),e.infoData_=new Zte,e.infoSyncTree_=new AF({startListening:(r,i,o,s)=>{let a=[];const c=e.infoData_.getNode(r._path);return c.isEmpty()||(a=Cu(e.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),TI(e,"connected",!1),e.serverSyncTree_=new AF({startListening:(r,i,o,s)=>(e.server_.listen(r,o,i,(a,c)=>{const u=s(a,c);vn(e.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{e.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pn(this._repo,oe())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Qre(e,t){const n=PI[t];(!n||n[e.key]!==e)&&tr(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function WF(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&tr("Cannot call "+t+" on a deleted database.")}}function eie(e=by(),t){return Vs(e,"database").getImmediate({identifier:t})}co.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},co.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function tie(e){(function jee(e){bw=e})(Us),kt(new yt("database",(t,{instanceIdentifier:n})=>Yre(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),Fe(r1,"0.13.0",e),Fe(r1,"0.13.0","esm2017")}();class Tf{constructor(t){return t}}const oL="database",OI=new S("angularfire2.database-instances");function sie(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Tf(r)}}const aie={provide:class iie{constructor(){return cC(oL)}},deps:[[new Tt,OI]]},cie={provide:Tf,useFactory:function oie(e,t){const n=aC(oL,e,t);return n&&new Tf(n)},deps:[[new Tt,OI],Hs]};let uie=(()=>{class e{constructor(){Fe("angularfire",mh.full,"rtdb")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Lt({type:e}),e.\u0275inj=Ct({providers:[cie,aie]}),e})();function lie(e,...t){return{ngModule:uie,providers:[{provide:OI,useFactory:sie(e),multi:!0,deps:[ue,pt,uC,lC,[new Tt,t1],[new Tt,SC],...t]}]}}const die=mn(go,!0),hie=mn(Lre,!0),fie=mn(eie,!0),pie=mn(eL,!0),gie=mn(Fre,!0),Sf=mn(JF,!0),sL=mn(xI,!0);let Af=(()=>{class e{constructor(n){this.db=n}writeData(n,r){const i=Sf(this.db,n);return sL(i,r)}pushData(n,r){var i=this;return g(function*(){const o=gie(Sf(i.db,n));yield sL(o,r)})()}readData(n){var r=this;return g(function*(){const i=Sf(r.db),o=yield hie(die(i,n));return o.exists()?o.val():null})()}listenToData(n){return new Se(r=>{const i=Sf(this.db,n),o=pie(i,s=>{r.next(s.exists()?s.val():null)},s=>{r.error(s)});return()=>o()})}static{this.\u0275fac=function(r){return new(r||e)(x(Tf))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),mie=(()=>{class e{constructor(n){this.dbService=n,this.basePath="dos/game"}saveGame(n,r){var i=this;return g(function*(){const o=r??i.generateId();yield i.dbService.writeData(`${i.basePath}/${o}`,{...n,id:o})})()}savePhase(n){var r=this;return g(function*(){yield r.dbService.writeData(`${r.basePath}/phase`,n)})()}getGame(n){var r=this;return g(function*(){return yield r.dbService.readData(`${r.basePath}/${n}`)})()}getAllGames(){var n=this;return g(function*(){return yield n.dbService.readData(n.basePath)})()}listenGames(){return this.dbService.listenToData(this.basePath)}deleteGame(n){var r=this;return g(function*(){yield r.dbService.writeData(`${r.basePath}/${n}`,null)})()}generateId(){return Date.now().toString(36)+Math.random().toString(36).substring(2,9)}static{this.\u0275fac=function(r){return new(r||e)(x(Af))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),_ie=(()=>{class e{constructor(n){this.dbService=n,this.basePath="dos/game/people"}savePerson(n,r){var i=this;return g(function*(){const o=r??i.generateId();yield i.dbService.writeData(`${i.basePath}/${o}`,{...n,id:o})})()}getPerson(n){var r=this;return g(function*(){return yield r.dbService.readData(`${r.basePath}/${n}`)})()}getAllPeople(){var n=this;return g(function*(){return yield n.dbService.readData(n.basePath)})()}listenPeople(){return this.dbService.listenToData(this.basePath)}deletePerson(n){var r=this;return g(function*(){yield r.dbService.writeData(`${r.basePath}/${n}`,null)})()}generateId(){return Date.now().toString(36)+Math.random().toString(36).substring(2,9)}static{this.\u0275fac=function(r){return new(r||e)(x(Af))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),yie=(()=>{class e{constructor(n){this.dbService=n,this.basePath="dos/deck"}addCard(n){var r=this;return g(function*(){yield r.dbService.pushData(r.basePath,n)})()}addDeck(n){var r=this;return g(function*(){yield r.dbService.writeData(r.basePath,{deck:n})})()}getAllCards(){var n=this;return g(function*(){return yield n.dbService.readData(n.basePath)})()}listenCards(){return this.dbService.listenToData(this.basePath)}deleteCard(n){var r=this;return g(function*(){yield r.dbService.writeData(`${r.basePath}/${n}`,null)})()}static{this.\u0275fac=function(r){return new(r||e)(x(Af))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})(),vie=(()=>{class e{constructor(n){this.dbService=n,this.basePath="dos/users"}getUser(n){var r=this;return g(function*(){return yield r.dbService.readData(`${r.basePath}/${n}`)})()}listenUser(n){return this.dbService.listenToData(`${this.basePath}/${n}`)}saveUser(n,r){var i=this;return g(function*(){yield i.dbService.writeData(`${i.basePath}/${n}`,r)})()}deleteUser(n){var r=this;return g(function*(){yield r.dbService.writeData(`${r.basePath}/${n}`,null)})()}static{this.\u0275fac=function(r){return new(r||e)(x(Af))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function Cie(e,t){if(1&e){const n=ls();T(0,"div")(1,"input",4),Ue("ngModelChange",function(i){return Si(n),Ai(me().nickname=i)}),b(),T(2,"button",5),Ue("click",function(){return Si(n),Ai(me().addPeople())}),ie(3,"Enter"),b()()}if(2&e){const n=me();A(1),R("ngModel",n.nickname)}}function Eie(e,t){if(1&e){const n=ls();T(0,"li",12),Ue("click",function(){const o=Si(n).$implicit;return Ai(me(2).selectPlayer(o))}),ie(1),b()}if(2&e){const n=t.$implicit;A(1),hs(" ",n.name," ")}}function wie(e,t){if(1&e){const n=ls();T(0,"div")(1,"div",6)(2,"div",7)(3,"h5",8),ie(4,"Lista Player"),b(),T(5,"ul",9),O(6,Eie,2,1,"li",10),b(),T(7,"button",11),Ue("click",function(){return Si(n),Ai(me().startGame())}),ie(8,"Start game"),b()()()()}if(2&e){const n=me();A(6),R("ngForOf",n.people)}}function Iie(e,t){1&e&&(T(0,"div"),K(1,"i",31),b())}function bie(e,t){1&e&&(T(0,"div"),K(1,"i",32),b())}function Die(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"2 "),b())}function Tie(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"4 "),b())}function Sie(e,t){1&e&&(T(0,"div"),K(1,"div",34),b())}function Aie(e,t){if(1&e&&(T(0,"span",30),O(1,Iie,2,0,"div",2),O(2,bie,2,0,"div",2),O(3,Die,3,0,"div",2),O(4,Tie,3,0,"div",2),O(5,Sie,2,0,"div",2),b()),2&e){const n=me().$implicit;A(1),R("ngIf","reverse"==n.type),A(1),R("ngIf","skip"==n.type),A(1),R("ngIf","draw-two"==n.type),A(1),R("ngIf","wild-draw-four"==n.type),A(1),R("ngIf","wild"==n.type)}}function Mie(e,t){if(1&e&&(T(0,"span",30),ie(1),b()),2&e){const n=me().$implicit;A(1),Zr(n.value)}}function Rie(e,t){1&e&&(T(0,"div"),K(1,"i",31),b())}function Nie(e,t){1&e&&(T(0,"div"),K(1,"i",32),b())}function kie(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"2 "),b())}function xie(e,t){1&e&&(T(0,"div"),K(1,"div",36),b())}function Pie(e,t){1&e&&(T(0,"div"),K(1,"div",37),b())}function Oie(e,t){if(1&e&&(T(0,"h1",35),O(1,Rie,2,0,"div",2),O(2,Nie,2,0,"div",2),O(3,kie,3,0,"div",2),O(4,xie,2,0,"div",2),O(5,Pie,2,0,"div",2),b()),2&e){const n=me().$implicit;A(1),R("ngIf","reverse"==n.type),A(1),R("ngIf","skip"==n.type),A(1),R("ngIf","draw-two"==n.type),A(1),R("ngIf","wild-draw-four"==n.type),A(1),R("ngIf","wild"==n.type)}}function Fie(e,t){if(1&e&&(T(0,"h1",35),ie(1),b()),2&e){const n=me().$implicit;A(1),Zr(n.value)}}function Lie(e,t){1&e&&(T(0,"div"),K(1,"i",31),b())}function Vie(e,t){1&e&&(T(0,"div"),K(1,"i",32),b())}function Uie(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"2 "),b())}function jie(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"4 "),b())}function $ie(e,t){1&e&&(T(0,"div"),K(1,"div",34),b())}function Bie(e,t){if(1&e&&(T(0,"span",30),O(1,Lie,2,0,"div",2),O(2,Vie,2,0,"div",2),O(3,Uie,3,0,"div",2),O(4,jie,3,0,"div",2),O(5,$ie,2,0,"div",2),b()),2&e){const n=me().$implicit;A(1),R("ngIf","reverse"==n.type),A(1),R("ngIf","skip"==n.type),A(1),R("ngIf","draw-two"==n.type),A(1),R("ngIf","wild-draw-four"==n.type),A(1),R("ngIf","wild"==n.type)}}function Hie(e,t){if(1&e&&(T(0,"span",30),ie(1),b()),2&e){const n=me().$implicit;A(1),Zr(n.value)}}const aL=function(e,t,n,r,i){return{"deck-red":e,"deck-green":t,"deck-blue":n,"deck-yellow":r,"deck-wild":i}},zie=function(e){return{"margin-top":e}};function Gie(e,t){if(1&e){const n=ls();T(0,"div",23),Ue("click",function(){const o=Si(n).index;return Ai(me(2).moveCardToCenterDeck(o))}),T(1,"div",24)(2,"div",25),O(3,Aie,6,5,"span",26),O(4,Mie,2,1,"span",26),b(),T(5,"div",27),O(6,Oie,6,5,"h1",28),O(7,Fie,2,1,"h1",28),b(),T(8,"div",29),O(9,Bie,6,5,"span",26),O(10,Hie,2,1,"span",26),b()()()}if(2&e){const n=t.$implicit,r=t.index,i=me(2);let o;R("ngClass",cm(8,aL,"Rosso"===n.color,"Verde"===n.color,"Blu"===n.color,"Giallo"===n.color,!n.color))("ngStyle",gs(14,zie,i.calculateMargin(r,null==(o=i.gameForm.get("userDeck"))?null:o.value.length))),A(3),R("ngIf",n.type),A(1),R("ngIf",!n.type),A(2),R("ngIf",n.type),A(1),R("ngIf",!n.type),A(2),R("ngIf",n.type),A(1),R("ngIf",!n.type)}}function Wie(e,t){1&e&&(T(0,"div"),K(1,"i",31),b())}function qie(e,t){1&e&&(T(0,"div"),K(1,"i",32),b())}function Kie(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"2 "),b())}function Yie(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"4 "),b())}function Qie(e,t){1&e&&(T(0,"div"),K(1,"div",34),b())}function Xie(e,t){if(1&e&&(T(0,"span",30),O(1,Wie,2,0,"div",2),O(2,qie,2,0,"div",2),O(3,Kie,3,0,"div",2),O(4,Yie,3,0,"div",2),O(5,Qie,2,0,"div",2),b()),2&e){const n=me().$implicit;A(1),R("ngIf","reverse"==n.type),A(1),R("ngIf","skip"==n.type),A(1),R("ngIf","draw-two"==n.type),A(1),R("ngIf","wild-draw-four"==n.type),A(1),R("ngIf","wild"==n.type)}}function Zie(e,t){if(1&e&&(T(0,"span",30),ie(1),b()),2&e){const n=me().$implicit;A(1),Zr(n.value)}}function Jie(e,t){1&e&&(T(0,"div"),K(1,"i",31),b())}function eoe(e,t){1&e&&(T(0,"div"),K(1,"i",32),b())}function toe(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"2 "),b())}function noe(e,t){1&e&&(T(0,"div"),K(1,"div",36),b())}function roe(e,t){1&e&&(T(0,"div"),K(1,"div",37),b())}function ioe(e,t){if(1&e&&(T(0,"h1",35),O(1,Jie,2,0,"div",2),O(2,eoe,2,0,"div",2),O(3,toe,3,0,"div",2),O(4,noe,2,0,"div",2),O(5,roe,2,0,"div",2),b()),2&e){const n=me().$implicit;A(1),R("ngIf","reverse"==n.type),A(1),R("ngIf","skip"==n.type),A(1),R("ngIf","draw-two"==n.type),A(1),R("ngIf","wild-draw-four"==n.type),A(1),R("ngIf","wild"==n.type)}}function ooe(e,t){if(1&e&&(T(0,"h1",35),ie(1),b()),2&e){const n=me().$implicit;A(1),Zr(n.value)}}function soe(e,t){1&e&&(T(0,"div"),K(1,"i",31),b())}function aoe(e,t){1&e&&(T(0,"div"),K(1,"i",32),b())}function coe(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"2 "),b())}function uoe(e,t){1&e&&(T(0,"div"),K(1,"i",33),ie(2,"4 "),b())}function loe(e,t){1&e&&(T(0,"div"),K(1,"div",34),b())}function doe(e,t){if(1&e&&(T(0,"span",30),O(1,soe,2,0,"div",2),O(2,aoe,2,0,"div",2),O(3,coe,3,0,"div",2),O(4,uoe,3,0,"div",2),O(5,loe,2,0,"div",2),b()),2&e){const n=me().$implicit;A(1),R("ngIf","reverse"==n.type),A(1),R("ngIf","skip"==n.type),A(1),R("ngIf","draw-two"==n.type),A(1),R("ngIf","wild-draw-four"==n.type),A(1),R("ngIf","wild"==n.type)}}function hoe(e,t){if(1&e&&(T(0,"span",30),ie(1),b()),2&e){const n=me().$implicit;A(1),Zr(n.value)}}const cL=function(e){return{"margin-left":e}};function foe(e,t){if(1&e){const n=ls();T(0,"div",23),Ue("click",function(){const o=Si(n).index;return Ai(me(2).moveCardToCenterDeck(o))}),T(1,"div",24)(2,"div",25),O(3,Xie,6,5,"span",26),O(4,Zie,2,1,"span",26),b(),T(5,"div",27),O(6,ioe,6,5,"h1",28),O(7,ooe,2,1,"h1",28),b(),T(8,"div",29),O(9,doe,6,5,"span",26),O(10,hoe,2,1,"span",26),b()()()}if(2&e){const n=t.$implicit,r=t.index,i=me(2);let o;R("ngClass",cm(8,aL,"Rosso"===n.color,"Verde"===n.color,"Blu"===n.color,"Giallo"===n.color,!n.color))("ngStyle",gs(14,cL,i.calculateMargin(r,null==(o=i.gameForm.get("user"))||null==o.value||null==o.value.deck?null:o.value.deck.length))),A(3),R("ngIf",n.type),A(1),R("ngIf",!n.type),A(2),R("ngIf",n.type),A(1),R("ngIf",!n.type),A(2),R("ngIf",n.type),A(1),R("ngIf",!n.type)}}function poe(e,t){if(1&e&&(T(0,"div",13)(1,"div",14)(2,"div",15)(3,"div",16),K(4,"div",7),b()(),T(5,"div",17)(6,"div",18),O(7,Gie,11,16,"div",19),b()(),K(8,"div",20),b(),T(9,"div",21)(10,"div",22),O(11,foe,11,16,"div",19),b()()()),2&e){const n=me();let r,i,o;A(7),R("ngForOf",null==(r=n.gameForm.get("centerDeck"))?null:r.value),A(3),R("ngStyle",gs(3,cL,n.calculateMarginForDeckContainer(null==(i=n.gameForm.get("user"))||null==i.value||null==i.value.deck?null:i.value.deck.length))),A(1),R("ngForOf",null==(o=n.gameForm.get("user"))||null==o.value?null:o.value.deck)}}const goe=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"login",component:kee},{path:"home",component:Fee,canActivate:[Iw]},{path:"games",component:Uee,canActivate:[Iw]},{path:"dos",component:(()=>{class e{constructor(n,r,i,o,s,a){this.fb=n,this.dosGameService=r,this.dosPeopleService=i,this.dosDeckService=o,this.authService=s,this.userService=a,this.gamePhase="",this.deck=null,this.nickname="",this.people=[],this.deckCreated=!1}ngOnInit(){var n=this;this.gameForm=this.fb.group({deck:[""],centerDeck:[""],people:[""],user:[""],phase:[""]}),this.gameForm.valueChanges.subscribe(r=>{console.log(r,this.gameForm.value)}),this.dosPeopleService.listenPeople().subscribe(function(){var r=g(function*(i){i&&n.gameForm.patchValue({people:i})});return function(i){return r.apply(this,arguments)}}()),this.dosGameService.listenGames().subscribe(function(){var r=g(function*(i){i&&i.phase&&n.gameForm.patchValue({phase:i.phase})});return function(i){return r.apply(this,arguments)}}()),this.dosDeckService.listenCards().subscribe(function(){var r=g(function*(i){if(i){let o=i;if(o.deck&&Array.isArray(o.deck))o=[...o.deck];else{if(!Array.isArray(o))return console.warn("Deck non in formato array, impossibile mischiare."),void n.gameForm.patchValue({deck:o});o=[...o]}for(let s=o.length-1;s>0;s--){const a=Math.floor(Math.random()*(s+1));[o[s],o[a]]=[o[a],o[s]]}n.gameForm.patchValue({deck:o}),n.deckCreated=!0}if(i||n.deckCreated){console.log("Deck gi\xe0 presente");const o=n.gameForm.get("user")?.value;n.gameForm.get("deck"),(!o?.deck||0===o.deck.length)&&(console.log("Assegno 7 carte iniziali all\u2019utente"),n.assignCardsToUser(7))}else console.log("Nessun deck presente, creo un mazzo di 40 carte"),yield n.createUnoDeck()});return function(i){return r.apply(this,arguments)}}())}calculateMarginForDeckContainer(n){return!n||n<=1?"0px":30*-Math.floor(n/2)+"px"}moveCardToCenterDeck(n){const r=(this.gameForm.get("user")?.value).deck||[],i=this.gameForm.get("centerDeck")?.value||[],o=r[n];r.splice(n,1),i.push(o),this.gameForm.patchValue({user:{deck:r},centerDeck:i})}calculateMargin(n,r){if(!r)return"0px";const i=Math.floor(r/2);return n<i?`-${30*(i-n)}px`:n>i?30*(n-i)+"px":"0px"}assignCardsToUser(n=7){try{const r=this.gameForm.get("deck"),i=this.gameForm.get("user");if(!r)return console.warn('FormControl "deck" non trovato.'),!1;const o=r.value,s=i?.value??{};if(!o||"object"==typeof o&&0===Object.keys(o).length)return console.warn("Deck vuoto o non definito."),!1;if(Array.isArray(o)){const a=[...o];if(a.length<n)return console.warn("Non ci sono abbastanza carte nel deck."),!1;const c=a.slice(0,n),u=a.slice(n),l={...s,deck:c};return this.gameForm.patchValue({deck:u,user:l}),!0}if(o&&Array.isArray(o.deck)){const a=[...o.deck];if(a.length<n)return console.warn("Non ci sono abbastanza carte nel deck (wrapped)."),!1;const c=a.slice(0,n),u=a.slice(n),l={...o,deck:u},d={...s,deck:c};return this.gameForm.patchValue({deck:l,user:d}),!0}if("object"==typeof o){const a=Object.entries(o);if(a.length<n)return console.warn("Non ci sono abbastanza carte nel deck (map)."),!1;const c=a.slice(0,n),u=a.slice(n),l=c.map(([f,p])=>({...p,id:p.id??f})),d=Object.fromEntries(u),h={...s,deck:l};return this.gameForm.patchValue({deck:d,user:h}),!0}return console.warn("Formato deck non riconosciuto."),!1}catch(r){return console.error("Errore in assignCardsToUser:",r),!1}}createDeck(){var n=this;return g(function*(){const r=["Cuori","Quadri","Fiori","Picche"],i=[1,2,3,4,5,6,7,8,9,10],o=[];for(const s of r)for(const a of i)o.push({name:`${a} di ${s}`,value:a});yield n.dosDeckService.addDeck(o),console.log("Mazzo creato!")})()}createUnoDeck(){var n=this;return g(function*(){const r=["Rosso","Verde","Blu","Giallo"],i=[];for(const o of r){i.push({name:`0 ${o}`,value:0,color:o});for(let s=1;s<=9;s++)i.push({name:`${s} ${o}`,value:s,color:o}),i.push({name:`${s} ${o}`,value:s,color:o});for(let s=0;s<2;s++)i.push({name:`+2 ${o}`,type:"draw-two",color:o}),i.push({name:`Reverse ${o}`,type:"reverse",color:o}),i.push({name:`Skip ${o}`,type:"skip",color:o})}for(let o=0;o<4;o++)i.push({name:"Wild",type:"wild"}),i.push({name:"Wild +4",type:"wild-draw-four"});yield n.dosDeckService.addDeck(i),console.log(`Mazzo UNO creato con ${i.length} carte!`)})()}addPeople(){this.people.push(this.nickname)}checkGamePhase(n){var r=this;return g(function*(){const i=(yield r.authService.getCurrentUser()).uid;"start"===(r.currentUser=yield r.userService.getUser(i),n)?r.gamePhase="start":console.log(n)})()}selectPlayer(n){console.log(n)}startGame(){var n=this;return g(function*(){yield n.dosGameService.savePhase("start")})()}static{this.\u0275fac=function(r){return new(r||e)(E(mx),E(mie),E(_ie),E(yie),E($h),E(vie))}}static{this.\u0275cmp=Br({type:e,selectors:[["app-dos"]],decls:5,vars:3,consts:[[1,"container-fluid"],[1,"container","pt-5",2,"max-width","500px"],[4,"ngIf"],["class","container",4,"ngIf"],["type","text","placeholder","Nickname",1,"form-control",3,"ngModel","ngModelChange"],[1,"mt-5","btn","btn-primary",3,"click"],[1,"card","player-list"],[1,"card-body"],[1,"card-title"],[1,"list-group","list-group-flush"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","w-100","mt-2",3,"click"],[1,"list-group-item",3,"click"],[1,"container"],[1,"d-flex","justify-content-between","card-wrapper"],[1,"left-wrapper"],[1,"card","dos-deck-card","deck-card"],[1,"center-wrapper"],[1,"deck-container",2,"margin-left","-45px"],["class","card deck-card",3,"ngClass","ngStyle","click",4,"ngFor","ngForOf"],[1,"right-wrapper"],[1,"d-flex","justify-content-center","card-wrapper"],[1,"deck-container",2,"position","relative","height","135px",3,"ngStyle"],[1,"card","deck-card",3,"ngClass","ngStyle","click"],[1,"card-body","w-100","d-flex","flex-column","justify-content-between"],[1,"d-flex","justify-content-start"],["class","small-value",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center","flex-grow-1"],["class","center-value m-0",4,"ngIf"],[1,"d-flex","justify-content-end"],[1,"small-value"],[1,"bi","bi-arrow-repeat"],[1,"bi","bi-x-circle"],[1,"bi","bi-plus-lg"],[1,"change-color-icon"],[1,"center-value","m-0"],[1,"plus-four-icon","center-icon"],[1,"change-color-icon","center-icon"]],template:function(r,i){if(1&r&&(T(0,"div",0)(1,"div",1),O(2,Cie,4,1,"div",2),O(3,wie,9,1,"div",2),O(4,poe,12,5,"div",3),b()()),2&r){let o,s,a;A(2),R("ngIf","player-input"===(null==(o=i.gameForm.get("phase"))?null:o.value)),A(1),R("ngIf","player-selection"===(null==(s=i.gameForm.get("phase"))?null:s.value)),A(1),R("ngIf","start"===(null==(a=i.gameForm.get("phase"))?null:a.value))}},dependencies:[bR,Qm,Xm,MR,Sc,$_,X_],styles:[".player-list[_ngcontent-%COMP%], .player-list[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%], .list-group-item[_ngcontent-%COMP%]{background:transparent}.list-group-item[_ngcontent-%COMP%]{cursor:pointer;transition:.2s}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#ffffff80}.card-wrapper[_ngcontent-%COMP%]{min-height:150px}.left-wrapper[_ngcontent-%COMP%], .center-wrapper[_ngcontent-%COMP%], .right-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;min-width:150px}.deck-card[_ngcontent-%COMP%]{min-width:100px;width:100px;height:135px;border-radius:10px;box-shadow:0 4px 8px #0003;color:#fff;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:18px;text-align:center;margin:5px;transition:transform .2s;position:absolute;cursor:pointer}.deck-card[_ngcontent-%COMP%]:hover{transform:translateY(-20px)}.card-body[_ngcontent-%COMP%]{padding:10px}.change-color-icon[_ngcontent-%COMP%], .plus-four-icon[_ngcontent-%COMP%]{background-position:center;background-size:contain;background-repeat:no-repeat;width:20px;height:20px}.plus-four-icon[_ngcontent-%COMP%]{background-image:url(plus-four-icon.1f025be8b51ad587.svg)}.deck-red[_ngcontent-%COMP%]{background-color:#e74c3c}.deck-green[_ngcontent-%COMP%]{background-color:#27ae60}.deck-blue[_ngcontent-%COMP%]{background-color:#3498db}.deck-yellow[_ngcontent-%COMP%]{background-color:#f1c40f;color:#000}.deck-wild[_ngcontent-%COMP%]{background:linear-gradient(135deg,#000000,#333333,#555555,#000000);background-size:400% 400%;animation:_ngcontent-%COMP%_wildGradientBlack 5s ease infinite;color:#fff}.center-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700}.small-value[_ngcontent-%COMP%]{font-size:12px;font-weight:700}.center-icon[_ngcontent-%COMP%]{transform:scale(2.5)}@keyframes _ngcontent-%COMP%_wildGradientBlack{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.dos-deck-card[_ngcontent-%COMP%]{background-color:transparent}.dos-deck-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{background-image:url(dos-deck-card.d36501d1b583e5a5.svg);background-position:center;background-size:contain;background-repeat:no-repeat;width:100%;height:100%}"]})}}return e})(),canActivate:[Iw]},{path:"**",redirectTo:"home"}];let moe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e})}static{this.\u0275inj=Ct({imports:[ck.forRoot(goe),ck]})}}return e})(),_oe=(()=>{class e{constructor(){this.title="game"}static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275cmp=Br({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&K(0,"router-outlet")},dependencies:[M_]})}}return e})();const uL_firebase={apiKey:"AIzaSyAyPpwYB1X-e5VnUkUgJ2orPcDr9ybDHEU",authDomain:"draggable-9f92b.firebaseapp.com",databaseURL:"https://draggable-9f92b.firebaseio.com",projectId:"draggable-9f92b",storageBucket:"draggable-9f92b.appspot.com",messagingSenderId:"1010593277055",appId:"1:1010593277055:web:1b729dc7368b8f6f"},vL=new S("");let zoe=(()=>{class e{constructor(n){this.router=n}intercept(n,r){const i="https://thebabr27.github.io/expense/cardgame";return n.url.startsWith(i)?(console.log(`Intercepted request to ${i}, redirecting...`),this.router.navigate(["/"]),new Se):r.handle(n)}static{this.\u0275fac=function(r){return new(r||e)(x(mt))}}static{this.\u0275prov=P({token:e,factory:e.\u0275fac})}}return e})(),Goe=(()=>{class e{static{this.\u0275fac=function(r){return new(r||e)}}static{this.\u0275mod=Lt({type:e,bootstrap:[_oe]})}static{this.\u0275inj=Ct({providers:[{provide:vL,useClass:zoe,multi:!0}],imports:[NR,z4,moe,w7,I7,BQ(()=>HQ(uL_firebase)),Cee(()=>wee()),lie(()=>fie())]})}}return e})();B4().bootstrapModule(Goe).catch(e=>console.error(e))}},pe=>{pe(pe.s=421)}]);